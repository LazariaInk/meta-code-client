<html>

<head>
    <meta content="text/html; charset=UTF-8" http-equiv="content-type">
    <link rel="stylesheet" type="text/css" href="/lessons/styles.css">
</head>

<body class="c20 doc-content">
    <h1 class="c15 c4 c17">Modulul dataclass. Clasele de date.</h1>
    <p class="c12"><span class="c4 c1"></span></p>
    <p class="c15"><span class="c1">Modulul </span><span class="c19">dataclasses </span><span class="c1">ofer&#259;
            decoratorul</span><span class="c19">&nbsp;@dataclass</span><span class="c1">, care permite crearea claselor
            de date (</span><span class="c19">data classes</span><span class="c4 c1">), reduc&acirc;nd astfel
            semnificativ codul boilerplate al claselor. De regul&#259;, aceste clase sunt destinate stoc&#259;rii unor
            st&#259;ri sau date &#537;i nu necesit&#259; comportamente complexe sub forma func&#539;iilor.</span></p>
    <p class="c12"><span class="c4 c1"></span></p>
    <p class="c15"><span class="c4 c1">Exemplu simplu:</span></p>
    <p class="c12"><span class="c4 c1"></span></p>
    <table class="c5">
        <tr class="c10">
            <td class="c11" colspan="1" rowspan="1">
                <p class="c2"><span class="c0">class</span><span class="c3">&nbsp;</span><span
                        class="c7">Person</span><span class="c3">:<br> &nbsp; &nbsp;</span><span
                        class="c0">def</span><span class="c3">&nbsp;</span><span class="c7">__init__</span><span
                        class="c3">(self, name, age):<br> &nbsp; &nbsp; &nbsp; &nbsp;self.name = name<br> &nbsp; &nbsp;
                        &nbsp; &nbsp;self.age = age<br><br>tom = Person(</span><span
                        class="c8">&quot;Tom&quot;</span><span class="c3">, </span><span class="c16">38</span><span
                        class="c3">)<br>print(</span><span class="c8">f&quot;Name: {tom.name} &nbsp;Age:
                        {tom.age}&quot;</span><span class="c3">) &nbsp;</span><span class="c14"># Name: Tom &nbsp;Age:
                        38</span></p>
            </td>
        </tr>
    </table>
    <p class="c12"><span class="c4 c1"></span></p>
    <p class="c15"><span class="c4 c1">Aici am definit clasa Person, care are dou&#259; atribute &icirc;n constructor:
            name &#537;i age. Apoi am creat un obiect al acestei clase &#537;i am afi&#537;at valorile atributelor
            sale.</span></p>
    <p class="c12"><span class="c4 c1"></span></p>
    <p class="c15"><span class="c4 c1">Acum s&#259; modific&#259;m aceast&#259; program&#259;, transform&acirc;nd clasa
            Person &icirc;ntr-o clas&#259; de date:</span></p>
    <p class="c12"><span class="c4 c1"></span></p>
    <table class="c5">
        <tr class="c10">
            <td class="c11" colspan="1" rowspan="1">
                <p class="c2"><span class="c0">from</span><span class="c3">&nbsp;dataclasses </span><span
                        class="c0">import</span><span class="c3">&nbsp;dataclass<br><br></span><span
                        class="c13">@dataclass</span><span class="c3"><br></span><span class="c0">class</span><span
                        class="c3">&nbsp;</span><span class="c7">Person</span><span class="c3">:<br> &nbsp; &nbsp;name:
                        str<br> &nbsp; &nbsp;age: int<br><br>tom = Person(</span><span
                        class="c8">&quot;Tom&quot;</span><span class="c3">, </span><span class="c16">38</span><span
                        class="c3">)<br>print(</span><span class="c8">f&quot;Name: {tom.name} &nbsp;Age:
                        {tom.age}&quot;</span><span class="c3">) &nbsp;</span><span class="c14"># Name: Tom &nbsp;Age:
                        38</span></p>
            </td>
        </tr>
    </table>
    <p class="c12"><span class="c4 c1"></span></p>
    <p class="c15"><span class="c1">Pentru a crea o clas&#259; de date, import&#259;m decoratorul @dataclass din modulul
            dataclasses &#537;i &icirc;l aplic&#259;m clasei Person. &Icirc;n acest caz, nu mai trebuie s&#259;
            specific&#259;m explicit constructorul </span><span class="c1 c9">__init__</span><span class="c4 c1">. Doar
            indic&#259;m atributele, iar Python va genera automat constructorul, permi&#539;&acirc;ndu-ne s&#259;
            transmitem valori pentru atributele obiectului.</span></p>
    <p class="c12"><span class="c4 c1"></span></p>
    <p class="c15"><span class="c1">Astfel, am simplificat definirea clasei. Dar func&#539;ionalitatea decoratorului
            @dataclass nu se limiteaz&#259; la generarea metodei</span><span class="c1 c9">&nbsp;__init__</span><span
            class="c4 c1">. &Icirc;n realitate, clasa de date:</span></p>
    <p class="c12"><span class="c4 c1"></span></p>
    <table class="c5">
        <tr class="c10">
            <td class="c11" colspan="1" rowspan="1">
                <p class="c2"><span class="c13">@dataclass</span><span class="c3"><br></span><span
                        class="c0">class</span><span class="c3">&nbsp;</span><span class="c7">Person</span><span
                        class="c3">:<br> &nbsp; &nbsp;name: str<br> &nbsp; &nbsp;age: int</span></p>
            </td>
        </tr>
    </table>
    <p class="c12"><span class="c4 c1"></span></p>
    <p class="c15"><span class="c4 c1">este echivalent&#259; cu urm&#259;toarea:</span></p>
    <p class="c12"><span class="c4 c1"></span></p>
    <table class="c5">
        <tr class="c10">
            <td class="c11" colspan="1" rowspan="1">
                <p class="c2"><span class="c0">class</span><span class="c3">&nbsp;</span><span
                        class="c7">Person</span><span class="c3">:<br> &nbsp; &nbsp;</span><span
                        class="c0">def</span><span class="c3">&nbsp;</span><span class="c7">__init__</span><span
                        class="c3">(self, name, age):<br> &nbsp; &nbsp; &nbsp; &nbsp;self.name = name<br> &nbsp; &nbsp;
                        &nbsp; &nbsp;self.age = age<br><br> &nbsp; &nbsp;</span><span class="c0">def</span><span
                        class="c3">&nbsp;</span><span class="c7">__repr__</span><span class="c3">(self):<br> &nbsp;
                        &nbsp; &nbsp; &nbsp;</span><span class="c0">return</span><span class="c3">&nbsp;</span><span
                        class="c8">f&quot;Person(name={self.name!r}, age={self.age!r})&quot;</span><span
                        class="c3"><br><br> &nbsp; &nbsp;</span><span class="c0">def</span><span
                        class="c3">&nbsp;</span><span class="c7">__eq__</span><span class="c3">(self, other):<br> &nbsp;
                        &nbsp; &nbsp; &nbsp;</span><span class="c0">if</span><span class="c3">&nbsp;other.__class__
                    </span><span class="c0">is</span><span class="c3">&nbsp;self.__class__:<br> &nbsp; &nbsp; &nbsp;
                        &nbsp; &nbsp; &nbsp;</span><span class="c0">return</span><span class="c3">&nbsp;(self.name,
                        self.age) == (other.name, other.age)<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span
                        class="c0">return</span><span class="c3">&nbsp;</span><span class="c7">NotImplemented</span></p>
            </td>
        </tr>
    </table>
    <p class="c12"><span class="c4 c1"></span></p>
    <p class="c15"><span class="c1">Pe l&acirc;ng&#259; func&#539;ia</span><span
            class="c1 c9">&nbsp;__init__</span><span class="c1">, sunt generate automat &#537;i
            func&#539;iile</span><span class="c1 c9">&nbsp;__repr__()</span><span class="c1">&nbsp;pentru a oferi o
            reprezentare textual&#259; &#537;i</span><span class="c1 c9">&nbsp;__eq__()</span><span
            class="c4 c1">&nbsp;pentru a compara dou&#259; obiecte. Exemplu de utilizare a acestor func&#539;ii:</span>
    </p>
    <p class="c12"><span class="c4 c1"></span></p>
    <table class="c5">
        <tr class="c10">
            <td class="c11" colspan="1" rowspan="1">
                <p class="c2"><span class="c0">from</span><span class="c3">&nbsp;dataclasses </span><span
                        class="c0">import</span><span class="c3">&nbsp;dataclass<br><br></span><span
                        class="c13">@dataclass</span><span class="c3"><br></span><span class="c0">class</span><span
                        class="c3">&nbsp;</span><span class="c7">Person</span><span class="c3">:<br> &nbsp; &nbsp;name:
                        str<br> &nbsp; &nbsp;age: int<br><br>tom = Person(</span><span
                        class="c8">&quot;Tom&quot;</span><span class="c3">, </span><span class="c16">38</span><span
                        class="c3">)<br>bob = Person(</span><span class="c8">&quot;Bob&quot;</span><span class="c3">,
                    </span><span class="c16">42</span><span class="c3">)<br>tomas = Person(</span><span
                        class="c8">&quot;Tom&quot;</span><span class="c3">, </span><span class="c16">38</span><span
                        class="c3">)<br><br>print(tom == tomas) &nbsp;</span><span class="c14"># True</span><span
                        class="c3"><br>print(tom == bob) &nbsp; &nbsp;</span><span class="c14"># False</span><span
                        class="c3"><br>print(tom) &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c14">#
                        Person(name=&quot;Tom&quot;, age=38)</span></p>
            </td>
        </tr>
    </table>
    <p class="c12"><span class="c4 c1"></span></p>
    <p class="c15"><span class="c4 c18">Parametrii decoratorului @dataclass.</span></p>
    <p class="c12"><span class="c4 c1"></span></p>
    <p class="c15"><span class="c1">Cu ajutorul parametrilor, decoratorul </span><span class="c1 c9">@dataclass
        </span><span class="c4 c1">poate genera cod suplimentar &#537;i permite personalizarea gener&#259;rii
            codului:</span></p>
    <p class="c12"><span class="c4 c1"></span></p>
    <table class="c5">
        <tr class="c10">
            <td class="c11" colspan="1" rowspan="1">
                <p class="c2"><span class="c0">def</span><span class="c3">&nbsp;</span><span
                        class="c7">dataclass</span><span class="c3">(cls=None, /, *, init=True, repr=True, eq=True,
                        order=False,<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;unsafe_hash=False,
                        frozen=False, match_args=True,<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;
                        &nbsp;kw_only=False, slots=False)</span></p>
            </td>
        </tr>
    </table>
    <p class="c12"><span class="c4 c1"></span></p>
    <p class="c15"><span class="c4 c1">Parametrii principali:</span></p>
    <p class="c12"><span class="c4 c1"></span></p>
    <p class="c15"><span class="c1">- </span><span class="c6">init</span><span class="c1">: dac&#259; este True, se
            genereaz&#259; func&#539;ia </span><span class="c1 c9">__init__()</span><span class="c4 c1">. Implicit este
            True.</span></p>
    <p class="c12"><span class="c4 c1"></span></p>
    <p class="c15"><span class="c1">- </span><span class="c6">repr</span><span class="c1">: dac&#259; este True, se
            genereaz&#259; func&#539;ia</span><span class="c1 c9">&nbsp;__repr__()</span><span class="c4 c1">, care
            returneaz&#259; o reprezentare textual&#259; a obiectului. Implicit este True.</span></p>
    <p class="c12"><span class="c4 c1"></span></p>
    <p class="c15"><span class="c1">- </span><span class="c6">eq</span><span class="c1">: dac&#259; este True, se
            genereaz&#259; func&#539;ia</span><span class="c1 c9">&nbsp;__eq__()</span><span class="c4 c1">, care
            compar&#259; dou&#259; obiecte. Implicit este True.</span></p>
    <p class="c12"><span class="c4 c1"></span></p>
    <p class="c15"><span class="c1">- </span><span class="c6">order</span><span class="c1">: dac&#259; este True, se
            genereaz&#259; func&#539;iile</span><span class="c1 c9">&nbsp;__lt__</span><span
            class="c1">&nbsp;(opera&#539;ia &lt;),</span><span class="c1 c9">&nbsp;__le__ </span><span
            class="c1">(&lt;=), </span><span class="c1 c9">__gt__</span><span class="c1">&nbsp;(&gt;), </span><span
            class="c1 c9">__ge__ </span><span class="c4 c1">(&gt;=), care sunt utilizate pentru ordonarea obiectelor.
            Implicit este False.</span></p>
    <p class="c12"><span class="c4 c1"></span></p>
    <p class="c15"><span class="c1">- </span><span class="c6">unsafe_hash</span><span class="c1">: dac&#259; este True,
            se genereaz&#259; func&#539;ia </span><span class="c1 c9">__hash__()</span><span class="c4 c1">, care
            returneaz&#259; hash-ul obiectului. Implicit este False.</span></p>
    <p class="c12"><span class="c4 c1"></span></p>
    <p class="c15"><span class="c4 c1">Func&#539;iile generate implicit pot fi suprascrise.</span></p>
    <p class="c12"><span class="c4 c1"></span></p>
    <p class="c15"><span class="c4 c1">Exemplu de utilizare a parametrilor:</span></p>
    <p class="c12"><span class="c4 c1"></span></p>
    <table class="c5">
        <tr class="c10">
            <td class="c11" colspan="1" rowspan="1">
                <p class="c2"><span class="c0">from</span><span class="c3">&nbsp;dataclasses </span><span
                        class="c0">import</span><span class="c3">&nbsp;dataclass<br><br></span><span
                        class="c13">@dataclass(unsafe_hash=True, order=True)</span><span class="c3"><br></span><span
                        class="c0">class</span><span class="c3">&nbsp;</span><span class="c7">Person</span><span
                        class="c3">:<br> &nbsp; &nbsp;name: str<br> &nbsp; &nbsp;age: int<br><br> &nbsp;
                        &nbsp;</span><span class="c0">def</span><span class="c3">&nbsp;</span><span
                        class="c7">__repr__</span><span class="c3">(self):<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span
                        class="c0">return</span><span class="c3">&nbsp;</span><span class="c8">f&quot;Person. Name:
                        {self.name} &nbsp;Age: {self.age}&quot;</span><span class="c3"><br><br>tom = Person(</span><span
                        class="c8">&quot;Tom&quot;</span><span class="c3">, </span><span class="c16">38</span><span
                        class="c3">)<br>print(tom.__hash__()) &nbsp;</span><span class="c14">#
                        -421667297069596717</span><span class="c3"><br>print(tom) &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;
                        &nbsp; </span><span class="c14"># Person. Name: Tom &nbsp;Age: 38</span></p>
            </td>
        </tr>
    </table>
    <p class="c12"><span class="c4 c1"></span></p>
    <p class="c15"><span class="c1">&Icirc;n acest caz, activ&#259;m generarea hash-ului &#537;i a func&#539;iilor de
            ordonare, precum &#537;i suprascriem explicit func&#539;ia </span><span class="c1 c9">__repr__</span><span
            class="c4 c1">&nbsp;pentru a crea o reprezentare textual&#259; personalizat&#259; a obiectului.</span></p>
    <p class="c12"><span class="c4 c1"></span></p>
    <p class="c15"><span class="c4 c18">Valori implicite.</span></p>
    <p class="c12"><span class="c4 c1"></span></p>
    <p class="c15"><span class="c4 c1">Dac&#259; este necesar, atributelor li se pot atribui valori implicite &icirc;n
            cazul &icirc;n care constructorul nu prime&#537;te valori pentru acestea:</span></p>
    <p class="c12"><span class="c4 c1"></span></p>
    <table class="c5">
        <tr class="c10">
            <td class="c11" colspan="1" rowspan="1">
                <p class="c2"><span class="c0">from</span><span class="c3">&nbsp;dataclasses </span><span
                        class="c0">import</span><span class="c3">&nbsp;dataclass<br><br></span><span
                        class="c13">@dataclass</span><span class="c3"><br></span><span class="c0">class</span><span
                        class="c3">&nbsp;</span><span class="c7">Person</span><span class="c3">:<br> &nbsp; &nbsp;name:
                        str<br> &nbsp; &nbsp;age: int = </span><span class="c16">18</span><span class="c3"><br><br>tom =
                        Person(</span><span class="c8">&quot;Tom&quot;</span><span class="c3">, </span><span
                        class="c16">38</span><span class="c3">)<br>print(tom) &nbsp;</span><span class="c14">#
                        Person(name=&quot;Tom&quot;, age=38)</span><span class="c3"><br><br>bob = Person(</span><span
                        class="c8">&quot;Bob&quot;</span><span class="c3">)<br>print(bob) &nbsp;</span><span
                        class="c14"># Person(name=&quot;Bob&quot;, age=18)</span></p>
            </td>
        </tr>
    </table>
    <p class="c12"><span class="c4 c1"></span></p>
    <p class="c15"><span class="c4 c18">Ad&#259;ugarea de func&#539;ionalitate suplimentar&#259;.</span></p>
    <p class="c12"><span class="c1 c4"></span></p>
    <p class="c15"><span class="c4 c1">De&#537;i clasele de date sunt destinate &icirc;n principal stoc&#259;rii de
            date, ele pot include &#537;i metode suplimentare pentru a ad&#259;uga func&#539;ionalitate:</span></p>
    <p class="c12"><span class="c4 c1"></span></p>
    <p class="c15"><span class="c4 c1">f</span></p>
    <table class="c5">
        <tr class="c10">
            <td class="c11" colspan="1" rowspan="1">
                <p class="c2"><span class="c3">rom dataclasses </span><span class="c0">import</span><span
                        class="c3">&nbsp;dataclass<br><br></span><span class="c13">@dataclass</span><span
                        class="c3"><br></span><span class="c0">class</span><span class="c3">&nbsp;</span><span
                        class="c7">Person</span><span class="c3">:<br> &nbsp; &nbsp;name: str<br> &nbsp; &nbsp;age:
                        int<br><br> &nbsp; &nbsp;</span><span class="c0">def</span><span class="c3">&nbsp;</span><span
                        class="c7">say_hello</span><span class="c3">(self):<br> &nbsp; &nbsp; &nbsp;
                        &nbsp;print(</span><span class="c8">f&quot;{self.name} says hello&quot;</span><span
                        class="c3">)<br><br>tom = Person(</span><span class="c8">&quot;Tom&quot;</span><span
                        class="c3">, </span><span class="c16">38</span><span class="c3">)<br>tom.say_hello()
                        &nbsp;</span><span class="c14"># Tom says hello</span></p>
            </td>
        </tr>
    </table>
    <p class="c12"><span class="c4 c1"></span></p>
    <p class="c12"><span class="c4 c1"></span></p>
</body>

</html>