<html>

<head>
    <meta content="text/html; charset=UTF-8" http-equiv="content-type">
    <link rel="stylesheet" type="text/css" href="/lessons/styles.css">
</head>

<body class="c18 doc-content">
    <h1 class="c14 c16 c19">Deschiderea și închiderea fișierelor.</h1>
    <p class="c4"><span class="c1"></span></p>
    <p class="c14"><span class="c1">Python suport&#259; o multitudine de tipuri diferite de fi&#537;iere, dar, &icirc;n
            mod conven&#539;ional, acestea pot fi &icirc;mp&#259;r&#539;ite &icirc;n dou&#259; categorii: textuale
            &#537;i binare. Fi&#537;ierele textuale sunt, de exemplu, fi&#537;iere cu extensia cvs, txt, html, &icirc;n
            general orice fi&#537;iere care p&#259;streaz&#259; informa&#539;ii &icirc;n format text. Fi&#537;ierele
            binare sunt imagini, fi&#537;iere audio &#537;i video etc. &Icirc;n func&#539;ie de tipul fi&#537;ierului,
            lucrul cu acesta poate diferi u&#537;or.</span></p>
    <p class="c4"><span class="c1"></span></p>
    <p class="c14"><span class="c1">La lucrul cu fi&#537;iere, este necesar s&#259; respecta&#539;i o anumit&#259;
            secven&#539;&#259; de opera&#539;ii:</span></p>
    <p class="c4"><span class="c1"></span></p>
    <ol class="c2 lst-kix_hx05v3itz8ak-0 start" start="1">
        <li class="c6 li-bullet-0"><span class="c3">Deschiderea fi&#537;ierului cu metoda </span><span
                class="c16 c9">open</span></li>
    </ol>
    <p class="c4 c13"><span class="c1"></span></p>
    <ol class="c2 lst-kix_hx05v3itz8ak-0" start="2">
        <li class="c6 li-bullet-0"><span class="c3">Citirea fi&#537;ierului cu metoda </span><span class="c9">read
            </span><span class="c3">sau scrierea &icirc;n fi&#537;ier prin metoda </span><span
                class="c16 c9">write</span></li>
    </ol>
    <p class="c4 c13"><span class="c1"></span></p>
    <ol class="c2 lst-kix_hx05v3itz8ak-0" start="3">
        <li class="c6 li-bullet-0"><span class="c3">&Icirc;nchiderea fi&#537;ierului cu metoda </span><span
                class="c9 c16">close</span></li>
    </ol>
    <p class="c4"><span class="c1"></span></p>
    <p class="c14"><span class="c16 c17">Deschiderea &#537;i &icirc;nchiderea fi&#537;ierului.</span></p>
    <p class="c4"><span class="c1"></span></p>
    <p class="c14"><span class="c3">Pentru a &icirc;ncepe lucrul cu un fi&#537;ier, acesta trebuie deschis cu ajutorul
            func&#539;iei </span><span class="c9">open</span><span class="c1">, care are urm&#259;toarea defini&#539;ie
            formal&#259;:</span></p>
    <p class="c4"><span class="c1"></span></p>
    <table class="c12">
        <tr class="c8">
            <td class="c7" colspan="1" rowspan="1">
                <p class="c10"><span class="c0">open(file, mode)</span></p>
            </td>
        </tr>
    </table>
    <p class="c4"><span class="c1"></span></p>
    <p class="c14"><span class="c3">Primul parametru al func&#539;iei reprezint&#259; calea c&#259;tre fi&#537;ier.
            Calea fi&#537;ierului poate fi absolut&#259;, adic&#259; s&#259; &icirc;nceap&#259; cu litera discului, de
            exemplu,</span><span class="c3 c15">&nbsp;C://somedir/somefile.txt</span><span class="c3">. Sau poate fi
            relativ&#259;, de exemplu,</span><span class="c3 c15">&nbsp;somedir/somefile.txt </span><span class="c1">-
            &icirc;n acest caz, c&#259;utarea fi&#537;ierului se va face relativ la loca&#539;ia scriptului Python care
            a fost pornit.</span></p>
    <p class="c4"><span class="c1"></span></p>
    <p class="c14"><span class="c3">Al doilea argument transmis - </span><span class="c3 c15">mode </span><span
            class="c1">- stabile&#537;te modul de deschidere a fi&#537;ierului &icirc;n func&#539;ie de ceea ce
            inten&#539;ion&#259;m s&#259; facem cu el. Exist&#259; 4 moduri generale:</span></p>
    <p class="c4"><span class="c1"></span></p>
    <ul class="c2 lst-kix_al0qrkguvd8m-0 start">
        <li class="c6 li-bullet-0"><span class="c9">r </span><span class="c1">(Read) Fi&#537;ierul este deschis pentru
                citire. Dac&#259; fi&#537;ierul nu este g&#259;sit, se genereaz&#259; excep&#539;ia
                FileNotFoundError.</span></li>
    </ul>
    <p class="c4 c13"><span class="c1"></span></p>
    <ul class="c2 lst-kix_al0qrkguvd8m-0">
        <li class="c6 li-bullet-0"><span class="c9">w</span><span class="c1">&nbsp;(Write) Fi&#537;ierul este deschis
                pentru scriere. Dac&#259; fi&#537;ierul nu exist&#259;, acesta este creat. Dac&#259; un fi&#537;ier
                similar exist&#259; deja, acesta este creat din nou, &#537;i, &icirc;n consecin&#539;&#259;, datele
                vechi din el sunt &#537;terse.</span></li>
    </ul>
    <p class="c4 c13"><span class="c1"></span></p>
    <ul class="c2 lst-kix_al0qrkguvd8m-0">
        <li class="c6 li-bullet-0"><span class="c9">a</span><span class="c1">&nbsp;(Append) Fi&#537;ierul este deschis
                pentru ad&#259;ugare. Dac&#259; fi&#537;ierul nu exist&#259;, acesta este creat Dac&#259; un fi&#537;ier
                similar exist&#259; deja, datele sunt ad&#259;ugate la sf&acirc;r&#537;itul acestuia.</span></li>
    </ul>
    <p class="c4 c13"><span class="c1"></span></p>
    <ul class="c2 lst-kix_al0qrkguvd8m-0">
        <li class="c6 li-bullet-0"><span class="c9">b</span><span class="c3">&nbsp;(Binary) Se folose&#537;te pentru
                lucrul cu fi&#537;iere binare. Se aplic&#259; &icirc;mpreun&#259; cu alte moduri - w sau r, de exemplu,
            </span><span class="c9">rb</span><span class="c3">&nbsp;(citirea fi&#537;ierelor binare) &#537;i
            </span><span class="c9">wb</span><span class="c1">&nbsp;(scrierea fi&#537;ierelor binare).</span></li>
    </ul>
    <p class="c4"><span class="c1"></span></p>
    <ul class="c2 lst-kix_pzecltrsxuuw-0 start">
        <li class="c6 li-bullet-0"><span class="c9">r+</span><span class="c1">&nbsp;Fi&#537;ierul este deschis simultan
                pentru citire &#537;i scriere. Dac&#259; fi&#537;ierul nu este g&#259;sit, se genereaz&#259;
                excep&#539;ia FileNotFoundError.</span></li>
    </ul>
    <p class="c4 c13"><span class="c1"></span></p>
    <ul class="c2 lst-kix_pzecltrsxuuw-0">
        <li class="c6 li-bullet-0"><span class="c9">w+</span><span class="c1">&nbsp;Fi&#537;ierul este deschis simultan
                pentru citire &#537;i scriere. Dac&#259; fi&#537;ierul nu exist&#259;, acesta este creat automat.
                Dac&#259; fi&#537;ierul exist&#259;, acesta este rescris.</span></li>
    </ul>
    <p class="c4 c13"><span class="c1"></span></p>
    <ul class="c2 lst-kix_pzecltrsxuuw-0">
        <li class="c6 li-bullet-0"><span class="c9">a+</span><span class="c1">&nbsp;Fi&#537;ierul este deschis simultan
                pentru citire &#537;i scriere. Dac&#259; fi&#537;ierul nu exist&#259;, acesta este creat automat.
                Dac&#259; fi&#537;ierul exist&#259;, datele sunt ad&#259;ugate la sf&acirc;r&#537;itul
                fi&#537;ierului.</span></li>
    </ul>
    <p class="c4"><span class="c1"></span></p>
    <p class="c14"><span class="c1">De exemplu, deschiderea unui fi&#537;ier text pentru scriere:</span></p>
    <p class="c4"><span class="c1"></span></p>
    <table class="c12">
        <tr class="c8">
            <td class="c7" colspan="1" rowspan="1">
                <p class="c10"><span class="c0">myfile = open(</span><span class="c5">&quot;hello.txt&quot;</span><span
                        class="c0">, </span><span class="c5">&quot;w&quot;</span><span class="c0">)</span></p>
            </td>
        </tr>
    </table>
    <p class="c4"><span class="c1"></span></p>
    <p class="c14"><span class="c1">Sau deschiderea unui fi&#537;ier binar pentru citire:</span></p>
    <p class="c4"><span class="c1"></span></p>
    <table class="c12">
        <tr class="c8">
            <td class="c7" colspan="1" rowspan="1">
                <p class="c10"><span class="c0">myfile = open(</span><span class="c5">&quot;image.png&quot;</span><span
                        class="c0">, </span><span class="c5">&quot;rb&quot;</span><span class="c0">)</span></p>
            </td>
        </tr>
    </table>
    <p class="c4"><span class="c1"></span></p>
    <p class="c14"><span class="c3">Dup&#259; finalizarea lucrului cu fi&#537;ierul, acesta trebuie &icirc;nchis
            neap&#259;rat prin metoda </span><span class="c3 c15">close</span><span class="c1">. Aceast&#259;
            metod&#259; va elibera toate resursele utilizate asociate cu fi&#537;ierul.</span></p>
    <p class="c4"><span class="c1"></span></p>
    <p class="c14"><span class="c1">De exemplu, s&#259; deschidem pentru scriere fi&#537;ierul text
            &quot;hello.txt&quot;:</span></p>
    <p class="c4"><span class="c1"></span></p>
    <table class="c12">
        <tr class="c8">
            <td class="c7" colspan="1" rowspan="1">
                <p class="c10"><span class="c0">myfile = open(</span><span class="c5">&quot;hello.txt&quot;</span><span
                        class="c0">, </span><span class="c5">&quot;w&quot;</span><span
                        class="c0">)<br>myfile.close()</span></p>
            </td>
        </tr>
    </table>
    <p class="c4"><span class="c1"></span></p>
    <p class="c14"><span class="c1">La deschiderea unui fi&#537;ier sau &icirc;n timpul lucrului cu acesta, ne putem
            confrunta cu diverse excep&#539;ii, de exemplu, fi&#537;ierul nu este accesibil etc. &Icirc;n acest caz,
            programul va genera o eroare, iar execu&#539;ia lui nu va ajunge la apelarea metodei close, &#537;i, prin
            urmare, fi&#537;ierul nu va fi &icirc;nchis.</span></p>
    <p class="c4"><span class="c1"></span></p>
    <p class="c14"><span class="c1">&Icirc;n acest caz, putem trata excep&#539;iile:</span></p>
    <p class="c4"><span class="c1"></span></p>
    <table class="c12">
        <tr class="c8">
            <td class="c7" colspan="1" rowspan="1">
                <p class="c10"><span class="c11">try</span><span class="c0">:<br> &nbsp; &nbsp;myfile =
                        open(</span><span class="c5">&quot;hello.txt&quot;</span><span class="c0">, </span><span
                        class="c5">&quot;w&quot;</span><span class="c0">)<br> &nbsp; &nbsp;</span><span
                        class="c11">try</span><span class="c0">:<br> &nbsp; &nbsp; &nbsp; &nbsp;print(</span><span
                        class="c5">&quot;Lucrul cu fi&#537;ierul&quot;</span><span class="c0">)<br> &nbsp;
                        &nbsp;</span><span class="c11">finally</span><span class="c0">:<br> &nbsp; &nbsp; &nbsp;
                        &nbsp;myfile.close()<br></span><span class="c11">except</span><span class="c0">&nbsp;Exception
                    </span><span class="c11">as</span><span class="c0">&nbsp;ex:<br> &nbsp; &nbsp;print(ex)</span></p>
            </td>
        </tr>
    </table>
    <p class="c4"><span class="c1"></span></p>
    <p class="c14"><span class="c1">&Icirc;n acest exemplu, tot lucrul cu fi&#537;ierul se desf&#259;&#537;oar&#259;
            &icirc;ntr-un bloc try imbricat. &#536;i dac&#259; apare vreo excep&#539;ie, &icirc;n orice caz, &icirc;n
            blocul finally, fi&#537;ierul va fi &icirc;nchis.</span></p>
    <p class="c4"><span class="c1"></span></p>
    <p class="c14"><span class="c3">Totu&#537;i, exist&#259; o construc&#539;ie mai convenabil&#259; - construc&#539;ia
        </span><span class="c9">with</span><span class="c1">:</span></p>
    <p class="c4"><span class="c1"></span></p>
    <table class="c12">
        <tr class="c8">
            <td class="c7" colspan="1" rowspan="1">
                <p class="c10"><span class="c11">with</span><span class="c0">&nbsp;open(file, mode) </span><span
                        class="c11">as</span><span class="c0">&nbsp;myfile:<br> &nbsp; &nbsp;instruc&#539;iuni</span>
                </p>
            </td>
        </tr>
    </table>
    <p class="c4"><span class="c1"></span></p>
    <p class="c14"><span class="c1">Aceast&#259; construc&#539;ie define&#537;te pentru fi&#537;ierul deschis variabila
            myfile &#537;i execut&#259; un set de instruc&#539;iuni. Dup&#259; execu&#539;ia acestora, fi&#537;ierul
            este &icirc;nchis automat. Chiar dac&#259; apar excep&#539;ii &icirc;n timpul execu&#539;iei
            instruc&#539;iunilor din blocul with, fi&#537;ierul va fi &icirc;nchis oricum.</span></p>
    <p class="c4"><span class="c1"></span></p>
    <p class="c14"><span class="c1">Astfel, s&#259; rescriem exemplul anterior:</span></p>
    <p class="c4"><span class="c1"></span></p>
    <table class="c12">
        <tr class="c8">
            <td class="c7" colspan="1" rowspan="1">
                <p class="c10"><span class="c11">with</span><span class="c0">&nbsp;open(</span><span
                        class="c5">&quot;hello.txt&quot;</span><span class="c0">, </span><span
                        class="c5">&quot;w&quot;</span><span class="c0">) </span><span class="c11">as</span><span
                        class="c0">&nbsp;myfile:<br> &nbsp; &nbsp;print(</span><span class="c5">&quot;Lucrul cu
                        fi&#537;ierul myfile&quot;</span><span class="c0">)</span></p>
            </td>
        </tr>
    </table>
    <p class="c4"><span class="c1"></span></p>
    <p class="c4"><span class="c1"></span></p>
</body>

</html>