<html>

<head>
    <meta content="text/html; charset=UTF-8" http-equiv="content-type">
    <link rel="stylesheet" type="text/css" href="/lessons/styles.css">
</head>

<body class="c16 doc-content">
    <h1 class="c9 c15">Construc»õia match.</h1>
    <p class="c3"><span class="c6"></span></p>
    <p class="c9"><span class="c10">&Icirc;ncep&acirc;nd cu versiunea 3.10, &icirc;n limbajul Python a ap&#259;rut
            func&#539;ionalitatea de</span><span class="c12">&nbsp;pattern matching</span><span
            class="c10">&nbsp;(potrivirea cu &#537;abloane). Pattern matching reprezint&#259; utilizarea
            construc&#539;iei </span><span class="c12">match</span><span class="c10">, care permite compararea unei
            expresii cu un anumit &#537;ablon. Dac&#259; expresia corespunde &#537;ablonului, se execut&#259; anumite
            ac&#539;iuni. &Icirc;n acest sens, construc&#539;ia match este similar&#259; cu construc&#539;ia
        </span><span class="c12">if/else/elif</span><span class="c6">, care execut&#259; anumite ac&#539;iuni &icirc;n
            func&#539;ie de o condi&#539;ie. Totu&#537;i, func&#539;ionalitatea match este mult mai larg&#259; -
            permite, de asemenea, extragerea datelor din tipuri compuse &#537;i aplicarea de ac&#539;iuni asupra
            diferitelor p&#259;r&#539;i ale obiectelor.</span></p>
    <p class="c3"><span class="c6"></span></p>
    <p class="c9"><span class="c10">Construc&#539;ia </span><span class="c12">match </span><span class="c6">are
            urm&#259;toarea defini&#539;ie formal&#259;:</span></p>
    <p class="c3"><span class="c6"></span></p>
    <table class="c7">
        <tr class="c8">
            <td class="c1" colspan="1" rowspan="1">
                <p class="c11"><span class="c2">match expresie:<br> &nbsp; &nbsp;case &#537;ablon_1:<br> &nbsp; &nbsp;
                        &nbsp; &nbsp;ac&#539;iune_1<br> &nbsp; &nbsp;case &#537;ablon_2:<br> &nbsp; &nbsp; &nbsp;
                        &nbsp;ac&#539;iune_2<br> &nbsp; &nbsp;................<br> &nbsp; &nbsp;case &#537;ablon_N:<br>
                        &nbsp; &nbsp; &nbsp; &nbsp;ac&#539;iune_N<br> &nbsp; &nbsp;case _:<br> &nbsp; &nbsp; &nbsp;
                        &nbsp;ac&#539;iune_implicit&#259;</span></p>
            </td>
        </tr>
    </table>
    <p class="c3"><span class="c6"></span></p>
    <p class="c9"><span class="c10">Dup&#259; cuv&acirc;ntul cheie </span><span class="c12">match </span><span
            class="c10">urmeaz&#259; expresia care urmeaz&#259; s&#259; fie comparat&#259;. Apoi, dup&#259; dou&#259;
            puncte, pe liniile urm&#259;toare se afl&#259; expresiile </span><span class="c12">case</span><span
            class="c10">. Dup&#259; fiecare expresie </span><span class="c12">case </span><span class="c6">este
            specificat un &#537;ablon, cu care expresia din match este comparat&#259;. Dup&#259; &#537;ablon, se
            specific&#259; setul de ac&#539;iuni ale blocului case.</span></p>
    <p class="c3"><span class="c6"></span></p>
    <p class="c9"><span class="c10">Construc&#539;ia match compar&#259; secven&#539;ial expresia cu &#537;abloanele din
            blocurile case. Dac&#259; se g&#259;se&#537;te un &#537;ablon dintr-un bloc case care corespunde expresiei
            din match, se execut&#259; instruc&#539;iunile din acel bloc </span><span class="c12">case</span><span
            class="c6">.</span></p>
    <p class="c3"><span class="c6"></span></p>
    <p class="c9"><span class="c6">Ca &#537;abloane, cu care sunt comparate expresiile, pot fi utilizate at&acirc;t date
            de tipuri primitive, c&acirc;t &#537;i secven&#539;e de elemente &#537;i obiecte ale claselor.</span></p>
    <p class="c3"><span class="c6"></span></p>
    <p class="c9"><span class="c6">S&#259; lu&#259;m un exemplu &icirc;n care &#537;ablonul este reprezentat de litere
            de tipuri primitive. De exemplu, &icirc;n func&#539;ie de limb&#259;, vom afi&#537;a un mesaj de bun
            venit:</span></p>
    <p class="c3"><span class="c6"></span></p>
    <table class="c7">
        <tr class="c8">
            <td class="c1" colspan="1" rowspan="1">
                <p class="c11"><span class="c0">def</span><span class="c2">&nbsp;</span><span
                        class="c17">print_hello</span><span class="c2">(language):<br> &nbsp; &nbsp;match language:<br>
                        &nbsp; &nbsp; &nbsp; &nbsp;case </span><span class="c4">&quot;romanian&quot;</span><span
                        class="c2">:<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;print(</span><span
                        class="c4">&quot;Salut&quot;</span><span class="c2">)<br> &nbsp; &nbsp; &nbsp; &nbsp;case
                    </span><span class="c4">&quot;english&quot;</span><span class="c2">:<br> &nbsp; &nbsp; &nbsp; &nbsp;
                        &nbsp; &nbsp;print(</span><span class="c4">&quot;Hello&quot;</span><span class="c2">)<br> &nbsp;
                        &nbsp; &nbsp; &nbsp;case </span><span class="c4">&quot;german&quot;</span><span class="c2">:<br>
                        &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;print(</span><span
                        class="c4">&quot;Hallo&quot;</span><span class="c2">)<br> <br>print_hello(</span><span
                        class="c4">&quot;english&quot;</span><span class="c2">) &nbsp; &nbsp; &nbsp;</span><span
                        class="c13"># Hello</span><span class="c2"><br>print_hello(</span><span
                        class="c4">&quot;german&quot;</span><span class="c2">) &nbsp; &nbsp; &nbsp; </span><span
                        class="c13"># Hallo</span><span class="c2"><br>print_hello(</span><span
                        class="c4">&quot;romanian&quot;</span><span class="c2">) &nbsp; &nbsp; &nbsp;</span><span
                        class="c13"># Salut</span></p>
            </td>
        </tr>
    </table>
    <p class="c3"><span class="c6"></span></p>
    <p class="c9"><span class="c10">Aici, func&#539;ia</span><span class="c10 c14">&nbsp;print_hello</span><span
            class="c6">&nbsp;prime&#537;te un parametru language, prin care se transmite limba selectat&#259;. &Icirc;n
            func&#539;ia propriu-zis&#259;, construc&#539;ia match compar&#259; valoarea variabilei language. &Icirc;n
            blocurile case, sunt definite &#537;abloane - &#537;iruri de caractere cu care variabila language este
            comparat&#259;.</span></p>
    <p class="c3"><span class="c6"></span></p>
    <p class="c9"><span class="c10">De exemplu, la apelarea</span><span
            class="c10 c14">&nbsp;print_hello(&quot;english&quot;)</span><span class="c6">, parametrul language este
            egal cu &quot;english&quot;, astfel c&#259; construc&#539;ia match va selecta urm&#259;torul bloc
            case:</span></p>
    <p class="c3"><span class="c6"></span></p>
    <table class="c7">
        <tr class="c8">
            <td class="c1" colspan="1" rowspan="1">
                <p class="c11"><span class="c2">case </span><span class="c4">&quot;english&quot;</span><span
                        class="c2">:<br> &nbsp; &nbsp;print(</span><span class="c4">&quot;Hello&quot;</span><span
                        class="c2">)</span></p>
            </td>
        </tr>
    </table>
    <p class="c3"><span class="c6"></span></p>
    <p class="c9"><span class="c6">Observa&#539;i c&#259; blocurile case au indentare fa&#539;&#259; de &icirc;nceputul
            construc&#539;iei match, iar instruc&#539;iunile fiec&#259;rui bloc case au indentare fa&#539;&#259; de
            &icirc;nceputul acelui bloc case. Dac&#259; un bloc case con&#539;ine o singur&#259; instruc&#539;iune,
            aceasta poate fi plasat&#259; pe aceea&#537;i linie cu operatorul case:</span></p>
    <p class="c3"><span class="c6"></span></p>
    <table class="c7">
        <tr class="c8">
            <td class="c1" colspan="1" rowspan="1">
                <p class="c11"><span class="c0">def</span><span class="c2">&nbsp;</span><span
                        class="c17">print_hello</span><span class="c2">(language):<br> &nbsp; &nbsp;match language:<br>
                        &nbsp; &nbsp; &nbsp; &nbsp;case </span><span class="c4">&quot;romanian&quot;</span><span
                        class="c2">: print(</span><span class="c4">&quot;Salut&quot;</span><span class="c2">)<br> &nbsp;
                        &nbsp; &nbsp; &nbsp;case </span><span class="c4">&quot;english&quot;</span><span class="c2">:
                        print(</span><span class="c4">&quot;Hello&quot;</span><span class="c2">)<br> &nbsp; &nbsp;
                        &nbsp; &nbsp;case </span><span class="c4">&quot;german&quot;</span><span class="c2">:
                        print(</span><span class="c4">&quot;Hallo&quot;</span><span class="c2">)<br>
                        <br>print_hello(</span><span class="c4">&quot;english&quot;</span><span class="c2">) &nbsp;
                        &nbsp; &nbsp;</span><span class="c13"># Hello</span><span
                        class="c2"><br>print_hello(</span><span class="c4">&quot;german&quot;</span><span class="c2">)
                        &nbsp; &nbsp; &nbsp; </span><span class="c13"># Hallo</span><span
                        class="c2"><br>print_hello(</span><span class="c4">&quot;romanian&quot;</span><span class="c2">)
                        &nbsp; &nbsp; &nbsp;</span><span class="c13"># Salut</span></p>
            </td>
        </tr>
    </table>
    <p class="c3"><span class="c6"></span></p>
    <p class="c9"><span class="c6">Dac&#259; expresia din match nu corespunde nici unuia dintre &#537;abloanele case,
            niciunul dintre aceste blocuri case nu se execut&#259;.</span></p>
    <p class="c3"><span class="c6"></span></p>
    <p class="c9"><span class="c6">Dac&#259; este necesar ca la neconcordan&#539;a valorilor (dac&#259; nici unul dintre
            &#537;abloanele case nu corespunde expresiei match) s&#259; fie executate anumite ac&#539;iuni implicite, se
            folose&#537;te &#537;ablonul _ (underscore):</span></p>
    <p class="c3"><span class="c6"></span></p>
    <table class="c7">
        <tr class="c8">
            <td class="c1" colspan="1" rowspan="1">
                <p class="c11"><span class="c0">def</span><span class="c2">&nbsp;</span><span
                        class="c17">print_hello</span><span class="c2">(language):<br> &nbsp; &nbsp;match language:<br>
                        &nbsp; &nbsp; &nbsp; &nbsp;case </span><span class="c4">&quot;romanian&quot;</span><span
                        class="c2">:<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;print(</span><span
                        class="c4">&quot;Salut&quot;</span><span class="c2">)<br> &nbsp; &nbsp; &nbsp; &nbsp;case
                    </span><span class="c4">&quot;english&quot;</span><span class="c2">:<br> &nbsp; &nbsp; &nbsp; &nbsp;
                        &nbsp; &nbsp;print(</span><span class="c4">&quot;Hello&quot;</span><span class="c2">)<br> &nbsp;
                        &nbsp; &nbsp; &nbsp;case </span><span class="c4">&quot;german&quot;</span><span class="c2">:<br>
                        &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;print(</span><span
                        class="c4">&quot;Hallo&quot;</span><span class="c2">)<br> &nbsp; &nbsp; &nbsp; &nbsp;case _:<br>
                        &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;print(</span><span
                        class="c4">&quot;Undefined&quot;</span><span class="c2">)<br> <br>print_hello(</span><span
                        class="c4">&quot;english&quot;</span><span class="c2">) &nbsp; &nbsp; &nbsp;</span><span
                        class="c13"># Hello</span><span class="c2"><br>print_hello(</span><span
                        class="c4">&quot;spanish&quot;</span><span class="c2">) &nbsp; &nbsp; &nbsp;</span><span
                        class="c13"># Undefined</span></p>
            </td>
        </tr>
    </table>
    <p class="c3"><span class="c6"></span></p>
    <p class="c9"><span class="c6">Dac&#259; niciunul dintre &#537;abloanele case nu corespunde valorii language, se va
            executa blocul:</span></p>
    <p class="c3"><span class="c6"></span></p>
    <table class="c7">
        <tr class="c8">
            <td class="c1" colspan="1" rowspan="1">
                <p class="c11"><span class="c2">case _: <br> &nbsp; &nbsp;print(</span><span
                        class="c4">&quot;Undefined&quot;</span><span class="c2">)</span></p>
            </td>
        </tr>
    </table>
    <p class="c3"><span class="c6"></span></p>
    <p class="c9"><span class="c6">Se poate defini &#537;i un bloc case care s&#259; permit&#259; compararea
            simultan&#259; cu mai multe valori. &Icirc;n acest caz, valorile sunt separate de o linie
            vertical&#259;:</span></p>
    <p class="c3"><span class="c6"></span></p>
    <table class="c7">
        <tr class="c8">
            <td class="c1" colspan="1" rowspan="1">
                <p class="c11"><span class="c0">def</span><span class="c2">&nbsp;</span><span
                        class="c17">print_hello</span><span class="c2">(language):<br> &nbsp; &nbsp;match language:<br>
                        &nbsp; &nbsp; &nbsp; &nbsp;case </span><span class="c4">&quot;romanian&quot;</span><span
                        class="c2">:<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;print(</span><span
                        class="c4">&quot;Salut&quot;</span><span class="c2">)<br> &nbsp; &nbsp; &nbsp; &nbsp;case
                    </span><span class="c4">&quot;american english&quot;</span><span class="c2">&nbsp;| </span><span
                        class="c4">&quot;british english&quot;</span><span class="c2">&nbsp;| </span><span
                        class="c4">&quot;english&quot;</span><span class="c2">:<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;
                        &nbsp;print(</span><span class="c4">&quot;Hello&quot;</span><span class="c2">)<br> &nbsp; &nbsp;
                        &nbsp; &nbsp;case _:<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;print(</span><span
                        class="c4">&quot;Undefined&quot;</span><span class="c2">)<br> <br>print_hello(</span><span
                        class="c4">&quot;english&quot;</span><span class="c2">) &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;
                        &nbsp; &nbsp;</span><span class="c13"># Hello</span><span
                        class="c2"><br>print_hello(</span><span class="c4">&quot;american english&quot;</span><span
                        class="c2">) &nbsp; &nbsp; </span><span class="c13"># Hello</span><span
                        class="c2"><br>print_hello(</span><span class="c4">&quot;spanish&quot;</span><span class="c2">)
                        &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c13"># Undefined</span></p>
            </td>
        </tr>
    </table>
    <p class="c3"><span class="c6"></span></p>
    <p class="c9"><span class="c10">&Icirc;n acest caz, &#537;ablonul case </span><span class="c10 c14">&quot;american
            english&quot; | &quot;british english&quot; | &quot;english&quot; </span><span class="c6">corespunde
            simultan celor trei valori.</span></p>
    <p class="c3"><span class="c6"></span></p>
    <p class="c9"><span class="c6">&Icirc;n mod similar, se pot compara expresii cu date de alte tipuri. De
            exemplu:</span></p>
    <p class="c3"><span class="c6"></span></p>
    <table class="c7">
        <tr class="c8">
            <td class="c1" colspan="1" rowspan="1">
                <p class="c11"><span class="c0">def</span><span class="c2">&nbsp;</span><span
                        class="c17">operation</span><span class="c2">(a, b, code):<br> &nbsp; &nbsp;match code:<br>
                        &nbsp; &nbsp; &nbsp; &nbsp;case </span><span class="c5">1</span><span class="c2">:<br> &nbsp;
                        &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">return</span><span class="c2">&nbsp;a
                        + b<br> &nbsp; &nbsp; &nbsp; &nbsp;case </span><span class="c5">2</span><span class="c2">:<br>
                        &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">return</span><span
                        class="c2">&nbsp;a - b<br> &nbsp; &nbsp; &nbsp; &nbsp;case </span><span class="c5">3</span><span
                        class="c2">:<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span
                        class="c0">return</span><span class="c2">&nbsp;a * b<br> &nbsp; &nbsp; &nbsp; &nbsp;case _:<br>
                        &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">return</span><span
                        class="c2">&nbsp;</span><span class="c5">0</span><span class="c2"><br>
                        <br>print(operation(</span><span class="c5">10</span><span class="c2">, </span><span
                        class="c5">5</span><span class="c2">, </span><span class="c5">1</span><span class="c2">)) &nbsp;
                        &nbsp; &nbsp;</span><span class="c13"># 15</span><span
                        class="c2"><br>print(operation(</span><span class="c5">10</span><span class="c2">, </span><span
                        class="c5">5</span><span class="c2">, </span><span class="c5">2</span><span class="c2">)) &nbsp;
                        &nbsp; &nbsp;</span><span class="c13"># 5</span><span
                        class="c2"><br>print(operation(</span><span class="c5">10</span><span class="c2">, </span><span
                        class="c5">5</span><span class="c2">, </span><span class="c5">3</span><span class="c2">)) &nbsp;
                        &nbsp; &nbsp;</span><span class="c13"># 50</span><span
                        class="c2"><br>print(operation(</span><span class="c5">10</span><span class="c2">, </span><span
                        class="c5">5</span><span class="c2">, </span><span class="c5">4</span><span class="c2">)) &nbsp;
                        &nbsp; &nbsp;</span><span class="c13"># 0</span></p>
            </td>
        </tr>
    </table>
    <p class="c3"><span class="c6"></span></p>
    <p class="c9"><span class="c6">Aici, func&#539;ia operation prime&#537;te dou&#259; numere &#537;i un cod de
            opera&#539;ie. Construc&#539;ia match compar&#259; codul opera&#539;iei cu valori specifice &#537;i,
            &icirc;n func&#539;ie de valoare, execut&#259; o anumit&#259; opera&#539;ie asupra numerelor. De exemplu,
            dac&#259; code este egal cu 1, se execut&#259; expresia:</span></p>
    <p class="c3"><span class="c6"></span></p>
    <table class="c7">
        <tr class="c8">
            <td class="c1" colspan="1" rowspan="1">
                <p class="c11"><span class="c2">case </span><span class="c5">1</span><span class="c2">:<br> &nbsp;
                        &nbsp;</span><span class="c0">return</span><span class="c2">&nbsp;a + b</span></p>
            </td>
        </tr>
    </table>
    <p class="c3"><span class="c6"></span></p>
    <p class="c9"><span class="c6">Aceast&#259; expresie case va returna suma numerelor a &#537;i b.</span></p>
    <p class="c3"><span class="c6"></span></p>
    <p class="c9"><span class="c6">Similar, dac&#259; code = 2, se returneaz&#259; diferen&#539;a, iar dac&#259; code =
            3, se returneaz&#259; produsul numerelor. &Icirc;n toate celelalte cazuri, se returneaz&#259; 0.</span></p>
    <p class="c3"><span class="c6"></span></p>
</body>

</html>