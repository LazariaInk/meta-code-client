<html>

<head>
    <meta content="text/html; charset=UTF-8" http-equiv="content-type">
    <link rel="stylesheet" type="text/css" href="/lessons/styles.css">
</head>

<body class="c18 doc-content">
    <h1 class="c17 c19">Decoratori </h1>
    <p class="c2"><span class="c1">Decoratori &icirc;n Python reprezint&#259; func&#539;ii care primesc ca parametru o
            alt&#259; func&#539;ie &#537;i returneaz&#259;, de asemenea, o func&#539;ie. Decoratorii permit modificarea
            unei func&#539;ii, a parametrilor s&#259;i &#537;i a rezultatului s&#259;u f&#259;r&#259; a modifica codul
            surs&#259; al acestei func&#539;ii.</span></p>
    <p class="c2"><span class="c1">S&#259; analiz&#259;m un exemplu simplu:</span></p>
    <p class="c6 c8"><span class="c1"></span></p><a id="t.098000235f16bae64784095ce8365f3e7d3a1bed"></a><a id="t.0"></a>
    <table class="c7">
        <tr class="c15">
            <td class="c9" colspan="1" rowspan="1">
                <p class="c6"><span class="c5"># definirea func&#539;iei decorator</span><span
                        class="c3"><br></span><span class="c0">def</span><span class="c3">&nbsp;</span><span
                        class="c11">select</span><span class="c3">(input_func):<br> &nbsp; &nbsp;</span><span
                        class="c0">def</span><span class="c3">&nbsp;</span><span class="c11">output_func</span><span
                        class="c3">(): &nbsp;</span><span class="c5"># definim func&#539;ia care va fi executat&#259;
                        &icirc;n locul celei originale</span><span class="c3"><br> &nbsp; &nbsp; &nbsp;
                        &nbsp;print(</span><span class="c13">&quot;*****************&quot;</span><span class="c3">)
                        &nbsp;</span><span class="c5"># &icirc;nainte de a afi&#537;a func&#539;ia original&#259;,
                        afi&#537;&#259;m ni&#537;te stelu&#539;e</span><span class="c3"><br> &nbsp; &nbsp; &nbsp;
                        &nbsp;input_func() &nbsp;</span><span class="c5"># apel&#259;m func&#539;ia
                        original&#259;</span><span class="c3"><br> &nbsp; &nbsp; &nbsp; &nbsp;print(</span><span
                        class="c13">&quot;*****************&quot;</span><span class="c3">) &nbsp;</span><span
                        class="c5"># dup&#259; ce afi&#537;&#259;m func&#539;ia original&#259;, afi&#537;&#259;m
                        ni&#537;te stelu&#539;e</span><span class="c3"><br> &nbsp; &nbsp;</span><span
                        class="c0">return</span><span class="c3">&nbsp;output_func &nbsp;</span><span class="c5">#
                        return&#259;m noua func&#539;ie</span><span class="c3"><br><br></span><span class="c5">#
                        definirea func&#539;iei originale</span><span class="c3"><br></span><span class="c14">@select
                        &nbsp;# aplicarea decoratorului select</span><span class="c3"><br></span><span
                        class="c0">def</span><span class="c3">&nbsp;</span><span class="c11">hello</span><span
                        class="c3">():<br> &nbsp; &nbsp;print(</span><span class="c13">&quot;Hello
                        www.fabricadecoduri.com&quot;</span><span class="c3">)<br><br></span><span class="c5">#
                        apel&#259;m func&#539;ia original&#259;</span><span class="c3"><br>hello()</span></p>
            </td>
        </tr>
    </table>
    <p class="c6 c8"><span class="c1"></span></p>
    <p class="c2"><span class="c10">La &icirc;nceput, este definit&#259; func&#539;ia decoratorului, care &icirc;n acest
            caz se nume&#537;te </span><span class="c10">select()</span><span class="c10">. Ca parametru, decoratorul
            prime&#537;te o func&#539;ie (&icirc;n acest caz, parametrul </span><span class="c10">input_func</span><span
            class="c1">), la care acest decorator va fi aplicat:</span></p>
    <p class="c6 c8"><span class="c1"></span></p><a id="t.3fc3def8fce1f7ee4753d3e562210ad505c58508"></a><a id="t.1"></a>
    <table class="c7">
        <tr class="c15">
            <td class="c9" colspan="1" rowspan="1">
                <p class="c6"><span class="c0">def</span><span class="c3">&nbsp;</span><span
                        class="c11">select</span><span class="c3">(input_func):<br> &nbsp; &nbsp;</span><span
                        class="c0">def</span><span class="c3">&nbsp;</span><span class="c11">output_func</span><span
                        class="c3">(): &nbsp;</span><span class="c5"># definim func&#539;ia care va fi executat&#259;
                        &icirc;n locul celei originale</span><span class="c3"><br> &nbsp; &nbsp; &nbsp;
                        &nbsp;print(</span><span class="c13">&quot;*****************&quot;</span><span class="c3">)
                        &nbsp;</span><span class="c5"># &icirc;nainte de a afi&#537;a func&#539;ia original&#259;,
                        afi&#537;&#259;m ni&#537;te stelu&#539;e</span><span class="c3"><br> &nbsp; &nbsp; &nbsp;
                        &nbsp;input_func() &nbsp;</span><span class="c5"># apel&#259;m func&#539;ia
                        original&#259;</span><span class="c3"><br> &nbsp; &nbsp; &nbsp; &nbsp;print(</span><span
                        class="c13">&quot;*****************&quot;</span><span class="c3">) &nbsp;</span><span
                        class="c5"># dup&#259; ce afi&#537;&#259;m func&#539;ia original&#259;, afi&#537;&#259;m
                        ni&#537;te stelu&#539;e</span><span class="c3"><br> &nbsp; &nbsp;</span><span
                        class="c0">return</span><span class="c3">&nbsp;output_func &nbsp;</span><span class="c5">#
                        return&#259;m noua func&#539;ie</span></p>
            </td>
        </tr>
    </table>
    <p class="c6 c8"><span class="c1"></span></p>
    <p class="c2"><span class="c10">Rezultatul decoratorului &icirc;n acest caz este func&#539;ia local&#259;
        </span><span class="c10">output_func</span><span class="c10">, &icirc;n care este apelat&#259; func&#539;ia de
            intrare </span><span class="c10">input_func</span><span class="c10">. Pentru simplitate, aici, &icirc;nainte
            &#537;i dup&#259; apelul lui </span><span class="c10">input_func</span><span class="c1">, afi&#537;&#259;m
            un set de caractere &quot;*&quot;.</span></p>
    <p class="c2"><span class="c10">Apoi este definit&#259; func&#539;ia standard la care se aplic&#259; decoratorul -
            &icirc;n acest caz, este func&#539;ia </span><span class="c10">hello</span><span class="c1">, care doar
            afi&#537;eaz&#259; pe consol&#259; un mesaj:</span></p>
    <p class="c6 c8"><span class="c1"></span></p><a id="t.bdb945297a19288cce93259e6c81107125e1ce6a"></a><a id="t.2"></a>
    <table class="c7">
        <tr class="c15">
            <td class="c9" colspan="1" rowspan="1">
                <p class="c6"><span class="c14">@select &nbsp;# aplicarea decoratorului select</span><span
                        class="c3"><br></span><span class="c0">def</span><span class="c3">&nbsp;</span><span
                        class="c11">hello</span><span class="c3">():<br> &nbsp; &nbsp;print(</span><span
                        class="c13">&quot;Hello www.fabricadecoduri.com&quot;</span><span class="c3">)</span></p>
            </td>
        </tr>
    </table>
    <p class="c6 c8"><span class="c1"></span></p>
    <p class="c2"><span class="c10">Pentru a aplica decoratorul, &icirc;nainte de definirea func&#539;iei se
            folose&#537;te simbolul </span><span class="c10">@</span><span class="c10">, urmat de numele decoratorului.
            Deci, &icirc;n acest caz, func&#539;iei </span><span class="c10">hello()</span><span class="c10">&nbsp;i se
            aplic&#259; decoratorul </span><span class="c10">select()</span><span class="c1">.</span></p>
    <p class="c2"><span class="c1">Apoi apel&#259;m func&#539;ia obi&#537;nuit&#259;:</span></p>
    <p class="c6 c8"><span class="c1"></span></p><a id="t.a33726388d2a059f74dc6bcb56b4634248ac4649"></a><a id="t.3"></a>
    <table class="c7">
        <tr class="c15">
            <td class="c9" colspan="1" rowspan="1">
                <p class="c6"><span class="c3">hello()</span></p>
            </td>
        </tr>
    </table>
    <p class="c6 c8"><span class="c1"></span></p>
    <p class="c2"><span class="c10">Deoarece func&#539;iei i se aplic&#259; decoratorul </span><span
            class="c10">select</span><span class="c10">, func&#539;ia </span><span class="c10">hello</span><span
            class="c10">&nbsp;este transmis&#259; &icirc;n decoratorul </span><span class="c10">select()</span><span
            class="c10">&nbsp;ca parametru </span><span class="c10">input_func</span><span class="c10">. &#536;i
            deoarece decoratorul returneaz&#259; o nou&#259; func&#539;ie - </span><span
            class="c10">output_func</span><span class="c10">, &icirc;n acest caz, se va executa de fapt func&#539;ia
        </span><span class="c10">output_func()</span><span class="c1">.</span></p>
    <p class="c2"><span class="c1">Rezultatul afi&#537;&#259;rii pe consol&#259; va fi:</span></p>
    <p class="c6 c8"><span class="c1"></span></p><a id="t.f72bf1c629e0a6fd03c1c81652af3951ae514e33"></a><a id="t.4"></a>
    <table class="c7">
        <tr class="c15">
            <td class="c9" colspan="1" rowspan="1">
                <p class="c6"><span class="c3">*****************<br>Hello
                        www.fabricadecoduri.com<br>*****************</span></p>
            </td>
        </tr>
    </table>
    <p class="c6 c8"><span class="c1"></span></p>
    <p class="c17 c20"><span class="c1"></span></p>
    <p class="c17"><span class="c12">Preluarea parametrilor func&#539;iei &icirc;n decorator</span></p>
    <p class="c2"><span class="c1">Decoratorul poate intercepta argumentele transmise func&#539;iei:</span></p>
    <p class="c6 c8"><span class="c1"></span></p><a id="t.6ebd8af2e19d4adc3e153d3a36b47dcbb4d2163c"></a><a id="t.5"></a>
    <table class="c7">
        <tr class="c15">
            <td class="c9" colspan="1" rowspan="1">
                <p class="c6"><span class="c5"># definirea func&#539;iei decorator</span><span
                        class="c3"><br></span><span class="c0">def</span><span class="c3">&nbsp;</span><span
                        class="c11">check</span><span class="c3">(input_func):<br> &nbsp; &nbsp;</span><span
                        class="c0">def</span><span class="c3">&nbsp;</span><span class="c11">output_func</span><span
                        class="c3">(*args): &nbsp;</span><span class="c5"># prin *args prelu&#259;m valorile
                        parametrilor func&#539;iei originale</span><span class="c3"><br> &nbsp; &nbsp; &nbsp;
                        &nbsp;input_func(*args) &nbsp;</span><span class="c5"># apel&#259;m func&#539;ia
                        original&#259;</span><span class="c3"><br> &nbsp; &nbsp;</span><span
                        class="c0">return</span><span class="c3">&nbsp;output_func &nbsp;</span><span class="c5">#
                        return&#259;m noua func&#539;ie</span><span class="c3"><br><br></span><span class="c5">#
                        definirea func&#539;iei originale</span><span class="c3"><br></span><span
                        class="c14">@check</span><span class="c3"><br></span><span class="c0">def</span><span
                        class="c3">&nbsp;</span><span class="c11">print_person</span><span class="c3">(name, age):<br>
                        &nbsp; &nbsp;print(</span><span class="c13">f&quot;Name: {name} &nbsp;Age:
                        {age}&quot;</span><span class="c3">)<br><br></span><span class="c5"># apel&#259;m func&#539;ia
                        original&#259;</span><span class="c3"><br>print_person(</span><span
                        class="c13">&quot;Tom&quot;</span><span class="c3">, </span><span class="c4">38</span><span
                        class="c3">)</span></p>
            </td>
        </tr>
    </table>
    <p class="c6 c8"><span class="c1"></span></p>
    <p class="c2"><span class="c10">Aici, func&#539;ia </span><span class="c10">print_person()</span><span
            class="c10">&nbsp;prime&#537;te doi parametri: </span><span class="c10">name</span><span
            class="c10">&nbsp;(nume) &#537;i </span><span class="c10">age</span><span
            class="c10">&nbsp;(v&acirc;rst&#259;). Acestei func&#539;ii i se aplic&#259; decoratorul </span><span
            class="c10">check</span><span class="c1">.</span></p>
    <p class="c2"><span class="c10">&Icirc;n decoratorul </span><span class="c10">check</span><span class="c10">&nbsp;se
            returneaz&#259; func&#539;ia local&#259; </span><span class="c10">output_func()</span><span class="c10">,
            care prime&#537;te un set de valori sub forma parametrului </span><span class="c10">*args</span><span
            class="c10">&nbsp;- acestea sunt valorile care sunt transmise func&#539;iei originale c&#259;reia i se
            aplic&#259; decoratorul. Adic&#259;, &icirc;n acest caz, </span><span class="c10">*args</span><span
            class="c10">&nbsp;va con&#539;ine valorile parametrilor </span><span class="c10">name</span><span
            class="c10">&nbsp;&#537;i </span><span class="c10">age</span><span class="c1">.</span></p>
    <p class="c6 c8"><span class="c1"></span></p><a id="t.baa6bd171cc7b45302fd4c3249580e9c26f1a195"></a><a id="t.6"></a>
    <table class="c7">
        <tr class="c15">
            <td class="c9" colspan="1" rowspan="1">
                <p class="c6"><span class="c0">def</span><span class="c3">&nbsp;</span><span
                        class="c11">check</span><span class="c3">(input_func):<br> &nbsp; &nbsp;</span><span
                        class="c0">def</span><span class="c3">&nbsp;</span><span class="c11">output_func</span><span
                        class="c3">(*args): &nbsp;</span><span class="c5"># prin *args prelu&#259;m valorile
                        parametrilor func&#539;iei input_func</span><span class="c3"><br> &nbsp; &nbsp; &nbsp;
                        &nbsp;input_func(*args)</span></p>
            </td>
        </tr>
    </table>
    <p class="c6 c8"><span class="c1"></span></p>
    <p class="c2"><span class="c1">Aici pur &#537;i simplu transmitem aceste valori func&#539;iei originale:</span></p>
    <p class="c6 c8"><span class="c1"></span></p><a id="t.45b97d5cf7298acbbd08477327a9287543cf226e"></a><a id="t.7"></a>
    <table class="c7">
        <tr class="c15">
            <td class="c9" colspan="1" rowspan="1">
                <p class="c6"><span class="c3">input_func(*args)</span></p>
            </td>
        </tr>
    </table>
    <p class="c6 c8"><span class="c1"></span></p>
    <p class="c2"><span class="c1">Rezultatul pe consol&#259; va fi:</span></p>
    <p class="c6 c8"><span class="c1"></span></p><a id="t.4c31ffb4f265ff868df19ac711b076b5d97d9fb2"></a><a id="t.8"></a>
    <table class="c7">
        <tr class="c15">
            <td class="c9" colspan="1" rowspan="1">
                <p class="c6"><span class="c3">Name: Tom &nbsp;Age: 38</span></p>
            </td>
        </tr>
    </table>
    <p class="c6 c8"><span class="c1"></span></p>
    <p class="c2"><span class="c10">Dar ce se &icirc;nt&acirc;mpl&#259; dac&#259; &icirc;n func&#539;ia </span><span
            class="c10">print_person</span><span class="c1">&nbsp;va fi transmis&#259; o valoare inacceptabil&#259;, de
            exemplu, o v&acirc;rst&#259; negativ&#259;? Unul dintre avantajele decoratorilor este c&#259; putem verifica
            &#537;i, dac&#259; este necesar, modifica valorile parametrilor. De exemplu:</span></p>
    <p class="c6 c8"><span class="c1"></span></p><a id="t.815e065a84abd15f3da9f0079aa074cc511fbbda"></a><a id="t.9"></a>
    <table class="c7">
        <tr class="c15">
            <td class="c9" colspan="1" rowspan="1">
                <p class="c6"><span class="c5"># definirea func&#539;iei decorator</span><span
                        class="c3"><br></span><span class="c0">def</span><span class="c3">&nbsp;</span><span
                        class="c11">check</span><span class="c3">(input_func):<br> &nbsp; &nbsp;</span><span
                        class="c0">def</span><span class="c3">&nbsp;</span><span class="c11">output_func</span><span
                        class="c3">(*args):<br> &nbsp; &nbsp; &nbsp; &nbsp;name = args[</span><span
                        class="c4">0</span><span class="c3">]<br> &nbsp; &nbsp; &nbsp; &nbsp;age = args[</span><span
                        class="c4">1</span><span class="c3">] &nbsp;</span><span class="c5"># prelu&#259;m valoarea
                        celui de-al doilea parametru</span><span class="c3"><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span
                        class="c0">if</span><span class="c3">&nbsp;age &lt; </span><span class="c4">0</span><span
                        class="c3">: age = </span><span class="c4">1</span><span class="c3">&nbsp; </span><span
                        class="c5"># dac&#259; v&acirc;rsta este negativ&#259;, o modific&#259;m la 1</span><span
                        class="c3"><br> &nbsp; &nbsp; &nbsp; &nbsp;input_func(name, age) &nbsp;</span><span class="c5">#
                        transmitem func&#539;iei valorile parametrilor</span><span class="c3"><br> &nbsp;
                        &nbsp;</span><span class="c0">return</span><span
                        class="c3">&nbsp;output_func<br><br></span><span class="c5"># definirea func&#539;iei
                        originale</span><span class="c3"><br></span><span class="c14">@check</span><span
                        class="c3"><br></span><span class="c0">def</span><span class="c3">&nbsp;</span><span
                        class="c11">print_person</span><span class="c3">(name, age):<br> &nbsp; &nbsp;print(</span><span
                        class="c13">f&quot;Name: {name} &nbsp;Age: {age}&quot;</span><span
                        class="c3">)<br><br></span><span class="c5"># apel&#259;m func&#539;ia
                        original&#259;</span><span class="c3"><br>print_person(</span><span
                        class="c13">&quot;Tom&quot;</span><span class="c3">, </span><span class="c4">38</span><span
                        class="c3">)<br>print_person(</span><span class="c13">&quot;Bob&quot;</span><span class="c3">,
                    </span><span class="c4">-5</span><span class="c3">)</span></p>
            </td>
        </tr>
    </table>
    <p class="c6 c8"><span class="c1"></span></p>
    <p class="c2"><span class="c10 c16">args</span><span class="c10 c16">&nbsp;</span><span class="c1">reprezint&#259;
            un set de valori, &#537;i, folosind indicii, putem prelua valorile parametrilor pe pozi&#539;ii &#537;i
            putem face ceva cu ele. Astfel, aici, dac&#259; valoarea v&acirc;rstei este mai mic&#259; de 0, o set&#259;m
            la 1. Apoi transmitem aceste valori la apelul func&#539;iei. Rezultatul pe consol&#259; va fi:</span></p>
    <p class="c6 c8"><span class="c1"></span></p><a id="t.31ef348b955b720e477fcb7aad87f19b1674651a"></a><a
        id="t.10"></a>
    <table class="c7">
        <tr class="c15">
            <td class="c9" colspan="1" rowspan="1">
                <p class="c6"><span class="c3">Name: Tom &nbsp;Age: 38<br>Name: Bob &nbsp;Age: 1</span></p>
            </td>
        </tr>
    </table>
    <p class="c6 c8"><span class="c1"></span></p>
    <p class="c17 c20"><span class="c1"></span></p>
    <p class="c17"><span class="c12">Preluarea rezultatului func&#539;iei</span></p>
    <p class="c2"><span class="c1">Similar, putem prelua rezultatul func&#539;iei &#537;i, dac&#259; este necesar,
            s&#259;-l modific&#259;m:</span></p>
    <p class="c6 c8"><span class="c1"></span></p><a id="t.7d3b8a3dd471b84a33ca215e2fc7917f21c91375"></a><a
        id="t.11"></a>
    <table class="c7">
        <tr class="c15">
            <td class="c9" colspan="1" rowspan="1">
                <p class="c6"><span class="c5"># definirea func&#539;iei decorator</span><span
                        class="c3"><br></span><span class="c0">def</span><span class="c3">&nbsp;</span><span
                        class="c11">check</span><span class="c3">(input_func):<br> &nbsp; &nbsp;</span><span
                        class="c0">def</span><span class="c3">&nbsp;</span><span class="c11">output_func</span><span
                        class="c3">(*args):<br> &nbsp; &nbsp; &nbsp; &nbsp;result = input_func(*args) &nbsp;</span><span
                        class="c5"># transmitem func&#539;iei valorile parametrilor</span><span class="c3"><br> &nbsp;
                        &nbsp; &nbsp; &nbsp;</span><span class="c0">if</span><span class="c3">&nbsp;result &lt;
                    </span><span class="c4">0</span><span class="c3">: result = </span><span class="c4">0</span><span
                        class="c3">&nbsp; </span><span class="c5"># dac&#259; rezultatul func&#539;iei este mai mic de
                        zero, return&#259;m 0</span><span class="c3"><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span
                        class="c0">return</span><span class="c3">&nbsp;result<br> &nbsp; &nbsp;</span><span
                        class="c0">return</span><span class="c3">&nbsp;output_func<br><br></span><span class="c5">#
                        definirea func&#539;iei originale</span><span class="c3"><br></span><span
                        class="c14">@check</span><span class="c3"><br></span><span class="c0">def</span><span
                        class="c3">&nbsp;</span><span class="c11">sum</span><span class="c3">(a, b):<br> &nbsp;
                        &nbsp;</span><span class="c0">return</span><span class="c3">&nbsp;a + b<br><br></span><span
                        class="c5"># apel&#259;m func&#539;ia original&#259;</span><span class="c3"><br>result1 =
                        sum(</span><span class="c4">10</span><span class="c3">, </span><span class="c4">20</span><span
                        class="c3">)<br>print(result1) &nbsp;</span><span class="c5"># 30</span><span
                        class="c3"><br><br>result2 = sum(</span><span class="c4">10</span><span class="c3">,
                    </span><span class="c4">-20</span><span class="c3">)<br>print(result2) &nbsp;</span><span
                        class="c5"># 0</span></p>
            </td>
        </tr>
    </table>
    <p class="c6 c8"><span class="c1"></span></p>
    <p class="c2"><span class="c10">Aici este definit&#259; func&#539;ia </span><span class="c10">sum()</span><span
            class="c10">, care returneaz&#259; suma numerelor. &Icirc;n decoratorul </span><span
            class="c10">check</span><span class="c1">, verific&#259;m rezultatul func&#539;iei &#537;i, pentru
            simplitate, dac&#259; acesta este mai mic de zero, return&#259;m 0.</span></p>
    <p class="c2"><span class="c1">Rezultatul afi&#537;&#259;rii pe consol&#259; va fi:</span></p>
    <p class="c6 c8"><span class="c1"></span></p><a id="t.417d0b6b710d8e26daa25a2eab9f5d064c89d9e5"></a><a
        id="t.12"></a>
    <table class="c7">
        <tr class="c15">
            <td class="c9" colspan="1" rowspan="1">
                <p class="c6"><span class="c3">30<br>0</span></p>
            </td>
        </tr>
    </table>
    <p class="c6 c8"><span class="c1"></span></p>
</body>

</html>