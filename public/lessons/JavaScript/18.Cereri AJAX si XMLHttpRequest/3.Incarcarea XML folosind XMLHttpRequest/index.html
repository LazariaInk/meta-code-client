<html>

<head>
    <meta content="text/html; charset=UTF-8" http-equiv="content-type">
    <link rel="stylesheet" type="text/css" href="/lessons/styles.css">
</head>

<body class="c23 doc-content">
    <h1 class="c11 c9 c22">Încărcarea XML folosind XMLHttpRequest. </h1>
    <p class="c1"><span class="c7 c9"></span></p>
    <p class="c11"><span class="c3">Formatul XML reprezint&#259; un format popular de stocare &#537;i transmitere a
            datelor. S&#259; examin&#259;m cum s&#259; &icirc;nc&#259;rc&#259;m un document XML pe o pagin&#259; web
            folosind o cerere ajax.</span></p>
    <p class="c1"><span class="c3"></span></p>
    <p class="c11"><span class="c3">Ca server, la fel ca &icirc;n articolul anterior, vom utiliza Node.js ca cea mai
            simpl&#259; op&#539;iune, dar, desigur, dac&#259; dori&#539;i, pute&#539;i utiliza orice alt&#259;
            tehnologie de nivel server sau un server web.</span></p>
    <p class="c1"><span class="c3"></span></p>
    <p class="c11"><span class="c3">Astfel, s&#259; definim pentru proiect un folder pe discul dur, &icirc;n care vom
            crea trei fi&#537;iere:</span></p>
    <p class="c1"><span class="c3"></span></p>
    <ul class="c17 lst-kix_vnc5e32kj9kb-0 start">
        <li class="c11 c20 li-bullet-0"><span class="c7">index.html</span><span class="c3">: pagina principal&#259; a
                aplica&#539;iei</span></li>
    </ul>
    <p class="c1 c24"><span class="c3"></span></p>
    <ul class="c17 lst-kix_vnc5e32kj9kb-0">
        <li class="c11 c20 li-bullet-0"><span class="c7">users.xml</span><span class="c3">: fi&#537;ierul XML cu
                date</span></li>
    </ul>
    <p class="c1 c24"><span class="c3"></span></p>
    <ul class="c17 lst-kix_vnc5e32kj9kb-0">
        <li class="c11 c20 li-bullet-0"><span class="c7">app.js</span><span class="c3">: fi&#537;ierul aplica&#539;iei
                server, care va utiliza Node.js</span></li>
    </ul>
    <p class="c1"><span class="c3"></span></p>
    <p class="c11"><span class="c2">Definirea datelor.</span></p>
    <p class="c1"><span class="c9 c7"></span></p>
    <p class="c11"><span class="c14">Fi&#537;ierul </span><span class="c7">users.xml</span><span class="c3">&nbsp;va
            reprezenta datele &icirc;nc&#259;rcate &#537;i s&#259; aib&#259; urm&#259;torul con&#539;inut:</span></p>
    <p class="c1"><span class="c3"></span></p><a id="t.8a913c0a1b42cdd577d1125a2e7466d37aa670c1"></a><a id="t.0"></a>
    <table class="c18">
        <tr class="c21">
            <td class="c16" colspan="1" rowspan="1">
                <p class="c13"><span class="c0">&lt;?xml version=</span><span class="c5">&quot;1.0&quot;</span><span
                        class="c0">&nbsp;encoding=</span><span class="c5">&quot;UTF-8&quot;</span><span
                        class="c0">&nbsp;?&gt; <br></span><span class="c8">&lt;</span><span
                        class="c7 c10">users</span><span class="c8">&gt;</span><span class="c0"><br> &nbsp;
                        &nbsp;</span><span class="c8">&lt;</span><span class="c7 c10">user</span><span
                        class="c8">&nbsp;name=</span><span class="c5">&quot;Tom&quot;</span><span
                        class="c8">&nbsp;age=</span><span class="c5">&quot;39&quot;</span><span
                        class="c8">&gt;</span><span class="c0"><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span
                        class="c8">&lt;</span><span class="c7 c10">contacts</span><span class="c8">&gt;</span><span
                        class="c0"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span
                        class="c8">&lt;</span><span class="c7 c10">email</span><span class="c8">&gt;</span><span
                        class="c0">tom@smail.com</span><span class="c8">&lt;/</span><span
                        class="c7 c10">email</span><span class="c8">&gt;</span><span class="c0"><br> &nbsp; &nbsp;
                        &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c8">&lt;</span><span
                        class="c7 c10">phone</span><span class="c8">&gt;</span><span class="c0">+1234567890</span><span
                        class="c8">&lt;/</span><span class="c7 c10">phone</span><span class="c8">&gt;</span><span
                        class="c0"><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c8">&lt;/</span><span
                        class="c7 c10">contacts</span><span class="c8">&gt;</span><span class="c0"><br> &nbsp;
                        &nbsp;</span><span class="c8">&lt;/</span><span class="c7 c10">user</span><span
                        class="c8">&gt;</span><span class="c0"><br> &nbsp; &nbsp;</span><span
                        class="c8">&lt;</span><span class="c7 c10">user</span><span class="c8">&nbsp;name=</span><span
                        class="c5">&quot;Bob&quot;</span><span class="c8">&nbsp;age=</span><span
                        class="c5">&quot;43&quot;</span><span class="c8">&gt;</span><span class="c0"><br> &nbsp; &nbsp;
                        &nbsp; &nbsp;</span><span class="c8">&lt;</span><span class="c7 c10">contacts</span><span
                        class="c8">&gt;</span><span class="c0"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;
                        &nbsp;</span><span class="c8">&lt;</span><span class="c7 c10">email</span><span
                        class="c8">&gt;</span><span class="c0">bob@tmail.com</span><span class="c8">&lt;/</span><span
                        class="c7 c10">email</span><span class="c8">&gt;</span><span class="c0"><br> &nbsp; &nbsp;
                        &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c8">&lt;</span><span
                        class="c7 c10">phone</span><span class="c8">&gt;</span><span class="c0">+1334567181</span><span
                        class="c8">&lt;/</span><span class="c7 c10">phone</span><span class="c8">&gt;</span><span
                        class="c0"><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c8">&lt;/</span><span
                        class="c7 c10">contacts</span><span class="c8">&gt;</span><span class="c0"><br> &nbsp;
                        &nbsp;</span><span class="c8">&lt;/</span><span class="c7 c10">user</span><span
                        class="c8">&gt;</span><span class="c0"><br> &nbsp; &nbsp;</span><span
                        class="c8">&lt;</span><span class="c7 c10">user</span><span class="c8">&nbsp;name=</span><span
                        class="c5">&quot;Sam&quot;</span><span class="c8">&nbsp;age=</span><span
                        class="c5">&quot;28&quot;</span><span class="c8">&gt;</span><span class="c0"><br> &nbsp; &nbsp;
                        &nbsp; &nbsp;</span><span class="c8">&lt;</span><span class="c7 c10">contacts</span><span
                        class="c8">&gt;</span><span class="c0"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;
                        &nbsp;</span><span class="c8">&lt;</span><span class="c7 c10">email</span><span
                        class="c8">&gt;</span><span class="c0">sam@xmail.com</span><span class="c8">&lt;/</span><span
                        class="c7 c10">email</span><span class="c8">&gt;</span><span class="c0"><br> &nbsp; &nbsp;
                        &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c8">&lt;</span><span
                        class="c7 c10">phone</span><span class="c8">&gt;</span><span class="c0">+1434567782</span><span
                        class="c8">&lt;/</span><span class="c7 c10">phone</span><span class="c8">&gt;</span><span
                        class="c0"><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c8">&lt;/</span><span
                        class="c7 c10">contacts</span><span class="c8">&gt;</span><span class="c0"><br> &nbsp;
                        &nbsp;</span><span class="c8">&lt;/</span><span class="c7 c10">user</span><span
                        class="c8">&gt;</span><span class="c0"><br></span><span class="c8">&lt;/</span><span
                        class="c7 c10">users</span><span class="c8">&gt;</span></p>
            </td>
        </tr>
    </table>
    <p class="c1"><span class="c3"></span></p>
    <p class="c11"><span class="c14">Aici elementul </span><span class="c14 c15">users </span><span
            class="c14">reprezint&#259; un set de utilizatori, fiecare dintre ace&#537;tia fiind reprezentat de
            elementul user. Pentru fiecare astfel de element sunt definite dou&#259; atribute: </span><span
            class="c14 c15">name </span><span class="c14">(numele utilizatorului) &#537;i </span><span
            class="c14 c15">age </span><span class="c3">(v&acirc;rsta utilizatorului). &#536;i, de asemenea, elementul
            user are un element &icirc;ncorporat contacts, care reprezint&#259; datele de contact ale utilizatorului sub
            forma elementelor &icirc;ncorporate phone &#537;i email.</span></p>
    <p class="c1"><span class="c3"></span></p>
    <p class="c11"><span class="c2">Definirea serverului.</span></p>
    <p class="c1"><span class="c9 c7"></span></p>
    <p class="c11"><span class="c14">Fi&#537;ierul </span><span class="c7">app.js</span><span class="c3">&nbsp;va
            reprezenta codul serverului Node.js. S&#259; definim &icirc;n acesta urm&#259;torul cod:</span></p>
    <p class="c1"><span class="c3"></span></p><a id="t.dd632ebbcc9fe77272917b547ca8f0d9576db84b"></a><a id="t.1"></a>
    <table class="c18">
        <tr class="c21">
            <td class="c16" colspan="1" rowspan="1">
                <p class="c13"><span class="c4">const</span><span class="c0">&nbsp;http = </span><span
                        class="c6">require</span><span class="c0">(</span><span class="c5">&quot;http&quot;</span><span
                        class="c0">);<br></span><span class="c4">const</span><span class="c0">&nbsp;fs = </span><span
                        class="c6">require</span><span class="c0">(</span><span class="c5">&quot;fs&quot;</span><span
                        class="c0">);<br> &nbsp; &nbsp; <br>http.createServer((request, response)=&gt;{<br> &nbsp;
                        &nbsp;</span><span class="c12">// dac&#259; sunt solicitate datele xml</span><span
                        class="c0"><br> &nbsp; &nbsp;</span><span class="c4">if</span><span class="c0">(request.url ==
                    </span><span class="c5">&quot;/data&quot;</span><span class="c0">){<br> &nbsp; &nbsp; &nbsp;
                        &nbsp;fs.readFile(</span><span class="c5">&quot;users.xml&quot;</span><span class="c0">, (_,
                        data) =&gt; response.end(data));<br> &nbsp; &nbsp;}<br> &nbsp; &nbsp;</span><span
                        class="c4">else</span><span class="c0">{<br> &nbsp; &nbsp; &nbsp; &nbsp;fs.readFile(</span><span
                        class="c5">&quot;index.html&quot;</span><span class="c0">, (_, data) =&gt;
                        response.end(data));<br> &nbsp; &nbsp;}<br>}).listen(</span><span
                        class="c14 c19">3000</span><span class="c0">, ()=&gt;</span><span class="c6">console</span><span
                        class="c0">.log(</span><span class="c5">&quot;Serverul a fost lansat la adresa
                        http://localhost:3000&quot;</span><span class="c0">));</span></p>
            </td>
        </tr>
    </table>
    <p class="c1"><span class="c3"></span></p>
    <p class="c11"><span class="c3">S&#259; trecem rapid prin cod. La &icirc;nceput, se conecteaz&#259; pachetele cu
            func&#539;ionalitatea pe care inten&#539;ion&#259;m s&#259; o utiliz&#259;m:</span></p>
    <p class="c1"><span class="c3"></span></p><a id="t.61fb7f0bf5b4683a9ae2a81a83572099d3599f08"></a><a id="t.2"></a>
    <table class="c18">
        <tr class="c21">
            <td class="c16" colspan="1" rowspan="1">
                <p class="c13"><span class="c4">const</span><span class="c0">&nbsp;http = </span><span
                        class="c6">require</span><span class="c0">(</span><span class="c5">&quot;http&quot;</span><span
                        class="c0">); &nbsp; </span><span class="c12">// pentru prelucrarea cererilor de
                        intrare</span><span class="c0"><br></span><span class="c4">const</span><span class="c0">&nbsp;fs
                        = </span><span class="c6">require</span><span class="c0">(</span><span
                        class="c5">&quot;fs&quot;</span><span class="c0">); &nbsp; &nbsp; &nbsp; </span><span
                        class="c12">// pentru citirea fi&#537;ierelor de pe discul dur</span></p>
            </td>
        </tr>
    </table>
    <p class="c1"><span class="c3"></span></p>
    <p class="c11"><span class="c14">Pentru crearea serverului se folose&#537;te func&#539;ia</span><span
            class="c7">&nbsp;http.createServer()</span><span class="c14">. &Icirc;n aceast&#259; func&#539;ie se
            transmite o func&#539;ie-handler, care este apelat&#259; de fiecare dat&#259; c&acirc;nd la server
            sose&#537;te o solicitare. Aceast&#259; func&#539;ie are doi parametri: </span><span class="c14 c15">request
        </span><span class="c14">(con&#539;ine datele solicit&#259;rii) &#537;i </span><span class="c14 c15">response
        </span><span class="c3">(gestioneaz&#259; trimiterea r&#259;spunsului).</span></p>
    <p class="c1"><span class="c3"></span></p>
    <p class="c11"><span class="c14">&Icirc;n func&#539;ia-handler, folosind proprietatea </span><span
            class="c14 c15">request.url</span><span class="c14">&nbsp;putem ob&#539;ine calea resursei c&#259;tre care a
            fost trimis&#259; solicitarea. Astfel, &icirc;n acest caz, dac&#259; a venit o solicitare pe calea
            &quot;/data&quot;, atunci trimitem </span><span class="c7">users.xml</span><span class="c3">:</span></p>
    <p class="c1"><span class="c3"></span></p><a id="t.92d8a6feaeb424f73637cd570612155ce5a0bed0"></a><a id="t.3"></a>
    <table class="c18">
        <tr class="c21">
            <td class="c16" colspan="1" rowspan="1">
                <p class="c13"><span class="c4">if</span><span class="c0">(request.url == </span><span
                        class="c5">&quot;/data&quot;</span><span class="c0">){<br> &nbsp; &nbsp;fs.readFile(</span><span
                        class="c5">&quot;users.xml&quot;</span><span class="c0">, (_, data) =&gt;
                        response.end(data));<br>}</span></p>
            </td>
        </tr>
    </table>
    <p class="c1"><span class="c3"></span></p>
    <p class="c11"><span class="c14">Pentru citirea fi&#537;ierului se utilizeaz&#259; func&#539;ia </span><span
            class="c7">fs.readFile</span><span class="c3">. Primul parametru al func&#539;iei - adresa fi&#537;ierului
            (&icirc;n acest caz se presupune c&#259; fi&#537;ierul se afl&#259; &icirc;n acela&#537;i folder cu
            fi&#537;ierul serverului server.js). Al doilea parametru - o func&#539;ie care este apelat&#259; dup&#259;
            citirea fi&#537;ierului &#537;i prime&#537;te con&#539;inutul s&#259;u prin al doilea s&#259;u parametru
            data.</span></p>
    <p class="c1"><span class="c3"></span></p>
    <p class="c11"><span class="c14">Pentru toate celelalte solicit&#259;ri se trimite &icirc;n r&#259;spuns
            fi&#537;ierul </span><span class="c7">index.html</span><span class="c3">:</span></p>
    <p class="c1"><span class="c3"></span></p><a id="t.ec126cff677f7f76be73ddf9ee4450cf75ff6bff"></a><a id="t.4"></a>
    <table class="c18">
        <tr class="c21">
            <td class="c16" colspan="1" rowspan="1">
                <p class="c13"><span class="c4">else</span><span class="c0">{<br> &nbsp; &nbsp;fs.readFile(</span><span
                        class="c5">&quot;index.html&quot;</span><span class="c0">, (_, data) =&gt;
                        response.end(data));<br>}</span></p>
            </td>
        </tr>
    </table>
    <p class="c1"><span class="c3"></span></p>
    <p class="c11"><span class="c14">La sf&acirc;r&#537;it, cu ajutorul func&#539;iei</span><span
            class="c7">&nbsp;listen()</span><span class="c3">&nbsp;lans&#259;m serverul web pe portul 3000. Adic&#259;
            serverul va fi lansat la adresa http://localhost:3000/</span></p>
    <p class="c1"><span class="c3"></span></p>
    <p class="c11"><span class="c2">&Icirc;nc&#259;rcarea XML pe pagina web.</span></p>
    <p class="c1"><span class="c9 c7"></span></p>
    <p class="c11"><span class="c14">Pentru a ob&#539;ine fi&#537;ierul &quot;users.xml&quot; de pe server, s&#259;
            definim &icirc;n fi&#537;ierul </span><span class="c7">index.html </span><span class="c3">urm&#259;torul
            cod:</span></p>
    <p class="c1"><span class="c3"></span></p><a id="t.e5500e6b78933e90d521c47e2cfcc913608217d6"></a><a id="t.5"></a>
    <table class="c18">
        <tr class="c21">
            <td class="c16" colspan="1" rowspan="1">
                <p class="c13"><span class="c0">&lt;!DOCTYPE html&gt;<br></span><span class="c8">&lt;</span><span
                        class="c7 c10">html</span><span class="c8">&gt;</span><span class="c0"><br></span><span
                        class="c8">&lt;</span><span class="c7 c10">head</span><span class="c8">&gt;</span><span
                        class="c0"><br> &nbsp; &nbsp;</span><span class="c8">&lt;</span><span
                        class="c7 c10">meta</span><span class="c8">&nbsp;charset=</span><span
                        class="c5">&quot;utf-8&quot;</span><span class="c8">&nbsp;/&gt;</span><span class="c0"><br>
                        &nbsp; &nbsp;</span><span class="c8">&lt;</span><span class="c7 c10">title</span><span
                        class="c8">&gt;</span><span class="c0">FDC.COM</span><span class="c8">&lt;/</span><span
                        class="c7 c10">title</span><span class="c8">&gt;</span><span class="c0"><br></span><span
                        class="c8">&lt;/</span><span class="c7 c10">head</span><span class="c8">&gt;</span><span
                        class="c0"><br></span><span class="c8">&lt;</span><span class="c7 c10">body</span><span
                        class="c8">&gt;</span><span class="c0"><br></span><span class="c8">&lt;</span><span
                        class="c7 c10">script</span><span class="c8">&gt;</span><span class="c0"><br></span><span
                        class="c4">const</span><span class="c0">&nbsp;xhr = </span><span class="c4">new</span><span
                        class="c0">&nbsp;XMLHttpRequest();<br>xhr.onload = () =&gt; {<br> &nbsp; &nbsp;</span><span
                        class="c4">if</span><span class="c0">&nbsp;(xhr.status == </span><span
                        class="c14 c19">200</span><span class="c0">) {<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span
                        class="c4">const</span><span class="c0">&nbsp;xml = xhr.responseXML;<br> &nbsp; &nbsp; &nbsp;
                        &nbsp;</span><span class="c6">console</span><span class="c0">.log(xml);<br> &nbsp;
                        &nbsp;}<br>};<br>xhr.open(</span><span class="c5">&quot;GET&quot;</span><span class="c0">,
                    </span><span class="c5">&quot;/data&quot;</span><span class="c0">); &nbsp; &nbsp; &nbsp; &nbsp;
                        &nbsp; &nbsp; &nbsp;</span><span class="c12">// cerere GET c&#259;tre /data</span><span
                        class="c0"><br>xhr.responseType = </span><span class="c5">&quot;document&quot;</span><span
                        class="c0">; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c12">//
                        stabilim tipul de r&#259;spuns</span><span class="c0"><br>xhr.setRequestHeader(</span><span
                        class="c5">&quot;Accept&quot;</span><span class="c0">, </span><span
                        class="c5">&quot;text/xml&quot;</span><span class="c0">); &nbsp; &nbsp;</span><span
                        class="c12">// accept&#259;m doar xml</span><span class="c0"><br>xhr.send(); &nbsp; &nbsp;
                    </span><span class="c12">// execut&#259;m solicitarea</span><span class="c0"><br></span><span
                        class="c8">&lt;/</span><span class="c7 c10">script</span><span class="c8">&gt;</span><span
                        class="c0"><br></span><span class="c8">&lt;/</span><span class="c7 c10">body</span><span
                        class="c8">&gt;</span><span class="c0"><br></span><span class="c8">&lt;/</span><span
                        class="c7 c10">html</span><span class="c8">&gt;</span></p>
            </td>
        </tr>
    </table>
    <p class="c1"><span class="c3"></span></p>
    <p class="c11"><span class="c14">Pentru a ob&#539;ine datele se trimite o solicitare la adresa &quot;/data&quot;.
            Pentru ca datele ob&#539;inute s&#259; fie automat interpretate ca un document XML, propriet&#259;&#539;ii
        </span><span class="c14 c15">responseType </span><span class="c3">i se atribuie valoarea
            &quot;document&quot;.</span></p>
    <p class="c1"><span class="c3"></span></p><a id="t.31887480e576a83f01a0d6f8b31056eb5463486f"></a><a id="t.6"></a>
    <table class="c18">
        <tr class="c21">
            <td class="c16" colspan="1" rowspan="1">
                <p class="c13"><span class="c0">xhr.responseType = </span><span
                        class="c5">&quot;document&quot;</span><span class="c0">;</span></p>
            </td>
        </tr>
    </table>
    <p class="c1"><span class="c3"></span></p>
    <p class="c11"><span class="c3">&Icirc;n plus, ar trebui s&#259; set&#259;m pentru antetul Accept valoarea
            &quot;text/xml&quot; sau &quot;application/xml&quot;, pentru a accepta date doar &icirc;n format XML:</span>
    </p>
    <p class="c1"><span class="c3"></span></p><a id="t.7543726e0b95d2aa08a0d94c112db39125615c54"></a><a id="t.7"></a>
    <table class="c18">
        <tr class="c21">
            <td class="c16" colspan="1" rowspan="1">
                <p class="c13"><span class="c0">xhr.setRequestHeader(</span><span
                        class="c5">&quot;Accept&quot;</span><span class="c0">, </span><span
                        class="c5">&quot;text/xml&quot;</span><span class="c0">);</span></p>
            </td>
        </tr>
    </table>
    <p class="c1"><span class="c3"></span></p>
    <p class="c11"><span class="c14">&Icirc;n handlerul evenimentului onload, documentul XML este disponibil prin
            proprietatea responseXML sub forma unui obiect de tip </span><span class="c7">Document</span><span
            class="c3">, care &icirc;n acest caz este pur &#537;i simplu afi&#537;at &icirc;n consol&#259;:</span></p>
    <p class="c1"><span class="c3"></span></p><a id="t.ff6d5e39df713a17bc3fe42ce78748e7719544e2"></a><a id="t.8"></a>
    <table class="c18">
        <tr class="c21">
            <td class="c16" colspan="1" rowspan="1">
                <p class="c13"><span class="c0">xhr.onload = () =&gt; {<br> &nbsp; &nbsp;</span><span
                        class="c4">if</span><span class="c0">&nbsp;(xhr.status == </span><span
                        class="c14 c19">200</span><span class="c0">) {<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span
                        class="c4">const</span><span class="c0">&nbsp;xml = xhr.responseXML;<br> &nbsp; &nbsp; &nbsp;
                        &nbsp;</span><span class="c6">console</span><span class="c0">.log(xml);<br> &nbsp;
                        &nbsp;}<br>};</span></p>
            </td>
        </tr>
    </table>
    <p class="c1"><span class="c3"></span></p>
    <p class="c11"><span class="c14">Dup&#259; definirea tuturor fi&#537;ierelor, &icirc;n consol&#259; ne vom deplasa
            la folderul serverului folosind comanda cd &#537;i vom lansa serverul folosind comanda </span><span
            class="c9 c7">node app.js </span></p>
    <p class="c1"><span class="c3"></span></p>
    <p class="c11"><span
            style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 494.00px; height: 56.00px;"><img
                alt="" src="images/image1.png"
                style="width: 494.00px; height: 56.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);"
                title=""></span></p>
    <p class="c1"><span class="c3"></span></p>
    <p class="c11"><span class="c3">Dup&#259; lansarea serverului, putem accesa &icirc;n browser adresa
            http://localhost:3000, unde ne va fi afi&#537;at&#259; pagina, &icirc;n codul JavaScript al c&#259;reia va
            avea loc o solicitare la adresa &quot;/data&quot;. Serverul va trimite &icirc;n r&#259;spuns con&#539;inutul
            fi&#537;ierului users.xml, iar consola browserului va afi&#537;a acest con&#539;inut:</span></p>
    <p class="c1"><span class="c3"></span></p>
    <p class="c11"><span
            style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 624.00px; height: 208.00px;"><img
                alt="" src="images/image3.png"
                style="width: 624.00px; height: 208.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);"
                title=""></span></p>
    <p class="c1"><span class="c3"></span></p>
    <p class="c1"><span class="c3"></span></p>
    <p class="c11"><span class="c2">Afi&#537;area datelor din documentul XML pe pagina.</span></p>
    <p class="c1"><span class="c9 c7"></span></p>
    <p class="c11"><span class="c14">Acum s&#259; complic&#259;m sarcina - presupunem c&#259; trebuie s&#259;
            afi&#537;&#259;m datele despre utilizatori din XML &icirc;ntr-un tabel pe pagina web. Pentru aceasta,
            s&#259; modific&#259;m codul </span><span class="c7">index.html</span><span class="c3">&nbsp;&icirc;n modul
            urm&#259;tor:</span></p>
    <p class="c1"><span class="c3"></span></p><a id="t.f59578c16c121f79b89dbae9ac03289b5832e851"></a><a id="t.9"></a>
    <table class="c18">
        <tr class="c21">
            <td class="c16" colspan="1" rowspan="1">
                <p class="c13"><span class="c0">&lt;!DOCTYPE html&gt;<br></span><span class="c8">&lt;</span><span
                        class="c7 c10">html</span><span class="c8">&gt;</span><span class="c0"><br></span><span
                        class="c8">&lt;</span><span class="c7 c10">head</span><span class="c8">&gt;</span><span
                        class="c0"><br> &nbsp; &nbsp;</span><span class="c8">&lt;</span><span
                        class="c7 c10">meta</span><span class="c8">&nbsp;charset=</span><span
                        class="c5">&quot;utf-8&quot;</span><span class="c8">&nbsp;/&gt;</span><span class="c0"><br>
                        &nbsp; &nbsp;</span><span class="c8">&lt;</span><span class="c7 c10">title</span><span
                        class="c8">&gt;</span><span class="c0">FDC.COM</span><span class="c8">&lt;/</span><span
                        class="c7 c10">title</span><span class="c8">&gt;</span><span class="c0"><br></span><span
                        class="c8">&lt;/</span><span class="c7 c10">head</span><span class="c8">&gt;</span><span
                        class="c0"><br></span><span class="c8">&lt;</span><span class="c7 c10">body</span><span
                        class="c8">&gt;</span><span class="c0"><br></span><span class="c8">&lt;</span><span
                        class="c7 c10">div</span><span class="c8">&nbsp;id=</span><span
                        class="c5">&quot;content&quot;</span><span class="c8">&gt;&lt;/</span><span
                        class="c7 c10">div</span><span class="c8">&gt;</span><span class="c0"><br></span><span
                        class="c8">&lt;</span><span class="c7 c10">script</span><span class="c8">&gt;</span><span
                        class="c0"><br></span><span class="c4">const</span><span class="c0">&nbsp;contentDiv =
                    </span><span class="c6">document</span><span class="c0">.getElementById(</span><span
                        class="c5">&quot;content&quot;</span><span class="c0">);<br><br></span><span
                        class="c4">const</span><span class="c0">&nbsp;xhr = </span><span class="c4">new</span><span
                        class="c0">&nbsp;XMLHttpRequest();<br>xhr.onload = () =&gt; {<br> &nbsp; &nbsp;</span><span
                        class="c4">if</span><span class="c0">&nbsp;(xhr.status == </span><span
                        class="c14 c19">200</span><span class="c0">) {<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span
                        class="c4">const</span><span class="c0">&nbsp;xmlDoc = xhr.responseXML;<br> &nbsp; &nbsp; &nbsp;
                        &nbsp;</span><span class="c4">const</span><span class="c0">&nbsp;table = createTable(); &nbsp;
                        &nbsp; &nbsp;<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c12">// select&#259;m toate
                        elementele user &nbsp; &nbsp; </span><span class="c0"><br> &nbsp; &nbsp; &nbsp;
                        &nbsp;</span><span class="c4">const</span><span class="c0">&nbsp;users =
                        xmlDoc.getElementsByTagName(</span><span class="c5">&quot;user&quot;</span><span class="c0">);
                        &nbsp; &nbsp; &nbsp;<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c4">for</span><span
                        class="c0">&nbsp;(</span><span class="c4">let</span><span class="c0">&nbsp;i = </span><span
                        class="c14 c19">0</span><span class="c0">; i &lt; users.length; i++) { <br> &nbsp; &nbsp; &nbsp;
                        &nbsp; &nbsp; &nbsp;</span><span class="c4">const</span><span class="c0">&nbsp;user = users[i];
                        &nbsp; &nbsp; &nbsp; &nbsp;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span
                        class="c4">const</span><span class="c0">&nbsp;userName = user.getAttribute(</span><span
                        class="c5">&quot;name&quot;</span><span class="c0">); <br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;
                        &nbsp;</span><span class="c4">const</span><span class="c0">&nbsp;userAge =
                        user.getAttribute(</span><span class="c5">&quot;age&quot;</span><span class="c0">); <br> &nbsp;
                        &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c4">const</span><span
                        class="c0">&nbsp;contact = user.querySelector(</span><span class="c5">&quot;contacts
                        email&quot;</span><span class="c0">).textContent;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;
                        &nbsp;</span><span class="c4">const</span><span class="c0">&nbsp;row =
                        createRow(userName,<br><br> userAge, contact); &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br>
                        &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;table.appendChild(row); &nbsp; &nbsp; &nbsp; &nbsp;<br>
                        &nbsp; &nbsp; &nbsp; &nbsp;} &nbsp; &nbsp; &nbsp;<br> &nbsp; &nbsp; &nbsp;
                        &nbsp;contentDiv.appendChild(table);<br> &nbsp; &nbsp;}<br>};<br>xhr.open(</span><span
                        class="c5">&quot;GET&quot;</span><span class="c0">, </span><span
                        class="c5">&quot;/data&quot;</span><span class="c0">);<br>xhr.responseType = </span><span
                        class="c5">&quot;document&quot;</span><span class="c0">; <br>xhr.setRequestHeader(</span><span
                        class="c5">&quot;Accept&quot;</span><span class="c0">, </span><span
                        class="c5">&quot;text/xml&quot;</span><span class="c0">);<br>xhr.send();<br><br></span><span
                        class="c12">// cre&#259;m un tabel</span><span class="c0"><br></span><span
                        class="c4">function</span><span class="c0">&nbsp;</span><span class="c6">createTable</span><span
                        class="c0">() { &nbsp;<br> &nbsp; &nbsp;</span><span class="c4">const</span><span
                        class="c0">&nbsp;table = </span><span class="c6">document</span><span
                        class="c0">.createElement(</span><span class="c5">&quot;table&quot;</span><span class="c0">);
                        &nbsp; <br> &nbsp; &nbsp;</span><span class="c4">const</span><span class="c0">&nbsp;headerRow =
                    </span><span class="c6">document</span><span class="c0">.createElement(</span><span
                        class="c5">&quot;tr&quot;</span><span class="c0">); &nbsp;<br> &nbsp; &nbsp;</span><span
                        class="c4">const</span><span class="c0">&nbsp;nameColumnHeader = </span><span
                        class="c6">document</span><span class="c0">.createElement(</span><span
                        class="c5">&quot;th&quot;</span><span class="c0">); &nbsp;<br> &nbsp; &nbsp;</span><span
                        class="c4">const</span><span class="c0">&nbsp;ageColumnHeader = </span><span
                        class="c6">document</span><span class="c0">.createElement(</span><span
                        class="c5">&quot;th&quot;</span><span class="c0">); &nbsp;<br> &nbsp; &nbsp;</span><span
                        class="c4">const</span><span class="c0">&nbsp;contactColumnHeader = </span><span
                        class="c6">document</span><span class="c0">.createElement(</span><span
                        class="c5">&quot;th&quot;</span><span class="c0">);<br> &nbsp;
                        &nbsp;nameColumnHeader.appendChild(</span><span class="c6">document</span><span
                        class="c0">.createTextNode(</span><span class="c5">&quot;Nume&quot;</span><span class="c0">));
                        &nbsp;<br> &nbsp; &nbsp;ageColumnHeader.appendChild(</span><span class="c6">document</span><span
                        class="c0">.createTextNode(</span><span class="c5">&quot;V&acirc;rst&#259;&quot;</span><span
                        class="c0">)); &nbsp;<br> &nbsp; &nbsp;contactColumnHeader.appendChild(</span><span
                        class="c6">document</span><span class="c0">.createTextNode(</span><span
                        class="c5">&quot;Contacte&quot;</span><span class="c0">)); &nbsp;<br> &nbsp;
                        &nbsp;headerRow.appendChild(nameColumnHeader); &nbsp;<br> &nbsp;
                        &nbsp;headerRow.appendChild(ageColumnHeader); &nbsp;<br> &nbsp;
                        &nbsp;headerRow.appendChild(contactColumnHeader);<br> &nbsp;
                        &nbsp;table.appendChild(headerRow);<br> &nbsp; &nbsp;</span><span class="c4">return</span><span
                        class="c0">&nbsp;table;<br>}<br></span><span class="c12">// cre&#259;m o singur&#259; linie
                        pentru tabel</span><span class="c0"><br></span><span class="c4">function</span><span
                        class="c0">&nbsp;</span><span class="c6">createRow</span><span class="c0">(userName, userAge,
                        userContact) { &nbsp;<br> &nbsp; &nbsp;</span><span class="c4">const</span><span
                        class="c0">&nbsp;row = </span><span class="c6">document</span><span
                        class="c0">.createElement(</span><span class="c5">&quot;tr&quot;</span><span class="c0">);
                        &nbsp;<br> &nbsp; &nbsp;</span><span class="c4">const</span><span class="c0">&nbsp;nameColumn =
                    </span><span class="c6">document</span><span class="c0">.createElement(</span><span
                        class="c5">&quot;td&quot;</span><span class="c0">); &nbsp;<br> &nbsp; &nbsp;</span><span
                        class="c4">const</span><span class="c0">&nbsp;ageColumn = </span><span
                        class="c6">document</span><span class="c0">.createElement(</span><span
                        class="c5">&quot;td&quot;</span><span class="c0">); &nbsp;<br> &nbsp; &nbsp;</span><span
                        class="c4">const</span><span class="c0">&nbsp;contactColumn = </span><span
                        class="c6">document</span><span class="c0">.createElement(</span><span
                        class="c5">&quot;td&quot;</span><span class="c0">); &nbsp;<br> &nbsp;
                        &nbsp;nameColumn.appendChild(</span><span class="c6">document</span><span
                        class="c0">.createTextNode(userName)); &nbsp;<br> &nbsp;
                        &nbsp;ageColumn.appendChild(</span><span class="c6">document</span><span
                        class="c0">.createTextNode(userAge)); &nbsp;<br> &nbsp;
                        &nbsp;contactColumn.appendChild(</span><span class="c6">document</span><span
                        class="c0">.createTextNode(userContact)); &nbsp;<br> &nbsp; &nbsp;row.appendChild(nameColumn);
                        &nbsp;<br> &nbsp; &nbsp;row.appendChild(ageColumn); &nbsp;<br> &nbsp;
                        &nbsp;row.appendChild(contactColumn); &nbsp;<br> &nbsp; &nbsp;</span><span
                        class="c4">return</span><span class="c0">&nbsp;row;<br>}<br></span><span
                        class="c8">&lt;/</span><span class="c7 c10">script</span><span class="c8">&gt;</span><span
                        class="c0"><br></span><span class="c8">&lt;/</span><span class="c7 c10">body</span><span
                        class="c8">&gt;</span><span class="c0"><br></span><span class="c8">&lt;/</span><span
                        class="c7 c10">html</span><span class="c8">&gt;</span></p>
            </td>
        </tr>
    </table>
    <p class="c1"><span class="c3"></span></p>
    <p class="c11"><span class="c3">&Icirc;n acest caz, &icirc;nc&#259;rc&#259;m tabelul pe pagin&#259; &icirc;n
            elementul cu id=&quot;content&quot;, pe care &icirc;l ob&#539;inem &icirc;n codul JavaScript &icirc;n
            elementul contentDiv.</span></p>
    <p class="c1"><span class="c3"></span></p><a id="t.0ff59cb12616e0e24204f756395bee40505daa06"></a><a id="t.10"></a>
    <table class="c18">
        <tr class="c21">
            <td class="c16" colspan="1" rowspan="1">
                <p class="c13"><span class="c4">const</span><span class="c0">&nbsp;contentDiv = </span><span
                        class="c6">document</span><span class="c0">.getElementById(</span><span
                        class="c5">&quot;content&quot;</span><span class="c0">);</span></p>
            </td>
        </tr>
    </table>
    <p class="c1"><span class="c3"></span></p>
    <p class="c11"><span class="c14">Pentru crearea tabelului sunt definite dou&#259; func&#539;ii auxiliare.
            Func&#539;ia </span><span class="c14 c15">createTable </span><span class="c14">creeaz&#259; un element table
            cu un singur r&acirc;nd - antetele coloanelor. Func&#539;ia </span><span class="c14 c15">createRow
        </span><span class="c3">prime&#537;te prin parametri numele, v&acirc;rsta &#537;i contactele utilizatorului
            &#537;i pentru acestea creeaz&#259; un r&acirc;nd.</span></p>
    <p class="c1"><span class="c3"></span></p>
    <p class="c11"><span class="c14">&Icirc;n partea principal&#259; a codului, efectu&#259;m o solicitare c&#259;tre
            server. Deoarece r&#259;spunsul serverului va reprezenta un document XML de tip </span><span
            class="c14 c15">Document</span><span class="c14">, putem utiliza metode standard precum </span><span
            class="c14 c15">getElementsByTagName </span><span class="c14">sau </span><span class="c14 c15">querySelector
        </span><span class="c3">pentru a g&#259;si elementele necesare &icirc;n document. La &icirc;nceput,
            select&#259;m toate elementele user:</span></p>
    <p class="c1"><span class="c3"></span></p><a id="t.66358ad0f70c390adb5653498edceadce66a35cd"></a><a id="t.11"></a>
    <table class="c18">
        <tr class="c21">
            <td class="c16" colspan="1" rowspan="1">
                <p class="c13"><span class="c4">const</span><span class="c0">&nbsp;xmlDoc =
                        xhr.responseXML;<br></span><span class="c4">const</span><span class="c0">&nbsp;table =
                        createTable(); &nbsp; &nbsp; &nbsp;<br></span><span class="c12">// select&#259;m toate
                        elementele user &nbsp; &nbsp; </span><span class="c0"><br></span><span
                        class="c4">const</span><span class="c0">&nbsp;users = xmlDoc.getElementsByTagName(</span><span
                        class="c5">&quot;user&quot;</span><span class="c0">); &nbsp;</span></p>
            </td>
        </tr>
    </table>
    <p class="c1"><span class="c3"></span></p>
    <p class="c11"><span class="c3">Apoi, parcurgem toate elementele user &#537;i select&#259;m pentru fiecare
            atributele name &#537;i age, precum &#537;i elementul &icirc;ncorporat email:</span></p>
    <p class="c1"><span class="c3"></span></p><a id="t.126205b4c09a264fad274465b117fb229c080a64"></a><a id="t.12"></a>
    <table class="c18">
        <tr class="c21">
            <td class="c16" colspan="1" rowspan="1">
                <p class="c13"><span class="c4">for</span><span class="c0">&nbsp;(</span><span
                        class="c4">let</span><span class="c0">&nbsp;i = </span><span class="c14 c19">0</span><span
                        class="c0">; i &lt; users.length; i++) { <br> &nbsp; &nbsp;</span><span
                        class="c4">const</span><span class="c0">&nbsp;user = users[i]; &nbsp; &nbsp; &nbsp; &nbsp;<br>
                        &nbsp; &nbsp;</span><span class="c4">const</span><span class="c0">&nbsp;userName =
                        user.getAttribute(</span><span class="c5">&quot;name&quot;</span><span class="c0">); <br> &nbsp;
                        &nbsp;</span><span class="c4">const</span><span class="c0">&nbsp;userAge =
                        user.getAttribute(</span><span class="c5">&quot;age&quot;</span><span class="c0">); <br> &nbsp;
                        &nbsp;</span><span class="c4">const</span><span class="c0">&nbsp;contact =
                        user.querySelector(</span><span class="c5">&quot;contacts email&quot;</span><span
                        class="c0">).textContent;<br> &nbsp; &nbsp;</span><span class="c4">const</span><span
                        class="c0">&nbsp;row = createRow(userName, userAge, contact); &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;
                        &nbsp;<br> &nbsp; &nbsp;table.appendChild(row); &nbsp; &nbsp; &nbsp; &nbsp;<br>} &nbsp; &nbsp;
                        &nbsp;</span></p>
            </td>
        </tr>
    </table>
    <p class="c1"><span class="c3"></span></p>
    <p class="c11"><span class="c3">Pentru fiecare element user se creeaz&#259; un r&acirc;nd, care apoi este
            ad&#259;ugat &icirc;n tabel.</span></p>
    <p class="c1"><span class="c3"></span></p>
    <p class="c11"><span class="c14">Astfel, la accesarea paginii </span><span class="c7">index.html</span><span
            class="c3">&nbsp;va fi &icirc;nc&#259;rcat documentul XML, pe baza c&#259;ruia va fi creat un tabel.</span>
    </p>
    <p class="c1"><span class="c3"></span></p>
    <p class="c11"><span
            style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 487.00px; height: 303.00px;"><img
                alt="" src="images/image2.png"
                style="width: 487.00px; height: 303.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);"
                title=""></span></p>
</body>

</html>