<html>

<head>
    <meta content="text/html; charset=UTF-8" http-equiv="content-type">
    <link rel="stylesheet" type="text/css" href="/lessons/styles.css">
</head>

<body class="c23 doc-content">
    <h1 class="c6 c19 c25">Încărcarea JSON folosind XMLHttpRequest. </h1>
    <p class="c6 c9"><span class="c0"></span></p>
    <p class="c6"><span class="c0">JSON reprezint&#259; unul dintre cele mai populare formate de stocare &#537;i
            transmitere a datelor. &Icirc;n special, JSON este adesea utilizat la transmiterea datelor prin
            solicit&#259;ri ajax. Pentru a primi JSON folosind XMLHttpRequest, trebuie s&#259; efectua&#539;i dou&#259;
            set&#259;ri:</span></p>
    <p class="c6 c9"><span class="c0"></span></p>
    <ul class="c13 lst-kix_z8nxt2lgs73w-0 start">
        <li class="c6 c24 li-bullet-0"><span class="c12">Pentru ca r&#259;spunsul serverului s&#259; fie tratat ca un
                obiect JSON, propriet&#259;&#539;ii </span><span class="c10">responseType </span><span class="c0">i se
                atribuie valoarea &quot;json&quot;. Browserele care suport&#259; aceast&#259; valoare garanteaz&#259;
                c&#259; r&#259;spunsul poate fi citit direct ca un obiect JavaScript.</span></li>
    </ul>
    <p class="c6 c9"><span class="c0"></span></p><a id="t.41ba6675d5f72fb5b0a2099869d7ddd50ad1f689"></a><a id="t.0"></a>
    <table class="c8">
        <tr class="c5">
            <td class="c22" colspan="1" rowspan="1">
                <p class="c14"><span class="c4">xhr.responseType = </span><span class="c1">&quot;json&quot;</span><span
                        class="c4">;</span></p>
            </td>
        </tr>
    </table>
    <p class="c6 c9"><span class="c0"></span></p>
    <ul class="c13 lst-kix_7voeke7brq23-0 start">
        <li class="c6 c24 li-bullet-0"><span class="c12">De asemenea, la trimiterea solicit&#259;rii, pentru antetul
            </span><span class="c10">Accept </span><span class="c0">trebuie s&#259; se specifice valoarea
                &quot;application/json&quot;:</span></li>
    </ul>
    <p class="c6 c9"><span class="c0"></span></p><a id="t.61f94e21421403481465f8daa759b53d5b2d0317"></a><a id="t.1"></a>
    <table class="c20">
        <tr class="c5">
            <td class="c21" colspan="1" rowspan="1">
                <p class="c14"><span class="c4">xhr.setRequestHeader(</span><span
                        class="c1">&quot;Accept&quot;</span><span class="c4">, </span><span
                        class="c1">&quot;application/json&quot;</span><span class="c4">);</span></p>
            </td>
        </tr>
    </table>
    <p class="c6 c9"><span class="c0"></span></p>
    <p class="c6"><span class="c0">Ca server, la fel ca &icirc;n articolul anterior, vom utiliza Node.js ca cea mai
            simpl&#259; op&#539;iune, dar, desigur, dac&#259; dori&#539;i, pute&#539;i utiliza orice alt&#259;
            tehnologie de nivel server sau un server web.</span></p>
    <p class="c6 c9"><span class="c0"></span></p>
    <p class="c6"><span class="c0">Astfel, s&#259; definim pentru proiect un folder pe discul dur, &icirc;n care vom
            crea trei fi&#537;iere:</span></p>
    <p class="c6 c9"><span class="c0"></span></p>
    <ul class="c13 lst-kix_kvqnmkpwmy37-0 start">
        <li class="c6 c24 li-bullet-0"><span class="c10">index.html:</span><span class="c0">&nbsp;pagina principal&#259;
                a aplica&#539;iei</span></li>
    </ul>
    <p class="c6 c9 c26"><span class="c0"></span></p>
    <ul class="c13 lst-kix_kvqnmkpwmy37-0">
        <li class="c6 c24 li-bullet-0"><span class="c10">data.json:</span><span class="c0">&nbsp;fi&#537;ierul cu date
                &icirc;n format JSON</span></li>
    </ul>
    <p class="c6 c9 c26"><span class="c0"></span></p>
    <ul class="c13 lst-kix_kvqnmkpwmy37-0">
        <li class="c6 c24 li-bullet-0"><span class="c10">app.js:</span><span class="c0">&nbsp;fi&#537;ierul
                aplica&#539;iei server, care va utiliza Node.js</span></li>
    </ul>
    <p class="c6 c9"><span class="c0"></span></p>
    <p class="c6"><span class="c11">Definirea datelor.</span></p>
    <p class="c6 c9"><span class="c19 c10"></span></p>
    <p class="c6"><span class="c12">Fi&#537;ierul </span><span class="c10">data.json</span><span class="c0">&nbsp;va
            reprezenta datele &icirc;nc&#259;rcate &#537;i s&#259; aib&#259; urm&#259;torul con&#539;inut:</span></p>
    <p class="c6 c9"><span class="c0"></span></p><a id="t.f1023a9a1739c8ad1c95ba643bd0c9f44f1c394c"></a><a id="t.2"></a>
    <table class="c20">
        <tr class="c5">
            <td class="c21" colspan="1" rowspan="1">
                <p class="c14"><span class="c4">{<br> &nbsp; &nbsp;</span><span class="c1">&quot;users&quot;</span><span
                        class="c4">: [<br> &nbsp; &nbsp; &nbsp; &nbsp;{<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;
                        &nbsp;</span><span class="c1">&quot;name&quot;</span><span class="c4">: </span><span
                        class="c1">&quot;Tom&quot;</span><span class="c4">,<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;
                        &nbsp;</span><span class="c1">&quot;age&quot;</span><span class="c4">: </span><span
                        class="c12 c15">39</span><span class="c4">,<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;
                        &nbsp;</span><span class="c1">&quot;contacts&quot;</span><span class="c4">: {<br> &nbsp; &nbsp;
                        &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c1">&quot;email&quot;</span><span
                        class="c4">: </span><span class="c1">&quot;tom@smail.com&quot;</span><span class="c4">,<br>
                        &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span
                        class="c1">&quot;phone&quot;</span><span class="c4">: </span><span
                        class="c1">&quot;+1234567890&quot;</span><span class="c4"><br> &nbsp; &nbsp; &nbsp; &nbsp;
                        &nbsp; &nbsp;}<br> &nbsp; &nbsp; &nbsp; &nbsp;},<br> &nbsp; &nbsp; &nbsp; &nbsp;{<br> &nbsp;
                        &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c1">&quot;name&quot;</span><span
                        class="c4">: </span><span class="c1">&quot;Bob&quot;</span><span class="c4">,<br> &nbsp; &nbsp;
                        &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c1">&quot;age&quot;</span><span class="c4">:
                    </span><span class="c12 c15">43</span><span class="c4">,<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;
                        &nbsp;</span><span class="c1">&quot;contacts&quot;</span><span class="c4">: {<br> &nbsp; &nbsp;
                        &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c1">&quot;email&quot;</span><span
                        class="c4">: </span><span class="c1">&quot;bob@tmail.com&quot;</span><span class="c4">,<br>
                        &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span
                        class="c1">&quot;phone&quot;</span><span class="c4">: </span><span
                        class="c1">&quot;+1334567181&quot;</span><span class="c4"><br> &nbsp; &nbsp; &nbsp; &nbsp;
                        &nbsp; &nbsp;}<br> &nbsp; &nbsp; &nbsp; &nbsp;},<br> &nbsp; &nbsp; &nbsp; &nbsp;{<br> &nbsp;
                        &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c1">&quot;name&quot;</span><span
                        class="c4">: </span><span class="c1">&quot;Sam&quot;</span><span class="c4">,<br> &nbsp; &nbsp;
                        &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c1">&quot;age&quot;</span><span class="c4">:
                    </span><span class="c12 c15">28</span><span class="c4">,<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;
                        &nbsp;</span><span class="c1">&quot;contacts&quot;</span><span class="c4">: {<br> &nbsp; &nbsp;
                        &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c1">&quot;email&quot;</span><span
                        class="c4">: </span><span class="c1">&quot;sam@xmail.com&quot;</span><span class="c4">,<br>
                        &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span
                        class="c1">&quot;phone&quot;</span><span class="c4">: </span><span
                        class="c1">&quot;+1434567782&quot;</span><span class="c4"><br> &nbsp; &nbsp; &nbsp; &nbsp;
                        &nbsp; &nbsp;}<br> &nbsp; &nbsp; &nbsp; &nbsp;}<br> &nbsp; &nbsp;]<br>}</span></p>
            </td>
        </tr>
    </table>
    <p class="c6 c9"><span class="c0"></span></p>
    <p class="c6"><span class="c12">Aici elementul users reprezint&#259; un set de utilizatori, fiecare dintre
            ace&#537;tia fiind reprezentat de elementul user. Pentru fiecare astfel de element sunt definite dou&#259;
            atribute: </span><span class="c12 c18">name </span><span class="c12">(numele utilizatorului) &#537;i
        </span><span class="c12 c18">age </span><span class="c12">(v&acirc;rsta utilizatorului). &#536;i, de asemenea,
            elementul user are un element &icirc;ncorporat </span><span class="c12 c18">contacts</span><span
            class="c0">, care reprezint&#259; datele de contact ale utilizatorului sub forma elementelor
            &icirc;ncorporate phone &#537;i email.</span></p>
    <p class="c6 c9"><span class="c10 c19"></span></p>
    <p class="c6"><span class="c11">Definirea serverului.</span></p>
    <p class="c6 c9"><span class="c19 c10"></span></p>
    <p class="c6"><span class="c12">Fi&#537;ierul </span><span class="c10">app.js</span><span class="c0">&nbsp;va
            reprezenta codul serverului Node.js. S&#259; definim &icirc;n acesta urm&#259;torul cod:</span></p>
    <p class="c6 c9"><span class="c0"></span></p><a id="t.470d467792c84c46f7746f906b73bc7442f8d904"></a><a id="t.3"></a>
    <table class="c20">
        <tr class="c5">
            <td class="c21" colspan="1" rowspan="1">
                <p class="c14"><span class="c2">const</span><span class="c4">&nbsp;http = </span><span
                        class="c7">require</span><span class="c4">(</span><span class="c1">&quot;http&quot;</span><span
                        class="c4">);<br></span><span class="c2">const</span><span class="c4">&nbsp;fs = </span><span
                        class="c7">require</span><span class="c4">(</span><span class="c1">&quot;fs&quot;</span><span
                        class="c4">);<br><br>http.createServer((request, response)=&gt;{<br> &nbsp; &nbsp;</span><span
                        class="c12 c16">// dac&#259; sunt solicitate datele JSON</span><span class="c4"><br> &nbsp;
                        &nbsp;</span><span class="c2">if</span><span class="c4">(request.url == </span><span
                        class="c1">&quot;/data&quot;</span><span class="c4">){<br> &nbsp; &nbsp; &nbsp;
                        &nbsp;fs.readFile(</span><span class="c1">&quot;data.json&quot;</span><span class="c4">, (_,
                        data) =&gt; response.end(data));<br> &nbsp; &nbsp;}<br> &nbsp; &nbsp;</span><span
                        class="c2">else</span><span class="c4">{<br> &nbsp; &nbsp; &nbsp; &nbsp;fs.readFile(</span><span
                        class="c1">&quot;index.html&quot;</span><span class="c4">, (_, data) =&gt;
                        response.end(data));<br> &nbsp; &nbsp;}<br>}).listen(</span><span
                        class="c12 c15">3000</span><span class="c4">, ()=&gt;</span><span class="c7">console</span><span
                        class="c4">.log(</span><span class="c1">&quot;Serverul a fost lansat la adresa
                        http://localhost:3000&quot;</span><span class="c4">));</span></p>
            </td>
        </tr>
    </table>
    <p class="c6 c9"><span class="c0"></span></p>
    <p class="c6"><span class="c0">S&#259; trecem rapid prin cod. La &icirc;nceput, se conecteaz&#259; pachetele cu
            func&#539;ionalitatea pe care inten&#539;ion&#259;m s&#259; o utiliz&#259;m:</span></p>
    <p class="c6 c9"><span class="c0"></span></p><a id="t.61fb7f0bf5b4683a9ae2a81a83572099d3599f08"></a><a id="t.4"></a>
    <table class="c20">
        <tr class="c5">
            <td class="c21" colspan="1" rowspan="1">
                <p class="c14"><span class="c2">const</span><span class="c4">&nbsp;http = </span><span
                        class="c7">require</span><span class="c4">(</span><span class="c1">&quot;http&quot;</span><span
                        class="c4">); &nbsp; </span><span class="c12 c16">// pentru prelucrarea cererilor de
                        intrare</span><span class="c4"><br></span><span class="c2">const</span><span class="c4">&nbsp;fs
                        = </span><span class="c7">require</span><span class="c4">(</span><span
                        class="c1">&quot;fs&quot;</span><span class="c4">); &nbsp; &nbsp; &nbsp; </span><span
                        class="c12 c16">// pentru citirea fi&#537;ierelor de pe discul dur</span></p>
            </td>
        </tr>
    </table>
    <p class="c6 c9"><span class="c0"></span></p>
    <p class="c6"><span class="c12">Pentru crearea serverului se folose&#537;te func&#539;ia</span><span
            class="c10">&nbsp;http.createServer()</span><span class="c12">. &Icirc;n aceast&#259; func&#539;ie se
            transmite o func&#539;ie-handler, care este apelat&#259; de fiecare dat&#259; c&acirc;nd la server
            sose&#537;te o solicitare. Aceast&#259; func&#539;ie are doi parametri: </span><span class="c12 c18">request
        </span><span class="c12">(con&#539;ine datele solicit&#259;rii) &#537;i </span><span class="c12 c18">response
        </span><span class="c0">(gestioneaz&#259; trimiterea r&#259;spunsului).</span></p>
    <p class="c6 c9"><span class="c0"></span></p>
    <p class="c6"><span class="c12">&Icirc;n func&#539;ia-handler, folosind proprietatea</span><span
            class="c12 c18">&nbsp;request.url</span><span class="c12">&nbsp;putem ob&#539;ine calea resursei c&#259;tre
            care a fost trimis&#259; solicitarea. Astfel, &icirc;n acest caz, dac&#259; a venit o solicitare pe calea
            &quot;/data&quot;, atunci trimitem </span><span class="c10">data.json</span><span class="c0">:</span></p>
    <p class="c6 c9"><span class="c0"></span></p><a id="t.c32086af9d60517c7db8983e0ed918894f18c004"></a><a id="t.5"></a>
    <table class="c20">
        <tr class="c5">
            <td class="c21" colspan="1" rowspan="1">
                <p class="c14"><span class="c2">if</span><span class="c4">(request.url == </span><span
                        class="c1">&quot;/data&quot;</span><span class="c4">){<br> &nbsp; &nbsp;fs.readFile(</span><span
                        class="c1">&quot;data.json&quot;</span><span class="c4">, (_, data) =&gt;
                        response.end(data));<br>}</span></p>
            </td>
        </tr>
    </table>
    <p class="c6 c9"><span class="c0"></span></p>
    <p class="c6"><span class="c12">Pentru citirea fi&#537;ierului se utilizeaz&#259; func&#539;ia</span><span
            class="c10">&nbsp;fs.readFile</span><span class="c0">. Primul parametru al func&#539;iei - adresa
            fi&#537;ierului (&icirc;n acest caz se presupune c&#259; fi&#537;ierul se afl&#259; &icirc;n acela&#537;i
            folder cu fi&#537;ierul serverului server.js). Al doilea parametru - o func&#539;ie care este apelat&#259;
            dup&#259; citirea fi&#537;ierului &#537;i prime&#537;te con&#539;inutul s&#259;u prin al doilea s&#259;u
            parametru data.</span></p>
    <p class="c6 c9"><span class="c0"></span></p>
    <p class="c6"><span class="c12">Pentru toate celelalte solicit&#259;ri se trimite &icirc;n r&#259;spuns
            fi&#537;ierul </span><span class="c10">index.html</span><span class="c0">:</span></p>
    <p class="c6 c9"><span class="c0"></span></p><a id="t.ec126cff677f7f76be73ddf9ee4450cf75ff6bff"></a><a id="t.6"></a>
    <table class="c20">
        <tr class="c5">
            <td class="c21" colspan="1" rowspan="1">
                <p class="c14"><span class="c2">else</span><span class="c4">{<br> &nbsp; &nbsp;fs.readFile(</span><span
                        class="c1">&quot;index.html&quot;</span><span class="c4">, (_, data) =&gt;
                        response.end(data));<br>}</span></p>
            </td>
        </tr>
    </table>
    <p class="c6 c9"><span class="c0"></span></p>
    <p class="c6"><span class="c12">La sf&acirc;r&#537;it, cu ajutorul func&#539;iei </span><span class="c10">listen()
        </span><span class="c0">lans&#259;m serverul web pe portul 3000. Adic&#259; serverul va fi lansat la adresa
            http://localhost:3000/</span></p>
    <p class="c6 c9"><span class="c0"></span></p>
    <p class="c6"><span class="c11">&Icirc;nc&#259;rcarea JSON pe pagina web.</span></p>
    <p class="c6 c9"><span class="c19 c10"></span></p>
    <p class="c6"><span class="c12">Pentru a ob&#539;ine fi&#537;ierul &quot;data.json&quot; de pe server, s&#259;
            definim &icirc;n fi&#537;ierul</span><span class="c10">&nbsp;index.html</span><span
            class="c0">&nbsp;urm&#259;torul cod:</span></p>
    <p class="c6 c9"><span class="c0"></span></p><a id="t.6b13846ab4829df04c39c4950caba9d787158b49"></a><a id="t.7"></a>
    <table class="c20">
        <tr class="c5">
            <td class="c21" colspan="1" rowspan="1">
                <p class="c14"><span class="c4">&lt;!DOCTYPE html&gt;<br></span><span class="c3">&lt;</span><span
                        class="c10 c17">html</span><span class="c3">&gt;</span><span class="c4"><br></span><span
                        class="c3">&lt;</span><span class="c10 c17">head</span><span class="c3">&gt;</span><span
                        class="c4"><br> &nbsp; &nbsp;</span><span class="c3">&lt;</span><span
                        class="c10 c17">meta</span><span class="c3">&nbsp;charset=</span><span
                        class="c1">&quot;utf-8&quot;</span><span class="c3">&nbsp;/&gt;</span><span class="c4"><br>
                        &nbsp; &nbsp;</span><span class="c3">&lt;</span><span class="c10 c17">title</span><span
                        class="c3">&gt;</span><span class="c4">FDC.COM</span><span class="c3">&lt;/</span><span
                        class="c10 c17">title</span><span class="c3">&gt;</span><span class="c4"><br></span><span
                        class="c3">&lt;/</span><span class="c10 c17">head</span><span class="c3">&gt;</span><span
                        class="c4"><br></span><span class="c3">&lt;</span><span class="c10 c17">body</span><span
                        class="c3">&gt;</span><span class="c4"><br></span><span class="c3">&lt;</span><span
                        class="c10 c17">script</span><span class="c3">&gt;</span><span class="c4"><br></span><span
                        class="c2">const</span><span class="c4">&nbsp;xhr = </span><span class="c2">new</span><span
                        class="c4">&nbsp;XMLHttpRequest();<br>xhr.onload = () =&gt; {<br> &nbsp; &nbsp;</span><span
                        class="c2">if</span><span class="c4">&nbsp;(xhr.status == </span><span
                        class="c12 c15">200</span><span class="c4">) {<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span
                        class="c2">const</span><span class="c4">&nbsp;json = xhr.response;<br> &nbsp; &nbsp; &nbsp;
                        &nbsp;</span><span class="c7">console</span><span class="c4">.log(json);<br> &nbsp;
                        &nbsp;}<br>};<br>xhr.open(</span><span class="c1">&quot;GET&quot;</span><span class="c4">,
                    </span><span class="c1">&quot;/data&quot;</span><span class="c4">); &nbsp; &nbsp; &nbsp; &nbsp;
                        &nbsp; &nbsp; &nbsp;</span><span class="c12 c16">// cerere GET c&#259;tre /data</span><span
                        class="c4"><br>xhr.responseType = </span><span class="c1">&quot;json&quot;</span><span
                        class="c4">; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c12 c16">//
                        stabilim tipul de r&#259;spuns</span><span class="c4"><br>xhr.setRequestHeader(</span><span
                        class="c1">&quot;Accept&quot;</span><span class="c4">, </span><span
                        class="c1">&quot;application/json&quot;</span><span class="c4">); &nbsp; &nbsp;</span><span
                        class="c12 c16">// accept&#259;m doar json</span><span class="c4"><br>xhr.send(); &nbsp; &nbsp;
                    </span><span class="c12 c16">// execut&#259;m solicitarea</span><span class="c4"><br></span><span
                        class="c3">&lt;/</span><span class="c10 c17">script</span><span class="c3">&gt;</span><span
                        class="c4"><br></span><span class="c3">&lt;/</span><span class="c10 c17">body</span><span
                        class="c3">&gt;</span><span class="c4"><br></span><span class="c3">&lt;/</span><span
                        class="c10 c17">html</span><span class="c3">&gt;</span></p>
            </td>
        </tr>
    </table>
    <p class="c6 c9"><span class="c0"></span></p>
    <p class="c6"><span class="c12">Pentru a ob&#539;ine datele se trimite o solicitare la adresa &quot;/data&quot;.
            Pentru ca datele ob&#539;inute s&#259; fie automat interpretate ca un document JSON, propriet&#259;&#539;ii
        </span><span class="c12 c18">responseType </span><span class="c0">i se atribuie valoarea
            &quot;json&quot;.</span></p>
    <p class="c6 c9"><span class="c0"></span></p><a id="t.41ba6675d5f72fb5b0a2099869d7ddd50ad1f689"></a><a id="t.8"></a>
    <table class="c20">
        <tr class="c5">
            <td class="c21" colspan="1" rowspan="1">
                <p class="c14"><span class="c4">xhr.responseType = </span><span class="c1">&quot;json&quot;</span><span
                        class="c4">;</span></p>
            </td>
        </tr>
    </table>
    <p class="c6 c9"><span class="c0"></span></p>
    <p class="c6"><span class="c0">&Icirc;n plus, ar trebui s&#259; set&#259;m pentru antetul Accept valoarea
            &quot;application/json&quot;:</span></p>
    <p class="c6 c9"><span class="c0"></span></p><a id="t.61f94e21421403481465f8daa759b53d5b2d0317"></a><a id="t.9"></a>
    <table class="c20">
        <tr class="c5">
            <td class="c21" colspan="1" rowspan="1">
                <p class="c14"><span class="c4">xhr.setRequestHeader(</span><span
                        class="c1">&quot;Accept&quot;</span><span class="c4">, </span><span
                        class="c1">&quot;application/json&quot;</span><span class="c4">);</span></p>
            </td>
        </tr>
    </table>
    <p class="c6 c9"><span class="c0"></span></p>
    <p class="c6"><span class="c0">&Icirc;n handlerul evenimentului onload, obiectul JSON este disponibil prin
            proprietatea response, care &icirc;n acest caz este pur &#537;i simplu afi&#537;at &icirc;n
            consol&#259;:</span></p>
    <p class="c6 c9"><span class="c0"></span></p><a id="t.2c2a2c76bccb1648f982fdea08ae77894ba6fdbd"></a><a
        id="t.10"></a>
    <table class="c20">
        <tr class="c5">
            <td class="c21" colspan="1" rowspan="1">
                <p class="c14"><span class="c4">xhr.onload = () =&gt; {<br> &nbsp; &nbsp;</span><span
                        class="c2">if</span><span class="c4">&nbsp;(xhr.status == </span><span
                        class="c12 c15">200</span><span class="c4">) {<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span
                        class="c2">const</span><span class="c4">&nbsp;json = xhr.response;<br> &nbsp; &nbsp; &nbsp;
                        &nbsp;</span><span class="c7">console</span><span class="c4">.log(json);<br> &nbsp;
                        &nbsp;}<br>};</span></p>
            </td>
        </tr>
    </table>
    <p class="c6 c9"><span class="c0"></span></p>
    <p class="c6"><span class="c12">Dup&#259; definirea tuturor fi&#537;ierelor, &icirc;n consol&#259; ne vom deplasa la
            folderul serverului folosind comanda </span><span class="c10">cd </span><span class="c12">&#537;i vom lansa
            serverul folosind comanda</span><span class="c10">&nbsp;node app.js</span><span class="c0">.</span></p>
    <p class="c6 c9"><span class="c0"></span></p>
    <p class="c6"><span
            style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 513.00px; height: 68.00px;"><img
                alt="" src="images/image3.png"
                style="width: 513.00px; height: 68.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);"
                title=""></span></p>
    <p class="c6 c9"><span class="c0"></span></p>
    <p class="c6"><span class="c0">Dup&#259; lansarea serverului, putem accesa &icirc;n browser adresa
            http://localhost:3000, unde ne va fi afi&#537;at&#259; pagina, &icirc;n codul JavaScript al c&#259;reia va
            avea loc o solicitare la adresa &quot;/data&quot;. Serverul va trimite &icirc;n r&#259;spuns con&#539;inutul
            fi&#537;ierului data.json, iar consola browserului va afi&#537;a acest con&#539;inut:</span></p>
    <p class="c6 c9"><span class="c0"></span></p>
    <p class="c6"><span
            style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 624.00px; height: 216.00px;"><img
                alt="" src="images/image1.png"
                style="width: 624.00px; height: 216.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);"
                title=""></span></p>
    <p class="c6 c9"><span class="c19 c27"></span></p>
    <p class="c6"><span class="c11">Afi&#537;area datelor JSON pe pagina.</span></p>
    <p class="c6 c9"><span class="c19 c10"></span></p>
    <p class="c6"><span class="c12">&Icirc;n obiectul JSON ob&#539;inut &icirc;n exemplul de mai sus, putem accesa
            propriet&#259;&#539;ile, extr&#259;g&acirc;nd din obiect datele de care avem nevoie. De exemplu, s&#259;
            presupunem c&#259; dorim s&#259; afi&#537;&#259;m datele despre utilizatori din JSON &icirc;ntr-un tabel pe
            pagina web. Pentru aceasta, s&#259; modific&#259;m codul </span><span class="c10">index.html</span><span
            class="c0">&nbsp;&icirc;n modul urm&#259;tor:</span></p>
    <p class="c6 c9"><span class="c0"></span></p><a id="t.9f224fb6d01a5a4fc45594877a26fcc4ea8da88e"></a><a
        id="t.11"></a>
    <table class="c20">
        <tr class="c5">
            <td class="c21" colspan="1" rowspan="1">
                <p class="c14"><span class="c4">&lt;!DOCTYPE html&gt;<br></span><span class="c3">&lt;</span><span
                        class="c10 c17">html</span><span class="c3">&gt;</span><span class="c4"><br></span><span
                        class="c3">&lt;</span><span class="c10 c17">head</span><span class="c3">&gt;</span><span
                        class="c4"><br> &nbsp; &nbsp;</span><span class="c3">&lt;</span><span
                        class="c10 c17">meta</span><span class="c3">&nbsp;charset=</span><span
                        class="c1">&quot;utf-8<br><br>&quot;</span><span class="c3">&nbsp;/&gt;</span><span
                        class="c4"><br> &nbsp; &nbsp;</span><span class="c3">&lt;</span><span
                        class="c10 c17">title</span><span class="c3">&gt;</span><span class="c4">FDC.COM</span><span
                        class="c3">&lt;/</span><span class="c10 c17">title</span><span class="c3">&gt;</span><span
                        class="c4"><br></span><span class="c3">&lt;/</span><span class="c10 c17">head</span><span
                        class="c3">&gt;</span><span class="c4"><br></span><span class="c3">&lt;</span><span
                        class="c10 c17">body</span><span class="c3">&gt;</span><span class="c4"><br></span><span
                        class="c3">&lt;</span><span class="c10 c17">div</span><span class="c3">&nbsp;id=</span><span
                        class="c1">&quot;content&quot;</span><span class="c3">&gt;&lt;/</span><span
                        class="c10 c17">div</span><span class="c3">&gt;</span><span class="c4"><br></span><span
                        class="c3">&lt;</span><span class="c10 c17">script</span><span class="c3">&gt;</span><span
                        class="c4"><br></span><span class="c2">const</span><span class="c4">&nbsp;contentDiv =
                    </span><span class="c7">document</span><span class="c4">.getElementById(</span><span
                        class="c1">&quot;content&quot;</span><span class="c4">);<br><br></span><span
                        class="c2">const</span><span class="c4">&nbsp;xhr = </span><span class="c2">new</span><span
                        class="c4">&nbsp;XMLHttpRequest();<br>xhr.onload = () =&gt; {<br> &nbsp; &nbsp;</span><span
                        class="c2">if</span><span class="c4">&nbsp;(xhr.status == </span><span
                        class="c12 c15">200</span><span class="c4">) {<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span
                        class="c2">const</span><span class="c4">&nbsp;json = xhr.response;<br> &nbsp; &nbsp; &nbsp;
                        &nbsp;</span><span class="c2">const</span><span class="c4">&nbsp;table = createTable(); &nbsp;
                        &nbsp; &nbsp;<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c12 c16">// select&#259;m
                        to&#539;i utilizatorii &nbsp; &nbsp; </span><span class="c4"><br> &nbsp; &nbsp; &nbsp;
                        &nbsp;</span><span class="c2">const</span><span class="c4">&nbsp;users = json.users; &nbsp;
                        &nbsp; &nbsp;<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">for</span><span
                        class="c4">&nbsp;(</span><span class="c2">let</span><span class="c4">&nbsp;i = </span><span
                        class="c12 c15">0</span><span class="c4">; i &lt; users.length; i++) { <br> &nbsp; &nbsp; &nbsp;
                        &nbsp; &nbsp; &nbsp;</span><span class="c2">const</span><span class="c4">&nbsp;user = users[i];
                        &nbsp; &nbsp; &nbsp; &nbsp;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span
                        class="c2">const</span><span class="c4">&nbsp;row = createRow(user.name, user.age,
                        user.contacts.email);<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;table.appendChild(row);
                        &nbsp; &nbsp; &nbsp; &nbsp;<br> &nbsp; &nbsp; &nbsp; &nbsp;} &nbsp; &nbsp; &nbsp;<br> &nbsp;
                        &nbsp; &nbsp; &nbsp;contentDiv.appendChild(table);<br> &nbsp;
                        &nbsp;}<br>};<br>xhr.open(</span><span class="c1">&quot;GET&quot;</span><span class="c4">,
                    </span><span class="c1">&quot;/data&quot;</span><span class="c4">);<br>xhr.responseType =
                    </span><span class="c1">&quot;json&quot;</span><span class="c4">;
                        <br>xhr.setRequestHeader(</span><span class="c1">&quot;Accept&quot;</span><span class="c4">,
                    </span><span class="c1">&quot;application/json&quot;</span><span
                        class="c4">);<br>xhr.send();<br><br></span><span class="c12 c16">// cre&#259;m un
                        tabel</span><span class="c4"><br></span><span class="c2">function</span><span
                        class="c4">&nbsp;</span><span class="c7">createTable</span><span class="c4">() { &nbsp;<br>
                        &nbsp; &nbsp;</span><span class="c2">const</span><span class="c4">&nbsp;table = </span><span
                        class="c7">document</span><span class="c4">.createElement(</span><span
                        class="c1">&quot;table&quot;</span><span class="c4">); &nbsp; <br> &nbsp; &nbsp;</span><span
                        class="c2">const</span><span class="c4">&nbsp;headerRow = </span><span
                        class="c7">document</span><span class="c4">.createElement(</span><span
                        class="c1">&quot;tr&quot;</span><span class="c4">); &nbsp;<br> &nbsp; &nbsp;</span><span
                        class="c2">const</span><span class="c4">&nbsp;nameColumnHeader = </span><span
                        class="c7">document</span><span class="c4">.createElement(</span><span
                        class="c1">&quot;th&quot;</span><span class="c4">); &nbsp;<br> &nbsp; &nbsp;</span><span
                        class="c2">const</span><span class="c4">&nbsp;ageColumnHeader = </span><span
                        class="c7">document</span><span class="c4">.createElement(</span><span
                        class="c1">&quot;th&quot;</span><span class="c4">); &nbsp;<br> &nbsp; &nbsp;</span><span
                        class="c2">const</span><span class="c4">&nbsp;contactColumnHeader = </span><span
                        class="c7">document</span><span class="c4">.createElement(</span><span
                        class="c1">&quot;th&quot;</span><span class="c4">);<br> &nbsp;
                        &nbsp;nameColumnHeader.appendChild(</span><span class="c7">document</span><span
                        class="c4">.createTextNode(</span><span class="c1">&quot;Nume&quot;</span><span class="c4">));
                        &nbsp;<br> &nbsp; &nbsp;ageColumnHeader.appendChild(</span><span class="c7">document</span><span
                        class="c4">.createTextNode(</span><span class="c1">&quot;V&acirc;rst&#259;&quot;</span><span
                        class="c4">)); &nbsp;<br> &nbsp; &nbsp;contactColumnHeader.appendChild(</span><span
                        class="c7">document</span><span class="c4">.createTextNode(</span><span
                        class="c1">&quot;Contacte&quot;</span><span class="c4">)); &nbsp;<br> &nbsp;
                        &nbsp;headerRow.appendChild(nameColumnHeader); &nbsp;<br> &nbsp;
                        &nbsp;headerRow.appendChild(ageColumnHeader); &nbsp;<br> &nbsp;
                        &nbsp;headerRow.appendChild(contactColumnHeader);<br> &nbsp;
                        &nbsp;table.appendChild(headerRow);<br> &nbsp; &nbsp;</span><span class="c2">return</span><span
                        class="c4">&nbsp;table;<br>}<br></span><span class="c12 c16">// cre&#259;m o singur&#259; linie
                        pentru tabel</span><span class="c4"><br></span><span class="c2">function</span><span
                        class="c4">&nbsp;</span><span class="c7">createRow</span><span class="c4">(userName, userAge,
                        userContact) { &nbsp;<br> &nbsp; &nbsp;</span><span class="c2">const</span><span
                        class="c4">&nbsp;row = </span><span class="c7">document</span><span
                        class="c4">.createElement(</span><span class="c1">&quot;tr&quot;</span><span class="c4">);
                        &nbsp;<br> &nbsp; &nbsp;</span><span class="c2">const</span><span class="c4">&nbsp;nameColumn =
                    </span><span class="c7">document</span><span class="c4">.createElement(</span><span
                        class="c1">&quot;td&quot;</span><span class="c4">); &nbsp;<br> &nbsp; &nbsp;</span><span
                        class="c2">const</span><span class="c4">&nbsp;ageColumn = </span><span
                        class="c7">document</span><span class="c4">.createElement(</span><span
                        class="c1">&quot;td&quot;</span><span class="c4">); &nbsp;<br> &nbsp; &nbsp;</span><span
                        class="c2">const</span><span class="c4">&nbsp;contactColumn = </span><span
                        class="c7">document</span><span class="c4">.createElement(</span><span
                        class="c1">&quot;td&quot;</span><span class="c4">); &nbsp;<br> &nbsp;
                        &nbsp;nameColumn.appendChild(</span><span class="c7">document</span><span
                        class="c4">.createTextNode(userName)); &nbsp;<br> &nbsp;
                        &nbsp;ageColumn.appendChild(</span><span class="c7">document</span><span
                        class="c4">.createTextNode(userAge)); &nbsp;<br> &nbsp;
                        &nbsp;contactColumn.appendChild(</span><span class="c7">document</span><span
                        class="c4">.createTextNode(userContact)); &nbsp;<br> &nbsp; &nbsp;row.appendChild(nameColumn);
                        &nbsp;<br> &nbsp; &nbsp;row.appendChild(ageColumn); &nbsp;<br> &nbsp;
                        &nbsp;row.appendChild(contactColumn); &nbsp;<br> &nbsp; &nbsp;</span><span
                        class="c2">return</span><span class="c4">&nbsp;row;<br>}<br></span><span
                        class="c3">&lt;/</span><span class="c10 c17">script</span><span class="c3">&gt;</span><span
                        class="c4"><br></span><span class="c3">&lt;/</span><span class="c10 c17">body</span><span
                        class="c3">&gt;</span><span class="c4"><br></span><span class="c3">&lt;/</span><span
                        class="c10 c17">html</span><span class="c3">&gt;</span></p>
            </td>
        </tr>
    </table>
    <p class="c6 c9"><span class="c0"></span></p>
    <p class="c6"><span class="c0">&Icirc;n acest caz, &icirc;nc&#259;rc&#259;m tabelul pe pagina &icirc;n elementul cu
            identificatorul &quot;content&quot;, pe care &icirc;l ob&#539;inem &icirc;n codul JavaScript &icirc;n
            elementul contentDiv.</span></p>
    <p class="c6 c9"><span class="c0"></span></p><a id="t.0ff59cb12616e0e24204f756395bee40505daa06"></a><a
        id="t.12"></a>
    <table class="c20">
        <tr class="c5">
            <td class="c21" colspan="1" rowspan="1">
                <p class="c14"><span class="c2">const</span><span class="c4">&nbsp;contentDiv = </span><span
                        class="c7">document</span><span class="c4">.getElementById(</span><span
                        class="c1">&quot;content&quot;</span><span class="c4">);</span></p>
            </td>
        </tr>
    </table>
    <p class="c6 c9"><span class="c0"></span></p>
    <p class="c6"><span class="c12">Pentru crearea tabelului sunt definite dou&#259; func&#539;ii auxiliare.
            Func&#539;ia </span><span class="c12 c18">createTable </span><span class="c12">creeaz&#259; un element
        </span><span class="c12 c18">table </span><span class="c12">cu un singur r&acirc;nd - antetele coloanelor.
            Func&#539;ia </span><span class="c12 c18">createRow </span><span class="c0">accept&#259; ca parametri
            numele, v&acirc;rsta &#537;i contactele utilizatorului &#537;i pentru ace&#537;tia creeaz&#259; un
            r&acirc;nd.</span></p>
    <p class="c6 c9"><span class="c0"></span></p>
    <p class="c6"><span class="c0">&Icirc;n partea principal&#259; a codului, efectu&#259;m o solicitare c&#259;tre
            server. Dup&#259; ce primim datele JSON, select&#259;m array-ul de obiecte user:</span></p>
    <p class="c6 c9"><span class="c0"></span></p><a id="t.e28a77c3bb90a1034d5ba02df51d7ab0a9c77db4"></a><a
        id="t.13"></a>
    <table class="c20">
        <tr class="c5">
            <td class="c21" colspan="1" rowspan="1">
                <p class="c14"><span class="c2">const</span><span class="c4">&nbsp;json = xhr.response;<br></span><span
                        class="c2">const</span><span class="c4">&nbsp;table = createTable(); &nbsp; &nbsp;
                        &nbsp;<br></span><span class="c12 c16">// select&#259;m toate obiectele user &nbsp; &nbsp;
                    </span><span class="c4"><br></span><span class="c2">const</span><span class="c4">&nbsp;users =
                        json.users; &nbsp; &nbsp;</span></p>
            </td>
        </tr>
    </table>
    <p class="c6 c9"><span class="c0"></span></p>
    <p class="c6"><span class="c0">Apoi, parcurgem toate obiectele user, select&#259;m propriet&#259;&#539;ile name, age
            &#537;i contacts.email ale fiec&#259;rui obiect &#537;i cre&#259;m un r&acirc;nd &icirc;n tabel &icirc;n
            baza acestor date:</span></p>
    <p class="c6 c9"><span class="c0"></span></p><a id="t.4bb1b0b1c78c5863388d0bd78d3507ea1d2ada2a"></a><a
        id="t.14"></a>
    <table class="c20">
        <tr class="c5">
            <td class="c21" colspan="1" rowspan="1">
                <p class="c14"><span class="c2">for</span><span class="c4">&nbsp;(</span><span
                        class="c2">let</span><span class="c4">&nbsp;i = </span><span class="c12 c15">0</span><span
                        class="c4">; i &lt; users.length; i++) { <br> &nbsp; &nbsp;</span><span
                        class="c2">const</span><span class="c4">&nbsp;user = users[i]; &nbsp; &nbsp; &nbsp; &nbsp;<br>
                        &nbsp; &nbsp;</span><span class="c2">const</span><span class="c4">&nbsp;row =
                        createRow(user.name, user.age, user.contacts.email); &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;
                        <br> &nbsp; &nbsp;table.appendChild(row); &nbsp; &nbsp; &nbsp; &nbsp;<br>} &nbsp; &nbsp;
                        &nbsp;</span></p>
            </td>
        </tr>
    </table>
    <p class="c6 c9"><span class="c0"></span></p>
    <p class="c6"><span class="c12">Astfel, la accesarea paginii</span><span class="c10">&nbsp;index.html</span><span
            class="c0">, datele &icirc;n format JSON vor fi &icirc;nc&#259;rcate, &#537;i pe baza lor va fi creat un
            tabel.</span></p>
    <p class="c6 c9"><span class="c0"></span></p>
    <p class="c6"><span
            style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 437.00px; height: 264.00px;"><img
                alt="" src="images/image2.png"
                style="width: 437.00px; height: 264.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);"
                title=""></span></p>
</body>

</html>