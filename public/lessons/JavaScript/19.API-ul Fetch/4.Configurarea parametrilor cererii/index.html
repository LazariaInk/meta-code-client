<html>

<head>
    <meta content="text/html; charset=UTF-8" http-equiv="content-type">
    <link rel="stylesheet" type="text/css" href="/lessons/styles.css">
</head>

<body class="c24 doc-content">
    <h1 class="c1 c11 c21">Configurarea parametrilor cererii. Trimiterea datelor. </h1>
    <p class="c1 c5"><span class="c3"></span></p>
    <p class="c1 c11"><span class="c8">Func&#539;ia</span><span class="c16">&nbsp;fetch()</span><span
            class="c3">&nbsp;poate accepta op&#539;iuni suplimentare ale cererii sub forma celui de-al doilea parametru
            op&#539;ional:</span></p>
    <p class="c1 c5"><span class="c3"></span></p><a id="t.4e3454544c79195aeddb680cbb3eb2925e6ed7c6"></a><a id="t.0"></a>
    <table class="c6">
        <tr class="c0">
            <td class="c7" colspan="1" rowspan="1">
                <p class="c1"><span class="c2">fetch(resursa [, init])</span></p>
            </td>
        </tr>
    </table>
    <p class="c1 c5"><span class="c3"></span></p>
    <p class="c1 c11"><span class="c8">Parametrul </span><span class="c8 c13">init </span><span
            class="c3">reprezint&#259; un obiect complex, care poate avea un set larg de op&#539;iuni:</span></p>
    <p class="c1 c5"><span class="c3"></span></p>
    <ul class="c17 lst-kix_kex70qn10gk7-0 start">
        <li class="c1 c15 c11 li-bullet-0"><span class="c16">method</span><span class="c3">: metod&#259; de cerere, de
                exemplu, GET, POST, PUT etc.</span></li>
    </ul>
    <p class="c1 c5 c19"><span class="c3"></span></p>
    <ul class="c17 lst-kix_kex70qn10gk7-0">
        <li class="c1 c15 c11 li-bullet-0"><span class="c16">headers</span><span class="c3">: antetele stabilite
                &icirc;n cerere</span></li>
    </ul>
    <p class="c1 c5 c19"><span class="c3"></span></p>
    <ul class="c17 lst-kix_kex70qn10gk7-0">
        <li class="c1 c15 c11 li-bullet-0"><span class="c16">body</span><span class="c3">: corpul cererii - datele care
                sunt ad&#259;ugate &icirc;n cerere.</span></li>
    </ul>
    <p class="c1 c5 c19"><span class="c3"></span></p>
    <ul class="c17 lst-kix_kex70qn10gk7-0">
        <li class="c1 c15 c11 li-bullet-0"><span class="c16">mode</span><span class="c3">: modul cererii, de exemplu,
                cors, no-cors &#537;i same-origin</span></li>
    </ul>
    <p class="c1 c5 c19"><span class="c3"></span></p>
    <ul class="c17 lst-kix_kex70qn10gk7-0">
        <li class="c1 c11 c15 li-bullet-0"><span class="c16">credentials</span><span class="c3">: define&#537;te
                ac&#539;iunile cu acredit&#259;rile (cookies, date de autentificare HTTP &#537;i certificate client
                TLS). Accept&#259; una dintre urm&#259;toarele valori:</span></li>
    </ul>
    <p class="c1 c5"><span class="c3"></span></p>
    <p class="c1 c11"><span class="c8">- </span><span class="c16">omit</span><span class="c3">: acredit&#259;rile sunt
            excluse din cerere, iar orice acredit&#259;ri trimise &icirc;n r&#259;spuns de server sunt ignorate</span>
    </p>
    <p class="c1 c5"><span class="c3"></span></p>
    <p class="c1 c11"><span class="c8">- </span><span class="c16">same-origin</span><span class="c3">: acredit&#259;rile
            sunt incluse doar &icirc;n acele cereri &#537;i sunt acceptate &icirc;n r&#259;spunsuri doar pentru acele
            cereri, adresa c&#259;rora apar&#539;ine aceluia&#537;i domeniu ca &#537;i adresa clientului.</span></p>
    <p class="c1 c5"><span class="c3"></span></p>
    <p class="c1 c11"><span class="c8">- </span><span class="c16">include</span><span class="c3">: acredit&#259;rile
            sunt incluse &icirc;n orice cereri &#537;i sunt acceptate &icirc;n r&#259;spunsuri pentru orice
            cereri</span></p>
    <p class="c1 c5 c19"><span class="c3"></span></p>
    <ul class="c17 lst-kix_een9fxk6pvwg-0 start">
        <li class="c1 c15 c11 li-bullet-0"><span class="c16">cache</span><span class="c8">: stabile&#537;te principiul
                interac&#539;iunii cu cache-ul browserului. Valorile posibile: </span><span class="c8 c13 c23">default,
                no-store, reload, no-cache, force-cache &#537;i only-if-cached.</span></li>
    </ul>
    <p class="c1 c5 c19"><span class="c3"></span></p>
    <ul class="c17 lst-kix_een9fxk6pvwg-0">
        <li class="c1 c15 c11 li-bullet-0"><span class="c16">redirect</span><span class="c3">: stabile&#537;te cum
                s&#259; reac&#539;ioneze la redirec&#539;ion&#259;ri. Poate accepta urm&#259;toarele valori:</span></li>
    </ul>
    <p class="c1 c5"><span class="c3"></span></p>
    <p class="c1 c11"><span class="c8">- </span><span class="c16">follow</span><span class="c3">: aplic&#259; automat
            redirec&#539;ionarea</span></p>
    <p class="c1 c5"><span class="c3"></span></p>
    <p class="c1 c11"><span class="c8">- </span><span class="c16">error</span><span class="c3">: la redirec&#539;ionare
            genereaz&#259; o eroare</span></p>
    <p class="c1 c5"><span class="c3"></span></p>
    <p class="c1 c11"><span class="c8">- </span><span class="c16">manual</span><span class="c3">: prelucreaz&#259;
            r&#259;spunsul &icirc;n alt context</span></p>
    <p class="c1 c5"><span class="c3"></span></p>
    <ul class="c17 lst-kix_lxrf7423628y-0 start">
        <li class="c1 c15 c11 li-bullet-0"><span class="c16">referrer</span><span class="c3">: define&#537;te referentul
                cererii</span></li>
    </ul>
    <p class="c1 c5 c19"><span class="c3"></span></p>
    <p class="c1 c5 c19"><span class="c3"></span></p>
    <ul class="c17 lst-kix_lxrf7423628y-0">
        <li class="c1 c15 c11 li-bullet-0"><span class="c16">referrerPolicy</span><span class="c8">: define&#537;te
                politica referentului - cum informa&#539;ia despre referent va fi transmis&#259; &icirc;n cerere. Poate
                accepta urm&#259;toarele valori:</span><span class="c8 c13">&nbsp;no-referrer,
                no-referrer-when-downgrade, same-origin, origin, strict-origin, origin-when-cross-origin,
                strict-origin-when-cross-origin </span><span class="c8">&#537;i </span><span
                class="c23 c8 c13">unsafe-url.</span></li>
    </ul>
    <p class="c1 c5"><span class="c3"></span></p>
    <ul class="c17 lst-kix_usthc9cqgf6i-0 start">
        <li class="c1 c15 c11 li-bullet-0"><span class="c16">integrity</span><span class="c3">: con&#539;ine valoarea de
                control a resursei</span></li>
    </ul>
    <p class="c1 c5 c19"><span class="c3"></span></p>
    <ul class="c17 lst-kix_usthc9cqgf6i-0">
        <li class="c1 c15 c11 li-bullet-0"><span class="c16">keepalive</span><span class="c3">: permite cererii s&#259;
                existe mai mult dec&acirc;t durata de via&#539;&#259; a paginii web.</span></li>
    </ul>
    <p class="c1 c5 c19"><span class="c3"></span></p>
    <ul class="c17 lst-kix_usthc9cqgf6i-0">
        <li class="c1 c15 c11 li-bullet-0"><span class="c16">signal</span><span class="c8">: ofer&#259; obiectul
            </span><span class="c8 c13">AbortSignal </span><span class="c3">&#537;i permite anularea execut&#259;rii
                cererii.</span></li>
    </ul>
    <p class="c1 c5"><span class="c3"></span></p>
    <p class="c1 c5"><span class="c3"></span></p>
    <p class="c1 c5"><span class="c3"></span></p>
    <p class="c1 c11"><span class="c3">Exemplu de configurare a op&#539;iunilor:</span></p>
    <p class="c1 c5"><span class="c3"></span></p><a id="t.49418075da70afa864525fcb7cd2737d291c090a"></a><a id="t.1"></a>
    <table class="c6">
        <tr class="c0">
            <td class="c7" colspan="1" rowspan="1">
                <p class="c1"><span class="c2">fetch(</span><span class="c4">&quot;/user&quot;</span><span class="c2">,
                        {<br> &nbsp; &nbsp; &nbsp; &nbsp;method: </span><span class="c4">&quot;GET&quot;</span><span
                        class="c2">,<br> &nbsp; &nbsp; &nbsp; &nbsp;headers: { </span><span
                        class="c4">&quot;Accept&quot;</span><span class="c2">: </span><span
                        class="c4">&quot;application/json&quot;</span><span class="c2">&nbsp;}<br> &nbsp; &nbsp;})<br>
                        &nbsp; &nbsp;.then(response =&gt; response.json())<br> &nbsp; &nbsp;.then(user =&gt;
                    </span><span class="c8 c18">console</span><span class="c2">.log(user));</span></p>
            </td>
        </tr>
    </table>
    <p class="c1 c5"><span class="c3"></span></p>
    <p class="c1 c11"><span class="c3">&Icirc;n acest caz, set&#259;m metoda de cerere ca &quot;GET&quot; &#537;i
            antetul &quot;Accept&quot; - valoarea sa &quot;application/json&quot; indic&#259; faptul c&#259; clientul
            accept&#259; date &icirc;n format json.</span></p>
    <p class="c1 c5"><span class="c3"></span></p>
    <p class="c1 c11"><span class="c8">Este de remarcat c&#259; proprietatea headers reprezint&#259; un obiect
        </span><span class="c16">Headers</span><span class="c3">. Putem aplica metodele acestui obiect pentru a seta
            antetele:</span></p>
    <p class="c1 c5"><span class="c3"></span></p><a id="t.f2e3a1a2eee6df1b52e3e8317de0ca39fc500cf9"></a><a id="t.2"></a>
    <table class="c6">
        <tr class="c0">
            <td class="c7" colspan="1" rowspan="1">
                <p class="c1"><span class="c8 c10">const</span><span class="c2">&nbsp;myHeaders = </span><span
                        class="c8 c10">new</span><span class="c2">&nbsp;Headers();<br>myHeaders.append(</span><span
                        class="c4">&quot;Accept&quot;</span><span class="c2">, </span><span
                        class="c4">&quot;application/json&quot;</span><span class="c2">);<br>fetch(</span><span
                        class="c4">&quot;/user&quot;</span><span class="c2">, {<br> &nbsp; &nbsp; &nbsp; &nbsp;method:
                    </span><span class="c4">&quot;GET&quot;</span><span class="c2">,<br> &nbsp; &nbsp; &nbsp;
                        &nbsp;headers: myHeaders<br> &nbsp; &nbsp;})<br> &nbsp; &nbsp;.then(response =&gt;
                        response.json())<br> &nbsp; &nbsp;.then(user =&gt; </span><span
                        class="c8 c18">console</span><span class="c2">.log(user));</span></p>
            </td>
        </tr>
    </table>
    <p class="c1 c5"><span class="c3"></span></p>
    <p class="c1 c5"><span class="c3"></span></p>
    <p class="c1 c11"><span class="c8">Metoda</span><span class="c16">&nbsp;append()</span><span
            class="c3">&nbsp;adaug&#259; un anumit antet, al c&#259;rui nume este transmis prin primul parametru, iar
            valoarea antetului - prin al doilea parametru.</span></p>
    <p class="c1 c5"><span class="c3"></span></p>
    <p class="c1 c11"><span class="c8">De asemenea, se poate folosi metoda </span><span class="c16">set()</span><span
            class="c8">&nbsp;pentru a seta un antet, iar dac&#259; antetul a fost deja ad&#259;ugat anterior, metoda
        </span><span class="c8 c13">set() </span><span class="c8">&icirc;nlocuie&#537;te valoarea acestuia. Dac&#259;
            este necesar s&#259; se &#537;tearg&#259; un antet ad&#259;ugat anterior, se poate folosi metoda
        </span><span class="c16">delete()</span><span class="c3">, care prime&#537;te numele antetului care trebuie
            eliminat:</span></p>
    <p class="c1 c5"><span class="c3"></span></p><a id="t.2128eba0438cd10801af7555cf53dd99571bd9a3"></a><a id="t.3"></a>
    <table class="c6">
        <tr class="c0">
            <td class="c7" colspan="1" rowspan="1">
                <p class="c1"><span class="c8 c10">const</span><span class="c2">&nbsp;myHeaders = </span><span
                        class="c8 c10">new</span><span class="c2">&nbsp;Headers();<br>myHeaders.append(</span><span
                        class="c4">&quot;Accept&quot;</span><span class="c2">, </span><span
                        class="c4">&quot;application/json&quot;</span><span class="c2">); </span><span class="c8 c9">//
                        ad&#259;ug&#259;m antetul Accept</span><span class="c2"><br>myHeaders.set(</span><span
                        class="c4">&quot;Accept&quot;</span><span class="c2">, </span><span
                        class="c4">&quot;text/xml&quot;</span><span class="c2">); &nbsp; &nbsp; &nbsp;
                        &nbsp;</span><span class="c8 c9">// Modific&#259;m valoarea antetului</span><span
                        class="c2"><br>myHeaders.delete(</span><span class="c4">&quot;Accept&quot;</span><span
                        class="c2">); &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span
                        class="c8 c9">// &#536;tergem antetul</span></p>
            </td>
        </tr>
    </table>
    <p class="c1 c5"><span class="c3"></span></p>
    <p class="c1 c11"><span class="c22">Trimiterea datelor &icirc;n cerere.</span></p>
    <p class="c1 c5"><span class="c12"></span></p>
    <p class="c1 c11"><span class="c8">Pentru trimiterea datelor &icirc;n cerere &icirc;n func&#539;ia</span><span
            class="c16">&nbsp;fetch()</span><span class="c8">, se utilizeaz&#259; op&#539;iunea </span><span
            class="c16">body </span><span class="c8">ca parte a celui de-al doilea parametru. Aceste date pot fi de
            tipurile</span><span class="c8 c13">&nbsp;Blob, BufferSource, FormData, URLSearchParams, USVString &#537;i
            ReadableStream</span><span class="c8">. Este important de re&#539;inut c&#259; &icirc;n cererile cu metoda
        </span><span class="c8 c13">GET </span><span class="c8">&#537;i </span><span class="c8 c13">HEAD</span><span
            class="c3">, aceast&#259; op&#539;iune nu poate fi setat&#259;.</span></p>
    <p class="c1 c5"><span class="c3"></span></p>
    <p class="c1 c11"><span class="c3">Pentru testarea trimiterii, vom defini un server simplu &icirc;n node.js, care
            accept&#259; datele:</span></p>
    <p class="c1 c5"><span class="c3"></span></p><a id="t.3ba0adc2ea3a22299707b69a814a7095c2332da5"></a><a id="t.4"></a>
    <table class="c6">
        <tr class="c0">
            <td class="c7" colspan="1" rowspan="1">
                <p class="c1"><span class="c8 c10">const</span><span class="c2">&nbsp;http = </span><span
                        class="c8 c18">require</span><span class="c2">(</span><span
                        class="c4">&quot;http&quot;</span><span class="c2">);<br></span><span
                        class="c8 c10">const</span><span class="c2">&nbsp;fs = </span><span
                        class="c8 c18">require</span><span class="c2">(</span><span
                        class="c4">&quot;fs&quot;</span><span class="c2">);<br> <br>http.createServer(</span><span
                        class="c8 c10">async</span><span class="c2">&nbsp;(request, response) =&gt; {<br> &nbsp; &nbsp;
                        &nbsp;<br> &nbsp; &nbsp;</span><span class="c8 c10">if</span><span class="c2">(request.url ==
                    </span><span class="c4">&quot;/user&quot;</span><span class="c2">){<br> &nbsp; &nbsp; &nbsp; &nbsp;
                        <br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c8 c10">const</span><span
                        class="c2">&nbsp;buffers = []; &nbsp; </span><span class="c8 c9">// buffer pentru datele
                        primite</span><span class="c2"><br> <br> &nbsp; &nbsp; &nbsp; &nbsp; </span><span
                        class="c8 c9">// primim datele din cerere &icirc;n buffer</span><span class="c2"><br> &nbsp;
                        &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c8 c10">for</span><span
                        class="c2">&nbsp;</span><span class="c8 c10">await</span><span class="c2">&nbsp;(</span><span
                        class="c8 c10">const</span><span class="c2">&nbsp;chunk </span><span
                        class="c8 c10">of</span><span class="c2">&nbsp;request) {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;
                        &nbsp;buffers.push(chunk);<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;}<br> &nbsp; &nbsp; &nbsp;
                        &nbsp;</span><span class="c8 c9">// ob&#539;inem reprezentarea ca &#537;ir de caractere a
                        r&#259;spunsului</span><span class="c2"><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span
                        class="c8 c10">let</span><span class="c2">&nbsp;userName =
                        Buffer.concat(buffers).toString();<br> &nbsp; &nbsp; &nbsp; &nbsp;userName = userName +
                    </span><span class="c4">&quot; Smith&quot;</span><span class="c2">;<br> &nbsp; &nbsp; &nbsp;
                        &nbsp;response.end(userName);<br> &nbsp; &nbsp;}<br> &nbsp; &nbsp;</span><span
                        class="c8 c10">else</span><span class="c2">{<br> &nbsp; &nbsp; &nbsp;
                        &nbsp;fs.readFile(</span><span class="c4">&quot;index.html&quot;</span><span class="c2">,
                        (error, data) =&gt; response.end(data));<br> &nbsp; &nbsp;}<br>}).listen(</span><span
                        class="c8 c20">3000</span><span class="c2">, ()=&gt;</span><span
                        class="c8 c18">console</span><span class="c2">.log(</span><span class="c4">&quot;Serverul a fost
                        pornit la adresa http://localhost:3000&quot;</span><span class="c2">));</span></p>
            </td>
        </tr>
    </table>
    <p class="c1 c5"><span class="c3"></span></p>
    <p class="c1 c11"><span class="c3">&Icirc;n acest caz, c&acirc;nd se acceseaz&#259; adresa &quot;/user&quot;,
            serverul prime&#537;te toate datele trimise. Obiectul de cerere ofer&#259; un iterator pentru extragerea
            datelor. &#536;i &icirc;n codul serverului, aceste date sunt transmise &icirc;ntr-un array-buffer
            special:</span></p>
    <p class="c1 c5"><span class="c3"></span></p><a id="t.276bb5546a95bc4d1894084d2239a5b544ff85b8"></a><a id="t.5"></a>
    <table class="c6">
        <tr class="c0">
            <td class="c7" colspan="1" rowspan="1">
                <p class="c1"><span class="c8 c10">for</span><span class="c2">&nbsp;</span><span
                        class="c8 c10">await</span><span class="c2">&nbsp;(</span><span class="c8 c10">const</span><span
                        class="c2">&nbsp;chunk </span><span class="c8 c10">of</span><span class="c2">&nbsp;request){<br>
                        &nbsp; &nbsp;buffers.push(chunk);<br>}</span></p>
            </td>
        </tr>
    </table>
    <p class="c1 c5"><span class="c3"></span></p>
    <p class="c1 c11"><span class="c8">Apoi, folosind metoda </span><span class="c8 c13">Buffer.concat(),</span><span
            class="c3">&nbsp;combin&#259;m toate datele primite &#537;i form&#259;m un &#537;ir de caractere din
            ele:</span></p>
    <p class="c1 c5"><span class="c3"></span></p><a id="t.9901a7cb1e462eb1ae262ff0976d4fe9b3771ada"></a><a id="t.6"></a>
    <table class="c6">
        <tr class="c0">
            <td class="c7" colspan="1" rowspan="1">
                <p class="c1"><span class="c8 c10">let</span><span class="c2">&nbsp;userName =
                        Buffer.concat(buffers).toString();</span></p>
            </td>
        </tr>
    </table>
    <p class="c1 c5"><span class="c3"></span></p>
    <p class="c1 c11"><span class="c3">&Icirc;n acest caz, presupunem c&#259; pe server este trimis un simplu text care
            reprezint&#259; un nume de utilizator. Pentru exemplu, la acest nume se adaug&#259; un prenume &#537;i
            numele modificat este trimis &icirc;napoi clientului:</span></p>
    <p class="c1 c5"><span class="c3"></span></p><a id="t.9f761f148d4c0076a7d434ae95863d0df0ec3a2b"></a><a id="t.7"></a>
    <table class="c6">
        <tr class="c0">
            <td class="c7" colspan="1" rowspan="1">
                <p class="c1"><span class="c2">userName = userName + </span><span class="c4">&quot;
                        Smith&quot;</span><span class="c2">;<br>response.end(userName);</span></p>
            </td>
        </tr>
    </table>
    <p class="c1 c5"><span class="c3"></span></p>
    <p class="c1 c11"><span class="c8">Acum, s&#259; definim pe pagina </span><span class="c16">index.html</span><span
            class="c3">&nbsp;codul pentru trimiterea datelor c&#259;tre acest server:</span></p>
    <p class="c1 c5"><span class="c3"></span></p><a id="t.f63dfa929affd27ccf8ba9d6161308f8ce143fcf"></a><a id="t.8"></a>
    <table class="c6">
        <tr class="c0">
            <td class="c7" colspan="1" rowspan="1">
                <p class="c1"><span class="c2">&lt;!DOCTYPE html&gt;<br></span><span class="c8 c14">&lt;</span><span
                        class="c16 c14">html</span><span class="c8 c14">&gt;</span><span class="c2"><br></span><span
                        class="c8 c14">&lt;</span><span class="c16 c14">head</span><span class="c8 c14">&gt;</span><span
                        class="c2"><br> &nbsp; &nbsp;</span><span class="c8 c14">&lt;</span><span
                        class="c16 c14">meta</span><span class="c8 c14">&nbsp;charset=</span><span
                        class="c4">&quot;utf-8&quot;</span><span class="c8 c14">&nbsp;/&gt;</span><span class="c2"><br>
                        &nbsp; &nbsp;</span><span class="c8 c14">&lt;</span><span class="c16 c14">title</span><span
                        class="c8 c14">&gt;</span><span class="c2">FDC.COM</span><span class="c8 c14">&lt;/</span><span
                        class="c16 c14">title</span><span class="c8 c14">&gt;</span><span class="c2"><br></span><span
                        class="c8 c14">&lt;/</span><span class="c16 c14">head</span><span
                        class="c8 c14">&gt;</span><span class="c2"><br></span><span class="c8 c14">&lt;</span><span
                        class="c16 c14">body</span><span class="c8 c14">&gt;</span><span class="c2"><br></span><span
                        class="c8 c14">&lt;</span><span class="c16 c14">script</span><span
                        class="c8 c14">&gt;</span><span class="c2"><br>fetch(</span><span
                        class="c4">&quot;/user&quot;</span><span class="c2">, { method: </span><span
                        class="c4">&quot;POST&quot;</span><span class="c2">, body: </span><span
                        class="c4">&quot;Tom&quot;</span><span class="c2">&nbsp;})<br> &nbsp; &nbsp;.then(response =&gt;
                        response.text())<br> &nbsp; &nbsp;.then(userName =&gt; </span><span
                        class="c8 c18">console</span><span class="c2">.log(userName));<br></span><span
                        class="c8 c14">&lt;/</span><span class="c14 c16">script</span><span
                        class="c8 c14">&gt;</span><span class="c2"><br></span><span class="c8 c14">&lt;/</span><span
                        class="c16 c14">body</span><span class="c8 c14">&gt;</span><span class="c2"><br></span><span
                        class="c8 c14">&lt;/</span><span class="c16 c14">html</span><span class="c8 c14">&gt;</span></p>
            </td>
        </tr>
    </table>
    <p class="c1 c5"><span class="c3"></span></p>
    <p class="c1 c11"><span class="c8">Pentru trimitere se utilizeaz&#259; metoda POST. Ca date trimise se
            folose&#537;te un simplu text &quot;Tom&quot;. Astfel, trimitem un text simplu. &#536;i, deoarece serverul
            r&#259;spunde, de asemenea, cu text, pentru ob&#539;inerea r&#259;spunsului aici se folose&#537;te
            metoda</span><span class="c8 c13">&nbsp;response.text()</span><span class="c3">. &#536;i la lansarea acestei
            pagini</span></p>
    <p class="c1 c11"><span class="c3">web va fi efectuat&#259; trimiterea datelor c&#259;tre server, iar &icirc;n
            consola browserului vom putea vedea r&#259;spunsul primit de la server:</span></p>
    <p class="c1 c5"><span class="c3"></span></p>
    <p class="c1 c11"><span
            style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 617.00px; height: 413.00px;"><img
                alt="" src="images/image2.png"
                style="width: 617.00px; height: 413.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);"
                title=""></span></p>
    <p class="c1 c5"><span class="c3"></span></p>
    <p class="c1 c11"><span class="c22">Trimiterea json.</span></p>
    <p class="c1 c5"><span class="c12"></span></p>
    <p class="c1 c11"><span class="c3">&Icirc;n mod similar, se pot trimite date mai complexe structural. De exemplu,
            s&#259; lu&#259;m &icirc;n considerare trimiterea datelor JSON. Pentru aceasta, pe partea de Node.js, vom
            defini urm&#259;torul server:</span></p>
    <p class="c1 c5"><span class="c3"></span></p><a id="t.844520c3038989f724e9d49a2b78f17b2803790c"></a><a id="t.9"></a>
    <table class="c6">
        <tr class="c0">
            <td class="c7" colspan="1" rowspan="1">
                <p class="c1"><span class="c8 c10">const</span><span class="c2">&nbsp;http = </span><span
                        class="c8 c18">require</span><span class="c2">(</span><span
                        class="c4">&quot;http&quot;</span><span class="c2">);<br></span><span
                        class="c8 c10">const</span><span class="c2">&nbsp;fs = </span><span
                        class="c8 c18">require</span><span class="c2">(</span><span
                        class="c4">&quot;fs&quot;</span><span class="c2">);<br> <br>http.createServer(</span><span
                        class="c8 c10">async</span><span class="c2">&nbsp;(request, response) =&gt; {<br> &nbsp;
                        &nbsp;</span><span class="c8 c10">if</span><span class="c2">(request.url == </span><span
                        class="c4">&quot;/user&quot;</span><span class="c2">){<br> &nbsp; &nbsp; &nbsp;
                        &nbsp;</span><span class="c8 c10">const</span><span class="c2">&nbsp;buffers = [];<br> &nbsp;
                        &nbsp; &nbsp; &nbsp;</span><span class="c8 c10">for</span><span class="c2">&nbsp;</span><span
                        class="c8 c10">await</span><span class="c2">&nbsp;(</span><span class="c8 c10">const</span><span
                        class="c2">&nbsp;chunk </span><span class="c8 c10">of</span><span class="c2">&nbsp;request)
                        {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;buffers.push(chunk);<br> &nbsp; &nbsp; &nbsp;
                        &nbsp;}<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c8 c10">const</span><span
                        class="c2">&nbsp;data = Buffer.concat(buffers).toString();<br> &nbsp; &nbsp; &nbsp;
                        &nbsp;</span><span class="c8 c10">const</span><span class="c2">&nbsp;user = </span><span
                        class="c8 c18">JSON</span><span class="c2">.parse(data); </span><span class="c8 c9">//
                        transform&#259;m &#537;irul &icirc;n JSON</span><span class="c2"><br> &nbsp; &nbsp; &nbsp;
                        &nbsp;</span><span class="c8 c9">// modific&#259;m datele obiectului primit</span><span
                        class="c2"><br> &nbsp; &nbsp; &nbsp; &nbsp;user.name = user.name + </span><span
                        class="c4">&quot; Smith&quot;</span><span class="c2">;<br> &nbsp; &nbsp; &nbsp; &nbsp;user.age
                        += </span><span class="c8 c20">1</span><span class="c2">;<br> &nbsp; &nbsp; &nbsp;
                        &nbsp;</span><span class="c8 c9">// trimitem obiectul modificat &icirc;napoi
                        clientului</span><span class="c2"><br> &nbsp; &nbsp; &nbsp; &nbsp;response.end(</span><span
                        class="c8 c18">JSON</span><span class="c2">.stringify(user));<br> &nbsp; &nbsp;} </span><span
                        class="c8 c10">else</span><span class="c2">&nbsp;{<br> &nbsp; &nbsp; &nbsp;
                        &nbsp;fs.readFile(</span><span class="c4">&quot;index.html&quot;</span><span class="c2">,
                        (error, data) =&gt; response.end(data));<br> &nbsp; &nbsp;}<br>}).listen(</span><span
                        class="c8 c20">3000</span><span class="c2">, () =&gt; </span><span
                        class="c8 c18">console</span><span class="c2">.log(</span><span class="c4">&quot;Serverul a fost
                        pornit la adresa http://localhost:3000&quot;</span><span class="c2">));</span></p>
            </td>
        </tr>
    </table>
    <p class="c1 c5"><span class="c3"></span></p>
    <p class="c1 c11"><span class="c3">&Icirc;n acest caz, pe server ne a&#537;tept&#259;m s&#259; primim un obiect
            &icirc;n format JSON, care are dou&#259; propriet&#259;&#539;i - name &#537;i age. Pentru exemplu, serverul
            modific&#259; valorile acestor propriet&#259;&#539;i &#537;i trimite obiectul modificat &icirc;napoi
            clientului.</span></p>
    <p class="c1 c5"><span class="c3"></span></p>
    <p class="c1 c11"><span class="c8">Pe pagina web, set&#259;m un obiect JSON pentru a fi trimis &#537;i primim datele
            &icirc;napoi folosind metoda </span><span class="c8 c13">response.json()</span><span class="c3">:</span></p>
    <p class="c1 c5"><span class="c3"></span></p><a id="t.0fa3e6e9f7718d903249f683c1cd60167445c7fd"></a><a
        id="t.10"></a>
    <table class="c6">
        <tr class="c0">
            <td class="c7" colspan="1" rowspan="1">
                <p class="c1"><span class="c2">fetch(</span><span class="c4">&quot;/user&quot;</span><span class="c2">,
                        { <br> &nbsp; &nbsp;method: </span><span class="c4">&quot;POST&quot;</span><span class="c2">,
                        <br> &nbsp; &nbsp;headers: { </span><span class="c4">&quot;Accept&quot;</span><span class="c2">:
                    </span><span class="c4">&quot;application/json&quot;</span><span class="c2">, </span><span
                        class="c4">&quot;Content-Type&quot;</span><span class="c2">: </span><span
                        class="c4">&quot;application/json&quot;</span><span class="c2">&nbsp;},<br> &nbsp; &nbsp;body:
                    </span><span class="c8 c18">JSON</span><span class="c2">.stringify({<br> &nbsp; &nbsp; &nbsp;
                        &nbsp;name: </span><span class="c4">&quot;Tom&quot;</span><span class="c2">,<br> &nbsp; &nbsp;
                        &nbsp; &nbsp;age: </span><span class="c8 c20">37</span><span class="c2"><br> &nbsp;
                        &nbsp;})<br>})<br>.then(response =&gt; response.json())<br>.then(user =&gt; </span><span
                        class="c8 c18">console</span><span class="c2">.log(user.name, </span><span
                        class="c4">&quot;-&quot;</span><span class="c2">, user.age));</span></p>
            </td>
        </tr>
    </table>
    <p class="c1 c5"><span class="c3"></span></p>
    <p class="c1 c11"><span
            style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 616.00px; height: 389.00px;"><img
                alt="" src="images/image1.png"
                style="width: 616.00px; height: 389.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);"
                title=""></span></p>
    <p class="c1 c5"><span class="c3"></span></p>
    <p class="c1 c11"><span class="c3">Aceasta demonstreaz&#259; cum se pot trimite &#537;i primi date structurate, cum
            ar fi JSON, &icirc;ntre client &#537;i server folosind Node.js &#537;i fetch API &icirc;n JavaScript.</span>
    </p>
    <p class="c1 c5"><span class="c3"></span></p>
</body>

</html>