<html>

<head>
    <meta content="text/html; charset=UTF-8" http-equiv="content-type">
    <link rel="stylesheet" type="text/css" href="/lessons/styles.css">
</head>

<body class="c1 doc-content">
    <h1 class="c7 c12 c24">Obținerea datelor din răspuns. </h1>
    <p class="c5"><span class="c12 c11"></span></p>
    <p class="c7"><span class="c11">Toate datele trimise de server sunt disponibile &icirc;n obiectul </span><span
            class="c16">Response </span><span class="c11">prin proprietatea body, care reprezint&#259; un obiect
        </span><span class="c16">ReadableStream</span><span class="c11">, dar este mult mai simplu s&#259;
            folose&#537;ti una dintre metodele obiectului </span><span class="c16">Response</span><span
            class="c12 c11">. Interfa&#539;a Response ofer&#259; urm&#259;toarele metode:</span></p>
    <p class="c5"><span class="c12 c11"></span></p>
    <ul class="c19 lst-kix_1lfpe1t9oisi-0 start">
        <li class="c7 c9 li-bullet-0"><span class="c16">arrayBuffer()</span><span class="c11">: returneaz&#259; un
                promise, care ob&#539;ine con&#539;inutul r&#259;spunsului sub form&#259; de obiect </span><span
                class="c8">ArrayBuffer</span></li>
    </ul>
    <p class="c5 c23"><span class="c12 c11"></span></p>
    <ul class="c19 lst-kix_1lfpe1t9oisi-0">
        <li class="c7 c9 li-bullet-0"><span class="c16">blob()</span><span class="c11">: returneaz&#259; un promise,
                care ob&#539;ine con&#539;inutul r&#259;spunsului sub form&#259; de obiect </span><span
                class="c8">Blob</span></li>
    </ul>
    <p class="c5 c23"><span class="c12 c11"></span></p>
    <ul class="c19 lst-kix_1lfpe1t9oisi-0">
        <li class="c7 c9 li-bullet-0"><span class="c16">clone()</span><span class="c12 c11">: returneaz&#259; o copie a
                obiectului Response curent</span></li>
    </ul>
    <p class="c5 c23"><span class="c12 c11"></span></p>
    <ul class="c19 lst-kix_1lfpe1t9oisi-0">
        <li class="c7 c9 li-bullet-0"><span class="c16">error()</span><span class="c12 c11">: returneaz&#259; un nou
                obiect Response, asociat cu o eroare de re&#539;ea ap&#259;rut&#259;</span></li>
    </ul>
    <p class="c5 c23"><span class="c12 c11"></span></p>
    <ul class="c19 lst-kix_1lfpe1t9oisi-0">
        <li class="c7 c9 li-bullet-0"><span class="c16">formData()</span><span class="c11">: returneaz&#259; un promise,
                care ob&#539;ine con&#539;inutul r&#259;spunsului sub form&#259; de obiect </span><span
                class="c8">FormData</span></li>
    </ul>
    <p class="c5 c23"><span class="c12 c11"></span></p>
    <ul class="c19 lst-kix_1lfpe1t9oisi-0">
        <li class="c7 c9 li-bullet-0"><span class="c16">json()</span><span class="c12 c11">: returneaz&#259; un promise,
                care ob&#539;ine con&#539;inutul r&#259;spunsului sub form&#259; de obiect JSON</span></li>
    </ul>
    <p class="c5 c23"><span class="c12 c11"></span></p>
    <ul class="c19 lst-kix_1lfpe1t9oisi-0">
        <li class="c7 c9 li-bullet-0"><span class="c16">redirect()</span><span class="c12 c11">: returneaz&#259; un nou
                obiect Response cu o alt&#259; adres&#259; URL</span></li>
    </ul>
    <p class="c5 c23"><span class="c12 c11"></span></p>
    <ul class="c19 lst-kix_1lfpe1t9oisi-0">
        <li class="c7 c9 li-bullet-0"><span class="c16">text()</span><span class="c12 c11">: returneaz&#259; un promise,
                care ob&#539;ine con&#539;inutul r&#259;spunsului sub form&#259; de text</span></li>
    </ul>
    <p class="c5"><span class="c12 c11"></span></p>
    <p class="c7"><span class="c12 c22">Ob&#539;inerea r&#259;spunsului sub form&#259; de text.</span></p>
    <p class="c5"><span class="c8"></span></p>
    <p class="c7"><span class="c11">Pentru a ob&#539;ine r&#259;spunsul sub form&#259; de text se folose&#537;te metoda
        </span><span class="c16">text()</span><span class="c12 c11">. De exemplu, serverul pe Node.js trimite ca
            r&#259;spuns clientului un anumit text:</span></p>
    <p class="c5"><span class="c12 c11"></span></p><a id="t.c7d1a678343d368059468da2dd1fe46ea3c43de0"></a><a
        id="t.0"></a>
    <table class="c10">
        <tr class="c20">
            <td class="c3" colspan="1" rowspan="1">
                <p class="c18"><span class="c11 c13">const</span><span class="c0">&nbsp;http = </span><span
                        class="c11 c17">require</span><span class="c0">(</span><span
                        class="c4">&quot;http&quot;</span><span class="c0">);<br></span><span
                        class="c11 c13">const</span><span class="c0">&nbsp;fs = </span><span
                        class="c11 c17">require</span><span class="c0">(</span><span
                        class="c4">&quot;fs&quot;</span><span class="c0">);<br> &nbsp;
                        &nbsp;<br>http.createServer(</span><span class="c11 c13">function</span><span
                        class="c0">(request, response){<br> &nbsp; &nbsp; &nbsp;<br> &nbsp; &nbsp;</span><span
                        class="c11 c13">if</span><span class="c0">(request.url == </span><span
                        class="c4">&quot;/hello&quot;</span><span class="c0">){<br> &nbsp; &nbsp; &nbsp;
                        &nbsp;response.end(</span><span class="c4">&quot;Fetch pe METANIT.COM&quot;</span><span
                        class="c0">);<br> &nbsp; &nbsp;}<br> &nbsp; &nbsp;</span><span class="c11 c13">else</span><span
                        class="c0">{<br> &nbsp; &nbsp; &nbsp; &nbsp;fs.readFile(</span><span
                        class="c4">&quot;index.html&quot;</span><span class="c0">, (error, data) =&gt;
                        response.end(data));<br> &nbsp; &nbsp;}<br>}).listen(</span><span
                        class="c11 c15">3000</span><span class="c0">, ()=&gt;</span><span
                        class="c11 c17">console</span><span class="c0">.log(</span><span class="c4">&quot;Serverul a
                        fost lansat la adresa http://localhost:3000&quot;</span><span class="c0">));</span></p>
            </td>
        </tr>
    </table>
    <p class="c5"><span class="c12 c11"></span></p>
    <p class="c5"><span class="c12 c11"></span></p>
    <p class="c7"><span class="c12 c11">&Icirc;n acest caz, la accesarea adresei &quot;/hello&quot;, serverul va trimite
            ca r&#259;spuns clientului textul &quot;Fetch pe FDC.COM&quot;.</span></p>
    <p class="c5"><span class="c12 c11"></span></p>
    <p class="c7"><span class="c11">Pe pagina index.html, cu ajutorul metodei </span><span
            class="c16">text()</span><span class="c12 c11">&nbsp;ob&#539;inem acest text:</span></p>
    <p class="c5"><span class="c12 c11"></span></p><a id="t.9105569bc694f401fd744a74a01c16aaf58eb629"></a><a
        id="t.1"></a>
    <table class="c10">
        <tr class="c20">
            <td class="c3" colspan="1" rowspan="1">
                <p class="c18"><span class="c0">&lt;!DOCTYPE html&gt;<br></span><span class="c6">&lt;</span><span
                        class="c2">html</span><span class="c6">&gt;</span><span class="c0"><br></span><span
                        class="c6">&lt;</span><span class="c2">head</span><span class="c6">&gt;</span><span
                        class="c0"><br> &nbsp; &nbsp;</span><span class="c6">&lt;</span><span
                        class="c2">meta</span><span class="c6">&nbsp;charset=</span><span
                        class="c4">&quot;utf-8&quot;</span><span class="c6">&nbsp;/&gt;</span><span class="c0"><br>
                        &nbsp; &nbsp;</span><span class="c6">&lt;</span><span class="c2">title</span><span
                        class="c6">&gt;</span><span class="c0">FDC.COM</span><span class="c6">&lt;/</span><span
                        class="c2">title</span><span class="c6">&gt;</span><span class="c0"><br></span><span
                        class="c6">&lt;/</span><span class="c2">head</span><span class="c6">&gt;</span><span
                        class="c0"><br></span><span class="c6">&lt;</span><span class="c2">body</span><span
                        class="c6">&gt;</span><span class="c0"><br></span><span class="c6">&lt;</span><span
                        class="c2">script</span><span class="c6">&gt;</span><span class="c0"><br>fetch(</span><span
                        class="c4">&quot;/hello&quot;</span><span class="c0">)<br> &nbsp; &nbsp;.then(response =&gt;
                        response.text())<br> &nbsp; &nbsp;.then(responseText =&gt; </span><span
                        class="c11 c17">console</span><span class="c0">.log(responseText));<br></span><span
                        class="c6">&lt;/</span><span class="c2">script</span><span class="c6">&gt;</span><span
                        class="c0"><br></span><span class="c6">&lt;/</span><span class="c2">body</span><span
                        class="c6">&gt;</span><span class="c0"><br></span><span class="c6">&lt;/</span><span
                        class="c2">html</span><span class="c6">&gt;</span></p>
            </td>
        </tr>
    </table>
    <p class="c5"><span class="c12 c11"></span></p>
    <p class="c7"><span class="c11">Pentru a ob&#539;ine textul trimis, la obiectul response se apeleaz&#259;
        </span><span class="c11 c14">metoda response.text()</span><span class="c11">, care returneaz&#259; un Promise.
            &#536;i pentru a ob&#539;ine de fapt textul r&#259;spunsului, se ata&#537;eaz&#259; o a doua
            metod&#259;</span><span class="c11 c14">&nbsp;then()</span><span class="c12 c11">, &icirc;n care, &icirc;n
            func&#539;ia callback, ob&#539;inem textul r&#259;spunsului:</span></p>
    <p class="c5"><span class="c12 c11"></span></p><a id="t.695d8230c0ad7791b442c90cc8d7053ae8d6e0c9"></a><a
        id="t.2"></a>
    <table class="c10">
        <tr class="c20">
            <td class="c3" colspan="1" rowspan="1">
                <p class="c18"><span class="c0">.then(responseText =&gt; </span><span
                        class="c11 c17">console</span><span class="c0">.log(responseText));</span></p>
            </td>
        </tr>
    </table>
    <p class="c5"><span class="c12 c11"></span></p>
    <p class="c7"><span class="c11">Sau se poate folosi </span><span class="c11 c14">async/await</span><span
            class="c12 c11">:</span></p>
    <p class="c5"><span class="c12 c11"></span></p><a id="t.dd0ec2052597493d9220f3bf2bd42559a6e8caf2"></a><a
        id="t.3"></a>
    <table class="c10">
        <tr class="c20">
            <td class="c3" colspan="1" rowspan="1">
                <p class="c18"><span class="c0">getText();<br></span><span class="c11 c13">async</span><span
                        class="c0">&nbsp;</span><span class="c11 c13">function</span><span class="c0">&nbsp;</span><span
                        class="c11 c17">getText</span><span class="c0">() {<br> &nbsp; &nbsp;</span><span
                        class="c11 c21">// ob&#539;inem obiectul r&#259;spuns</span><span class="c0"><br> &nbsp;
                        &nbsp;</span><span class="c11 c13">const</span><span class="c0">&nbsp;response = </span><span
                        class="c11 c13">await</span><span class="c0">&nbsp;fetch(</span><span
                        class="c4">&quot;/hello&quot;</span><span class="c0">);<br> &nbsp; &nbsp;</span><span
                        class="c11 c21">// extragem textul r&#259;spunsului din obiectul r&#259;spuns</span><span
                        class="c0"><br> &nbsp; &nbsp;</span><span class="c11 c13">const</span><span
                        class="c0">&nbsp;responseText = </span><span class="c11 c13">await</span><span
                        class="c0">&nbsp;response.text();<br> &nbsp; &nbsp;</span><span
                        class="c11 c17">console</span><span class="c0">.log(responseText);<br>}</span></p>
            </td>
        </tr>
    </table>
    <p class="c5"><span class="c11 c12"></span></p>
    <p class="c7"><span class="c12 c22">Ob&#539;inerea r&#259;spunsului sub form&#259; de json.</span></p>
    <p class="c5"><span class="c8"></span></p>
    <p class="c7"><span class="c12 c11">S&#259; presupunem c&#259; serverul trimite un obiect json:</span></p>
    <p class="c5"><span class="c12 c11"></span></p><a id="t.2398a407265dfe788273b73457c48cd46511fe88"></a><a
        id="t.4"></a>
    <table class="c10">
        <tr class="c20">
            <td class="c3" colspan="1" rowspan="1">
                <p class="c18"><span class="c11 c13">const</span><span class="c0">&nbsp;http = </span><span
                        class="c11 c17">require</span><span class="c0">(</span><span
                        class="c4">&quot;http&quot;</span><span class="c0">);<br></span><span
                        class="c11 c13">const</span><span class="c0">&nbsp;fs = </span><span
                        class="c11 c17">require</span><span class="c0">(</span><span
                        class="c4">&quot;fs&quot;</span><span class="c0">);<br> &nbsp;
                        &nbsp;<br>http.createServer(</span><span class="c11 c13">function</span><span
                        class="c0">(request, response){<br> &nbsp; &nbsp; &nbsp;<br> &nbsp; &nbsp;</span><span
                        class="c11 c13">if</span><span class="c0">(request.url == </span><span
                        class="c4">&quot;/user&quot;</span><span class="c0">){<br> &nbsp; &nbsp; &nbsp;
                        &nbsp;</span><span class="c11 c13">const</span><span class="c0">&nbsp;user = {name: </span><span
                        class="c4">&quot;Tom&quot;</span><span class="c0">, age: </span><span
                        class="c11 c15">37</span><span class="c0">};<br> &nbsp; &nbsp; &nbsp;
                        &nbsp;response.end(</span><span class="c11 c17">JSON</span><span
                        class="c0">.stringify(user));<br> &nbsp; &nbsp;}<br> &nbsp; &nbsp;</span><span
                        class="c11 c13">else</span><span class="c0">{<br> &nbsp; &nbsp; &nbsp;
                        &nbsp;fs.readFile(</span><span class="c4">&quot;index.html&quot;</span><span class="c0">,
                        (error, data) =&gt; response.end(data));<br> &nbsp; &nbsp;}<br>}).listen(</span><span
                        class="c11 c15">3000</span><span class="c0">, ()=&gt;</span><span
                        class="c11 c17">console</span><span class="c0">.log(</span><span class="c4">&quot;Serverul a
                        fost lansat la adresa http://localhost:3000&quot;</span><span class="c0">));</span></p>
            </td>
        </tr>
    </table>
    <p class="c5"><span class="c12 c11"></span></p>
    <p class="c7"><span class="c12 c11">&Icirc;n acest caz, serverul, la accesarea adresei &quot;/user&quot;, trimite
            obiectul user sub form&#259; de cod json.</span></p>
    <p class="c5"><span class="c12 c11"></span></p>
    <p class="c7"><span class="c12 c11">Ob&#539;inem acest obiect:</span></p>
    <p class="c5"><span class="c12 c11"></span></p><a id="t.35142bf3444c76ec8d99c5a662fda8f92aff60fc"></a><a
        id="t.5"></a>
    <table class="c10">
        <tr class="c20">
            <td class="c3" colspan="1" rowspan="1">
                <p class="c18"><span class="c0">fetch(</span><span class="c4">&quot;/user&quot;</span><span
                        class="c0">)<br> &nbsp; &nbsp;.then(response =&gt; response.json())<br> &nbsp; &nbsp;.then(user
                        =&gt; </span><span class="c11 c17">console</span><span class="c0">.log(user.name, </span><span
                        class="c4">&quot; - &quot;</span><span class="c0">, user.age));</span></p>
            </td>
        </tr>
    </table>
    <p class="c5"><span class="c12 c11"></span></p>
    <p class="c7"><span class="c11">Metoda</span><span class="c16">&nbsp;json()</span><span
            class="c12 c11">&nbsp;returneaz&#259; un obiect Promise, deci &icirc;n a doua metod&#259; then() putem
            ob&#539;ine obiectul json trimis &#537;i ne putem referi la propriet&#259;&#539;ile sale:</span></p>
    <p class="c5"><span class="c12 c11"></span></p><a id="t.8c86d2661dd5998338bcd982c85178c17ba612fe"></a><a
        id="t.6"></a>
    <table class="c10">
        <tr class="c20">
            <td class="c3" colspan="1" rowspan="1">
                <p class="c18"><span class="c0">.then(user =&gt; </span><span class="c11 c17">console</span><span
                        class="c0">.log(user.name, </span><span class="c4">&quot;-&quot;</span><span class="c0">,
                        user.age));</span></p>
            </td>
        </tr>
    </table>
    <p class="c5"><span class="c12 c11"></span></p>
    <p class="c7"><span class="c11">Acela&#537;i exemplu cu folosirea </span><span
            class="c11 c14">async/await</span><span class="c12 c11">:</span></p>
    <p class="c5"><span class="c12 c11"></span></p><a id="t.72dd1fe225aa2c36dbc5175fe367f23610b38553"></a><a
        id="t.7"></a>
    <table class="c10">
        <tr class="c20">
            <td class="c3" colspan="1" rowspan="1">
                <p class="c18"><span class="c0">getUser();<br></span><span class="c11 c13">async</span><span
                        class="c0">&nbsp;</span><span class="c11 c13">function</span><span class="c0">&nbsp;</span><span
                        class="c11 c17">getUser</span><span class="c0">() {<br> &nbsp; &nbsp;</span><span
                        class="c11 c21">// ob&#539;inem obiectul r&#259;spuns</span><span class="c0"><br> &nbsp;
                        &nbsp;</span><span class="c11 c13">const</span><span class="c0">&nbsp;response = </span><span
                        class="c11 c13">await</span><span class="c0">&nbsp;fetch(</span><span
                        class="c4">&quot;/user&quot;</span><span class="c0">);<br> &nbsp; &nbsp;</span><span
                        class="c11 c21">// extragem json din obiectul r&#259;spuns</span><span class="c0"><br> &nbsp;
                        &nbsp;</span><span class="c11 c13">const</span><span class="c0">&nbsp;user = </span><span
                        class="c11 c13">await</span><span class="c0">&nbsp;response.json();<br> &nbsp;
                        &nbsp;</span><span class="c11 c17">console</span><span class="c0">.log(user.name, </span><span
                        class="c4">&quot;-&quot;</span><span class="c0">, user.age);<br>}</span></p>
            </td>
        </tr>
    </table>
    <p class="c5"><span class="c12 c11"></span></p>
    <p class="c7"><span class="c12 c22">Trimiterea seturilor de date.</span></p>
    <p class="c5"><span class="c12 c11"></span></p>
    <p class="c7"><span class="c12 c11">&Icirc;n mod similar, se pot ob&#539;ine seturi de obiecte &icirc;n format json.
            S&#259; presupunem c&#259; serverul pe node.js trimite un array de obiecte:</span></p>
    <p class="c5"><span class="c12 c11"></span></p><a id="t.1912237056746de6b418bbaf4979b7c3634bf1d3"></a><a
        id="t.8"></a>
    <table class="c10">
        <tr class="c20">
            <td class="c3" colspan="1" rowspan="1">
                <p class="c18"><span class="c11 c13">const</span><span class="c0">&nbsp;http = </span><span
                        class="c11 c17">require</span><span class="c0">(</span><span
                        class="c4">&quot;http&quot;</span><span class="c0">);<br></span><span
                        class="c11 c13">const</span><span class="c0">&nbsp;fs = </span><span
                        class="c11 c17">require</span><span class="c0">(</span><span
                        class="c4">&quot;fs&quot;</span><span class="c0">);<br> &nbsp;
                        &nbsp;<br>http.createServer(</span><span class="c11 c13">function</span><span
                        class="c0">(request, response){<br> &nbsp; &nbsp; &nbsp;<br> &nbsp; &nbsp;</span><span
                        class="c11 c13">if</span><span class="c0">(request.url == </span><span
                        class="c4">&quot;/users.json&quot;</span><span class="c0">){<br> &nbsp; &nbsp; &nbsp;
                        &nbsp;</span><span class="c11 c13">const</span><span class="c0">&nbsp;users = [<br> &nbsp;
                        &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;{name: </span><span class="c4">&quot;Tom&quot;</span><span
                        class="c0">, age: </span><span class="c11 c15">37</span><span class="c0">},<br> &nbsp; &nbsp;
                        &nbsp; &nbsp; &nbsp; &nbsp;{name: </span><span class="c4">&quot;Sam&quot;</span><span
                        class="c0">, age: </span><span class="c11 c15">25</span><span class="c0">},<br> &nbsp; &nbsp;
                        &nbsp; &nbsp; &nbsp; &nbsp;{name: </span><span class="c4">&quot;Bob&quot;</span><span
                        class="c0">, age: </span><span class="c11 c15">41</span><span class="c0">}<br> &nbsp; &nbsp;
                        &nbsp; &nbsp;];<br> &nbsp; &nbsp; &nbsp; &nbsp;response.end(</span><span
                        class="c11 c17">JSON</span><span class="c0">.stringify(users));<br> &nbsp; &nbsp;}<br> &nbsp;
                        &nbsp;</span><span class="c11 c13">else</span><span class="c0">{<br> &nbsp; &nbsp; &nbsp;
                        &nbsp;fs.readFile(</span><span class="c4">&quot;index.html&quot;</span><span class="c0">,
                        (error, data) =&gt; response.end(data));<br> &nbsp; &nbsp;}<br>}).listen(</span><span
                        class="c11 c15">3000</span><span class="c0">, ()=&gt;</span><span
                        class="c11 c17">console</span><span class="c0">.log(</span><span class="c4">&quot;Serverul a
                        fost lansat la adresa http://localhost:3000&quot;</span><span class="c0">));</span></p>
            </td>
        </tr>
    </table>
    <p class="c5"><span class="c12 c11"></span></p>
    <p class="c7"><span class="c12 c11">Ob&#539;inem aceste date pe pagina web:</span></p>
    <p class="c5"><span class="c12 c11"></span></p><a id="t.150acc94d86b51d594d10c334d5c585e57c7b7dc"></a><a
        id="t.9"></a>
    <table class="c10">
        <tr class="c20">
            <td class="c3" colspan="1" rowspan="1">
                <p class="c18"><span class="c0">fetch(</span><span class="c4">&quot;/users.json&quot;</span><span
                        class="c0">)<br> &nbsp; &nbsp;.then(response =&gt; response.json())<br> &nbsp; &nbsp;.then(users
                        =&gt; users.forEach(user =&gt; </span><span class="c11 c17">console</span><span
                        class="c0">.log(user.name, </span><span class="c4">&quot; - &quot;</span><span class="c0">,
                        user.age)));<br> &nbsp; &nbsp; <br></span><span class="c11 c21">// analog cu
                        async/await</span><span class="c0"><br>getUsers();<br></span><span
                        class="c11 c13">async</span><span class="c0">&nbsp;</span><span
                        class="c11 c13">function</span><span class="c0">&nbsp;</span><span
                        class="c11 c17">getUsers</span><span class="c0">() {<br> <br> &nbsp; &nbsp;</span><span
                        class="c11 c13">const</span><span class="c0">&nbsp;response = </span><span
                        class="c11 c13">await</span><span class="c0">&nbsp;fetch(</span><span
                        class="c4">&quot;/users.json&quot;</span><span class="c0">);<br> &nbsp; &nbsp;</span><span
                        class="c11 c13">const</span><span class="c0">&nbsp;users = </span><span
                        class="c11 c13">await</span><span class="c0">&nbsp;response.json();<br> &nbsp;
                        &nbsp;users.forEach(user =&gt; </span><span class="c11 c17">console</span><span
                        class="c0">.log(user.name, </span><span class="c4">&quot; - &quot;</span><span class="c0">,
                        user.age))<br>}</span></p>
            </td>
        </tr>
    </table>
    <p class="c5"><span class="c12 c11"></span></p>
    <p class="c7"><span class="c12 c22">Trimiterea fi&#537;ierului json.</span></p>
    <p class="c5"><span class="c8"></span></p>
    <p class="c7"><span class="c11">S&#259; presupunem c&#259; &icirc;n folderul serverului este definit
            fi&#537;ierul</span><span class="c16">&nbsp;users.json</span><span class="c12 c11">&nbsp;cu urm&#259;torul
            con&#539;inut:</span></p>
    <p class="c5"><span class="c12 c11"></span></p><a id="t.3e82ab82f6de5219db6e54f31a877e4f3ac1a01b"></a><a
        id="t.10"></a>
    <table class="c10">
        <tr class="c20">
            <td class="c3" colspan="1" rowspan="1">
                <p class="c18"><span class="c0">[<br> &nbsp; &nbsp;{</span><span class="c4">&quot;name&quot;</span><span
                        class="c0">: </span><span class="c4">&quot;Tom&quot;</span><span class="c0">, </span><span
                        class="c4">&quot;age&quot;</span><span class="c0">: </span><span class="c11 c15">37</span><span
                        class="c0">},<br> &nbsp; &nbsp;{</span><span class="c4">&quot;name&quot;</span><span
                        class="c0">: </span><span class="c4">&quot;Sam&quot;</span><span class="c0">, </span><span
                        class="c4">&quot;age&quot;</span><span class="c0">: </span><span class="c11 c15">25</span><span
                        class="c0">},<br> &nbsp; &nbsp;{</span><span class="c4">&quot;name&quot;</span><span
                        class="c0">: </span><span class="c4">&quot;Bob&quot;</span><span class="c0">, </span><span
                        class="c4">&quot;age: 41&quot;</span><span class="c0">}<br>]</span></p>
            </td>
        </tr>
    </table>
    <p class="c5"><span class="c12 c11"></span></p>
    <p class="c7"><span
            style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 624.00px; height: 142.67px;"><img
                alt="" src="images/image2.png"
                style="width: 624.00px; height: 142.67px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);"
                title=""></span></p>
    <p class="c5"><span class="c12 c11"></span></p>
    <p class="c7"><span class="c12 c11">&Icirc;n cazul serverului node.js, am putea trimite acest fi&#537;ier &icirc;n
            urm&#259;torul mod:</span></p>
    <p class="c5"><span class="c12 c11"></span></p><a id="t.837d255c904db8341850ba7b54c7245e3173d146"></a><a
        id="t.11"></a>
    <table class="c10">
        <tr class="c20">
            <td class="c3" colspan="1" rowspan="1">
                <p class="c18"><span class="c11 c13">const</span><span class="c0">&nbsp;http = </span><span
                        class="c11 c17">require</span><span class="c0">(</span><span
                        class="c4">&quot;http&quot;</span><span class="c0">);<br></span><span
                        class="c11 c13">const</span><span class="c0">&nbsp;fs = </span><span
                        class="c11 c17">require</span><span class="c0">(</span><span
                        class="c4">&quot;fs&quot;</span><span class="c0">);<br> &nbsp;
                        &nbsp;<br>http.createServer(</span><span class="c11 c13">function</span><span
                        class="c0">(request, response){<br> &nbsp; &nbsp; &nbsp;<br> &nbsp; &nbsp;</span><span
                        class="c11 c13">if</span><span class="c0">(request.url == </span><span
                        class="c4">&quot;/users.json&quot;</span><span class="c0">){<br> &nbsp; &nbsp; &nbsp;
                        &nbsp;fs.readFile(</span><span class="c4">&quot;users.json&quot;</span><span class="c0">,
                        (error, data) =&gt; response.end(data));<br> &nbsp; &nbsp;}<br> &nbsp; &nbsp;</span><span
                        class="c11 c13">else</span><span class="c0">{<br> &nbsp; &nbsp; &nbsp;
                        &nbsp;fs.readFile(</span><span class="c4">&quot;index.html&quot;</span><span class="c0">,
                        (error, data) =&gt; response.end(data));<br> &nbsp; &nbsp;}<br>}).listen(</span><span
                        class="c11 c15">3000</span><span class="c0">, ()=&gt;</span><span
                        class="c11 c17">console</span><span class="c0">.log(</span><span class="c4">&quot;Serverul a
                        fost lansat la adresa http://localhost:3000&quot;</span><span class="c0">));</span></p>
            </td>
        </tr>
    </table>
    <p class="c5"><span class="c12 c11"></span></p>
    <p class="c7"><span class="c11">&Icirc;n func&#539;ie de tehnologia specific&#259; serverului, trimiterea
            fi&#537;ierelor poate varia. Aici, la fel ca &icirc;n cazul trimiterii fi&#537;ierului index.html, citim
            datele din fi&#537;ierul users.json folosind func&#539;ia </span><span
            class="c11 c14">fs.readFile()</span><span class="c12 c11">&nbsp;&#537;i le trimitem ca r&#259;spuns.</span>
    </p>
    <p class="c5"><span class="c12 c11"></span></p>
    <p class="c7"><span class="c12 c11">Pe partea clientului ar fi acela&#537;i cod ca &icirc;n cazul precedent:</span>
    </p>
    <p class="c5"><span class="c12 c11"></span></p><a id="t.3eb5d7e0b1b65f4c452da34510352a6477315053"></a><a
        id="t.12"></a>
    <table class="c10">
        <tr class="c20">
            <td class="c3" colspan="1" rowspan="1">
                <p class="c18"><span class="c0">fetch(</span><span class="c4">&quot;/users.json&quot;</span><span
                        class="c0">)<br> &nbsp; &nbsp;.then(response =&gt; response.json())<br> &nbsp; &nbsp;.then(users
                        =&gt; users.forEach(user =&gt; </span><span class="c11 c17">console</span><span
                        class="c0">.log(user.name, </span><span class="c4">&quot; - &quot;</span><span class="c0">,
                        user.age)));</span></p>
            </td>
        </tr>
    </table>
    <p class="c5"><span class="c12 c11"></span></p>
    <p class="c7"><span class="c12 c22">&Icirc;nc&#259;rcarea datelor binare.</span></p>
    <p class="c5"><span class="c8"></span></p>
    <p class="c7"><span class="c11">Cu ajutorul metodei </span><span class="c16">blob() </span><span class="c11">se pot
            &icirc;nc&#259;rca date binare. S&#259; lu&#259;m exemplul imaginilor. S&#259; presupunem c&#259; pe server
            exist&#259; fi&#537;ierul</span><span class="c8">&nbsp;fox.png.</span></p>
    <p class="c5"><span class="c12 c11"></span></p>
    <p class="c7"><span
            style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 624.00px; height: 181.33px;"><img
                alt="" src="images/image3.png"
                style="width: 624.00px; height: 181.33px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);"
                title=""></span></p>
    <p class="c5"><span class="c12 c11"></span></p>
    <p class="c7"><span class="c12 c11">S&#259; presupunem c&#259; serverul node.js trimite acest fi&#537;ier la
            accesarea adresei &quot;fox.png&quot;:</span></p>
    <p class="c5"><span class="c12 c11"></span></p><a id="t.9d9903f49e554c6420c155ee30376130eb009e9c"></a><a
        id="t.13"></a>
    <table class="c10">
        <tr class="c20">
            <td class="c3" colspan="1" rowspan="1">
                <p class="c18"><span class="c11 c13">const</span><span class="c0">&nbsp;http = </span><span
                        class="c11 c17">require</span><span class="c0">(</span><span
                        class="c4">&quot;http&quot;</span><span class="c0">);<br></span><span
                        class="c11 c13">const</span><span class="c0">&nbsp;fs = </span><span
                        class="c11 c17">require</span><span class="c0">(</span><span
                        class="c4">&quot;fs&quot;</span><span class="c0">);<br> &nbsp;
                        &nbsp;<br>http.createServer(</span><span class="c11 c13">function</span><span
                        class="c0">(request, response){<br> &nbsp; &nbsp; &nbsp;<br> &nbsp; &nbsp;</span><span
                        class="c11 c13">if</span><span class="c0">(request.url == </span><span
                        class="c4">&quot;/fox.png&quot;</span><span class="c0">){<br> &nbsp; &nbsp; &nbsp;
                        &nbsp;fs.readFile(</span><span class="c4">&quot;fox.png&quot;</span><span class="c0">, (error,
                        data) =&gt; response.end(data));<br> &nbsp; &nbsp;}<br> &nbsp; &nbsp;</span><span
                        class="c11 c13">else</span><span class="c0">{<br> &nbsp; &nbsp; &nbsp;
                        &nbsp;fs.readFile(</span><span class="c4">&quot;index.html&quot;</span><span class="c0">,
                        (error, data) =&gt; response.end(data));<br> &nbsp; &nbsp;}<br>}).listen(</span><span
                        class="c11 c15">3000</span><span class="c0">, ()=&gt;</span><span
                        class="c11 c17">console</span><span class="c0">.log(</span><span class="c4">&quot;Serverul a
                        fost lansat la adresa http://localhost:3000&quot;</span><span class="c0">));</span></p>
            </td>
        </tr>
    </table>
    <p class="c5"><span class="c12 c11"></span></p>
    <p class="c7"><span class="c11">Pe pagina web</span><span class="c16">&nbsp;index.html</span><span class="c12 c11">,
            pentru a accesa serverul, definim urm&#259;torul cod:</span></p>
    <p class="c5"><span class="c12 c11"></span></p><a id="t.e1ed3022eca40ba7e8615cdc3df8c219a38878e1"></a><a
        id="t.14"></a>
    <table class="c10">
        <tr class="c20">
            <td class="c3" colspan="1" rowspan="1">
                <p class="c18"><span class="c0">&lt;!DOCTYPE html&gt;<br></span><span class="c6">&lt;</span><span
                        class="c2">html</span><span class="c6">&gt;</span><span class="c0"><br></span><span
                        class="c6">&lt;</span><span class="c2">head</span><span class="c6">&gt;</span><span
                        class="c0"><br> &nbsp; &nbsp;</span><span class="c6">&lt;</span><span
                        class="c2">meta</span><span class="c6">&nbsp;charset=</span><span
                        class="c4">&quot;utf-8&quot;</span><span class="c6">&nbsp;/&gt;</span><span class="c0"><br>
                        &nbsp; &nbsp;</span><span class="c6">&lt;</span><span class="c2">title</span><span
                        class="c6">&gt;</span><span class="c0">FDC.COM</span><span class="c6">&lt;/</span><span
                        class="c2">title</span><span class="c6">&gt;</span><span class="c0"><br></span><span
                        class="c6">&lt;/</span><span class="c2">head</span><span class="c6">&gt;</span><span
                        class="c0"><br></span><span class="c6">&lt;</span><span class="c2">body</span><span
                        class="c6">&gt;</span><span class="c0"><br> </span><span class="c6">&lt;</span><span
                        class="c2">img</span><span class="c6">&nbsp;/&gt;</span><span class="c0"><br></span><span
                        class="c6">&lt;</span><span class="c2">script</span><span class="c6">&gt;</span><span
                        class="c0"><br></span><span class="c11 c13">const</span><span class="c0"><br><br> img =
                    </span><span class="c11 c17">document</span><span class="c0">.querySelector(</span><span
                        class="c4">&quot;img&quot;</span><span class="c0">);<br>fetch(</span><span
                        class="c4">&quot;/fox.png&quot;</span><span class="c0">)<br> &nbsp; &nbsp;.then(response =&gt;
                        response.blob())<br> &nbsp; &nbsp;.then(data =&gt; img.src =
                        URL.createObjectURL(data));<br></span><span class="c6">&lt;/</span><span
                        class="c2">script</span><span class="c6">&gt;</span><span class="c0"><br></span><span
                        class="c6">&lt;/</span><span class="c2">body</span><span class="c6">&gt;</span><span
                        class="c0"><br></span><span class="c6">&lt;/</span><span class="c2">html</span><span
                        class="c6">&gt;</span></p>
            </td>
        </tr>
    </table>
    <p class="c5"><span class="c12 c11"></span></p>
    <p class="c7"><span class="c12 c11">Pentru afi&#537;area imaginii pe pagina web, este definit elementul
            &lt;img&gt;</span></p>
    <p class="c5"><span class="c12 c11"></span></p>
    <p class="c7"><span class="c11">Metoda</span><span class="c16">&nbsp;blob()</span><span
            class="c11">&nbsp;returneaz&#259; un obiect Promise, care ob&#539;ine datele r&#259;spunsului sub form&#259;
            de obiect </span><span class="c16">Blob</span><span class="c11">. &#536;i &icirc;n a doua
            metod&#259;</span><span class="c11 c14">&nbsp;then()</span><span class="c12 c11">&nbsp;ob&#539;inem acest
            obiect:</span></p>
    <p class="c5"><span class="c12 c11"></span></p><a id="t.21902a7a5146e4bc08e357d5ecf183f331afac4b"></a><a
        id="t.15"></a>
    <table class="c10">
        <tr class="c20">
            <td class="c3" colspan="1" rowspan="1">
                <p class="c18"><span class="c0">.then(data =&gt; img.src = URL.createObjectURL(data));</span></p>
            </td>
        </tr>
    </table>
    <p class="c5"><span class="c12 c11"></span></p>
    <p class="c7"><span class="c11">Aici trebuie s&#259; stabilim pentru elementul html </span><span
            class="c11 c14">&lt;img&gt;</span><span class="c11">&nbsp;ca surs&#259; de imagine fi&#537;ierul
            ob&#539;inut. Pentru acest lucru se apeleaz&#259; func&#539;ia </span><span
            class="c16">URL.createObjectURL()</span><span class="c11">, &icirc;n care se transmite obiectul Blob.
            Aceast&#259; func&#539;ie creeaz&#259; o adres&#259; URL, la care se proiecteaz&#259; fi&#537;ierul
            &icirc;nc&#259;rcat. Astfel, dup&#259; executarea cererii, elementul html </span><span
            class="c11 c14">&lt;img&gt;</span><span class="c11">&nbsp;va afi&#537;a imaginea &icirc;nc&#259;rcat&#259;.
            &nbsp;Pentru aplicarea acestui exemplu, desc&#259;rca&#539;i o simpl&#259; imagine de tip </span><span
            class="c16">png </span><span class="c11">&#537;i salva&#539;i-o &icirc;n fi&#537;ierul cu care lucra&#539;i
            ( la mine el este </span><span class="c16">app</span><span class="c11">), dup&#259; &icirc;nlocui&#539;i
            &icirc;n codul surs&#259; denumirea imaginii ( &icirc;n cazul meu - </span><span
            class="c11 c14">fox.png</span><span class="c11">&nbsp;)</span><span class="c11 c14">&nbsp;</span><span
            class="c12 c11">cu denumirea imaginii voastre:</span></p>
    <p class="c5"><span class="c12 c11"></span></p>
    <p class="c7"><span
            style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 499.50px; height: 351.33px;"><img
                alt="" src="images/image1.png"
                style="width: 499.50px; height: 351.33px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);"
                title=""></span></p>
    <p class="c5"><span class="c12 c11"></span></p>
    <p class="c7"><span class="c11">Exemplu similar cu utilizarea </span><span class="c11 c14">async/await</span><span
            class="c12 c11">:</span></p>
    <p class="c5"><span class="c12 c11"></span></p><a id="t.d637e0f36690baa9ff886abc09c0d76d6a9c05a4"></a><a
        id="t.16"></a>
    <table class="c10">
        <tr class="c20">
            <td class="c3" colspan="1" rowspan="1">
                <p class="c18"><span class="c11 c13">const</span><span class="c0">&nbsp;img = </span><span
                        class="c11 c17">document</span><span class="c0">.querySelector(</span><span
                        class="c4">&quot;img&quot;</span><span class="c0">);<br>getImage();<br></span><span
                        class="c11 c13">async</span><span class="c0">&nbsp;</span><span
                        class="c11 c13">function</span><span class="c0">&nbsp;</span><span
                        class="c11 c17">getImage</span><span class="c0">() {<br> &nbsp; &nbsp;</span><span
                        class="c11 c13">const</span><span class="c0">&nbsp;response = </span><span
                        class="c11 c13">await</span><span class="c0">&nbsp;fetch(</span><span
                        class="c4">&quot;/fox.png&quot;</span><span class="c0">);<br> &nbsp; &nbsp;</span><span
                        class="c11 c13">const</span><span class="c0">&nbsp;imgBlob = </span><span
                        class="c11 c13">await</span><span class="c0">&nbsp;response.blob();<br> &nbsp; &nbsp;img.src =
                        URL.createObjectURL(imgBlob);<br>}</span></p>
            </td>
        </tr>
    </table>
    <p class="c5"><span class="c12 c11"></span></p>
    <p class="c7"><span class="c12 c11">&Icirc;n mod similar, se pot ob&#539;ine &#537;i utiliza alte tipuri de
            fi&#537;iere, de exemplu, fi&#537;iere audio &#537;i video.</span></p>
    <p class="c5"><span class="c12 c11"></span></p>
</body>

</html>