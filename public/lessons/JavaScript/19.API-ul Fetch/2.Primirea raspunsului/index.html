<html>

<head>
    <meta content="text/html; charset=UTF-8" http-equiv="content-type">
    <link rel="stylesheet" type="text/css" href="/lessons/styles.css">
</head>

<body class="c22 doc-content">
    <h1 class="c15 c8 c23">Primirea răspunsului. Obiectul Response și proprietățile sale. </h1>
    <p class="c3"><span class="c8 c6"></span></p>
    <p class="c15"><span class="c6">Pentru reprezentarea r&#259;spunsului de la server &icirc;n API-ul Fetch se
            utilizeaz&#259; interfa&#539;a </span><span class="c7">Response</span><span class="c6">.
            Func&#539;ia</span><span class="c7">&nbsp;fetch()</span><span class="c8 c6">&nbsp;returneaz&#259; un obiect
            Promise, func&#539;ia callback din care prime&#537;te ca parametru un obiect Response cu r&#259;spunsul
            primit de la server:</span></p>
    <p class="c3"><span class="c8 c6"></span></p><a id="t.d68743b9748c240b5a27b771bb92fb8581017e5a"></a><a id="t.0"></a>
    <table class="c12">
        <tr class="c4">
            <td class="c14" colspan="1" rowspan="1">
                <p class="c19"><span class="c1">fetch(</span><span class="c6 c10">&quot;/hello&quot;</span><span
                        class="c1">).then(response =&gt; </span><span class="c6 c9">/* ac&#539;iuni cu response
                        */</span><span class="c1">&nbsp;)</span></p>
            </td>
        </tr>
    </table>
    <p class="c3"><span class="c8 c6"></span></p>
    <p class="c15"><span class="c8 c6">Sau se poate folosi async/await pentru a ob&#539;ine obiectul Response</span></p>
    <p class="c3"><span class="c8 c6"></span></p><a id="t.d6a41841d2319686258853f03ba21f2ec2bf03f4"></a><a id="t.1"></a>
    <table class="c12">
        <tr class="c4">
            <td class="c14" colspan="1" rowspan="1">
                <p class="c19"><span class="c6 c17">async</span><span class="c1">&nbsp;</span><span
                        class="c6 c17">function</span><span class="c1">&nbsp;</span><span
                        class="c6 c13">getText</span><span class="c1">() {<br> &nbsp; &nbsp;</span><span
                        class="c6 c9">// ob&#539;inem obiectul r&#259;spuns</span><span class="c1"><br> &nbsp;
                        &nbsp;</span><span class="c6 c17">const</span><span class="c1">&nbsp;response = </span><span
                        class="c6 c17">await</span><span class="c1">&nbsp;fetch(</span><span
                        class="c6 c10">&quot;http://localhost:3000/hello&quot;</span><span class="c1">);<br> &nbsp;
                        &nbsp;</span><span class="c6 c9">// ac&#539;iuni cu obiectul response .......</span><span
                        class="c1"><br>}</span></p>
            </td>
        </tr>
    </table>
    <p class="c3"><span class="c8 c6"></span></p>
    <p class="c15"><span class="c8 c6">Cu ajutorul propriet&#259;&#539;ilor obiectului Response se poate ob&#539;ine
            diverse informa&#539;ii din r&#259;spunsul primit. Obiectul Response are urm&#259;toarele
            propriet&#259;&#539;i:</span></p>
    <p class="c3"><span class="c8 c6"></span></p>
    <ul class="c11 lst-kix_y4h7ngvv35fs-0 start">
        <li class="c15 c5 c16 li-bullet-0"><span class="c7">body</span><span class="c6">: con&#539;inutul
                r&#259;spunsului sub form&#259; de obiect </span><span class="c8 c7">ReadableStream</span></li>
    </ul>
    <p class="c3 c5"><span class="c8 c6"></span></p>
    <ul class="c11 lst-kix_y4h7ngvv35fs-0">
        <li class="c15 c5 c16 li-bullet-0"><span class="c7">bodyUsed</span><span class="c8 c6">: p&#259;streaz&#259; o
                valoare boolean&#259; care indic&#259; dac&#259; con&#539;inutul r&#259;spunsului a fost deja folosit
                sau nu.</span></li>
    </ul>
    <p class="c3 c5"><span class="c8 c6"></span></p>
    <ul class="c11 lst-kix_y4h7ngvv35fs-0">
        <li class="c15 c5 c16 li-bullet-0"><span class="c7">headers</span><span class="c6">: setul de antete ale
                r&#259;spunsului sub form&#259; de obiect </span><span class="c8 c7">Headers</span></li>
    </ul>
    <p class="c3 c5"><span class="c8 c6"></span></p>
    <ul class="c11 lst-kix_y4h7ngvv35fs-0">
        <li class="c15 c5 c16 li-bullet-0"><span class="c7">ok</span><span class="c8 c6">: p&#259;streaz&#259; o valoare
                boolean&#259; care indic&#259; dac&#259; solicitarea a fost finalizat&#259; cu succes (adic&#259;
                dac&#259; codul de stare al r&#259;spunsului se afl&#259; &icirc;n intervalul 200-299)</span></li>
    </ul>
    <p class="c3 c5"><span class="c8 c6"></span></p>
    <ul class="c11 lst-kix_y4h7ngvv35fs-0">
        <li class="c15 c5 c16 li-bullet-0"><span class="c7">redirected</span><span class="c8 c6">: p&#259;streaz&#259; o
                valoare boolean&#259; care indic&#259; dac&#259; r&#259;spunsul este rezultatul unei
                redirec&#539;ion&#259;ri</span></li>
    </ul>
    <p class="c3 c5"><span class="c8 c6"></span></p>
    <ul class="c11 lst-kix_y4h7ngvv35fs-0">
        <li class="c15 c5 c16 li-bullet-0"><span class="c7">status</span><span class="c8 c6">: p&#259;streaz&#259; codul
                de stare al r&#259;spunsului</span></li>
    </ul>
    <p class="c3 c5"><span class="c8 c6"></span></p>
    <ul class="c11 lst-kix_y4h7ngvv35fs-0">
        <li class="c15 c5 c16 li-bullet-0"><span class="c7">statusText</span><span class="c8 c6">: p&#259;streaz&#259;
                mesajul de stare care corespunde codului de stare</span></li>
    </ul>
    <p class="c3 c5"><span class="c8 c6"></span></p>
    <ul class="c11 lst-kix_y4h7ngvv35fs-0">
        <li class="c15 c5 c16 li-bullet-0"><span class="c7">type</span><span class="c8 c6">: p&#259;streaz&#259; tipul
                r&#259;spunsului</span></li>
    </ul>
    <p class="c3 c5"><span class="c8 c6"></span></p>
    <ul class="c11 lst-kix_y4h7ngvv35fs-0">
        <li class="c15 c5 c16 li-bullet-0"><span class="c7">url</span><span class="c8 c6">: p&#259;streaz&#259; adresa
                URL. Dac&#259; &icirc;n procesul solicit&#259;rii are loc o serie de redirec&#539;ion&#259;ri, atunci
                p&#259;streaz&#259; adresa URL final&#259; dup&#259; toate redirec&#539;ion&#259;rile</span></li>
    </ul>
    <p class="c3"><span class="c8 c6"></span></p>
    <p class="c15"><span class="c8 c6">Este de men&#539;ionat c&#259; toate aceste propriet&#259;&#539;i sunt doar
            pentru citire. De exemplu, utiliz&#259;m o serie de propriet&#259;&#539;i pentru a ob&#539;ine
            informa&#539;ii despre r&#259;spunsul serverului. Pentru aceasta, definim urm&#259;torul server pe Node.js,
            care proceseaz&#259; solicit&#259;rile:</span></p>
    <p class="c3"><span class="c8 c6"></span></p><a id="t.0643a9cc8241700ddddf26d52c49c6a12c8f7205"></a><a id="t.2"></a>
    <table class="c12">
        <tr class="c4">
            <td class="c14" colspan="1" rowspan="1">
                <p class="c19"><span class="c6 c17">const</span><span class="c1">&nbsp;http = </span><span
                        class="c6 c13">require</span><span class="c1">(</span><span
                        class="c6 c10">&quot;http&quot;</span><span class="c1">);<br></span><span
                        class="c6 c17">const</span><span class="c1">&nbsp;fs = </span><span
                        class="c6 c13">require</span><span class="c1">(</span><span
                        class="c6 c10">&quot;fs&quot;</span><span class="c1">);<br><br>http.createServer(</span><span
                        class="c6 c17">function</span><span class="c1">(request, response){<br><br> &nbsp;
                        &nbsp;</span><span class="c6 c17">if</span><span class="c1">(request.url == </span><span
                        class="c6 c10">&quot;/hello&quot;</span><span class="c1">){<br> &nbsp; &nbsp; &nbsp;
                        &nbsp;response.end(</span><span class="c6 c10">&quot;Fetch pe FDC.COM&quot;</span><span
                        class="c1">);<br> &nbsp; &nbsp;}<br> &nbsp; &nbsp;</span><span class="c6 c17">else</span><span
                        class="c1">{<br> &nbsp; &nbsp; &nbsp; &nbsp;fs.readFile(</span><span
                        class="c6 c10">&quot;index.html&quot;</span><span class="c1">, (error, data) =&gt;
                        response.end(data));<br> &nbsp; &nbsp;}<br>}).listen(</span><span class="c2">3000</span><span
                        class="c1">, ()=&gt;</span><span class="c6 c13">console</span><span class="c1">.log(</span><span
                        class="c6 c10">&quot;Serverul a fost lansat la adresa http://localhost:3000&quot;</span><span
                        class="c1">));</span></p>
            </td>
        </tr>
    </table>
    <p class="c3"><span class="c8 c6"></span></p>
    <p class="c15"><span class="c6">Pe pagina</span><span class="c7">&nbsp;index.html</span><span
            class="c8 c6">&nbsp;apel&#259;m func&#539;ia fetch &#537;i ob&#539;inem informa&#539;ii despre
            r&#259;spuns:</span></p>
    <p class="c3"><span class="c8 c6"></span></p><a id="t.8bbb0e966d2dca2225fedf696d5fe32c8d7d260d"></a><a id="t.3"></a>
    <table class="c12">
        <tr class="c4">
            <td class="c14" colspan="1" rowspan="1">
                <p class="c19"><span class="c1">&lt;!DOCTYPE html&gt;<br></span><span class="c6 c18">&lt;</span><span
                        class="c0">html</span><span class="c6 c18">&gt;</span><span class="c1"><br></span><span
                        class="c6 c18">&lt;</span><span class="c0">head</span><span class="c6 c18">&gt;</span><span
                        class="c1"><br> &nbsp; &nbsp;</span><span class="c6 c18">&lt;</span><span
                        class="c0">meta</span><span class="c6 c18">&nbsp;charset=</span><span
                        class="c6 c10">&quot;utf-8&quot;</span><span class="c6 c18">&nbsp;/&gt;</span><span
                        class="c1"><br> &nbsp; &nbsp;</span><span class="c6 c18">&lt;</span><span
                        class="c0">title</span><span class="c6 c18">&gt;</span><span class="c1">FDC.COM</span><span
                        class="c6 c18">&lt;/</span><span class="c0">title</span><span class="c6 c18">&gt;</span><span
                        class="c1"><br></span><span class="c6 c18">&lt;/</span><span class="c0">head</span><span
                        class="c6 c18">&gt;</span><span class="c1"><br></span><span class="c6 c18">&lt;</span><span
                        class="c0">body</span><span class="c6 c18">&gt;</span><span class="c1"><br></span><span
                        class="c6 c18">&lt;</span><span class="c0">script</span><span class="c6 c18">&gt;</span><span
                        class="c1"><br>fetch(</span><span class="c6 c10">&quot;/hello&quot;</span><span class="c1">)<br>
                        &nbsp; &nbsp;.then(response =&gt; {<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span
                        class="c6 c13">console</span><span class="c1">.log(response.status); &nbsp; &nbsp; &nbsp;
                    </span><span class="c6 c9">// 200</span><span class="c1"><br> &nbsp; &nbsp; &nbsp;
                        &nbsp;</span><span class="c6 c13">console</span><span class="c1">.log(response.statusText);
                        &nbsp; </span><span class="c6 c9">// OK</span><span class="c1"><br> &nbsp; &nbsp; &nbsp;
                        &nbsp;</span><span class="c6 c13">console</span><span class="c1">.log(response.url); &nbsp;
                        &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c6 c9">// http://localhost:3000/hello</span><span
                        class="c1"><br> &nbsp; &nbsp;});<br></span><span class="c6 c18">&lt;/</span><span
                        class="c0">script</span><span class="c6 c18">&gt;</span><span class="c1"><br></span><span
                        class="c6 c18">&lt;/</span><span class="c0">body</span><span class="c6 c18">&gt;</span><span
                        class="c1"><br></span><span class="c6 c18">&lt;/</span><span class="c0">html</span><span
                        class="c6 c18">&gt;</span></p>
            </td>
        </tr>
    </table>
    <p class="c3"><span class="c8 c6"></span></p>
    <p class="c15"><span class="c8 c6">Exemplu similar cu async/await:</span></p>
    <p class="c3"><span class="c8 c6"></span></p><a id="t.842db3e0dbaf8f39dfcaa6670cd8a2b49a184de1"></a><a id="t.4"></a>
    <table class="c12">
        <tr class="c4">
            <td class="c14" colspan="1" rowspan="1">
                <p class="c19"><span class="c1">getResponse();<br></span><span class="c6 c17">async</span><span
                        class="c1">&nbsp;</span><span class="c6 c17">function</span><span class="c1">&nbsp;</span><span
                        class="c6 c13">getResponse</span><span class="c1">() {<br><br> &nbsp; &nbsp;</span><span
                        class="c6 c17">const</span><span class="c1">&nbsp;response = </span><span
                        class="c6 c17">await</span><span class="c1">&nbsp;fetch(</span><span
                        class="c6 c10">&quot;/hello&quot;</span><span class="c1">);<br> &nbsp; &nbsp;</span><span
                        class="c6 c13">console</span><span class="c1">.log(response.status); &nbsp; &nbsp; &nbsp;
                    </span><span class="c6 c9">// 200</span><span class="c1"><br> &nbsp; &nbsp;</span><span
                        class="c6 c13">console</span><span class="c1">.log(response.statusText); &nbsp; </span><span
                        class="c6 c9">// OK</span><span class="c1"><br> &nbsp; &nbsp;</span><span
                        class="c6 c13">console</span><span class="c1">.log(response.url); &nbsp; &nbsp; &nbsp; &nbsp;
                        &nbsp;</span><span class="c6 c9">// http://localhost:3000/hello</span><span
                        class="c1"><br>}</span></p>
            </td>
        </tr>
    </table>
    <p class="c3"><span class="c8 c6"></span></p>
    <p class="c15"><span class="c6">Proprietatea </span><span class="c7">ok </span><span class="c8 c6">returneaz&#259;
            true dac&#259; codul de stare al r&#259;spunsului se afl&#259; &icirc;n intervalul de la 200 la 299, ceea ce
            de obicei indic&#259; faptul c&#259; solicitarea a fost executat&#259; cu succes. &#536;i putem verifica
            aceast&#259; proprietate &icirc;nainte de a procesa r&#259;spunsul:</span></p>
    <p class="c3"><span class="c8 c6"></span></p>
    <p class="c3"><span class="c6 c8"></span></p>
    <p class="c3"><span class="c8 c6"></span></p><a id="t.2b6afffa89022b6add8a2532f74da255d2fe7b11"></a><a id="t.5"></a>
    <table class="c12">
        <tr class="c4">
            <td class="c14" colspan="1" rowspan="1">
                <p class="c19"><span class="c1">fetch(</span><span class="c6 c10">&quot;/hello&quot;</span><span
                        class="c1">).then(response =&gt; {<br> &nbsp; &nbsp;</span><span class="c6 c17">if</span><span
                        class="c1">(response.ok){<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c6 c9">//
                        procesarea r&#259;spunsului</span><span class="c1"><br> &nbsp; &nbsp;}<br>});</span></p>
            </td>
        </tr>
    </table>
    <p class="c3"><span class="c8 c6"></span></p>
    <p class="c15"><span class="c8 c21">Ob&#539;inerea antetelor.</span></p>
    <p class="c3"><span class="c8 c7"></span></p>
    <p class="c15"><span class="c6">Cu ajutorul propriet&#259;&#539;ii </span><span class="c7">headers </span><span
            class="c6">se pot ob&#539;ine antetele r&#259;spunsului, care reprezint&#259; interfa&#539;a </span><span
            class="c7">Headers</span><span class="c8 c6">.</span></p>
    <p class="c3"><span class="c8 c6"></span></p>
    <p class="c15"><span class="c8 c6">Pentru a ob&#539;ine date din antete, putem folosi unul dintre urm&#259;toarele
            metode ale interfe&#539;ei Headers:</span></p>
    <p class="c3"><span class="c8 c6"></span></p>
    <ul class="c11 lst-kix_xmodp05xyfs4-0 start">
        <li class="c15 c5 c16 li-bullet-0"><span class="c7">entries()</span><span class="c8 c6">: returneaz&#259; un
                iterator, care permite s&#259; trecem prin toate antetele</span></li>
    </ul>
    <p class="c3 c5"><span class="c8 c6"></span></p>
    <ul class="c11 lst-kix_xmodp05xyfs4-0">
        <li class="c15 c5 c16 li-bullet-0"><span class="c7">forEach()</span><span class="c8 c6">: realizeaz&#259;
                parcurgerea antetelor</span></li>
    </ul>
    <p class="c3 c5"><span class="c8 c6"></span></p>
    <ul class="c11 lst-kix_xmodp05xyfs4-0">
        <li class="c15 c5 c16 li-bullet-0"><span class="c7">get()</span><span class="c8 c6">: returneaz&#259; valoarea
                unui anumit antet</span></li>
    </ul>
    <p class="c3 c5"><span class="c8 c6"></span></p>
    <ul class="c11 lst-kix_xmodp05xyfs4-0">
        <li class="c15 c5 c16 li-bullet-0"><span class="c7">has()</span><span class="c8 c6">: returneaz&#259; true,
                dac&#259; este setat un anumit antet</span></li>
    </ul>
    <p class="c3 c5"><span class="c8 c6"></span></p>
    <ul class="c11 lst-kix_xmodp05xyfs4-0">
        <li class="c15 c5 c16 li-bullet-0"><span class="c7">keys()</span><span class="c8 c6">: ob&#539;ine toate numele
                antetelor setate</span></li>
    </ul>
    <p class="c3 c5"><span class="c8 c6"></span></p>
    <ul class="c11 lst-kix_xmodp05xyfs4-0">
        <li class="c15 c5 c16 li-bullet-0"><span class="c7">values()</span><span class="c8 c6">: ob&#539;ine toate
                valorile antetelor setate</span></li>
    </ul>
    <p class="c3"><span class="c8 c6"></span></p>
    <p class="c15"><span class="c8 c6">De exemplu, ob&#539;inem toate antetele r&#259;spunsului:</span></p>
    <p class="c3"><span class="c8 c6"></span></p><a id="t.8729cb80999551eae0fe7f59dae7664bc8ca6abc"></a><a id="t.6"></a>
    <table class="c12">
        <tr class="c4">
            <td class="c14" colspan="1" rowspan="1">
                <p class="c19"><span class="c1">fetch(</span><span class="c6 c10">&quot;/hello&quot;</span><span
                        class="c1">).then(response =&gt; {<br><br> &nbsp; &nbsp;</span><span
                        class="c6 c17">for</span><span class="c1">(header </span><span class="c6 c17">of</span><span
                        class="c1">&nbsp;response.headers){<br><br> &nbsp; &nbsp; &nbsp; &nbsp; </span><span
                        class="c6 c13">console</span><span class="c1">.log(header[</span><span class="c2">0</span><span
                        class="c1">],</span><span class="c6 c10">&quot;:&quot;</span><span
                        class="c1">,header[</span><span class="c2">1</span><span class="c1">]);<br> &nbsp;
                        &nbsp;}<br>});</span></p>
            </td>
        </tr>
    </table>
    <p class="c3"><span class="c8 c6"></span></p>
    <p class="c15"><span class="c8 c6">Fiecare antet reprezint&#259; un array din dou&#259; elemente, unde primul
            element este numele antetului, iar al doilea - valoarea sa.</span></p>
    <p class="c3"><span class="c8 c6"></span></p>
    <p class="c15"><span class="c8 c6">Output-ul consolei browserului &icirc;n cazul meu:</span></p>
    <p class="c3"><span class="c8 c6"></span></p><a id="t.bb42acc74f2e2392c466703b43d1e621a5787653"></a><a id="t.7"></a>
    <table class="c12">
        <tr class="c4">
            <td class="c14" colspan="1" rowspan="1">
                <p class="c19"><span class="c1">connection : keep-alive<br>content-length : </span><span
                        class="c2">22</span><span class="c1"><br>date : Fri, </span><span class="c2">03</span><span
                        class="c1">&nbsp;Dec </span><span class="c2">2021</span><span class="c1">&nbsp;</span><span
                        class="c2">17</span><span class="c1">:</span><span class="c2">09</span><span
                        class="c1">:</span><span class="c2">34</span><span class="c1">&nbsp;GMT<br>keep-alive :
                        timeout=</span><span class="c2">5</span></p>
            </td>
        </tr>
    </table>
    <p class="c3"><span class="c8 c6"></span></p>
    <p class="c15"><span class="c8 c6">Alt exemplu - verificarea unui antet &#537;i la prezen&#539;a sa afi&#537;area
            valorii sale:</span></p>
    <p class="c3"><span class="c8 c6"></span></p><a id="t.4522992871ee646b576ab22b8a2ee6505bdf336f"></a><a id="t.8"></a>
    <table class="c12">
        <tr class="c4">
            <td class="c14" colspan="1" rowspan="1">
                <p class="c19"><span class="c1">fetch(</span><span class="c6 c10">&quot;/hello&quot;</span><span
                        class="c1">).then(response =&gt; {<br><br> &nbsp; &nbsp;</span><span
                        class="c6 c17">const</span><span class="c1">&nbsp;headerTitle = </span><span
                        class="c6 c10">&quot;date&quot;</span><span class="c1">; &nbsp; &nbsp; </span><span
                        class="c6 c9">// numele antetului</span><span class="c1"><br> &nbsp; &nbsp;</span><span
                        class="c6 c17">if</span><span class="c1">(response.headers.has(headerTitle)){ &nbsp;</span><span
                        class="c6 c9">// dac&#259; antetul exist&#259;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp;
                        &nbsp;</span><span class="c6 c13">console</span><span
                        class="c1">.log(response.headers.get(headerTitle)); &nbsp; &nbsp; </span><span class="c6 c9">//
                        ob&#539;inem valoarea sa</span><span class="c1"><br> &nbsp; &nbsp;}<br>});</span></p>
            </td>
        </tr>
    </table>
    <p class="c3"><span class="c8 c6"></span></p>
    <p class="c15"><span class="c8 c6">Astfel, putem ob&#539;ine &#537;i antetele personalizate, care sunt setate de
            c&#259;tre server. De exemplu, s&#259; presupunem c&#259; serverul node.js seteaz&#259; antetul
            &quot;Secret-Code&quot;:</span></p>
    <p class="c3"><span class="c8 c6"></span></p><a id="t.b0ab1e9e8916131dd988d8b6779b281855331e88"></a><a id="t.9"></a>
    <table class="c12">
        <tr class="c4">
            <td class="c14" colspan="1" rowspan="1">
                <p class="c19"><span class="c6 c17">const</span><span class="c1">&nbsp;http = </span><span
                        class="c6 c13">require</span><span class="c1">(</span><span
                        class="c6 c10">&quot;http&quot;</span><span class="c1">);<br></span><span
                        class="c6 c17">const</span><span class="c1">&nbsp;fs = </span><span
                        class="c6 c13">require</span><span class="c1">(</span><span
                        class="c6 c10">&quot;fs&quot;</span><span class="c1">);<br><br>http.createServer(</span><span
                        class="c6 c17">function</span><span class="c1">(request, response){<br><br> &nbsp;
                        &nbsp;</span><span class="c6 c17">if</span><span class="c1">(request.url == </span><span
                        class="c6 c10">&quot;/hello&quot;</span><span class="c1">){<br> &nbsp; &nbsp; &nbsp;
                        &nbsp;response.setHeader(</span><span class="c6 c10">&quot;Secret-Code&quot;</span><span
                        class="c1">, </span><span class="c2">124</span><span class="c1">);<br> &nbsp; &nbsp; &nbsp;
                        &nbsp;response.end(</span><span class="c6 c10">&quot;Fetch pe METANIT.COM&quot;</span><span
                        class="c1">);<br> &nbsp; &nbsp;}<br> &nbsp; &nbsp;</span><span class="c6 c17">else</span><span
                        class="c1">{<br> &nbsp; &nbsp; &nbsp; &nbsp;fs.readFile(</span><span
                        class="c6 c10">&quot;index.html&quot;</span><span class="c1">, (error, data) =&gt;
                        response.end(data));<br> &nbsp; &nbsp;}<br>}).listen(</span><span class="c2">3000</span><span
                        class="c1">, ()=&gt;</span><span class="c6 c13">console</span><span class="c1">.log(</span><span
                        class="c6 c10">&quot;Serverul a fost lansat la adresa http://localhost:3000&quot;</span><span
                        class="c1">));</span></p>
            </td>
        </tr>
    </table>
    <p class="c3"><span class="c8 c6"></span></p>
    <p class="c15"><span class="c6">Pentru setarea antetului &icirc;n node.js se folose&#537;te metoda </span><span
            class="c6 c20">response.setHeader()</span><span class="c8 c6">, primul parametru al c&#259;reia este numele
            antetului, iar al doilea - valoarea sa.</span></p>
    <p class="c3"><span class="c8 c6"></span></p>
    <p class="c15"><span class="c8 c6">Ob&#539;inem acest antet pe pagina web:</span></p>
    <p class="c3"><span class="c8 c6"></span></p><a id="t.c3c4f769b7f4a9c7281568e5c1138b787add20fe"></a><a
        id="t.10"></a>
    <table class="c12">
        <tr class="c4">
            <td class="c14" colspan="1" rowspan="1">
                <p class="c19"><span class="c1">fetch(</span><span class="c6 c10">&quot;/hello&quot;</span><span
                        class="c1">).then(response =&gt; {<br><br> &nbsp; &nbsp;</span><span
                        class="c6 c13">console</span><span class="c1">.log(response.headers.get(</span><span
                        class="c6 c10">&quot;Content-Type&quot;</span><span class="c1">)); &nbsp; &nbsp;
                        &nbsp;</span><span class="c6 c9">// null - antetul nu este setat</span><span class="c1"><br>
                        &nbsp; &nbsp;</span><span class="c6 c13">console</span><span
                        class="c1">.log(response.headers.get(</span><span
                        class="c6 c10">&quot;Secret-Code&quot;</span><span class="c1">)); &nbsp; &nbsp; &nbsp;
                    </span><span class="c6 c9">// 124</span><span class="c1"><br>});</span></p>
            </td>
        </tr>
    </table>
    <p class="c3"><span class="c8 c6"></span></p>
    <p class="c15"><span class="c6">Dac&#259; antetul nu este setat, atunci metoda </span><span
            class="c6 c20">response.headers.get()</span><span class="c8 c6">&nbsp;returneaz&#259; null.</span></p>
    <p class="c3"><span class="c8 c6"></span></p>
    <p class="c15"><span class="c8 c21">Redirec&#539;ionarea.</span></p>
    <p class="c3"><span class="c8 c7"></span></p>
    <p class="c15"><span class="c6">Dac&#259; &icirc;n procesul solicit&#259;rii a avut loc o redirec&#539;ionare,
            atunci proprietatea </span><span class="c7">redirected </span><span class="c6">este egal&#259; cu
        </span><span class="c6 c20">true</span><span class="c6">, iar proprietatea </span><span class="c7">url
        </span><span class="c8 c6">p&#259;streaz&#259; adresa la care a avut loc redirec&#539;ionarea. De exemplu,
            s&#259; presupunem c&#259; serverul pe node.js efectueaz&#259; redirec&#539;ionarea de la adresa
            &quot;/hello&quot; la adresa &quot;/newpage&quot;:</span></p>
    <p class="c3"><span class="c8 c6"></span></p><a id="t.15f56cdb6c9e7738f163000bb84d9987aecaa40b"></a><a
        id="t.11"></a>
    <table class="c12">
        <tr class="c4">
            <td class="c14" colspan="1" rowspan="1">
                <p class="c19"><span class="c6 c17">const</span><span class="c1">&nbsp;http = </span><span
                        class="c6 c13">require</span><span class="c1">(</span><span
                        class="c6 c10">&quot;http&quot;</span><span class="c1">);<br></span><span
                        class="c6 c17">const</span><span class="c1">&nbsp;fs = </span><span
                        class="c6 c13">require</span><span class="c1">(</span><span
                        class="c6 c10">&quot;fs&quot;</span><span class="c1">);<br><br>http.createServer(</span><span
                        class="c6 c17">function</span><span class="c1">(request, response){<br><br> &nbsp;
                        &nbsp;</span><span class="c6 c17">if</span><span class="c1">(request.url == </span><span
                        class="c6 c10">&quot;/hello&quot;</span><span class="c1">){<br> &nbsp; &nbsp; &nbsp;
                        &nbsp;response.statusCode = </span><span class="c2">302</span><span class="c1">; </span><span
                        class="c6 c9">// 302 - codul de redirec&#539;ionare temporar&#259;</span><span class="c1"><br>
                        &nbsp; &nbsp; &nbsp; &nbsp;response.setHeader(</span><span
                        class="c6 c10">&quot;Location&quot;</span><span class="c1">, </span><span
                        class="c6 c10">&quot;/newpage&quot;</span><span class="c1">); </span><span class="c6 c9">//
                        redirec&#539;ionare la adresa localhost:3000/newpage</span><span class="c1"><br> &nbsp; &nbsp;
                        &nbsp; &nbsp;response.end();<br> &nbsp; &nbsp;}<br> &nbsp; &nbsp;</span><span
                        class="c6 c17">else</span><span class="c1">&nbsp;</span><span class="c6 c17">if</span><span
                        class="c1">(request.url == </span><span class="c6 c10">&quot;/newpage&quot;</span><span
                        class="c1">){<br> &nbsp; &nbsp; &nbsp; &nbsp;response.setHeader(</span><span
                        class="c6 c10">&quot;Secret-Code&quot;</span><span class="c1">, </span><span
                        class="c6 c10">&quot;New Page Code: 567&quot;</span><span class="c1">); </span><span
                        class="c6 c9">// pentru test, set&#259;m antetul</span><span class="c1"><br> &nbsp; &nbsp;
                        &nbsp; &nbsp;response.end(</span><span class="c6 c10">&quot;This is a new page&quot;</span><span
                        class="c1">);<br> &nbsp; &nbsp;}<br> &nbsp; &nbsp;</span><span class="c6 c17">else</span><span
                        class="c1">{<br> &nbsp; &nbsp; &nbsp; &nbsp;fs.readFile(</span><span
                        class="c6 c10">&quot;index.html&quot;</span><span class="c1">, (error, data) =&gt;
                        response.end(data));<br> &nbsp; &nbsp;}<br>}).listen(</span><span class="c2">3000</span><span
                        class="c1">, ()=&gt;</span><span class="c6 c13">console</span><span class="c1">.log(</span><span
                        class="c6 c10">&quot;Serverul a fost lansat la adresa http://localhost:3000&quot;</span><span
                        class="c1">));</span></p>
            </td>
        </tr>
    </table>
    <p class="c3"><span class="c8 c6"></span></p>
    <p class="c15"><span class="c8 c6">Efectu&#259;m o solicitare la adresa &quot;/hello&quot; pe pagina web:</span></p>
    <p class="c3"><span class="c8 c6"></span></p><a id="t.533ebed21bd9f2354c418d6572d25b2170f374dc"></a><a
        id="t.12"></a>
    <table class="c12">
        <tr class="c4">
            <td class="c14" colspan="1" rowspan="1">
                <p class="c19"><span class="c1">fetch(</span><span class="c6 c10">&quot;/hello&quot;</span><span
                        class="c1">).then(response =&gt;{<br><br> &nbsp; &nbsp;</span><span
                        class="c6 c17">if</span><span class="c1">&nbsp;(response.redirected) {<br> &nbsp; &nbsp; &nbsp;
                        &nbsp;</span><span class="c6 c13">console</span><span class="c1">.log(</span><span
                        class="c6 c10">&quot;A avut loc redirec&#539;ionarea la adresa&quot;</span><span class="c1">,
                        response.url);<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c6 c13">console</span><span
                        class="c1">.log(response.headers.get(</span><span
                        class="c6 c10">&quot;Secret-Code&quot;</span><span class="c1">));<br> &nbsp;}<br>});</span></p>
            </td>
        </tr>
    </table>
    <p class="c3"><span class="c8 c6"></span></p>
    <p class="c15"><span class="c8 c6">Output-ul consolei browserului:</span></p>
    <p class="c3"><span class="c8 c6"></span></p><a id="t.ca8ffc9cc18566ea7f0b186e874923172a67e826"></a><a
        id="t.13"></a>
    <table class="c12">
        <tr class="c4">
            <td class="c14" colspan="1" rowspan="1">
                <p class="c19"><span class="c1">A avut loc redirec&#539;ionarea la adresa <br>http:</span><span
                        class="c6 c9">//localhost:3000/newpage</span><span class="c1"><br>New Page Code: </span><span
                        class="c2">567</span></p>
            </td>
        </tr>
    </table>
    <p class="c3"><span class="c8 c6"></span></p>
    <p class="c15"><span class="c8 c6">Din output-ul consolei, &#537;i anume din antetul Secret-Code, vedem c&#259;
            func&#539;ia fetch a primit r&#259;spuns de la noua adres&#259; - &quot;/newpage&quot;.</span></p>
    <p class="c3"><span class="c8 c6"></span></p>
</body>

</html>