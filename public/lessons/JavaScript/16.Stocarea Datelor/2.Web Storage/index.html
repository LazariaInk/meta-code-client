<html>

<head>
    <meta content="text/html; charset=UTF-8" http-equiv="content-type">
    <link rel="stylesheet" type="text/css" href="/lessons/styles.css">
</head>

<body class="c19 doc-content">
    <h1 class="c0 c11 c18">Web Storage. </h1>
    <p class="c0 c3"><span class="c2"></span></p>
    <p class="c0"><span class="c4">Pentru stocarea datelor &icirc;n HTML5 se utilizeaz&#259; un API special -
        </span><span class="c10">Web Storage API</span><span class="c4">, care ofer&#259; acces la stocarea intern&#259;
            a browserului (web storage). Acest stocaj este compus din dou&#259; componente: </span><span
            class="c10">session storage</span><span class="c4">&nbsp;&#537;i</span><span class="c10">&nbsp;local
            storage</span><span class="c2">.</span></p>
    <p class="c0 c3"><span class="c2"></span></p>
    <p class="c0"><span class="c10">Session storage</span><span class="c2">&nbsp;reprezint&#259; un depozit temporar de
            informa&#539;ii, care este &#537;ters dup&#259; &icirc;nchiderea filei browserului.</span></p>
    <p class="c0 c3"><span class="c11 c10"></span></p>
    <p class="c0"><span class="c10">Local storage </span><span class="c2">reprezint&#259; un depozit pentru date pe o
            baz&#259; permanent&#259;. Datele din local storage nu sunt &#537;terse automat &#537;i nu au o
            perioad&#259; de expirare. Aceste date nu sunt transmise la server &icirc;n cadrul cererii HTTP. &Icirc;n
            plus, capacitatea local storage &icirc;n Chrome &#537;i Firefox este de 5 MB pe domeniu.</span></p>
    <p class="c0 c3"><span class="c2"></span></p>
    <p class="c0"><span class="c2">Toate datele &icirc;n web storage sunt reprezentate sub form&#259; de perechi
            cheie-valoare. Adic&#259;, fiecare obiect are un nume unic, cheia, &#537;i o valoare specific&#259;.</span>
    </p>
    <p class="c0 c3"><span class="c2"></span></p>
    <p class="c0"><span class="c4">Pentru lucrul cu local storage &icirc;n JavaScript se utilizeaz&#259; obiectul
        </span><span class="c10">localStorage</span><span class="c4">, iar pentru session storage - obiectul
        </span><span class="c10">sessionStorage</span><span class="c2">. Ambele obiecte, din punct de vedere al API,
            sunt similare &#537;i ofer&#259; propriet&#259;&#539;i &#537;i metode asem&#259;n&#259;toare:</span></p>
    <p class="c0 c3"><span class="c2"></span></p>
    <p class="c0"><span class="c4">- </span><span class="c10">length</span><span class="c2">: con&#539;ine num&#259;rul
            de elemente din stocare</span></p>
    <p class="c0 c3"><span class="c2"></span></p>
    <p class="c0"><span class="c4">-</span><span class="c10">&nbsp;clear()</span><span class="c2">: &#537;terge toate
            elementele din stocare</span></p>
    <p class="c0 c3"><span class="c2"></span></p>
    <p class="c0"><span class="c4">- </span><span class="c10">getItem(key)</span><span class="c2">: returneaz&#259; un
            anumit element care are cheia key</span></p>
    <p class="c0 c3"><span class="c2"></span></p>
    <p class="c0"><span class="c4">-</span><span class="c10">&nbsp;key(index)</span><span class="c2">: returneaz&#259;
            cheia elementului care are indexul index</span></p>
    <p class="c0 c3"><span class="c2"></span></p>
    <p class="c0"><span class="c4">- </span><span class="c10">removeItem(key</span><span class="c4">):</span><span
            class="c2">&nbsp;&#537;terge elementul cu cheia key</span></p>
    <p class="c0 c3"><span class="c2"></span></p>
    <p class="c0"><span class="c4">- </span><span class="c10">setItem(key, value)</span><span class="c2">:
            stabile&#537;te pentru elementul cu cheia key valoarea value. Dac&#259; un element cu cheia key exist&#259;
            deja &icirc;n stocare, valoarea acestuia este rescris&#259;. Dac&#259; elementul nu exist&#259;, este
            ad&#259;ugat.</span></p>
    <p class="c0 c3"><span class="c2"></span></p>
    <p class="c0"><span class="c11 c13">Salvarea datelor.</span></p>
    <p class="c0 c3"><span class="c11 c10"></span></p>
    <p class="c0"><span class="c2">Pentru salvarea datelor &icirc;n stocare se utilizeaz&#259; metoda setItem(key,
            value), &icirc;n care se transmite cheia &#537;i valoarea elementului. Este important de &#539;inut cont de
            faptul c&#259; doar &#537;irurile de caractere pot fi salvate ca valori. De exemplu:</span></p>
    <p class="c0 c3"><span class="c2"></span></p><a id="t.8425fc13f96adafb38eaaaa56f9dc9d467cf75a2"></a><a id="t.0"></a>
    <table class="c15">
        <tr class="c14">
            <td class="c8" colspan="1" rowspan="1">
                <p class="c5"><span class="c1">localStorage.setItem(</span><span
                        class="c4 c9">&quot;email&quot;</span><span class="c1">, </span><span
                        class="c4 c9">&quot;tom32@gmail.com&quot;</span><span
                        class="c1">);<br>sessionStorage.setItem(</span><span
                        class="c4 c9">&quot;username&quot;</span><span class="c1">, </span><span class="c4 c9">&quot;Tom
                        Smith&quot;</span><span class="c1">);</span></p>
            </td>
        </tr>
    </table>
    <p class="c0"><span class="c2">&Icirc;n acest caz, &icirc;n localStorage este salvat elementul cu cheia
            &quot;email&quot; &#537;i valoarea &quot;tom32@gmail.com&quot;, iar &icirc;n sessionStorage este salvat
            elementul cu cheia &quot;username&quot; &#537;i valoarea &quot;Tom Smith&quot;.</span></p>
    <p class="c0 c3"><span class="c2"></span></p>
    <p class="c0"><span class="c4">&Icirc;n unele browsere, folosind unelte speciale, putem vedea obiectele salvate
            &icirc;n local storage &#537;i session storage. De exemplu, &icirc;n Google Chrome putem deschide uneltele
            pentru dezvoltatori &#537;i naviga la tab-ul </span><span class="c10">Application</span><span class="c4">.
            &#536;i apoi, &icirc;n partea st&acirc;ng&#259;, select&#259;m op&#539;iunea </span><span
            class="c10">Storage-&gt;Local storage</span><span class="c4">&nbsp;sau</span><span class="c10">&nbsp;Session
            storage</span><span class="c2">.</span></p>
    <p class="c0 c3"><span class="c2"></span></p>
    <p class="c0"><span class="c2">Dac&#259; valoarea salvat&#259; nu este un &#537;ir de caractere, ci un alt tip,
            aceast&#259; valoare este convertit&#259; &icirc;ntr-un &#537;ir de caractere folosind metoda toString(). De
            exemplu:</span></p>
    <p class="c0 c3"><span class="c2"></span></p><a id="t.9e1802ea9d38c57a1336aee4f1eac732f870c5eb"></a><a id="t.1"></a>
    <table class="c15">
        <tr class="c14">
            <td class="c8" colspan="1" rowspan="1">
                <p class="c5"><span class="c1">localStorage.setItem(</span><span
                        class="c4 c9">&quot;age&quot;</span><span class="c1">, </span><span class="c4 c7">39</span><span
                        class="c1">);</span></p>
            </td>
        </tr>
    </table>
    <p class="c0 c3"><span class="c2"></span></p>
    <p class="c0"><span class="c2">Aici, valoarea este un num&#259;r, care &icirc;nainte de salvare este convertit
            &icirc;ntr-un &#537;ir de caractere.</span></p>
    <p class="c0 c3"><span class="c2"></span></p>
    <p class="c0"><span class="c2">Pot ap&#259;rea dificult&#259;&#539;i &icirc;n salvarea obiectelor complexe:</span>
    </p>
    <p class="c0 c3"><span class="c2"></span></p><a id="t.2fb3b6be467a2894e78ebd13dc7a92c5792ab6f8"></a><a id="t.2"></a>
    <table class="c15">
        <tr class="c14">
            <td class="c8" colspan="1" rowspan="1">
                <p class="c5"><span class="c4 c12">const</span><span class="c1">&nbsp;user ={<br> &nbsp; &nbsp;name:
                    </span><span class="c4 c9">&quot;Tom&quot;</span><span class="c1">,<br> &nbsp; &nbsp;age:
                    </span><span class="c4 c7">23</span><span class="c1">,<br> &nbsp; &nbsp;isMarried: </span><span
                        class="c4 c12">false</span><span class="c1"><br>};<br> <br>localStorage.setItem(</span><span
                        class="c4 c9">&quot;user&quot;</span><span class="c1">, user); </span><span class="c4 c16">//
                        user = [object Object]</span></p>
            </td>
        </tr>
    </table>
    <p class="c0 c3"><span class="c2"></span></p>
    <p class="c0"><span class="c4">Aici &icirc;ncerc&#259;m s&#259; salv&#259;m obiectul user. Cu toate acestea,
            c&acirc;nd obiectul este convertit &icirc;ntr-un &#537;ir de caractere, ob&#539;inem</span><span
            class="c4 c17">&nbsp;[object Object]</span><span class="c2">.</span></p>
    <p class="c0 c3"><span class="c2"></span></p>
    <p class="c0"><span class="c2">&Icirc;n acest caz, pentru salvare, putem serializa obiectul &icirc;n format
            JSON:</span></p>
    <p class="c0 c3"><span class="c2"></span></p><a id="t.9cff5e164ad4bb3590b7580fde41ab2ec3081703"></a><a id="t.3"></a>
    <table class="c15">
        <tr class="c14">
            <td class="c8" colspan="1" rowspan="1">
                <p class="c5"><span class="c4 c12">const</span><span class="c1">&nbsp;user ={<br> &nbsp; &nbsp;name:
                    </span><span class="c4 c9">&quot;Tom&quot;</span><span class="c1">,<br> &nbsp; &nbsp;age:
                    </span><span class="c4 c7">23</span><span class="c1">,<br> &nbsp; &nbsp;isMarried: </span><span
                        class="c4 c12">false</span><span class="c1"><br>};<br> <br>localStorage.setItem(</span><span
                        class="c4 c9">&quot;user&quot;</span><span class="c1">, </span><span
                        class="c4 c6">JSON</span><span class="c1">.stringify(user));</span></p>
            </td>
        </tr>
    </table>
    <p class="c0 c3"><span class="c2"></span></p>
    <p class="c0"><span class="c11 c13">Ob&#539;inerea datelor.</span></p>
    <p class="c0 c3"><span class="c11 c10"></span></p>
    <p class="c0"><span class="c4">Pentru a ob&#539;ine datele salvate, trebuie s&#259; apel&#259;m metoda</span><span
            class="c10">&nbsp;getItem()</span><span class="c2">, &icirc;n care se transmite cheia obiectului:</span></p>
    <p class="c0 c3"><span class="c2"></span></p><a id="t.699429fba86f6614b687c2d290a077e074065f73"></a><a id="t.4"></a>
    <table class="c15">
        <tr class="c14">
            <td class="c8" colspan="1" rowspan="1">
                <p class="c5"><span class="c4 c16">// salv&#259;m &icirc;n local storage</span><span
                        class="c1"><br>localStorage.setItem(</span><span class="c4 c9">&quot;email&quot;</span><span
                        class="c1">, </span><span class="c4 c9">&quot;tom32@gmail.com&quot;</span><span
                        class="c1">);<br></span><span class="c4 c16">// ob&#539;inem &icirc;napoi din local
                        storage</span><span class="c1"><br></span><span class="c4 c12">const</span><span
                        class="c1">&nbsp;login = localStorage.getItem(</span><span
                        class="c4 c9">&quot;login&quot;</span><span class="c1">); </span><span class="c4 c16">//
                        tom32@gmail.com</span></p>
            </td>
        </tr>
    </table>
    <p class="c0 c3"><span class="c2"></span></p>
    <p class="c0"><span class="c2">Dac&#259; au fost salvate date care nu sunt &#537;iruri de caractere, atunci poate fi
            necesar&#259; conversia lor din &#537;iruri de caractere &icirc;n tipul original.:</span></p>
    <p class="c0 c3"><span class="c2"></span></p><a id="t.5165fd2098426528cd9fb4b8dbfa78439657f300"></a><a id="t.5"></a>
    <table class="c15">
        <tr class="c14">
            <td class="c8" colspan="1" rowspan="1">
                <p class="c5"><span class="c1">localStorage.setItem(</span><span
                        class="c4 c9">&quot;age&quot;</span><span class="c1">, </span><span class="c4 c7">23</span><span
                        class="c1">);<br></span><span class="c4 c16">// convertim &icirc;n num&#259;r</span><span
                        class="c1"><br></span><span class="c4 c12">let</span><span class="c1">&nbsp;age = </span><span
                        class="c4 c6">parseInt</span><span class="c1">(localStorage.getItem(</span><span
                        class="c4 c9">&quot;age&quot;</span><span class="c1">));<br>age += </span><span
                        class="c4 c7">1</span><span class="c1">;<br></span><span class="c4 c6">console</span><span
                        class="c1">.log(age); </span><span class="c4 c16">// 24</span></p>
            </td>
        </tr>
    </table>
    <p class="c0 c3"><span class="c2"></span></p>
    <p class="c0"><span class="c4">Dac&#259; &icirc;n acest caz nu convertim valoarea &icirc;ntr-un num&#259;r
            folosind</span><span class="c4 c17">&nbsp;parseInt()</span><span class="c2">, atunci age va ac&#539;iona ca
            un &#537;ir de caractere.</span></p>
    <p class="c0 c3"><span class="c2"></span></p>
    <p class="c0"><span class="c4">Dac&#259; obiectul reprezint&#259; un obiect care &icirc;nainte de salvare a fost
            convertit &icirc;n json, atunci c&acirc;nd este ob&#539;inut &icirc;napoi poate fi parsat folosind
            metoda</span><span class="c10">&nbsp;JSON.parse()</span><span class="c2">:</span></p>
    <p class="c0 c3"><span class="c2"></span></p><a id="t.a3bce7e9cde228aafd1cb3f58b75ba404e4788c1"></a><a id="t.6"></a>
    <table class="c15">
        <tr class="c14">
            <td class="c8" colspan="1" rowspan="1">
                <p class="c5"><span class="c4 c12">const</span><span class="c1">&nbsp;tom ={<br> &nbsp; &nbsp;name:
                    </span><span class="c4 c9">&quot;Tom&quot;</span><span class="c1">,<br> &nbsp; &nbsp;age:
                    </span><span class="c4 c7">23</span><span class="c1">,<br> &nbsp; &nbsp;isMarried: </span><span
                        class="c4 c12">false</span><span class="c1"><br>};<br> <br>localStorage.setItem(</span><span
                        class="c4 c9">&quot;user&quot;</span><span class="c1">, </span><span
                        class="c4 c6">JSON</span><span class="c1">.stringify(tom));<br> <br></span><span
                        class="c4 c16">// convertim &icirc;n obiect</span><span class="c1"><br></span><span
                        class="c4 c12">const</span><span class="c1">&nbsp;user = </span><span
                        class="c4 c6">JSON</span><span class="c1">.parse(localStorage.getItem(</span><span
                        class="c4 c9">&quot;user&quot;</span><span class="c1">));<br></span><span
                        class="c4 c6">console</span><span class="c1">.log(user.name); &nbsp;</span><span
                        class="c4 c16">// Tom</span><span class="c1"><br></span><span class="c4 c6">console</span><span
                        class="c1">.log(user.age); &nbsp;</span><span class="c4 c16">// 23</span><span
                        class="c1"><br></span><span class="c4 c6">console</span><span class="c1">.log(user.isMarried);
                    </span><span class="c4 c16">// false</span></p>
            </td>
        </tr>
    </table>
    <p class="c0 c3"><span class="c2"></span></p>
    <p class="c0"><span class="c11 c13">&#536;tergerea.</span></p>
    <p class="c0 c3"><span class="c11 c13"></span></p>
    <p class="c0"><span class="c4">Pentru a &#537;terge un obiect, se folose&#537;te metoda </span><span
            class="c10">removeItem()</span><span class="c2">, care prime&#537;te cheia obiectului ce trebuie
            &#537;ters:</span></p>
    <p class="c0"><span class="c10 c11">localStorage.removeItem(&quot;email&quot;);</span></p>
    <p class="c0 c3"><span class="c2"></span></p>
    <p class="c0"><span class="c4">&#536;i pentru &#537;tergerea complet&#259; a tuturor obiectelor din localStorage se
            poate folosi metoda </span><span class="c10">clear()</span><span class="c2">:</span></p>
    <p class="c0 c3"><span class="c2"></span></p><a id="t.784bcec210ddeaaf13591b3da6cdd51a57babcf9"></a><a id="t.7"></a>
    <table class="c15">
        <tr class="c14">
            <td class="c8" colspan="1" rowspan="1">
                <p class="c5"><span class="c1">localStorage.clear();</span></p>
            </td>
        </tr>
    </table>
    <p class="c0 c3"><span class="c2"></span></p>
    <p class="c0 c3"><span class="c2"></span></p>
</body>

</html>