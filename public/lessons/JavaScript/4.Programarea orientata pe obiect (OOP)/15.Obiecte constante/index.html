<html>

<head>
    <meta content="text/html; charset=UTF-8" http-equiv="content-type">
    <link rel="stylesheet" type="text/css" href="/lessons/styles.css">
</head>

<body class="c20 doc-content">
    <h1 class="c9 c16 c18">Obiecte constante. Interzicerea modificÄƒrii obiectului. </h1>
    <p class="c9 c11"><span class="c8 c16"></span></p>
    <p class="c9"><span class="c0">Limbajul JavaScript permite modificarea dinamic&#259; a propriet&#259;&#539;ilor
            obiectelor, ad&#259;ugarea de noi propriet&#259;&#539;i &#537;i metode la obiecte sau &#537;tergerea celor
            deja existente. Cu toate acestea, astfel de modific&#259;ri ale obiectelor pot fi nedorite. JavaScript
            furnizeaz&#259; trei mecanisme pentru a gestiona acest lucru:</span></p>
    <p class="c9 c11"><span class="c0"></span></p>
    <p class="c9"><span class="c16 c14">Interzicerea extensiei obiectelor.</span></p>
    <p class="c9 c11"><span class="c0"></span></p>
    <p class="c9"><span class="c7">Metoda `</span><span class="c8">Object.preventExtensions()</span><span class="c0">`
            permite interzicerea extensiei unui obiect, adic&#259; nu se pot ad&#259;uga noi propriet&#259;&#539;i
            &#537;i metode &icirc;n obiectul respectiv. Metoda prime&#537;te ca parametru obiectul &#539;int&#259;.
        </span></p>
    <p class="c9 c11"><span class="c0"></span></p>
    <p class="c9"><span class="c0">Pentru exemplu:</span></p>
    <p class="c9 c11"><span class="c0"></span></p><a id="t.6c156607eed33e61d9bf5c1122b59b67b6fccece"></a><a
        id="t.0"></a>
    <table class="c2">
        <tr class="c13">
            <td class="c6" colspan="1" rowspan="1">
                <p class="c12"><span class="c5">const</span><span class="c3">&nbsp;tom = {name: </span><span
                        class="c7 c10">&quot;Tom&quot;</span><span class="c3">};<br></span><span class="c4">//
                        ad&#259;ug&#259;m &icirc;n obiectul tom o nou&#259; proprietate - company</span><span
                        class="c3"><br>tom.company = </span><span class="c7 c10">&quot;Localhost&quot;</span><span
                        class="c3">;<br> <br></span><span class="c1">console</span><span class="c3">.log(</span><span
                        class="c7 c10">`Nume: ${tom.name} &nbsp;Companie: ${tom.company}`</span><span class="c3">);
                    </span><span class="c4">// Nume: Tom &nbsp;Companie: Localhost</span></p>
            </td>
        </tr>
    </table>
    <p class="c9 c11"><span class="c0"></span></p>
    <p class="c9"><span class="c0">Aici se adaug&#259; o nou&#259; proprietate `company` la obiectul `tom`. Dup&#259;
            ad&#259;ugare, aceasta poate fi utilizat&#259;.</span></p>
    <p class="c9 c11"><span class="c0"></span></p>
    <p class="c9"><span class="c7">Acum, vom interzice extinderea folosind metoda `</span><span
            class="c8">Object.preventExtensions()`</span><span class="c0">:</span></p>
    <p class="c9 c11"><span class="c0"></span></p><a id="t.fc8f4ec9918c799d9ccc1ae0065d9c2fd74dc808"></a><a
        id="t.1"></a>
    <table class="c2">
        <tr class="c13">
            <td class="c6" colspan="1" rowspan="1">
                <p class="c12"><span class="c5">const</span><span class="c3">&nbsp;tom = {name: </span><span
                        class="c7 c10">&quot;Tom&quot;</span><span class="c3">};<br></span><span
                        class="c1">Object</span><span class="c3">.preventExtensions(tom); &nbsp;</span><span
                        class="c4">// interzicem extinderea obiectului tom</span><span class="c3"><br>tom.company =
                    </span><span class="c7 c10">&quot;Localhost&quot;</span><span class="c3">; &nbsp;</span><span
                        class="c4">// &icirc;ncerc&#259;m s&#259; ad&#259;ug&#259;m o nou&#259; proprietate &icirc;n
                        obiectul tom</span><span class="c3"><br></span><span class="c1">console</span><span
                        class="c3">.log(</span><span class="c7 c10">`Nume: ${tom.name} &nbsp;Companie:
                        ${tom.company}`</span><span class="c3">); </span><span class="c4">// Nume: Tom &nbsp;Companie:
                        undefined</span></p>
            </td>
        </tr>
    </table>
    <p class="c9 c11"><span class="c0"></span></p>
    <p class="c9"><span class="c0">Chiar dac&#259; &icirc;ncerc&#259;m s&#259; definim o nou&#259; proprietate pentru
            obiect, aceasta nu va fi ad&#259;ugat&#259;. &Icirc;n &icirc;ncercarea de a accesa o astfel de proprietate,
            vom primi `undefined`.</span></p>
    <p class="c9 c11"><span class="c0"></span></p>
    <p class="c9"><span class="c7">Uneori poate ap&#259;rea necesitatea de a verifica dac&#259; un obiect este
            extensibil. De exemplu, dac&#259; un obiect este extensibil, putem ad&#259;uga propriet&#259;&#539;i
            &icirc;n el &#537;i apoi s&#259; le utiliz&#259;m. Pentru a verifica extensibilitatea, se poate folosi
            metoda `</span><span class="c8">Object.isExtensible()</span><span class="c7">`. Aceasta prime&#537;te ca
            parametru obiectul testat &#537;i, dac&#259; obiectul suport&#259; extinderea, metoda returneaz&#259;
            `</span><span class="c7 c19">true</span><span class="c7">`, altfel returneaz&#259; `</span><span
            class="c7 c19">false</span><span class="c0">`:</span></p>
    <p class="c9 c11"><span class="c0"></span></p><a id="t.351854d2204751319efa6e023c6232b467b1ae8f"></a><a
        id="t.2"></a>
    <table class="c2">
        <tr class="c13">
            <td class="c6" colspan="1" rowspan="1">
                <p class="c12"><span class="c5">const</span><span class="c3">&nbsp;tom = {name: </span><span
                        class="c7 c10">&quot;Tom&quot;</span><span class="c3">};<br></span><span
                        class="c1">console</span><span class="c3">.log(</span><span class="c1">Object</span><span
                        class="c3">.isExtensible(tom)); &nbsp;</span><span class="c4">// true</span><span
                        class="c3"><br></span><span class="c1">Object</span><span class="c3">.preventExtensions(tom);
                        &nbsp;</span><span class="c4">// interzicem extinderea obiectului tom</span><span
                        class="c3"><br></span><span class="c1">console</span><span class="c3">.log(</span><span
                        class="c1">Object</span><span class="c3">.isExtensible(tom)); &nbsp;</span><span class="c4">//
                        false</span></p>
            </td>
        </tr>
    </table>
    <p class="c9 c11"><span class="c0"></span></p>
    <p class="c9"><span class="c14">&Icirc;nchiderea obiectelor.</span></p>
    <p class="c9 c11"><span class="c0"></span></p>
    <p class="c9"><span class="c7">&Icirc;nchiderea (sealing) sau &quot;sigilarea&quot; obiectelor permite, de asemenea,
            interzicerea extinderii obiectelor. Cu toate acestea, &icirc;n plus, ea interzice &#537;i modificarea
            propriet&#259;&#539;ilor deja existente. Pentru a sigila obiecte, se folose&#537;te metoda </span><span
            class="c8">`Object.seal()</span><span class="c0">`.</span></p>
    <p class="c9 c11"><span class="c0"></span></p>
    <p class="c9"><span class="c7">S&#259; vedem mai &icirc;nt&acirc;i ce putem face cu un obiect f&#259;r&#259; a
            aplica `</span><span class="c8">Object.seal()`</span><span class="c0">:</span></p>
    <p class="c9 c11"><span class="c0"></span></p>
    <p class="c9"><span class="c0">const tom = {name: &quot;Tom&quot;};</span></p>
    <p class="c9 c11"><span class="c0"></span></p><a id="t.cad5673399c7f92fe7813fef0021fab54da7bc8f"></a><a
        id="t.3"></a>
    <table class="c2">
        <tr class="c13">
            <td class="c6" colspan="1" rowspan="1">
                <p class="c12"><span class="c4">// pentru proprietatea name interzicem modificarea</span><span
                        class="c3"><br></span><span class="c1">Object</span><span class="c3">.defineProperty(tom,
                    </span><span class="c7 c10">&quot;name&quot;</span><span class="c3">, { writable: </span><span
                        class="c5">false</span><span class="c3">});<br>tom.name = </span><span
                        class="c7 c10">&quot;Tomas&quot;</span><span class="c3">;<br><br></span><span class="c4">//
                        ad&#259;ug&#259;m o nou&#259; proprietate - age</span><span class="c3"><br>tom.age =
                    </span><span class="c7 c15">39</span><span class="c3">;<br></span><span
                        class="c1">console</span><span class="c3">.log(</span><span class="c7 c10">`Nume: ${tom.name}
                        &nbsp;V&acirc;rst&#259;: ${tom.age}`</span><span class="c3">); &nbsp;</span><span class="c4">//
                        Nume: Tom &nbsp;V&acirc;rst&#259;: 39</span><span class="c3"><br><br></span><span class="c4">//
                        pentru proprietatea name permitem modificarea</span><span class="c3"><br></span><span
                        class="c1">Object</span><span class="c3">.defineProperty(tom, </span><span
                        class="c7 c10">&quot;name&quot;</span><span class="c3">, { writable: </span><span
                        class="c5">true</span><span class="c3">});<br>tom.name = </span><span
                        class="c7 c10">&quot;Tomas&quot;</span><span class="c3">;<br></span><span
                        class="c1">console</span><span class="c3">.log(</span><span class="c7 c10">`Nume: ${tom.name}
                        &nbsp;V&acirc;rst&#259;: ${tom.age}`</span><span class="c3">); &nbsp;</span><span class="c4">//
                        Nume: Tomas &nbsp;V&acirc;rst&#259;: 39</span></p>
            </td>
        </tr>
    </table>
    <p class="c9 c11"><span class="c0"></span></p>
    <p class="c9"><span class="c0">Deci, putem modifica configurarea unei propriet&#259;&#539;i (aici facem proprietatea
            `name` indisponibil&#259; pentru scriere). De asemenea, putem ad&#259;uga o nou&#259; proprietate &icirc;n
            obiect.</span></p>
    <p class="c9 c11"><span class="c0"></span></p>
    <p class="c9"><span class="c7">Acum, s&#259; aplic&#259;m metoda </span><span class="c8">`Object.seal()</span><span
            class="c0">`:</span></p>
    <p class="c9 c11"><span class="c0"></span></p><a id="t.66d36fd3fa79dfa2a94c1e3095b509d5e454b666"></a><a
        id="t.4"></a>
    <table class="c2">
        <tr class="c13">
            <td class="c6" colspan="1" rowspan="1">
                <p class="c12"><span class="c5">const</span><span class="c3">&nbsp;tom = {name: </span><span
                        class="c7 c10">&quot;Tom&quot;</span><span class="c3">};<br></span><span
                        class="c1">Object</span><span class="c3">.seal(tom); &nbsp; &nbsp; &nbsp; </span><span
                        class="c4">// sigil&#259;m obiectul tom &icirc;mpotriva extinderii &#537;i modific&#259;rii
                        configura&#539;iei</span><span class="c3"><br></span><span class="c4">// pentru proprietatea
                        name interzicem modificarea</span><span class="c3"><br></span><span
                        class="c1">Object</span><span class="c3">.defineProperty(tom, </span><span
                        class="c7 c10">&quot;name&quot;</span><span class="c3">, { writable: </span><span
                        class="c5">false</span><span class="c3">});<br>tom.name = </span><span
                        class="c7 c10">&quot;Tomas&quot;</span><span class="c3">;<br><br></span><span class="c4">//
                        ad&#259;ug&#259;m o nou&#259; proprietate - age</span><span class="c3"><br>tom.age =
                    </span><span class="c7 c15">39</span><span class="c3">;<br></span><span
                        class="c1">console</span><span class="c3">.log(</span><span class="c7 c10">`Nume: ${tom.name}
                        &nbsp;V&acirc;rst&#259;: ${tom.age}`</span><span class="c3">); &nbsp;</span><span class="c4">//
                        Nume: Tom &nbsp;V&acirc;rst&#259;: undefined</span><span class="c3"><br><br></span><span
                        class="c4">// pentru proprietatea name permitem modificarea</span><span
                        class="c3"><br></span><span class="c1">Object</span><span class="c3">.defineProperty(tom,
                    </span><span class="c7 c10">&quot;name&quot;</span><span class="c3">, { writable: </span><span
                        class="c5">true</span><span class="c3">}); </span><span class="c4">// Uncaught TypeError: Cannot
                        redefine property: name</span></p>
            </td>
        </tr>
    </table>
    <p class="c9 c11"><span class="c0"></span></p>
    <p class="c9"><span class="c0">Dup&#259; sigilarea obiectului cu `Object.seal(tom)`, nu vom putea ad&#259;uga o
            nou&#259; proprietate &icirc;n obiect. Prin urmare, &icirc;n exemplul de mai sus, proprietatea `tom.age` va
            fi `undefined`. De asemenea, nu vom putea modifica din nou configurarea propriet&#259;&#539;ii. Astfel,
            &icirc;n acest caz, la al doilea apel al metodei `Object.defineProperty()` pentru proprietatea `name`, vom
            primi eroarea &quot;Uncaught TypeError: Cannot redefine property: name&quot;.</span></p>
    <p class="c9 c11"><span class="c0"></span></p>
    <p class="c9"><span class="c7">Pentru a verifica dac&#259; un obiect este sigilat, putem utiliza metoda
            `</span><span class="c8">Object.isSealed()</span><span class="c7">`. Dac&#259; obiectul este sigilat, metoda
            returneaz&#259; true. Trebuie men&#539;ionat c&#259;, deoarece un obiect sigilat nu poate fi extins, metoda
            `</span><span class="c8">Object.isExtensible()</span><span class="c0">` returneaz&#259; false pentru
            el:</span></p>
    <p class="c9 c11"><span class="c0"></span></p><a id="t.8e381b3666cf0d3ffb0d11ceee3efea4e03446de"></a><a
        id="t.5"></a>
    <table class="c2">
        <tr class="c13">
            <td class="c6" colspan="1" rowspan="1">
                <p class="c12"><span class="c5">const</span><span class="c3">&nbsp;tom = {name: </span><span
                        class="c7 c10">&quot;Tom&quot;</span><span class="c3">};<br></span><span
                        class="c1">console</span><span class="c3">.log(</span><span class="c1">Object</span><span
                        class="c3">.isExtensible(tom)); &nbsp;</span><span class="c4">// true</span><span
                        class="c3"><br></span><span class="c1">console</span><span class="c3">.log(</span><span
                        class="c1">Object</span><span class="c3">.isSealed(tom)); &nbsp; &nbsp; &nbsp;</span><span
                        class="c4">// false</span><span class="c3"><br></span><span class="c1">Object</span><span
                        class="c3">.seal(tom); &nbsp; &nbsp; &nbsp; </span><span class="c4">// &icirc;nchidem obiectul
                        tom</span><span class="c3"><br></span><span class="c1">console</span><span
                        class="c3">.log(</span><span class="c1">Object</span><span class="c3">.isExtensible(tom));
                        &nbsp;</span><span class="c4">// false</span><span class="c3"><br></span><span
                        class="c1">console</span><span class="c3">.log(</span><span class="c1">Object</span><span
                        class="c3">.isSealed(tom)); &nbsp; &nbsp; &nbsp;</span><span class="c4">// true</span></p>
            </td>
        </tr>
    </table>
    <p class="c9 c11"><span class="c0"></span></p>
    <p class="c9"><span class="c16 c14">Interdic&#539;ia de modificare a valorilor propriet&#259;&#539;ilor.</span></p>
    <p class="c9 c11"><span class="c16 c8"></span></p>
    <p class="c9"><span class="c0">Congelarea (freezing) permite interzicerea modific&#259;rii valorilor
            propriet&#259;&#539;ilor, adic&#259; face obiectul complet constant. Astfel, doar definirea unui obiect ca o
            constant&#259; obi&#537;nuit&#259; cu ajutorul operatorului `const` nu este suficient. De exemplu:</span>
    </p>
    <p class="c9 c11"><span class="c0"></span></p><a id="t.fac5c41c4c361a3ad1b31c92985b191c7a1d6502"></a><a
        id="t.6"></a>
    <table class="c2">
        <tr class="c13">
            <td class="c6" colspan="1" rowspan="1">
                <p class="c12"><span class="c5">const</span><span class="c3">&nbsp;tom = {name: </span><span
                        class="c7 c10">&quot;Tom&quot;</span><span class="c3">};<br>tom.name= </span><span
                        class="c7 c10">&quot;Tomas&quot;</span><span class="c3">;<br></span><span
                        class="c1">console</span><span class="c3">.log(tom.name); &nbsp;</span><span class="c4">//
                        Tomas</span></p>
            </td>
        </tr>
    </table>
    <p class="c9 c11"><span class="c0"></span></p>
    <p class="c9"><span class="c0">Aici observ&#259;m c&#259; proprietatea obiectului &#537;i-a schimbat valoarea, chiar
            dac&#259; obiectul este definit ca o constant&#259;.</span></p>
    <p class="c9 c11"><span class="c0"></span></p>
    <p class="c9"><span class="c0">Operatorul `const` afecteaz&#259; doar atribuirea unei noi valori constantei,
            a&#537;a cum se vede &icirc;n exemplul urm&#259;tor:</span></p>
    <p class="c9 c11"><span class="c0"></span></p><a id="t.14a9f6b3f0c7ab118bbdd745a5c8f3bfca94cf44"></a><a
        id="t.7"></a>
    <table class="c2">
        <tr class="c13">
            <td class="c6" colspan="1" rowspan="1">
                <p class="c12"><span class="c5">const</span><span class="c3">&nbsp;tom = {name: </span><span
                        class="c7 c10">&quot;Tom&quot;</span><span class="c3">};<br>tom = {name: </span><span
                        class="c7 c10">&quot;Sam&quot;</span><span class="c3">}; &nbsp; &nbsp;</span><span class="c4">//
                        Eroare - nu se poate atribui o valoare constantului a doua oar&#259;</span></p>
            </td>
        </tr>
    </table>
    <p class="c9 c11"><span class="c0"></span></p>
    <p class="c9"><span class="c0">Cu toate acestea, valorile propriet&#259;&#539;ilor obiectului le putem
            schimba.</span></p>
    <p class="c9 c11"><span class="c0"></span></p>
    <p class="c9"><span class="c7">Pentru a face obiectul cu adev&#259;rat constant, este necesar s&#259; aplic&#259;m
            metoda special&#259; `</span><span class="c8">Object.freeze()</span><span class="c0">`. Aceast&#259;
            metod&#259; prime&#537;te ca parametru obiectul pe care dorim s&#259; &icirc;l facem constant:</span></p>
    <p class="c9 c11"><span class="c0"></span></p><a id="t.5f014bceec0c413e11f0dc66986eae9703254ff0"></a><a
        id="t.8"></a>
    <table class="c2">
        <tr class="c13">
            <td class="c6" colspan="1" rowspan="1">
                <p class="c12"><span class="c5">const</span><span class="c3">&nbsp;tom = {name: </span><span
                        class="c7 c10">&quot;Tom&quot;</span><span class="c3">};<br></span><span
                        class="c1">Object</span><span class="c3">.freeze(tom);<br>tom.name= </span><span
                        class="c7 c10">&quot;Tomas&quot;</span><span class="c3">; &nbsp; &nbsp; &nbsp;</span><span
                        class="c4">// nu se poate schimba valoarea propriet&#259;&#539;ii</span><span
                        class="c3"><br></span><span class="c1">console</span><span class="c3">.log(tom.name); &nbsp;
                    </span><span class="c4">// Tom</span></p>
            </td>
        </tr>
    </table>
    <p class="c9 c11"><span class="c0"></span></p>
    <p class="c9"><span class="c7">Pentru a verifica dac&#259; putem schimba valorile propriet&#259;&#539;ilor
            obiectului, utiliz&#259;m metoda `</span><span class="c8">Object.isFrozen()</span><span class="c0">`.
            Dac&#259; valorile propriet&#259;&#539;ilor nu pot fi schimbate, aceasta returneaz&#259; `true`.</span></p>
    <p class="c9 c11"><span class="c0"></span></p>
    <p class="c9"><span class="c0">Trebuie men&#539;ionat c&#259; un obiect &quot;&icirc;nghe&#539;at&quot; este cel mai
            &icirc;nalt nivel de restric&#539;ie a modific&#259;rilor la obiect. Prin urmare, un astfel de obiect nu
            poate fi extins &#537;i, de asemenea, nu se poate schimba configura&#539;ia propriet&#259;&#539;ilor
            sale.</span></p>
    <p class="c9 c11"><span class="c0"></span></p><a id="t.e001ab52e43a82eb0138f747c78dfca976473052"></a><a
        id="t.9"></a>
    <table class="c2">
        <tr class="c13">
            <td class="c6" colspan="1" rowspan="1">
                <p class="c12"><span class="c5">const</span><span class="c3">&nbsp;tom = {name: </span><span
                        class="c7 c10">&quot;Tom&quot;</span><span class="c3">};<br></span><span
                        class="c1">console</span><span class="c3">.log(</span><span class="c1">Object</span><span
                        class="c3">.isExtensible(tom)); &nbsp;</span><span class="c4">// true</span><span
                        class="c3"><br></span><span class="c1">console</span><span class="c3">.log(</span><span
                        class="c1">Object</span><span class="c3">.isSealed(tom)); &nbsp; &nbsp; &nbsp;</span><span
                        class="c4">// false</span><span class="c3"><br></span><span class="c1">console</span><span
                        class="c3">.log(</span><span class="c1">Object</span><span class="c3">.isFrozen(tom)); &nbsp;
                        &nbsp; &nbsp;</span><span class="c4">// false</span><span class="c3"><br></span><span
                        class="c1">Object</span><span class="c3">.freeze(tom);<br></span><span
                        class="c1">console</span><span class="c3">.log(</span><span class="c1">Object</span><span
                        class="c3">.isExtensible(tom)); &nbsp;</span><span class="c4">// false</span><span
                        class="c3"><br></span><span class="c1">console</span><span class="c3">.log(</span><span
                        class="c1">Object</span><span class="c3">.isSealed(tom)); &nbsp; &nbsp; &nbsp;</span><span
                        class="c4">// true</span><span class="c3"><br></span><span class="c1">console</span><span
                        class="c3">.log(</span><span class="c1">Object</span><span class="c3">.isFrozen(tom)); &nbsp;
                        &nbsp; &nbsp;</span><span class="c4">// true</span></p>
            </td>
        </tr>
    </table>
    <p class="c9 c11"><span class="c0"></span></p>
</body>

</html>