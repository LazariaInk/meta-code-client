<html>

<head>
    <meta content="text/html; charset=UTF-8" http-equiv="content-type">
    <style type="text/css">
        @import url(https://themes.googleusercontent.com/fonts/css?kit=iMc4-4exjgqA-toZgqqJBf35jAjY-31lSKWZb9Fa77M);

        .lst-kix_qxyowntf914-6>li:before {
            content: "\0025cf   "
        }

        .lst-kix_qxyowntf914-4>li:before {
            content: "\0025cb   "
        }

        .lst-kix_qxyowntf914-8>li:before {
            content: "\0025a0   "
        }

        .lst-kix_qxyowntf914-5>li:before {
            content: "\0025a0   "
        }

        ul.lst-kix_qxyowntf914-1 {
            list-style-type: none
        }

        ul.lst-kix_qxyowntf914-2 {
            list-style-type: none
        }

        .lst-kix_qxyowntf914-7>li:before {
            content: "\0025cb   "
        }

        ul.lst-kix_qxyowntf914-0 {
            list-style-type: none
        }

        .lst-kix_ow3ral17bdrh-0>li:before {
            content: "\0025cf   "
        }

        .lst-kix_ow3ral17bdrh-1>li:before {
            content: "\0025cb   "
        }

        .lst-kix_ow3ral17bdrh-2>li:before {
            content: "\0025a0   "
        }

        ul.lst-kix_ow3ral17bdrh-0 {
            list-style-type: none
        }

        .lst-kix_ow3ral17bdrh-3>li:before {
            content: "\0025cf   "
        }

        li.li-bullet-0:before {
            margin-left: -18pt;
            white-space: nowrap;
            display: inline-block;
            min-width: 18pt
        }

        ul.lst-kix_qxyowntf914-5 {
            list-style-type: none
        }

        ul.lst-kix_ow3ral17bdrh-3 {
            list-style-type: none
        }

        ul.lst-kix_qxyowntf914-6 {
            list-style-type: none
        }

        ul.lst-kix_ow3ral17bdrh-4 {
            list-style-type: none
        }

        .lst-kix_ow3ral17bdrh-5>li:before {
            content: "\0025a0   "
        }

        .lst-kix_ow3ral17bdrh-6>li:before {
            content: "\0025cf   "
        }

        ul.lst-kix_qxyowntf914-3 {
            list-style-type: none
        }

        ul.lst-kix_ow3ral17bdrh-1 {
            list-style-type: none
        }

        ul.lst-kix_qxyowntf914-4 {
            list-style-type: none
        }

        ul.lst-kix_ow3ral17bdrh-2 {
            list-style-type: none
        }

        .lst-kix_qxyowntf914-0>li:before {
            content: "\0025cf   "
        }

        ul.lst-kix_ow3ral17bdrh-7 {
            list-style-type: none
        }

        .lst-kix_ow3ral17bdrh-4>li:before {
            content: "\0025cb   "
        }

        .lst-kix_ow3ral17bdrh-8>li:before {
            content: "\0025a0   "
        }

        ul.lst-kix_ow3ral17bdrh-8 {
            list-style-type: none
        }

        .lst-kix_qxyowntf914-1>li:before {
            content: "\0025cb   "
        }

        ul.lst-kix_qxyowntf914-7 {
            list-style-type: none
        }

        ul.lst-kix_ow3ral17bdrh-5 {
            list-style-type: none
        }

        ul.lst-kix_qxyowntf914-8 {
            list-style-type: none
        }

        ul.lst-kix_ow3ral17bdrh-6 {
            list-style-type: none
        }

        .lst-kix_qxyowntf914-2>li:before {
            content: "\0025a0   "
        }

        .lst-kix_ow3ral17bdrh-7>li:before {
            content: "\0025cb   "
        }

        .lst-kix_qxyowntf914-3>li:before {
            content: "\0025cf   "
        }

        ol {
            margin: 0;
            padding: 0
        }

        table td,
        table th {
            padding: 0
        }

        .c17 {
            border-right-style: solid;
            padding: 5pt 5pt 5pt 5pt;
            border-bottom-color: #000000;
            border-top-width: 0pt;
            border-right-width: 0pt;
            border-left-color: #000000;
            vertical-align: top;
            border-right-color: #000000;
            border-left-width: 0pt;
            border-top-style: solid;
            background-color: #333333;
            border-left-style: solid;
            border-bottom-width: 0pt;
            width: 468pt;
            border-top-color: #000000;
            border-bottom-style: solid
        }

        .c3 {
            margin-left: 36pt;
            padding-top: 0pt;
            padding-left: 0pt;
            padding-bottom: 0pt;
            line-height: 1.5;
            orphans: 2;
            widows: 2;
            text-align: left
        }

        .c5 {
            padding-top: 0pt;
            padding-bottom: 0pt;
            line-height: 1.5;
            orphans: 2;
            widows: 2;
            text-align: left;
            height: 11pt
        }

        .c2 {
            color: #000000;
            font-weight: 400;
            text-decoration: none;
            vertical-align: baseline;
            font-size: 12pt;
            font-family: "Open Sans";
            font-style: normal
        }

        .c11 {
            color: #000000;
            font-weight: 700;
            text-decoration: none;
            vertical-align: baseline;
            font-size: 15pt;
            font-family: "Open Sans";
            font-style: normal
        }

        .c6 {
            background-color: #333333;
            font-size: 12pt;
            font-family: "Open Sans";
            color: #a2fca2;
            font-weight: 400
        }

        .c4 {
            font-size: 12pt;
            font-family: "Open Sans";
            font-style: italic;
            font-weight: 400
        }

        .c7 {
            padding-top: 0pt;
            padding-bottom: 0pt;
            line-height: 1.5;
            text-align: left
        }

        .c18 {
            border-spacing: 0;
            border-collapse: collapse;
            margin-right: auto
        }

        .c16 {
            color: #000000;
            text-decoration: none;
            vertical-align: baseline;
            font-style: normal
        }

        .c22 {
            background-color: #ffffff;
            max-width: 468pt;
            padding: 72pt 72pt 72pt 72pt
        }

        .c0 {
            font-size: 12pt;
            font-family: "Open Sans";
            font-weight: 700
        }

        .c20 {
            font-weight: 700;
            font-size: 27pt;
            font-family: "Open Sans"
        }

        .c21 {
            color: #000000;
            text-decoration: none;
            vertical-align: baseline
        }

        .c8 {
            font-size: 12pt;
            font-family: "Open Sans";
            font-weight: 400
        }

        .c14 {
            background-color: #333333;
            color: #ffffaa
        }

        .c15 {
            background-color: #333333;
            color: #fcc28c
        }

        .c10 {
            background-color: #333333;
            color: #ffffff
        }

        .c9 {
            background-color: #333333;
            color: #888888
        }

        .c13 {
            orphans: 2;
            widows: 2
        }

        .c1 {
            padding: 0;
            margin: 0
        }

        .c12 {
            height: 0pt
        }

        .c19 {
            margin-left: 36pt
        }

        .title {
            padding-top: 0pt;
            color: #000000;
            font-size: 26pt;
            padding-bottom: 3pt;
            font-family: "Arial";
            line-height: 1.15;
            page-break-after: avoid;
            orphans: 2;
            widows: 2;
            text-align: left
        }

        .subtitle {
            padding-top: 0pt;
            color: #666666;
            font-size: 15pt;
            padding-bottom: 16pt;
            font-family: "Arial";
            line-height: 1.15;
            page-break-after: avoid;
            orphans: 2;
            widows: 2;
            text-align: left
        }

        li {
            color: #000000;
            font-size: 11pt;
            font-family: "Arial"
        }

        p {
            margin: 0;
            color: #000000;
            font-size: 11pt;
            font-family: "Arial"
        }

        h1 {
            padding-top: 20pt;
            color: #000000;
            font-size: 20pt;
            padding-bottom: 6pt;
            font-family: "Arial";
            line-height: 1.15;
            page-break-after: avoid;
            orphans: 2;
            widows: 2;
            text-align: left
        }

        h2 {
            padding-top: 18pt;
            color: #000000;
            font-size: 16pt;
            padding-bottom: 6pt;
            font-family: "Arial";
            line-height: 1.15;
            page-break-after: avoid;
            orphans: 2;
            widows: 2;
            text-align: left
        }

        h3 {
            padding-top: 16pt;
            color: #434343;
            font-size: 14pt;
            padding-bottom: 4pt;
            font-family: "Arial";
            line-height: 1.15;
            page-break-after: avoid;
            orphans: 2;
            widows: 2;
            text-align: left
        }

        h4 {
            padding-top: 14pt;
            color: #666666;
            font-size: 12pt;
            padding-bottom: 4pt;
            font-family: "Arial";
            line-height: 1.15;
            page-break-after: avoid;
            orphans: 2;
            widows: 2;
            text-align: left
        }

        h5 {
            padding-top: 12pt;
            color: #666666;
            font-size: 11pt;
            padding-bottom: 4pt;
            font-family: "Arial";
            line-height: 1.15;
            page-break-after: avoid;
            orphans: 2;
            widows: 2;
            text-align: left
        }

        h6 {
            padding-top: 12pt;
            color: #666666;
            font-size: 11pt;
            padding-bottom: 4pt;
            font-family: "Arial";
            line-height: 1.15;
            page-break-after: avoid;
            font-style: italic;
            orphans: 2;
            widows: 2;
            text-align: left
        }
    </style>
</head>

<body class="c22 doc-content">
    <h1 class="c7 c13 c16 c20">Citirea fi»ôierelor cu FileReader. </h1>
    <p class="c5"><span class="c2"></span></p>
    <p class="c7 c13"><span class="c8">Pentru citirea fi&#537;ierelor selectate &icirc;n File API se utilizeaz&#259;
            obiectul </span><span class="c0">FileReader</span><span class="c2">. Acest tip ofer&#259; diferite metode de
            citire a fi&#537;ierelor:</span></p>
    <p class="c5"><span class="c2"></span></p>
    <ul class="c1 lst-kix_ow3ral17bdrh-0 start">
        <li class="c3 li-bullet-0"><span class="c0">readAsBinaryString()</span><span class="c2">: cite&#537;te datele
                &icirc;ntr-un &#537;ir de octe&#539;i</span></li>
    </ul>
    <p class="c5 c19"><span class="c2"></span></p>
    <ul class="c1 lst-kix_ow3ral17bdrh-0">
        <li class="c3 li-bullet-0"><span class="c0">readAsText()</span><span class="c2">: cite&#537;te datele ca
                text</span></li>
    </ul>
    <p class="c5 c19"><span class="c2"></span></p>
    <ul class="c1 lst-kix_ow3ral17bdrh-0">
        <li class="c3 li-bullet-0"><span class="c0">readAsDataURL()</span><span class="c8">: cite&#537;te datele ca
                adrese URL de date. Adresele URL de date sunt o schem&#259; special&#259; de adrese URL pentru
                &icirc;ncorporarea datelor &icirc;n codul HTML. Adresele URL de date &icirc;ncep cu &#537;irul data:,
                urmat de tipul MIME &#537;i informa&#539;ia despre codare, precum &#537;i datele codificate
                corespunz&#259;toare - de exemplu, </span><span class="c4">data:image/png;base64,jfdsfrRdF</span><span
                class="c2">&nbsp;pentru o imagine PNG cu codare Base64. Astfel, cu ajutorul adreselor URL de date, de
                exemplu, datele imaginii sub form&#259; de &#537;ir pot fi utilizate direct &icirc;n codul HTML, ceea
                ce, la r&acirc;ndul s&#259;u, reduce num&#259;rul de cereri HTTP la pagina web, deoarece browserului nu
                &icirc;i trebuie s&#259; fac&#259; o a doua cerere pentru ob&#539;inerea imaginii</span></li>
    </ul>
    <p class="c5"><span class="c2"></span></p>
    <ul class="c1 lst-kix_qxyowntf914-0 start">
        <li class="c3 li-bullet-0"><span class="c0">readAsArrayBuffer()</span><span class="c2">: cite&#537;te datele
                &icirc;ntr-un obiect ArrayBuffer</span></li>
    </ul>
    <p class="c5 c19"><span class="c2"></span></p>
    <ul class="c1 lst-kix_qxyowntf914-0">
        <li class="c3 li-bullet-0"><span class="c0">abort()</span><span class="c2">: &icirc;ntrerupe procesul de citire
                a datelor</span></li>
    </ul>
    <p class="c5 c19"><span class="c2"></span></p>
    <p class="c7 c13 c19"><span class="c8">De asemenea, &icirc;n procesul de lucru cu </span><span class="c4">FileReader
        </span><span class="c2">pot ap&#259;rea o serie de evenimente:</span></p>
    <p class="c5 c19"><span class="c2"></span></p>
    <ul class="c1 lst-kix_qxyowntf914-0">
        <li class="c3 li-bullet-0"><span class="c0">abort</span><span class="c2">: generat la &icirc;ntreruperea citirii
                prin metoda abort</span></li>
    </ul>
    <p class="c5 c19"><span class="c2"></span></p>
    <ul class="c1 lst-kix_qxyowntf914-0">
        <li class="c3 li-bullet-0"><span class="c0">error</span><span class="c2">: generat la apari&#539;ia unei
                erori</span></li>
    </ul>
    <p class="c5 c19"><span class="c2"></span></p>
    <ul class="c1 lst-kix_qxyowntf914-0">
        <li class="c3 li-bullet-0"><span class="c0">load</span><span class="c2">: generat la finalizarea cu succes a
                citirii datelor</span></li>
    </ul>
    <p class="c5 c19"><span class="c2"></span></p>
    <ul class="c1 lst-kix_qxyowntf914-0">
        <li class="c3 li-bullet-0"><span class="c0">loadstart</span><span class="c2">: generat la &icirc;nceputul
                procesului de citire a datelor</span></li>
    </ul>
    <p class="c5 c19"><span class="c2"></span></p>
    <ul class="c1 lst-kix_qxyowntf914-0">
        <li class="c3 li-bullet-0"><span class="c0">loadend</span><span class="c2">: generat dup&#259; finalizarea
                citirii datelor</span></li>
    </ul>
    <p class="c5 c19"><span class="c2"></span></p>
    <ul class="c1 lst-kix_qxyowntf914-0">
        <li class="c3 li-bullet-0"><span class="c0">progress</span><span class="c2">: generat &icirc;n timpul citirii,
                notific&acirc;nd despre progresul citirii</span></li>
    </ul>
    <p class="c5"><span class="c2"></span></p>
    <p class="c7 c13"><span class="c8">Astfel, la finalizarea cu succes a citirii, se declan&#537;eaz&#259; evenimentul
        </span><span class="c0">load</span><span class="c8">, &icirc;n handler-ul c&#259;ruia se pot ob&#539;ine datele
            citite fie prin proprietatea </span><span class="c4">result </span><span class="c8">a obiectului FileReader,
            fie prin proprietatea </span><span class="c4">target.result</span><span class="c2">&nbsp;a parametrului
            handler-ului evenimentului, anterior fiind definit un handler de evenimente sau &icirc;nregistrat un
            ascult&#259;tor de evenimente. Dac&#259; evenimentul de &icirc;nc&#259;rcare a fost declan&#537;at,
            con&#539;inutul fi&#537;ierului este de asemenea disponibil prin proprietatea result.</span></p>
    <p class="c5"><span class="c2"></span></p>
    <p class="c7 c13"><span class="c8">De exemplu, citim fi&#537;ierele care sunt selectate prin elementul </span><span
            class="c4">&lt;input type=&quot;file&quot;&gt;</span><span class="c2">. S&#259; presupunem c&#259; am
            urm&#259;torul fi&#537;ier &quot;hello.txt&quot;:</span></p>
    <p class="c5"><span class="c2"></span></p><a id="t.6711eb0408d8a1328402a621fd5261f4a892be66"></a><a id="t.0"></a>
    <table class="c18">
        <tr class="c12">
            <td class="c17" colspan="1" rowspan="1">
                <p class="c7"><span class="c8 c10">Hello FDC.COM<br>Hello World</span></p>
            </td>
        </tr>
    </table>
    <p class="c5"><span class="c2"></span></p>
    <p class="c7 c13"><span class="c2">Pentru citirea acestuia (&#537;i pentru citirea oric&#259;ror alte fi&#537;iere
            text) definim urm&#259;toarea pagin&#259; web:</span></p>
    <p class="c5"><span class="c2"></span></p><a id="t.4b9bab17510c7565c91cfe59bacd0e868d20fd9c"></a><a id="t.1"></a>
    <table class="c18">
        <tr class="c12">
            <td class="c17" colspan="1" rowspan="1">
                <p class="c7"><span class="c8 c10">&lt;!DOCTYPE html&gt;<br>&lt;html&gt;<br>&lt;head&gt;<br> &nbsp;
                        &nbsp;&lt;meta charset=&quot;utf-8&quot; /&gt;<br> &nbsp;
                        &nbsp;&lt;title&gt;FDC.COM&lt;/title&gt;<br>&lt;/head&gt;<br>&lt;body&gt;<br>&lt;input
                        type=&quot;file&quot; id=&quot;files&quot; accept=&quot;text/*&quot; multiple
                        /&gt;<br>&lt;script&gt;<br>function printFiles(e) { &nbsp;<br> &nbsp; &nbsp;const files =
                        e.target.files; &nbsp; // ob&#539;inem toate fi&#537;ierele selectate<br> &nbsp; &nbsp;for (file
                        of files) { &nbsp; &nbsp; &nbsp; &nbsp;// Parcurgem toate fi&#537;ierele selectate <br> &nbsp;
                        &nbsp; &nbsp; &nbsp;// cre&#259;m un obiect FileReader pentru citirea fi&#537;ierului<br> &nbsp;
                        &nbsp; &nbsp; &nbsp;const reader = new FileReader(); &nbsp;<br> &nbsp; &nbsp; &nbsp; &nbsp;// la
                        citirea cu succes a fi&#537;ierului afi&#537;&#259;m con&#539;inutul s&#259;u pe pagina web<br>
                        &nbsp; &nbsp; &nbsp; &nbsp;reader.onload = () =&gt; { &nbsp;<br> &nbsp; &nbsp; &nbsp; &nbsp;
                        &nbsp; &nbsp;// afi&#537;&#259;m con&#539;inutul<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;
                        &nbsp;console.log(reader.result);<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;// pentru
                        separare, dac&#259; sunt selectate mai multe fi&#537;iere<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;
                        &nbsp;console.log(&quot;==============================&quot;);<br> &nbsp; &nbsp; &nbsp; &nbsp;};
                        &nbsp; &nbsp; &nbsp;<br> &nbsp; &nbsp; &nbsp; &nbsp; // citim fi&#537;ierul<br> &nbsp; &nbsp;
                        &nbsp; &nbsp;reader.readAsText(file); &nbsp; &nbsp; &nbsp; <br> &nbsp;
                        &nbsp;}<br>}<br>document.getElementById(&quot;files&quot;).addEventListener(&quot;change&quot;,
                        printFiles);<br>&lt;/script&gt;<br>&lt;/body&gt;<br>&lt;/html&gt;</span></p>
            </td>
        </tr>
    </table>
    <p class="c5"><span class="c2"></span></p>
    <p class="c7 c13"><span class="c8">Aici pe pagin&#259; este definit elementul de intrare input, pentru care cu
            ajutorul atributului </span><span class="c4">accept=&quot;text/*&quot;</span><span class="c2">&nbsp;este
            stabilit un filtru pentru acceptarea doar a fi&#537;ierelor de tip text.</span></p>
    <p class="c5"><span class="c2"></span></p><a id="t.7a2d9937244af84673e783a26e431abaa3966c02"></a><a id="t.2"></a>
    <table class="c18">
        <tr class="c12">
            <td class="c17" colspan="1" rowspan="1">
                <p class="c7"><span class="c8 c10">&lt;input type=</span><span class="c6">&quot;file&quot;</span><span
                        class="c8 c10">&nbsp;id=</span><span class="c6">&quot;files&quot;</span><span
                        class="c8 c10">&nbsp;accept=</span><span class="c6">&quot;text/*&quot;</span><span
                        class="c8 c10">&nbsp;multiple /&gt;</span></p>
            </td>
        </tr>
    </table>
    <p class="c5"><span class="c2"></span></p>
    <p class="c7 c13"><span class="c2">&Icirc;n codul JavaScript pentru elementul input, ca handler pentru evenimentul
            &quot;change&quot;, stabilim func&#539;ia printFiles:</span></p>
    <p class="c5"><span class="c2"></span></p><a id="t.d83ab924026eff061f76e2bdaaada7e39109cddd"></a><a id="t.3"></a>
    <table class="c18">
        <tr class="c12">
            <td class="c17" colspan="1" rowspan="1">
                <p class="c7"><span class="c8 c14">document</span><span class="c8 c10">.getElementById(</span><span
                        class="c6">&quot;files&quot;</span><span class="c8 c10">).addEventListener(</span><span
                        class="c6">&quot;change&quot;</span><span class="c8 c10">, printFiles);</span></p>
            </td>
        </tr>
    </table>
    <p class="c5"><span class="c2"></span></p>
    <p class="c7 c13"><span class="c2">&Icirc;n aceast&#259; func&#539;ie parcurgem toate fi&#537;ierele selectate, pe
            care le ob&#539;inem din obiectul evenimentului prin proprietatea e.target.files, &#537;i cre&#259;m un
            obiect FileReader pentru citirea fiec&#259;rui fi&#537;ier</span></p>
    <p class="c5"><span class="c2"></span></p><a id="t.50921f29fe3e0ee9f2c3884b5f9a22be559121f1"></a><a id="t.4"></a>
    <table class="c18">
        <tr class="c12">
            <td class="c17" colspan="1" rowspan="1">
                <p class="c7"><span class="c8 c15">function</span><span class="c8 c10">&nbsp;</span><span
                        class="c8 c14">printFiles</span><span class="c8 c10">(e) { &nbsp;<br> &nbsp; &nbsp;</span><span
                        class="c8 c15">const</span><span class="c8 c10">&nbsp;files = e.target.files; &nbsp;
                    </span><span class="c8 c9">// ob&#539;inem toate fi&#537;ierele selectate</span><span
                        class="c8 c10"><br> &nbsp; &nbsp;</span><span class="c8 c15">for</span><span
                        class="c8 c10">&nbsp;(file </span><span class="c8 c15">of</span><span
                        class="c8 c10">&nbsp;files) { &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c8 c9">// Parcurgem
                        toate fi&#537;ierele selectate </span><span class="c8 c10"><br> &nbsp; &nbsp; &nbsp;
                        &nbsp;</span><span class="c8 c9">// cre&#259;m un obiect FileReader pentru citirea
                        fi&#537;ierului</span><span class="c8 c10"><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span
                        class="c8 c15">const</span><span class="c8 c10">&nbsp;reader = </span><span
                        class="c8 c15">new</span><span class="c8 c10">&nbsp;FileReader(); &nbsp;<br> &nbsp; &nbsp;
                        &nbsp; &nbsp;</span><span class="c8 c9">// la citirea cu succes a fi&#537;ierului
                        afi&#537;&#259;m con&#539;inutul s&#259;u pe pagina web &nbsp; &nbsp;</span></p>
            </td>
        </tr>
    </table>
    <p class="c5"><span class="c2"></span></p>
    <p class="c7 c13"><span class="c8">Definim handler-ul pentru evenimentul </span><span class="c0">load</span><span
            class="c2">:</span></p>
    <p class="c5"><span class="c2"></span></p>
    <p class="c7 c13"><span class="c2">&nbsp; &nbsp;</span></p><a id="t.5ce12c6bdbbf247380d420c6500969f6af73f619"></a><a
        id="t.5"></a>
    <table class="c18">
        <tr class="c12">
            <td class="c17" colspan="1" rowspan="1">
                <p class="c7"><span class="c8 c10">&nbsp;reader.onload = () =&gt; { &nbsp;<br> &nbsp; &nbsp; &nbsp;
                        &nbsp; &nbsp; &nbsp;</span><span class="c8 c14">console</span><span
                        class="c8 c10">.log(reader.result); </span><span class="c8 c9">// afi&#537;&#259;m
                        con&#539;inutul</span><span class="c8 c10"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;
                        &nbsp;</span><span class="c8 c9">// pentru separare, dac&#259; sunt selectate mai multe
                        fi&#537;iere</span><span class="c8 c10"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;
                        &nbsp;</span><span class="c8 c14">console</span><span class="c8 c10">.log(</span><span
                        class="c6">&quot;==============================&quot;</span><span class="c8 c10">);<br> &nbsp;
                        &nbsp; &nbsp; &nbsp;};</span></p>
            </td>
        </tr>
    </table>
    <p class="c5"><span class="c2"></span></p>
    <p class="c7 c13"><span class="c8">&Icirc;n handler, prin proprietatea </span><span class="c4">reader.result
        </span><span class="c2">ob&#539;inem datele citite &#537;i le afi&#537;&#259;m &icirc;n consol&#259;. De
            asemenea, dac&#259; sunt selectate mai multe fi&#537;iere, afi&#537;&#259;m &icirc;n consol&#259; un
            separator condi&#539;ionat.</span></p>
    <p class="c5"><span class="c2"></span></p>
    <p class="c7 c13"><span class="c8">La final, citim de fapt fi&#537;ierul cu ajutorul func&#539;iei</span><span
            class="c4 c21">&nbsp;readAsText()</span></p>
    <p class="c5"><span class="c2"></span></p><a id="t.2cba7948990a88e75bb4168a9f70b6f28b1f2ae7"></a><a id="t.6"></a>
    <table class="c18">
        <tr class="c12">
            <td class="c17" colspan="1" rowspan="1">
                <p class="c7"><span class="c8 c10">reader.readAsText(file); </span></p>
            </td>
        </tr>
    </table>
    <p class="c5"><span class="c2"></span></p>
    <p class="c7 c13"><span class="c2">Rezultatul lucr&#259;rii:</span></p>
    <p class="c5"><span class="c2"></span></p>
    <p class="c7 c13"><span
            style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 614.00px; height: 460.00px;"><img
                alt="" src="images/image2.png"
                style="width: 614.00px; height: 460.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);"
                title=""></span></p>
    <p class="c5"><span class="c2"></span></p>
    <p class="c7 c13"><span class="c11">Afi&#537;area metadatelor fi&#537;ierului.</span></p>
    <p class="c5"><span class="c16 c0"></span></p>
    <p class="c7 c13"><span class="c8">Am v&#259;zut cum s&#259; ob&#539;inem &#537;i s&#259; afi&#537;&#259;m &icirc;n
            consol&#259; textul unui fi&#537;ier. &Icirc;n principiu, totul este destul de simplu. Dar c&acirc;nd
            parcurgem fi&#537;ierele prin propriet&#259;&#539;ile obiectului </span><span class="c0">File</span><span
            class="c2">, ne sunt accesibile diferite metadate ale fi&#537;ierului - numele, m&#259;rimea, tipul, data
            modific&#259;rii. Ce se &icirc;nt&acirc;mpl&#259; dac&#259; vrem, de exemplu, s&#259; afi&#537;&#259;m
            &#537;i numele fi&#537;ierului c&acirc;nd afi&#537;&#259;m textul acestuia? Abordarea naiv&#259; ar
            ar&#259;ta astfel:</span></p>
    <p class="c5"><span class="c2"></span></p><a id="t.d0c5cafe4377298303c0329c0ef7a03468f1c5dd"></a><a id="t.7"></a>
    <table class="c18">
        <tr class="c12">
            <td class="c17" colspan="1" rowspan="1">
                <p class="c7"><span class="c8 c15">for</span><span class="c8 c10">&nbsp;(file </span><span
                        class="c8 c15">of</span><span class="c8 c10">&nbsp;files) {<br> &nbsp; &nbsp;</span><span
                        class="c8 c14">console</span><span class="c8 c10">.log(</span><span class="c6">&quot;Numele
                        fi&#537;ierului:&quot;</span><span class="c8 c10">, file.name); &nbsp; </span><span
                        class="c8 c9">// afi&#537;&#259;m numele fi&#537;ierului</span><span class="c8 c10"><br> &nbsp;
                        &nbsp;</span><span class="c8 c15">const</span><span class="c8 c10">&nbsp;reader = </span><span
                        class="c8 c15">new</span><span class="c8 c10">&nbsp;FileReader();<br> &nbsp; &nbsp;reader.onload
                        = () =&gt; { &nbsp;<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span
                        class="c8 c14">console</span><span class="c8 c10">.log(</span><span class="c6">&quot;Numele
                        fi&#537;ierului:&quot;</span><span class="c8 c10">, file.name); &nbsp; </span><span
                        class="c8 c9">// &icirc;ncerc&#259;m s&#259; afi&#537;&#259;m aici</span><span
                        class="c8 c10"><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c8 c14">console</span><span
                        class="c8 c10">.log(reader.result);<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span
                        class="c8 c14">console</span><span class="c8 c10">.log(</span><span
                        class="c6">&quot;==============================&quot;</span><span class="c8 c10">);<br> &nbsp;
                        &nbsp;}; &nbsp; &nbsp; &nbsp;<br> &nbsp; &nbsp;reader.readAsText(file); &nbsp; &nbsp; &nbsp;
                        <br>}</span></p>
            </td>
        </tr>
    </table>
    <p class="c5"><span class="c2"></span></p>
    <p class="c7 c13"><span class="c8">Problema este c&#259; handler-ul</span><span
            class="c4">&nbsp;reader.onload</span><span class="c2">&nbsp;are o natur&#259; asincron&#259; - citirea
            fi&#537;ierului anterior poate s&#259; se finalizeze c&acirc;nd &icirc;ncepe (sau chiar s-a finalizat deja)
            citirea urm&#259;torului fi&#537;ier. &Icirc;n consecin&#539;&#259;, o astfel de abordare poate duce la
            coliziuni. Una dintre solu&#539;iile posibile const&#259; &icirc;n capturarea datelor necesare din exterior
            prin intermediul unui closure:</span></p>
    <p class="c5"><span class="c2"></span></p><a id="t.a1aee3b0b191c085f567204b7523849382563717"></a><a id="t.8"></a>
    <table class="c18">
        <tr class="c12">
            <td class="c17" colspan="1" rowspan="1">
                <p class="c7"><span class="c8 c15">function</span><span class="c8 c10">&nbsp;</span><span
                        class="c8 c14">printFiles</span><span class="c8 c10">(e) { &nbsp;<br> &nbsp; &nbsp;</span><span
                        class="c8 c15">const</span><span class="c8 c10">&nbsp;files = e.target.files;<br> &nbsp;
                        &nbsp;</span><span class="c8 c15">for</span><span class="c8 c10">&nbsp;(file </span><span
                        class="c8 c15">of</span><span class="c8 c10">&nbsp;files) {<br> &nbsp; &nbsp; &nbsp; &nbsp; <br>
                        &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c8 c15">const</span><span
                        class="c8 c10">&nbsp;reader = </span><span class="c8 c15">new</span><span
                        class="c8 c10">&nbsp;FileReader();<br> &nbsp; &nbsp; &nbsp; &nbsp;reader.onload = (</span><span
                        class="c8 c15">function</span><span class="c8 c10">(fileData) {<br> &nbsp; &nbsp; &nbsp; &nbsp;
                        &nbsp; &nbsp;</span><span class="c8 c15">return</span><span class="c8 c10">&nbsp;</span><span
                        class="c8 c15">function</span><span class="c8 c10">(e){<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;
                        &nbsp; &nbsp; &nbsp;</span><span class="c8 c14">console</span><span
                        class="c8 c10">.log(</span><span class="c6">&quot;Numele fi&#537;ierului:&quot;</span><span
                        class="c8 c10">, fileData.name);<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;
                        &nbsp;</span><span class="c8 c14">console</span><span class="c8 c10">.log(e.target.result);
                    </span><span class="c8 c9">// acela&#537;i lucru ca &#537;i reader.result</span><span
                        class="c8 c10"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span
                        class="c8 c14">console</span><span class="c8 c10">.log(</span><span
                        class="c6">&quot;==============================&quot;</span><span class="c8 c10">);<br> &nbsp;
                        &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;};<br> &nbsp; &nbsp; &nbsp; &nbsp;})(file);<br> &nbsp; &nbsp;
                        &nbsp; &nbsp;reader.readAsText(file); &nbsp; &nbsp; &nbsp; <br> &nbsp; &nbsp;}<br>}</span></p>
            </td>
        </tr>
    </table>
    <p class="c5"><span class="c2"></span></p>
    <p class="c7 c13"><span class="c2">&Icirc;n acest caz, handler-ului onload i se atribuie rezultatul unei
            func&#539;ii auto-executabile, care formeaz&#259; un closure. Prin parametrul s&#259;u fileData &icirc;n
            func&#539;ie este transmis obiectul File curent.</span></p>
    <p class="c5"><span class="c2"></span></p>
    <p class="c7 c13"><span class="c11">Citirea imaginilor.</span></p>
    <p class="c5"><span class="c16 c0"></span></p>
    <p class="c7 c13"><span class="c2">&Icirc;ntr-un mod similar, putem citi &#537;i alte tipuri de fi&#537;iere. De
            exemplu, s&#259; citim &#537;i s&#259; afi&#537;&#259;m pe pagina web imaginile:</span></p>
    <p class="c5"><span class="c2"></span></p><a id="t.13be0424394b87db7dc0effba1fab2d51a4c5779"></a><a id="t.9"></a>
    <table class="c18">
        <tr class="c12">
            <td class="c17" colspan="1" rowspan="1">
                <p class="c7"><span class="c8 c10">&lt;!DOCTYPE html&gt;<br>&lt;html&gt;<br>&lt;head&gt;<br> &nbsp;
                        &nbsp;&lt;meta charset=&quot;utf-8&quot; /&gt;<br> &nbsp;
                        &nbsp;&lt;title&gt;FDC.COM&lt;/title&gt;<br> &nbsp; &nbsp;&lt;style&gt;<br> &nbsp;
                        &nbsp;div.item {width: 250px; margin:0 10px;}<br> &nbsp; &nbsp;.image {width: 250px;}<br> &nbsp;
                        &nbsp;&lt;/style&gt;<br>&lt;/head&gt;<br>&lt;body&gt;<br>&lt;input type=&quot;file&quot;
                        id=&quot;files&quot; accept=&quot;image/*&quot; multiple /&gt;<br>&lt;div
                        id=&quot;fileList&quot;&gt;&lt;/div&gt;<br>&lt;script&gt;<br>function printFiles(e) { &nbsp;<br>
                        &nbsp; &nbsp;const files = e.target.files;<br> &nbsp; &nbsp;for (file of files) {<br> &nbsp;
                        &nbsp; &nbsp; &nbsp; <br> &nbsp; &nbsp; &nbsp; &nbsp;const reader = new FileReader(); &nbsp;<br>
                        &nbsp; &nbsp; &nbsp; &nbsp;reader.onload = (function(fileData) {<br> &nbsp; &nbsp; &nbsp; &nbsp;
                        &nbsp; &nbsp;return function(){<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;//
                        cre&#259;m un element div<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;const
                        fileItem = document.createElement(&quot;div&quot;);<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;
                        &nbsp; &nbsp; &nbsp;fileItem.className = &quot;fileItem&quot;;<br> <br> &nbsp; &nbsp; &nbsp;
                        &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;// cre&#259;m un titlu pentru fi&#537;ierul ad&#259;ugat<br>
                        &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;const fileHeader =
                        document.createElement(&quot;h3&quot;);<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;
                        &nbsp;fileHeader.textContent = fileData.name;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;
                        &nbsp; &nbsp;fileItem.appendChild(fileHeader);<br> <br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;
                        &nbsp; &nbsp; &nbsp;// cre&#259;m un element img pentru afi&#537;area fi&#537;ierului<br> &nbsp;
                        &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;const img =
                        document.createElement(&quot;img&quot;); &nbsp; <br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;
                        &nbsp; &nbsp;img.src = reader.result;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;
                        &nbsp;img.className = &quot;image&quot;; &nbsp; &nbsp; &nbsp; <br> &nbsp; &nbsp; &nbsp; &nbsp;
                        &nbsp; &nbsp; &nbsp; &nbsp;fileItem.appendChild(img); <br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;
                        &nbsp; &nbsp; &nbsp;document.getElementById(&quot;fileList&quot;).appendChild(fileItem);
                        &nbsp;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;};<br> &nbsp; &nbsp; &nbsp;
                        &nbsp;})(file);<br> &nbsp; &nbsp; &nbsp; &nbsp;reader.readAsDataURL(file); <br> &nbsp;
                        &nbsp;}<br>}<br>document.getElementById(&quot;files&quot;).addEventListener(&quot;change&quot;,
                        printFiles);<br>&lt;/script&gt;<br>&lt;/body&gt;<br>&lt;/html&gt;</span></p>
            </td>
        </tr>
    </table>
    <p class="c5"><span class="c2"></span></p>
    <p class="c7 c13"><span class="c8">Acum, pentru elementul de intrare este setat filtrul </span><span
            class="c4">accept=&quot;image/*&quot;</span><span class="c8">, iar toate imaginile &icirc;nc&#259;rcate sunt
            afi&#537;ate &icirc;n elementul </span><span class="c4">&lt;div id=&quot;fileList&quot;&gt;</span><span
            class="c8">. Pentru aceasta, &icirc;n handler-ul onload, cre&#259;m un element div, &icirc;n care
            ad&#259;ug&#259;m un titlu h3 cu numele fi&#537;ierului &#537;i un element img cu con&#539;inutul
            fi&#537;ierului. Con&#539;inutul fi&#537;ierului este citit folosind metoda</span><span
            class="c4">&nbsp;reader.readAsDataURL()</span><span class="c2">. </span></p>
    <p class="c5"><span class="c2"></span></p>
    <p class="c7 c13"><span class="c2">Exemplu de func&#539;ionare:</span></p>
    <p class="c5"><span class="c2"></span></p>
    <p class="c7 c13"><span
            style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 622.00px; height: 756.00px;"><img
                alt="" src="images/image1.png"
                style="width: 622.00px; height: 756.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);"
                title=""></span></p>
    <p class="c5"><span class="c2"></span></p>
    <p class="c7 c13"><span class="c11">Combinarea diferitelor tipuri de fi&#537;iere.</span></p>
    <p class="c5"><span class="c0 c16"></span></p>
    <p class="c7 c13"><span class="c2">De asemenea, putem combina deschiderea fi&#537;ierelor de diferite tipuri:</span>
    </p>
    <p class="c5"><span class="c2"></span></p><a id="t.b180a06f9df75b281ac0df3e7c3427261219fa2e"></a><a id="t.10"></a>
    <table class="c18">
        <tr class="c12">
            <td class="c17" colspan="1" rowspan="1">
                <p class="c7"><span class="c8 c10">&lt;!DOCTYPE html&gt;<br>&lt;html&gt;<br>&lt;head&gt;<br> &nbsp;
                        &nbsp;&lt;meta charset=&quot;utf-8&quot; /&gt;<br> &nbsp;
                        &nbsp;&lt;title&gt;FDC.COM&lt;/title&gt;<br> &nbsp; &nbsp;&lt;style&gt;<br> &nbsp;
                        &nbsp;div.item {width: 250px; margin:0 10px;}<br> &nbsp; &nbsp;.text{min-height: 80px; width:
                        250px; border:1px solid #ccc;padding:10px;}<br> &nbsp; &nbsp;.image {width: 250px;}<br> &nbsp;
                        &nbsp;&lt;/style&gt;<br>&lt;/head&gt;<br>&lt;body&gt;<br>&lt;input type=&quot;file&quot;
                        id=&quot;files&quot; multiple /&gt;<br>&lt;div
                        id=&quot;fileList&quot;&gt;&lt;/div&gt;<br>&lt;script&gt;<br>const fileList =
                        document.getElementById(&quot;fileList&quot;);<br>// cre&#259;m un element care reprezint&#259;
                        un fi&#537;ier separat pe pagin&#259;<br>function createFileItem(file){<br> &nbsp; &nbsp;const
                        fileItem = document.createElement(&quot;div&quot;);<br> &nbsp; &nbsp;fileItem.className =
                        &quot;fileItem&quot;;<br> <br> &nbsp; &nbsp;// cre&#259;m un titlu pentru fi&#537;ierul
                        ad&#259;ugat <br> &nbsp; &nbsp;const fileHeader = document.createElement(&quot;h3&quot;);<br>
                        &nbsp; &nbsp;fileHeader.textContent = file.name;<br> &nbsp;
                        &nbsp;fileItem.appendChild(fileHeader);<br> &nbsp; &nbsp;return fileItem;<br>}<br>function
                        readTextFile(file){<br> &nbsp; &nbsp;return function(e){<br> &nbsp; &nbsp; &nbsp; &nbsp;const
                        fileItem = createFileItem(file);<br> &nbsp; &nbsp; &nbsp; &nbsp;// cre&#259;m un element div
                        pentru afi&#537;area textului fi&#537;ierului<br> &nbsp; &nbsp; &nbsp; &nbsp;const div =
                        document.createElement(&quot;div&quot;); &nbsp; <br> &nbsp; &nbsp; &nbsp; &nbsp;//
                        &icirc;nlocuim sf&acirc;r&#537;iturile de linie cu text corespunz&#259;tor<br> &nbsp; &nbsp;
                        &nbsp; &nbsp;div.textContent = e.target.result.replace(&quot;\n&quot;, &quot;\n&quot;);<br>
                        &nbsp; &nbsp; &nbsp; &nbsp;div.className = &quot;text&quot;; &nbsp; &nbsp; &nbsp; <br> &nbsp;
                        &nbsp; &nbsp; &nbsp;fileItem.appendChild(div); <br> &nbsp; &nbsp; &nbsp;
                        &nbsp;fileList.appendChild(fileItem); &nbsp;<br> &nbsp; &nbsp;};<br>}<br>function
                        readImageFile(file){<br> &nbsp; &nbsp;return function(e){<br> &nbsp; &nbsp; &nbsp; &nbsp;const
                        fileItem = createFileItem(file);<br> &nbsp; &nbsp; &nbsp; &nbsp;// cre&#259;m un element img
                        pentru afi&#537;area fi&#537;ierului<br> &nbsp; &nbsp; &nbsp; &nbsp;const img =
                        document.createElement(&quot;img&quot;); &nbsp; <br> &nbsp; &nbsp; &nbsp; &nbsp;img.src =
                        e.target.result;<br> &nbsp; &nbsp; &nbsp; &nbsp;img.className = &quot;image&quot;; &nbsp; &nbsp;
                        &nbsp; <br> &nbsp; &nbsp; &nbsp; &nbsp;fileItem.appendChild(img); <br> &nbsp; &nbsp; &nbsp;
                        &nbsp;fileList.appendChild(fileItem); &nbsp;<br> &nbsp; &nbsp;};<br>}<br>function printFiles(e)
                        { &nbsp;<br> &nbsp; &nbsp;const files = e.target.files;<br> &nbsp; &nbsp;for (file of files)
                        {<br> &nbsp; &nbsp; &nbsp; &nbsp;// citim fi&#537;ierul<br> &nbsp; &nbsp; &nbsp; &nbsp;const
                        reader = new FileReader(); <br> &nbsp; &nbsp; &nbsp;
                        &nbsp;if(file.type.match(&quot;text.*&quot;)) { &nbsp; &nbsp; &nbsp;<br> &nbsp; &nbsp; &nbsp;
                        &nbsp; &nbsp; &nbsp;reader.onload = readTextFile(file);<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;
                        &nbsp;reader.readAsText(file); &nbsp; &nbsp;<br> &nbsp; &nbsp; &nbsp; &nbsp;} <br> &nbsp; &nbsp;
                        &nbsp; &nbsp;else if(file.type.match(&quot;image.*&quot;)) { &nbsp; &nbsp; &nbsp;<br> &nbsp;
                        &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;reader.onload = readImageFile(file); &nbsp; &nbsp; &nbsp;<br>
                        &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;reader.readAsDataURL(file); &nbsp; &nbsp;<br> &nbsp;
                        &nbsp; &nbsp; &nbsp;}<br> &nbsp;
                        &nbsp;}<br>}<br>document.getElementById(&quot;files&quot;).addEventListener(&quot;change&quot;,
                        printFiles);<br>&lt;/script&gt;<br>&lt;/body&gt;<br>&lt;/html&gt;</span></p>
            </td>
        </tr>
    </table>
    <p class="c5"><span class="c2"></span></p>
    <p class="c7 c13"><span class="c8">Aici, &icirc;n func&#539;ie de tipul fi&#537;ierului, cre&#259;m un element
            specific (</span><span class="c4">&lt;div&gt;</span><span class="c8">&nbsp;pentru afi&#537;area
            fi&#537;ierelor text &#537;i</span><span class="c4">&nbsp;&lt;img&gt;</span><span class="c2">&nbsp;pentru
            afi&#537;area imaginilor). De exemplu, s&#259; select&#259;m fi&#537;iere de diferite tipuri:</span></p>
    <p class="c5"><span class="c2"></span></p>
    <p class="c7 c13"><span
            style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 622.00px; height: 917.00px;"><img
                alt="" src="images/image3.png"
                style="width: 622.00px; height: 917.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);"
                title=""></span></p>
</body>

</html>