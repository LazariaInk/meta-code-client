<html>

<head>
    <meta content="text/html; charset=UTF-8" http-equiv="content-type">
    <link rel="stylesheet" type="text/css" href="/lessons/styles.css">
</head>

<body class="c24 doc-content">
    <h1 class="c2 c20">Module. </h1>
    <p class="c2 c9"><span class="c23 c11"></span></p>
    <p class="c2"><span class="c18">Introducere &icirc;n module.</span></p>
    <p class="c2 c9"><span class="c5"></span></p>
    <p class="c2"><span class="c5">Modulele permit organizarea func&#539;ionalit&#259;&#539;ilor &icirc;n blocuri
            separate, care apoi pot fi utilizate &icirc;n alte aplica&#539;ii.</span></p>
    <p class="c2 c9"><span class="c5"></span></p>
    <p class="c2"><span class="c5">Diferen&#539;a dintre module &#537;i scripturi obi&#537;nuite:</span></p>
    <p class="c2 c9"><span class="c5"></span></p>
    <ul class="c13 lst-kix_rtajld9ocbts-0 start">
        <li class="c2 c7 li-bullet-0"><span class="c5">Pentru &icirc;nc&#259;rcarea modulelor se aplic&#259; politica
                CORS. Asta &icirc;nseamn&#259; c&#259; nu putem pur &#537;i simplu s&#259; arunc&#259;m o pagin&#259;
                HTML &icirc;n browser care s&#259; conecteze un modul. Modulul este &icirc;nc&#259;rcat folosind
                protocolul http/https. Adic&#259;, pagina HTML care &icirc;ncarc&#259; modulul trebuie s&#259; fie
                amplasat&#259; pe un server web.</span></li>
    </ul>
    <p class="c1"><span class="c5"></span></p>
    <ul class="c13 lst-kix_rtajld9ocbts-0">
        <li class="c2 c7 li-bullet-0"><span class="c8">Modulele sunt executate &icirc;ntotdeauna &icirc;n modul
            </span><span class="c11">strict mode</span><span class="c5">.</span></li>
    </ul>
    <p class="c1"><span class="c5"></span></p>
    <ul class="c13 lst-kix_rtajld9ocbts-0">
        <li class="c2 c7 li-bullet-0"><span class="c5">Modulele sunt &icirc;nc&#259;rcate asincron, &icirc;n mod
                implicit.</span></li>
    </ul>
    <p class="c1"><span class="c5"></span></p>
    <ul class="c13 lst-kix_rtajld9ocbts-0">
        <li class="c2 c7 li-bullet-0"><span class="c5">Modulele sunt &icirc;nc&#259;rcate &#537;i executate doar o
                singur&#259; dat&#259;.</span></li>
    </ul>
    <p class="c1"><span class="c5"></span></p>
    <ul class="c13 lst-kix_rtajld9ocbts-0">
        <li class="c2 c7 li-bullet-0"><span class="c8">Modulele permit utilizarea expresiilor </span><span
                class="c11">await </span><span class="c5">la nivelul superior f&#259;r&#259; a defini &#537;i apela o
                func&#539;ie asincron&#259;.</span></li>
    </ul>
    <p class="c1"><span class="c5"></span></p>
    <ul class="c13 lst-kix_rtajld9ocbts-0">
        <li class="c2 c7 li-bullet-0"><span class="c5">Modulele pot importa func&#539;ionalit&#259;&#539;i din alte
                module &#537;i, la r&acirc;ndul lor, pot exporta func&#539;ionalitatea lor &icirc;n alte module.</span>
        </li>
    </ul>
    <p class="c1"><span class="c5"></span></p>
    <ul class="c13 lst-kix_rtajld9ocbts-0">
        <li class="c2 c7 li-bullet-0"><span class="c5">Modulele nu sunt executate &icirc;n contextul global, ci &icirc;n
                propriul lor domeniu de vizibilitate. Asta &icirc;nseamn&#259; c&#259; variabilele, constantele,
                func&#539;iile, clasele etc., definite &icirc;n interiorul unui modul, nu sunt accesibile din exterior,
                p&acirc;n&#259; c&acirc;nd nu sunt exportate explicit. &#536;i pentru ca un alt modul s&#259; le
                poat&#259; utiliza, trebuie s&#259; le importe.</span></li>
    </ul>
    <p class="c2 c9"><span class="c5"></span></p>
    <p class="c2"><span class="c8">Dac&#259; un fi&#537;ier con&#539;ine expresii </span><span class="c11">import
        </span><span class="c8">sau </span><span class="c11">export</span><span class="c5">, este considerat un modul.
            Astfel, pentru a transforma un simplu script &icirc;ntr-un modul, este suficient s&#259; ad&#259;uga&#539;i
            &icirc;n fi&#537;ier:</span></p>
    <p class="c2 c9"><span class="c5"></span></p><a id="t.9955687b3ed10812be3361629b0fc5e023790f7d"></a><a id="t.0"></a>
    <table class="c14">
        <tr class="c12">
            <td class="c16" colspan="1" rowspan="1">
                <p class="c17"><span class="c6">export</span><span class="c3">&nbsp;{};</span></p>
            </td>
        </tr>
    </table>
    <p class="c2 c9"><span class="c5"></span></p>
    <p class="c2"><span class="c18">Definirea unui modul. Export.</span></p>
    <p class="c2 c9"><span class="c11 c23"></span></p>
    <p class="c2"><span class="c8">Definim cel mai simplu modul. Pentru asta, cre&#259;m fi&#537;ierul </span><span
            class="c11">message.js</span><span class="c5">, &icirc;n care definim urm&#259;torul cod:</span></p>
    <p class="c2 c9"><span class="c5"></span></p><a id="t.d554c30042cb40fa0db8620c57e40872ce40fb4c"></a><a id="t.1"></a>
    <table class="c14">
        <tr class="c12">
            <td class="c16" colspan="1" rowspan="1">
                <p class="c17"><span class="c3">&nbsp; &nbsp;</span><span class="c6">export</span><span
                        class="c3">&nbsp;</span><span class="c6">function</span><span class="c3">&nbsp;</span><span
                        class="c8 c22">sayHello</span><span class="c3">() {<br> &nbsp;</span><span
                        class="c8 c22">console</span><span class="c3">.log(</span><span class="c4">&quot;Hello
                        FDC.COM&quot;</span><span class="c3">);<br>}</span></p>
            </td>
        </tr>
    </table>
    <p class="c2 c9"><span class="c5"></span></p>
    <p class="c2"><span class="c8">Aici este definit&#259; func&#539;ia obi&#537;nuit&#259; </span><span
            class="c8 c10">sayHello()</span><span class="c8">, care afi&#537;eaz&#259; un anumit mesaj &icirc;n
            consol&#259;. Dar este definit&#259; cu cuv&acirc;ntul cheie export, ceea ce &icirc;nseamn&#259; c&#259;
            acest fi&#537;ier reprezint&#259; un modul, iar func&#539;ia </span><span
            class="c8 c10">sayHello()</span><span class="c5">&nbsp;poate fi importat&#259; &icirc;n alte module.</span>
    </p>
    <p class="c2 c9"><span class="c5"></span></p>
    <p class="c2"><span class="c18">Conectarea modulului. Import.</span></p>
    <p class="c2 c9"><span class="c23 c11"></span></p>
    <p class="c2"><span class="c8">Acum vom conecta aceast&#259; func&#539;ie &icirc;ntr-un alt fi&#537;ier. Pentru
            asta, lu&#259;m fi&#537;ierul </span><span class="c11">main.js</span><span class="c5">:</span></p>
    <p class="c2 c9"><span class="c5"></span></p><a id="t.fecfcb1c71eebe002ddf4d990e8fa4ac70e71057"></a><a id="t.2"></a>
    <table class="c14">
        <tr class="c12">
            <td class="c16" colspan="1" rowspan="1">
                <p class="c17"><span class="c6">import</span><span class="c3">&nbsp;{sayHello} </span><span
                        class="c6">from</span><span class="c3">&nbsp;</span><span
                        class="c4">&quot;./message.js&quot;</span><span class="c3">;<br>sayHello();</span></p>
            </td>
        </tr>
    </table>
    <p class="c2 c9"><span class="c5"></span></p>
    <p class="c2"><span class="c8">Pentru conectarea func&#539;ionalit&#259;&#539;ii din alt modul se utilizeaz&#259;
            cuv&acirc;ntul cheie </span><span class="c11">import</span><span class="c8">, dup&#259; care urmeaz&#259;
            numele componentelor conectate. Toate componentele importate din modul sunt plasate &icirc;ntre
            acolade:</span><span class="c8 c10">&nbsp;import {sayHello}</span><span class="c5">&nbsp;- &icirc;n acest
            caz, este conectat&#259; func&#539;ia sayHello.</span></p>
    <p class="c2 c9"><span class="c5"></span></p>
    <p class="c2"><span class="c8">Apoi, dup&#259; operatorul </span><span class="c11">from </span><span class="c5">se
            specific&#259; modulul din care se face importul. &Icirc;n acest caz, specific&#259;m
            &quot;./message.js&quot;. Se presupune c&#259; ambele module - main.js &#537;i message.js vor fi situate
            &icirc;n acela&#537;i folder.</span></p>
    <p class="c2 c9"><span class="c5"></span></p>
    <p class="c2"><span class="c18">&Icirc;nc&#259;rcarea modulelor.</span></p>
    <p class="c2 c9"><span class="c5"></span></p>
    <p class="c2"><span class="c8">Pentru &icirc;nc&#259;rcarea modulelor, definim &icirc;n folderul cu fi&#537;ierele
            compilate o pagin&#259; web</span><span class="c11">&nbsp;index.html</span><span class="c5">:</span></p>
    <p class="c2 c9"><span class="c5"></span></p><a id="t.deafac06a5da8d75e0b109d4b0c6c7f5ac58aa1b"></a><a id="t.3"></a>
    <table class="c14">
        <tr class="c12">
            <td class="c16" colspan="1" rowspan="1">
                <p class="c17"><span class="c3">&lt;!DOCTYPE html&gt;<br></span><span class="c0">&lt;</span><span
                        class="c11 c15">html</span><span class="c0">&gt;</span><span class="c3"><br></span><span
                        class="c0">&lt;</span><span class="c11 c15">head</span><span class="c0">&gt;</span><span
                        class="c3"><br> &nbsp; &nbsp;</span><span class="c0">&lt;</span><span
                        class="c11 c15">meta</span><span class="c0">&nbsp;charset=</span><span
                        class="c4">&quot;utf-8&quot;</span><span class="c0">&nbsp;/&gt;</span><span class="c3"><br>
                        &nbsp; &nbsp;</span><span class="c0">&lt;</span><span class="c11 c15">title</span><span
                        class="c0">&gt;</span><span class="c3">FDC.COM</span><span class="c0">&lt;/</span><span
                        class="c11 c15">title</span><span class="c0">&gt;</span><span class="c3"><br></span><span
                        class="c0">&lt;/</span><span class="c11 c15">head</span><span class="c0">&gt;</span><span
                        class="c3"><br></span><span class="c0">&lt;</span><span class="c11 c15">body</span><span
                        class="c0">&gt;</span><span class="c3"><br></span><span class="c0">&lt;</span><span
                        class="c11 c15">script</span><span class="c0">&nbsp;type=</span><span
                        class="c4">&quot;module&quot;</span><span class="c0">&nbsp;src=</span><span
                        class="c4">&quot;main.js&quot;</span><span class="c0">&gt;&lt;/</span><span
                        class="c11 c15">script</span><span class="c0">&gt;</span><span class="c3"><br></span><span
                        class="c0">&lt;/</span><span class="c11 c15">body</span><span class="c0">&gt;</span><span
                        class="c3"><br></span><span class="c0">&lt;/</span><span class="c11 c15">html</span><span
                        class="c0">&gt;</span></p>
            </td>
        </tr>
    </table>
    <p class="c2 c9"><span class="c5"></span></p>
    <p class="c2"><span class="c8">Pentru &icirc;nc&#259;rcarea modulului principal al aplica&#539;iei - main.js se
            define&#537;te elementul </span><span class="c8 c10">&lt;script&gt;</span><span class="c8">, c&#259;ruia i
            se seteaz&#259; atributul</span><span class="c8 c10">&nbsp;type=&quot;module&quot;</span><span
            class="c5">.</span></p>
    <p class="c2 c9"><span class="c5"></span></p>
    <p class="c2"><span class="c5">&Icirc;nc&#259;rcarea modulelor se face prin AJAX, deci modulele compilate trebuie
            s&#259; fie amplasate pe un server web. Deci, nu putem pur &#537;i simplu s&#259; arunc&#259;m pagina
            &icirc;n browser &#537;i s&#259; &icirc;nc&#259;rc&#259;m modulele pe ea. O astfel de pagin&#259; web
            trebuie s&#259; fie amplasat&#259; pe un server web. Prin urmare, &icirc;n primul r&acirc;nd trebuie s&#259;
            decidem asupra serverului web. Serverul web poate fi oricare. &Icirc;n acest caz, vom folosi cea mai
            simpl&#259; op&#539;iune - Node.js. Dar, din nou, &icirc;n loc de Node.js, poate fi orice alt&#259;
            tehnologie de server - PHP, ASP.NET, Python etc., sau un anumit server web, cum ar fi Apache sau IIS.</span>
    </p>
    <p class="c2 c9"><span class="c5"></span></p>
    <p class="c2"><span class="c8">Deci, cre&#259;m &icirc;n folderul cu fi&#537;ierele modulelor un fi&#537;ier server.
            S&#259; &icirc;l numim </span><span class="c11">server.js</span><span class="c5">&nbsp;&#537;i s&#259;
            aib&#259; urm&#259;torul cod:</span></p>
    <p class="c2 c9"><span class="c5"></span></p><a id="t.3cdb2780d935cfd6b6faa17d404d7191d61e3355"></a><a id="t.4"></a>
    <table class="c14">
        <tr class="c12">
            <td class="c16" colspan="1" rowspan="1">
                <p class="c17"><span class="c6">const</span><span class="c3">&nbsp;http = </span><span
                        class="c8 c22">require</span><span class="c3">(</span><span
                        class="c4">&quot;http&quot;</span><span class="c3">);<br></span><span
                        class="c6">const</span><span class="c3">&nbsp;fs = </span><span
                        class="c8 c22">require</span><span class="c3">(</span><span
                        class="c4">&quot;fs&quot;</span><span class="c3">);<br> &nbsp;
                        <br>http.createServer(</span><span class="c6">function</span><span class="c3">(request,
                        response){<br> &nbsp; &nbsp; &nbsp; <br> &nbsp; &nbsp;</span><span class="c8 c19">//
                        ob&#539;inem calea dup&#259; slash</span><span class="c3"><br> &nbsp; &nbsp;</span><span
                        class="c6">let</span><span class="c3">&nbsp;filePath = request.url.substring(</span><span
                        class="c8 c21">1</span><span class="c3">);<br> &nbsp; &nbsp;</span><span
                        class="c6">if</span><span class="c3">(filePath == </span><span
                        class="c4">&quot;&quot;</span><span class="c3">) filePath = </span><span
                        class="c4">&quot;index.html&quot;</span><span class="c3">; <br> &nbsp;
                        &nbsp;fs.readFile(filePath, </span><span class="c6">function</span><span class="c3">(error,
                        data){<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br> &nbsp; &nbsp; &nbsp;
                        &nbsp;</span><span class="c6">if</span><span class="c3">(error){<br> &nbsp; &nbsp; &nbsp; &nbsp;
                        &nbsp; &nbsp;response.statusCode = </span><span class="c8 c21">404</span><span class="c3">;<br>
                        &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;response.end(</span><span class="c4">&quot;Resursa nu a
                        fost g&#259;sit&#259;!&quot;</span><span class="c3">);<br> &nbsp; &nbsp; &nbsp; &nbsp;} &nbsp;
                        <br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c6">else</span><span class="c3">{<br> &nbsp;
                        &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c6">if</span><span
                        class="c3">(filePath.endsWith(</span><span class="c4">&quot;.js&quot;</span><span class="c3">))
                        response.setHeader(</span><span class="c4">&quot;Content-Type&quot;</span><span class="c3">,
                    </span><span class="c4">&quot;text/javascript&quot;</span><span class="c3">);<br> &nbsp; &nbsp;
                        &nbsp; &nbsp; &nbsp; &nbsp;response.end(data);<br> &nbsp; &nbsp; &nbsp; &nbsp;}<br> &nbsp;
                        &nbsp;});<br>}).listen(</span><span class="c8 c21">3000</span><span class="c3">, </span><span
                        class="c6">function</span><span class="c3">(){<br> &nbsp; &nbsp;</span><span
                        class="c8 c22">console</span><span class="c3">.log(</span><span class="c4">&quot;Serverul a fost
                        pornit la 3000&quot;</span><span class="c3">);<br>});</span></p>
            </td>
        </tr>
    </table>
    <p class="c2 c9"><span class="c5"></span></p>
    <p class="c2"><span class="c8">Acesta este cel mai primitiv server, care ofer&#259; utilizatorului fi&#537;iere
            statice. Pentru crearea serverului se utilizeaz&#259; func&#539;ia</span><span
            class="c8 c10">&nbsp;http.createServer()</span><span class="c8">, iar pentru citirea &#537;i trimiterea
            fi&#537;ierelor - func&#539;ia</span><span class="c8 c10">&nbsp;fs.readFile()</span><span class="c5">.
            Dac&#259; numele fi&#537;ierului nu este specificat, atunci se trimite fi&#537;ierul index.html. Serverul va
            fi lansat la adresa http://localhost:3000/</span></p>
    <p class="c2 c9"><span class="c5"></span></p>
    <p class="c2"><span class="c8">Este de remarcat c&#259;, atunci c&acirc;nd trimitem module js, trebuie s&#259;
            set&#259;m tipul mime al con&#539;inutului trimis ca &quot;</span><span
            class="c8 c10">text/javascript</span><span class="c5">&quot;:</span></p>
    <p class="c2 c9"><span class="c5"></span></p><a id="t.64a72ed6043e9edf185f7fb901bed3f09e91af1a"></a><a id="t.5"></a>
    <table class="c14">
        <tr class="c12">
            <td class="c16" colspan="1" rowspan="1">
                <p class="c17"><span class="c6">if</span><span class="c3">(filePath.endsWith(</span><span
                        class="c4">&quot;.js&quot;</span><span class="c3">)) response.setHeader(</span><span
                        class="c4">&quot;Content-Type&quot;</span><span class="c3">, </span><span
                        class="c4">&quot;text/javascript&quot;</span><span class="c3">);</span></p>
            </td>
        </tr>
    </table>
    <p class="c2 c9"><span class="c5"></span></p>
    <p class="c2"><span class="c5">Structura proiectului final:</span></p>
    <p class="c2 c9"><span class="c5"></span></p>
    <p class="c2"><span
            style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 624.00px; height: 204.00px;"><img
                alt="" src="images/image3.png"
                style="width: 624.00px; height: 204.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);"
                title=""></span></p>
    <p class="c2 c9"><span class="c5"></span></p>
    <p class="c2"><span class="c5">Acum vom lansa serverul folosind comanda</span></p>
    <p class="c2 c9"><span class="c5"></span></p><a id="t.345208260810c584ceb64a3931bd385c5e67beff"></a><a id="t.6"></a>
    <table class="c14">
        <tr class="c12">
            <td class="c16" colspan="1" rowspan="1">
                <p class="c17"><span class="c3">node server.js</span></p>
            </td>
        </tr>
    </table>
    <p class="c2 c9"><span class="c5"></span></p>
    <p class="c2"><span
            style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 445.89px; height: 64.60px;"><img
                alt="" src="images/image2.png"
                style="width: 445.89px; height: 64.60px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);"
                title=""></span></p>
    <p class="c2 c9"><span class="c5"></span></p>
    <p class="c2"><span class="c5">Dup&#259; lansarea serverului, putem accesa &icirc;n browser adresa
            http://localhost:3000, ne va fi afi&#537;at&#259; pagina, iar &icirc;n consola browserului vom putea vedea
            rezultatul func&#539;ion&#259;rii modulului main.js:</span></p>
    <p class="c2 c9"><span class="c5"></span></p>
    <p class="c2"><span
            style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 619.00px; height: 387.00px;"><img
                alt="" src="images/image1.png"
                style="width: 619.00px; height: 387.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);"
                title=""></span></p>
</body>

</html>