<html>

<head>
    <meta content="text/html; charset=UTF-8" http-equiv="content-type">
    <style type="text/css">
        @import url(https://themes.googleusercontent.com/fonts/css?kit=iMc4-4exjgqA-toZgqqJBf35jAjY-31lSKWZb9Fa77M);

        ul.lst-kix_c2vl6ihc830e-0 {
            list-style-type: none
        }

        ul.lst-kix_c2vl6ihc830e-1 {
            list-style-type: none
        }

        .lst-kix_s2rxaxl6cfjn-3>li:before {
            content: "\0025cf   "
        }

        ul.lst-kix_c2vl6ihc830e-4 {
            list-style-type: none
        }

        ul.lst-kix_c2vl6ihc830e-5 {
            list-style-type: none
        }

        ul.lst-kix_c2vl6ihc830e-2 {
            list-style-type: none
        }

        ul.lst-kix_c2vl6ihc830e-3 {
            list-style-type: none
        }

        .lst-kix_s2rxaxl6cfjn-4>li:before {
            content: "\0025cb   "
        }

        ul.lst-kix_c2vl6ihc830e-8 {
            list-style-type: none
        }

        ul.lst-kix_c2vl6ihc830e-6 {
            list-style-type: none
        }

        ul.lst-kix_c2vl6ihc830e-7 {
            list-style-type: none
        }

        .lst-kix_s2rxaxl6cfjn-5>li:before {
            content: "\0025a0   "
        }

        .lst-kix_s2rxaxl6cfjn-7>li:before {
            content: "\0025cb   "
        }

        .lst-kix_s2rxaxl6cfjn-6>li:before {
            content: "\0025cf   "
        }

        .lst-kix_s2rxaxl6cfjn-8>li:before {
            content: "\0025a0   "
        }

        .lst-kix_fael2tdqr4l-0>li:before {
            content: "\0025cf   "
        }

        .lst-kix_fael2tdqr4l-1>li:before {
            content: "\0025cb   "
        }

        .lst-kix_fael2tdqr4l-4>li:before {
            content: "\0025cb   "
        }

        ul.lst-kix_s2rxaxl6cfjn-8 {
            list-style-type: none
        }

        .lst-kix_c2vl6ihc830e-7>li:before {
            content: "\0025cb   "
        }

        ul.lst-kix_s2rxaxl6cfjn-6 {
            list-style-type: none
        }

        .lst-kix_fael2tdqr4l-2>li:before {
            content: "\0025a0   "
        }

        .lst-kix_fael2tdqr4l-3>li:before {
            content: "\0025cf   "
        }

        ul.lst-kix_s2rxaxl6cfjn-7 {
            list-style-type: none
        }

        ul.lst-kix_s2rxaxl6cfjn-4 {
            list-style-type: none
        }

        .lst-kix_c2vl6ihc830e-8>li:before {
            content: "\0025a0   "
        }

        ul.lst-kix_s2rxaxl6cfjn-5 {
            list-style-type: none
        }

        .lst-kix_fael2tdqr4l-8>li:before {
            content: "\0025a0   "
        }

        ul.lst-kix_s2rxaxl6cfjn-2 {
            list-style-type: none
        }

        ul.lst-kix_s2rxaxl6cfjn-3 {
            list-style-type: none
        }

        .lst-kix_fael2tdqr4l-7>li:before {
            content: "\0025cb   "
        }

        ul.lst-kix_s2rxaxl6cfjn-0 {
            list-style-type: none
        }

        .lst-kix_c2vl6ihc830e-3>li:before {
            content: "\0025cf   "
        }

        .lst-kix_c2vl6ihc830e-5>li:before {
            content: "\0025a0   "
        }

        ul.lst-kix_s2rxaxl6cfjn-1 {
            list-style-type: none
        }

        .lst-kix_c2vl6ihc830e-2>li:before {
            content: "\0025a0   "
        }

        .lst-kix_c2vl6ihc830e-6>li:before {
            content: "\0025cf   "
        }

        .lst-kix_fael2tdqr4l-5>li:before {
            content: "\0025a0   "
        }

        .lst-kix_fael2tdqr4l-6>li:before {
            content: "\0025cf   "
        }

        .lst-kix_c2vl6ihc830e-4>li:before {
            content: "\0025cb   "
        }

        .lst-kix_s2rxaxl6cfjn-2>li:before {
            content: "\0025a0   "
        }

        .lst-kix_s2rxaxl6cfjn-1>li:before {
            content: "\0025cb   "
        }

        .lst-kix_s2rxaxl6cfjn-0>li:before {
            content: "\0025cf   "
        }

        .lst-kix_c2vl6ihc830e-1>li:before {
            content: "\0025cb   "
        }

        li.li-bullet-0:before {
            margin-left: -18pt;
            white-space: nowrap;
            display: inline-block;
            min-width: 18pt
        }

        .lst-kix_c2vl6ihc830e-0>li:before {
            content: "\0025cf   "
        }

        ul.lst-kix_fael2tdqr4l-8 {
            list-style-type: none
        }

        ul.lst-kix_fael2tdqr4l-4 {
            list-style-type: none
        }

        ul.lst-kix_fael2tdqr4l-5 {
            list-style-type: none
        }

        ul.lst-kix_fael2tdqr4l-6 {
            list-style-type: none
        }

        ul.lst-kix_fael2tdqr4l-7 {
            list-style-type: none
        }

        ul.lst-kix_fael2tdqr4l-0 {
            list-style-type: none
        }

        ul.lst-kix_fael2tdqr4l-1 {
            list-style-type: none
        }

        ul.lst-kix_fael2tdqr4l-2 {
            list-style-type: none
        }

        ul.lst-kix_fael2tdqr4l-3 {
            list-style-type: none
        }

        ol {
            margin: 0;
            padding: 0
        }

        table td,
        table th {
            padding: 0
        }

        .c14 {
            border-right-style: solid;
            padding: 5pt 5pt 5pt 5pt;
            border-bottom-color: #000000;
            border-top-width: 0pt;
            border-right-width: 0pt;
            border-left-color: #000000;
            vertical-align: top;
            border-right-color: #000000;
            border-left-width: 0pt;
            border-top-style: solid;
            background-color: #333333;
            border-left-style: solid;
            border-bottom-width: 0pt;
            width: 468pt;
            border-top-color: #000000;
            border-bottom-style: solid
        }

        .c1 {
            padding-top: 0pt;
            padding-bottom: 0pt;
            line-height: 1.5;
            orphans: 2;
            widows: 2;
            text-align: left
        }

        .c0 {
            background-color: #333333;
            font-size: 12pt;
            font-family: "Open Sans";
            color: #fcc28c;
            font-weight: 400
        }

        .c13 {
            border-spacing: 0;
            border-collapse: collapse;
            margin-right: auto
        }

        .c5 {
            color: #000000;
            text-decoration: none;
            vertical-align: baseline;
            font-style: normal
        }

        .c9 {
            padding-top: 0pt;
            padding-bottom: 0pt;
            line-height: 1.5;
            text-align: left
        }

        .c16 {
            font-weight: 700;
            font-size: 15pt;
            font-family: "Open Sans"
        }

        .c21 {
            background-color: #ffffff;
            max-width: 468pt;
            padding: 72pt 72pt 72pt 72pt
        }

        .c6 {
            font-size: 12pt;
            font-family: "Open Sans";
            font-weight: 700
        }

        .c22 {
            font-weight: 700;
            font-size: 27pt;
            font-family: "Open Sans"
        }

        .c18 {
            -webkit-text-decoration-skip: none;
            text-decoration: underline;
            text-decoration-skip-ink: none
        }

        .c20 {
            color: #000000;
            text-decoration: none;
            vertical-align: baseline
        }

        .c3 {
            font-size: 12pt;
            font-family: "Open Sans";
            font-weight: 400
        }

        .c17 {
            background-color: #333333;
            color: #d36363
        }

        .c12 {
            background-color: #333333;
            color: #a2fca2
        }

        .c8 {
            background-color: #333333;
            color: #ffffaa
        }

        .c7 {
            background-color: #333333;
            color: #ffffff
        }

        .c10 {
            padding: 0;
            margin: 0
        }

        .c4 {
            background-color: #333333;
            color: #888888
        }

        .c19 {
            margin-left: 36pt;
            padding-left: 0pt
        }

        .c2 {
            height: 11pt
        }

        .c11 {
            font-style: italic
        }

        .c15 {
            height: 0pt
        }

        .title {
            padding-top: 0pt;
            color: #000000;
            font-size: 26pt;
            padding-bottom: 3pt;
            font-family: "Arial";
            line-height: 1.15;
            page-break-after: avoid;
            orphans: 2;
            widows: 2;
            text-align: left
        }

        .subtitle {
            padding-top: 0pt;
            color: #666666;
            font-size: 15pt;
            padding-bottom: 16pt;
            font-family: "Arial";
            line-height: 1.15;
            page-break-after: avoid;
            orphans: 2;
            widows: 2;
            text-align: left
        }

        li {
            color: #000000;
            font-size: 11pt;
            font-family: "Arial"
        }

        p {
            margin: 0;
            color: #000000;
            font-size: 11pt;
            font-family: "Arial"
        }

        h1 {
            padding-top: 20pt;
            color: #000000;
            font-size: 20pt;
            padding-bottom: 6pt;
            font-family: "Arial";
            line-height: 1.15;
            page-break-after: avoid;
            orphans: 2;
            widows: 2;
            text-align: left
        }

        h2 {
            padding-top: 18pt;
            color: #000000;
            font-size: 16pt;
            padding-bottom: 6pt;
            font-family: "Arial";
            line-height: 1.15;
            page-break-after: avoid;
            orphans: 2;
            widows: 2;
            text-align: left
        }

        h3 {
            padding-top: 16pt;
            color: #434343;
            font-size: 14pt;
            padding-bottom: 4pt;
            font-family: "Arial";
            line-height: 1.15;
            page-break-after: avoid;
            orphans: 2;
            widows: 2;
            text-align: left
        }

        h4 {
            padding-top: 14pt;
            color: #666666;
            font-size: 12pt;
            padding-bottom: 4pt;
            font-family: "Arial";
            line-height: 1.15;
            page-break-after: avoid;
            orphans: 2;
            widows: 2;
            text-align: left
        }

        h5 {
            padding-top: 12pt;
            color: #666666;
            font-size: 11pt;
            padding-bottom: 4pt;
            font-family: "Arial";
            line-height: 1.15;
            page-break-after: avoid;
            orphans: 2;
            widows: 2;
            text-align: left
        }

        h6 {
            padding-top: 12pt;
            color: #666666;
            font-size: 11pt;
            padding-bottom: 4pt;
            font-family: "Arial";
            line-height: 1.15;
            page-break-after: avoid;
            font-style: italic;
            orphans: 2;
            widows: 2;
            text-align: left
        }
    </style>
</head>

<body class="c21 doc-content">
    <h1 class="c1 c5 c22">Iteratoare Asincrone. </h1>
    <p class="c1 c2"><span class="c5 c3"></span></p>
    <p class="c1"><span class="c3">Iteratoarele asincrone combin&#259; capacit&#259;&#539;ile iteratoarelor &#537;i ale
            operatorilor </span><span class="c6">async </span><span class="c3">&#537;i </span><span
            class="c6">await</span><span class="c5 c3">. Iteratoarele asincrone sunt destinate &icirc;n principal
            acces&#259;rii surselor de date care folosesc API-uri asincrone. Acestea pot fi, de exemplu, date care se
            &icirc;ncarc&#259; pe p&#259;r&#539;i, cum ar fi datele de pe re&#539;ea, din sistemul de fi&#537;iere sau
            din baza de date.</span></p>
    <p class="c1 c2"><span class="c5 c3"></span></p>
    <p class="c1"><span class="c3">Din articolul despre </span><span class="c3 c18">iteratoare</span><span class="c3">,
            trebuie s&#259; ne amintim c&#259; un iterator ofer&#259; metoda </span><span class="c6">next()</span><span
            class="c3">, care returneaz&#259; un obiect cu dou&#259; propriet&#259;&#539;i: {</span><span
            class="c6">&nbsp;value, done</span><span class="c3">&nbsp;}. Proprietatea value stocheaz&#259; o
            anumit&#259; valoare, pe care, de exemplu, o putem ob&#539;ine &icirc;ntr-un ciclu </span><span
            class="c3 c11">for..of</span><span class="c3">&nbsp;atunci c&acirc;nd iter&#259;m un obiect. Proprietatea
            done indic&#259; dac&#259; iterarea obiectelor este finalizat&#259;. Dac&#259; aceast&#259; proprietate este
        </span><span class="c3 c11">false</span><span class="c5 c3">, &icirc;nseamn&#259; c&#259; iteratorul
            &icirc;nc&#259; nu a finalizat iterarea obiectelor &#537;i sunt &icirc;nc&#259; obiecte disponibile.
            Dac&#259; proprietatea este true, atunci iterarea este finalizat&#259;, &#537;i &icirc;n set nu mai sunt
            obiecte disponibile pentru iterare.</span></p>
    <p class="c1 c2"><span class="c5 c3"></span></p>
    <p class="c1"><span class="c3">Un iterator asincron este similar cu un iterator sincron cu excep&#539;ia faptului
            c&#259; metoda sa </span><span class="c6">next() </span><span class="c3">returneaz&#259; un obiect
        </span><span class="c6">Promise</span><span class="c3">. Iar din acel promise, la r&acirc;ndul s&#259;u, este
            returnat un obiect </span><span class="c6">{ value, done }</span><span class="c5 c3">.</span></p>
    <p class="c1 c2"><span class="c5 c3"></span></p>
    <p class="c1"><span class="c5 c16">Ciclul for-await-of.</span></p>
    <p class="c1 c2"><span class="c5 c6"></span></p>
    <p class="c1"><span class="c3">Pentru ob&#539;inerea datelor cu ajutorul iteratoarelor asincrone se folose&#537;te
            ciclul </span><span class="c6">for-await-of</span><span class="c5 c3">:</span></p>
    <p class="c1 c2"><span class="c5 c3"></span></p><a id="t.b8e0d6838d13aca71043ad037551fc09ca3fa749"></a><a
        id="t.0"></a>
    <table class="c13">
        <tr class="c15">
            <td class="c14" colspan="1" rowspan="1">
                <p class="c9"><span class="c0">for</span><span class="c3 c7">&nbsp;</span><span
                        class="c0">await</span><span class="c3 c7">&nbsp;(variabila </span><span
                        class="c0">of</span><span class="c3 c7">&nbsp;iterabil) {<br> &nbsp;</span><span
                        class="c3 c4">// ac&#539;iuni </span><span class="c3 c7"><br>}</span></p>
            </td>
        </tr>
    </table>
    <p class="c1 c2"><span class="c5 c3"></span></p>
    <p class="c1"><span class="c3">&Icirc;n ciclul </span><span class="c6">for-await-of</span><span class="c3">,
            dup&#259; operatorul </span><span class="c6">of </span><span class="c5 c3">urmeaz&#259; un anumit set de
            date, care poate fi iterat element cu element. Acesta poate fi o surs&#259; de date asincron&#259;, dar
            poate fi &#537;i o surs&#259; de date sincron&#259;, cum ar fi array-uri sau, de exemplu, obiecte
            &icirc;ncorporate String, Map, Set etc.</span></p>
    <p class="c1 c2"><span class="c5 c3"></span></p>
    <p class="c1"><span class="c3">Trebuie s&#259; not&#259;m c&#259; aceast&#259; form&#259; de ciclu poate fi
            utilizat&#259; doar &icirc;n func&#539;ii definite cu operatorul </span><span class="c6">async</span><span
            class="c5 c3">.</span></p>
    <p class="c1 c2"><span class="c5 c3"></span></p>
    <p class="c1"><span class="c5 c3">S&#259; examin&#259;m cel mai simplu exemplu, unde sursa de date este un array
            obi&#537;nuit:</span></p>
    <p class="c1 c2"><span class="c5 c3"></span></p><a id="t.d6a1e6ba066062aafa6fccdbd47229d2da6fc5c9"></a><a
        id="t.1"></a>
    <table class="c13">
        <tr class="c15">
            <td class="c14" colspan="1" rowspan="1">
                <p class="c9"><span class="c0">const</span><span class="c3 c7">&nbsp;dataSource = [</span><span
                        class="c3 c12">&quot;Tom&quot;</span><span class="c3 c7">, </span><span
                        class="c3 c12">&quot;Sam&quot;</span><span class="c3 c7">, </span><span
                        class="c3 c12">&quot;Bob&quot;</span><span class="c3 c7">];<br></span><span
                        class="c0">async</span><span class="c3 c7">&nbsp;</span><span class="c0">function</span><span
                        class="c3 c7">&nbsp;</span><span class="c3 c8">readData</span><span class="c3 c7">(){<br> &nbsp;
                        &nbsp;</span><span class="c0">for</span><span class="c3 c7">&nbsp;</span><span
                        class="c0">await</span><span class="c3 c7">&nbsp;(</span><span class="c0">const</span><span
                        class="c3 c7">&nbsp;item </span><span class="c0">of</span><span class="c3 c7">&nbsp;dataSource)
                        {<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3 c8">console</span><span
                        class="c3 c7">.log(item);<br> &nbsp; &nbsp;}<br>}<br>readData();<br></span><span
                        class="c3 c4">// Tom</span><span class="c3 c7"><br></span><span class="c3 c4">// Sam</span><span
                        class="c3 c7"><br></span><span class="c3 c4">// Bob</span></p>
            </td>
        </tr>
    </table>
    <p class="c1 c2"><span class="c5 c3"></span></p>
    <p class="c1"><span class="c3">Aici, &icirc;n ciclu are loc iterarea array-ului dataSource. La executarea ciclului,
            pentru sursa de date (&icirc;n acest caz, pentru array) se creeaz&#259; implicit un iterator asincron cu
            ajutorul metodei </span><span class="c3 c11">[Symbol.asyncIterator]</span><span class="c5 c3">(). &#536;i la
            fiecare accesare a urm&#259;torului element &icirc;n aceast&#259; surs&#259; de date, din iterator se
            returneaz&#259; implicit un obiect Promise, din care ob&#539;inem elementul curent al array-ului.</span></p>
    <p class="c1 c2"><span class="c5 c3"></span></p>
    <p class="c1"><span class="c5 c16">Crearea unui Iterator Asincron.</span></p>
    <p class="c1 c2"><span class="c5 c6"></span></p>
    <p class="c1"><span class="c5 c3">&Icirc;n exemplul de mai sus, iteratorul asincron a fost creat implicit. Dar
            putem, de asemenea, s&#259;-l definim &icirc;n mod explicit. De exemplu, s&#259; definim un iterator
            asincron care returneaz&#259; elementele unui array:</span></p>
    <p class="c1 c2"><span class="c5 c3"></span></p><a id="t.829af11e869ccb26438974af9fe5c38118a4f935"></a><a
        id="t.2"></a>
    <table class="c13">
        <tr class="c15">
            <td class="c14" colspan="1" rowspan="1">
                <p class="c9"><span class="c0">const</span><span class="c3 c7">&nbsp;generatePerson = {<br>
                        &nbsp;[</span><span class="c3 c8">Symbol</span><span class="c3 c7">.asyncIterator]() {<br>
                        &nbsp; &nbsp;</span><span class="c0">return</span><span class="c3 c7">&nbsp;{<br> &nbsp; &nbsp;
                        &nbsp;index: </span><span class="c3 c17">0</span><span class="c3 c7">,<br> &nbsp; &nbsp;
                        &nbsp;people: [</span><span class="c3 c12">&quot;Tom&quot;</span><span class="c3 c7">,
                    </span><span class="c3 c12">&quot;Sam&quot;</span><span class="c3 c7">, </span><span
                        class="c3 c12">&quot;Bob&quot;</span><span class="c3 c7">],<br> &nbsp; &nbsp; &nbsp;next() {<br>
                        &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">if</span><span
                        class="c3 c7">&nbsp;(</span><span class="c0">this</span><span class="c3 c7">.index &lt;
                    </span><span class="c0">this</span><span class="c3 c7">.people.length) {<br> &nbsp; &nbsp; &nbsp;
                        &nbsp; &nbsp;</span><span class="c0">return</span><span class="c3 c7">&nbsp;</span><span
                        class="c3 c8">Promise</span><span class="c3 c7">.resolve({ value: </span><span
                        class="c0">this</span><span class="c3 c7">.people[</span><span class="c0">this</span><span
                        class="c3 c7">.index++], done: </span><span class="c0">false</span><span
                        class="c3 c7">&nbsp;});<br> &nbsp; &nbsp; &nbsp; &nbsp;}<br> <br> &nbsp; &nbsp; &nbsp;
                        &nbsp;</span><span class="c0">return</span><span class="c3 c7">&nbsp;</span><span
                        class="c3 c8">Promise</span><span class="c3 c7">.resolve({ done: </span><span
                        class="c0">true</span><span class="c3 c7">&nbsp;});<br> &nbsp; &nbsp; &nbsp;}<br> &nbsp;
                        &nbsp;};<br> &nbsp;}<br>};</span></p>
            </td>
        </tr>
    </table>
    <p class="c1 c2"><span class="c5 c3"></span></p>
    <p class="c1"><span class="c3">Aici este definit obiectul </span><span class="c6">generatePerson</span><span
            class="c3">, &icirc;n care este implementat doar o singur&#259; metod&#259; - </span><span
            class="c6">[Symbol.asyncIterator]()</span><span class="c5 c3">, care practic reprezint&#259; iteratorul
            asincron. Implementarea iteratorului asincron (la fel ca &#537;i &icirc;n cazul unui iterator sincron)
            permite s&#259; facem obiectul generatePerson iterabil.</span></p>
    <p class="c1 c2"><span class="c5 c3"></span></p>
    <p class="c1"><span class="c5 c3">Puncte principale ale iteratorului asincron:</span></p>
    <p class="c1 c2"><span class="c5 c3"></span></p>
    <ul class="c10 lst-kix_fael2tdqr4l-0 start">
        <li class="c1 c19 li-bullet-0"><span class="c3">Iteratorul asincron este implementat prin metoda</span><span
                class="c6">&nbsp;[Symbol.asyncIterator]()</span><span class="c5 c3">, care returneaz&#259; un
                obiect.</span></li>
    </ul>
    <p class="c1 c2"><span class="c5 c3"></span></p>
    <ul class="c10 lst-kix_s2rxaxl6cfjn-0 start">
        <li class="c1 c19 li-bullet-0"><span class="c3">Obiectul returnat de iterator are metoda </span><span
                class="c6">next()</span><span class="c3">, care returneaz&#259; un obiect </span><span
                class="c6">Promise</span><span class="c5 c3">.</span></li>
    </ul>
    <p class="c1 c2"><span class="c5 c3"></span></p>
    <ul class="c10 lst-kix_c2vl6ihc830e-0 start">
        <li class="c1 c19 li-bullet-0"><span class="c3">Obiectul </span><span class="c6">Promise</span><span
                class="c3">, la r&acirc;ndul s&#259;u, returneaz&#259; un obiect cu dou&#259;
                propriet&#259;&#539;i</span><span class="c6">&nbsp;{ value, done }</span><span class="c3">. Proprietatea
            </span><span class="c3 c11">value </span><span class="c3">stocheaz&#259; o anumit&#259; valoare.
                Proprietatea </span><span class="c3 c11">done </span><span class="c3">indic&#259; dac&#259; iterarea
                este finalizat&#259; &#537;i, corespunz&#259;tor, dac&#259; &icirc;n set mai sunt obiecte disponibile
                pentru iterare. Dac&#259; proprietatea </span><span class="c3 c11">done </span><span class="c3">este
            </span><span class="c3 c11">true </span><span class="c3">(iterarea este finalizat&#259; &#537;i nu mai sunt
                obiecte disponibile), atunci nu este necesar s&#259; specific&#259;m proprietatea </span><span
                class="c3 c11 c20">value</span></li>
    </ul>
    <p class="c1 c2"><span class="c5 c3"></span></p>
    <p class="c1"><span class="c3">&Icirc;n acest caz, iteratorul realizeaz&#259; o sarcin&#259; simpl&#259; -
            returneaz&#259; urm&#259;torul utilizator. Pentru stocarea utilizatorilor &icirc;n obiectul iteratorului
            este definit array-ul </span><span class="c3 c11">people</span><span class="c3">, iar pentru stocarea
            indexului elementului curent al array-ului este definit&#259; variabila </span><span
            class="c3 c11">index</span><span class="c5 c3">.</span></p>
    <p class="c1 c2"><span class="c5 c3"></span></p><a id="t.8d4cc5893ee991ae16da4262f457a27690e5caa6"></a><a
        id="t.3"></a>
    <table class="c13">
        <tr class="c15">
            <td class="c14" colspan="1" rowspan="1">
                <p class="c9"><span class="c3 c7">index: </span><span class="c3 c17">0</span><span
                        class="c3 c7">,<br>people: [</span><span class="c3 c12">&quot;Tom&quot;</span><span
                        class="c3 c7">, </span><span class="c3 c12">&quot;Sam&quot;</span><span class="c3 c7">,
                    </span><span class="c3 c12">&quot;Bob&quot;</span><span class="c3 c7">],</span></p>
            </td>
        </tr>
    </table>
    <p class="c1 c2"><span class="c3 c5"></span></p>
    <p class="c1"><span class="c3">&Icirc;n metoda </span><span class="c6">next()</span><span
            class="c5 c3">&nbsp;return&#259;m un obiect Promise. Dac&#259; indexul curent este mai mic dec&acirc;t
            lungimea array-ului (adic&#259; &icirc;n array mai sunt elemente disponibile pentru iterare), atunci
            return&#259;m un Promise &icirc;n care return&#259;m elementul array-ului la indexul curent:</span></p>
    <p class="c1 c2"><span class="c5 c3"></span></p><a id="t.66921db6c6eefa8327704adb487373fb1d00fc28"></a><a
        id="t.4"></a>
    <table class="c13">
        <tr class="c15">
            <td class="c14" colspan="1" rowspan="1">
                <p class="c9"><span class="c0">return</span><span class="c3 c7">&nbsp;</span><span
                        class="c3 c8">Promise</span><span class="c3 c7">.resolve({ value: </span><span
                        class="c0">this</span><span class="c3 c7">.people[</span><span class="c0">this</span><span
                        class="c3 c7">.index++], done: </span><span class="c0">false</span><span
                        class="c3 c7">&nbsp;});</span></p>
            </td>
        </tr>
    </table>
    <p class="c1 c2"><span class="c5 c3"></span></p>
    <p class="c1"><span class="c3">Dac&#259; toate elementele array-ului au fost deja ob&#539;inute, atunci
            return&#259;m un Promise cu obiectul </span><span class="c3 c11">{ done: true }</span><span
            class="c5 c3">:</span></p>
    <p class="c1 c2"><span class="c5 c3"></span></p><a id="t.398bc34588242c1f505cd03a38891d498037cd78"></a><a
        id="t.5"></a>
    <table class="c13">
        <tr class="c15">
            <td class="c14" colspan="1" rowspan="1">
                <p class="c9"><span class="c0">return</span><span class="c3 c7">&nbsp;</span><span
                        class="c3 c8">Promise</span><span class="c3 c7">.resolve({ done: </span><span
                        class="c0">true</span><span class="c3 c7">&nbsp;});</span></p>
            </td>
        </tr>
    </table>
    <p class="c1 c2"><span class="c5 c3"></span></p>
    <p class="c1"><span class="c3">Unde valoarea </span><span class="c3 c11">done: true</span><span
            class="c5 c3">&nbsp;va indica codului extern c&#259; toate valorile iteratorului au fost deja
            ob&#539;inute.</span></p>
    <p class="c1 c2"><span class="c5 c3"></span></p>
    <p class="c1"><span class="c5 c3">Acum s&#259; vedem cum putem ob&#539;ine date din iterator:</span></p>
    <p class="c1 c2"><span class="c5 c3"></span></p>
    <p class="c1"><span class="c5 c3">La fel ca &#537;i cu un iterator obi&#537;nuit, ne putem adresa direct la
            iteratorul asincron &icirc;n sine:</span></p>
    <p class="c1 c2"><span class="c5 c3"></span></p><a id="t.402998855faf2d80ef6c315d560b76b23cca6884"></a><a
        id="t.6"></a>
    <table class="c13">
        <tr class="c15">
            <td class="c14" colspan="1" rowspan="1">
                <p class="c9"><span class="c3 c7">generatePerson[</span><span class="c3 c8">Symbol</span><span
                        class="c3 c7">.asyncIterator](); </span><span class="c3 c4">// ob&#539;inem iteratorul
                        asincron</span></p>
            </td>
        </tr>
    </table>
    <p class="c1 c2"><span class="c5 c3"></span></p>
    <p class="c1"><span class="c3">&#536;i s&#259; apel&#259;m &icirc;n mod explicit metoda sa </span><span
            class="c6">next()</span><span class="c5 c3">:</span></p>
    <p class="c1 c2"><span class="c5 c3"></span></p><a id="t.fe7b25bc637485330b463f8c095f88c6d67cd11e"></a><a
        id="t.7"></a>
    <table class="c13">
        <tr class="c15">
            <td class="c14" colspan="1" rowspan="1">
                <p class="c9"><span class="c3 c7">generatePerson[</span><span class="c3 c8">Symbol</span><span
                        class="c3 c7">.asyncIterator]().next(); </span><span class="c3 c4">// Promise</span></p>
            </td>
        </tr>
    </table>
    <p class="c1 c2"><span class="c5 c3"></span></p>
    <p class="c1"><span class="c3">Aceast&#259; metod&#259; returneaz&#259; un Promise, al c&#259;rui metod&#259;
        </span><span class="c6">then()</span><span class="c5 c3">&nbsp;poate fi apelat&#259; pentru a procesa valoarea
            sa:</span></p>
    <p class="c1 c2"><span class="c5 c3"></span></p><a id="t.e6f6138f63fc6a4dc1305c65a2b90e281298d7a8"></a><a
        id="t.8"></a>
    <table class="c13">
        <tr class="c15">
            <td class="c14" colspan="1" rowspan="1">
                <p class="c9"><span class="c3 c7">generatePerson[</span><span class="c3 c8">Symbol</span><span
                        class="c3 c7">.asyncIterator]()<br> &nbsp; &nbsp;.next()<br> &nbsp;
                        &nbsp;.then((data)=&gt;</span><span class="c3 c8">console</span><span class="c3 c7">.log(data));
                        &nbsp; &nbsp;</span><span class="c3 c4">// {value: &quot;Tom&quot;, done: false} &nbsp;</span>
                </p>
            </td>
        </tr>
    </table>
    <p class="c1 c2"><span class="c5 c3"></span></p>
    <p class="c1"><span class="c3">Obiectul ob&#539;inut din promise reprezint&#259; un obiect</span><span
            class="c3 c11">&nbsp;{value, done}</span><span class="c5 c3">, iar prin proprietatea value se poate
            ob&#539;ine valoarea efectiv&#259;:</span></p>
    <p class="c1 c2"><span class="c5 c3"></span></p><a id="t.055860b25d41a489fc3e862f86e7265a17d9d151"></a><a
        id="t.9"></a>
    <table class="c13">
        <tr class="c15">
            <td class="c14" colspan="1" rowspan="1">
                <p class="c9"><span class="c3 c7">generatePerson[</span><span class="c3 c8">Symbol</span><span
                        class="c3 c7">.asyncIterator]()<br> &nbsp; &nbsp;.next()<br> &nbsp;
                        &nbsp;.then((data)=&gt;</span><span class="c3 c8">console</span><span
                        class="c3 c7">.log(data.value)); &nbsp;</span><span class="c3 c4">// Tom</span></p>
            </td>
        </tr>
    </table>
    <p class="c1 c2"><span class="c5 c3"></span></p>
    <p class="c1"><span class="c3">Deoarece metoda</span><span class="c3 c11">&nbsp;next() </span><span
            class="c3">returneaz&#259; un Promise, putem folosi operatorul </span><span class="c3 c11">await
        </span><span class="c5 c3">pentru a ob&#539;ine valorile:</span></p>
    <p class="c1 c2"><span class="c5 c3"></span></p><a id="t.6dc642d4ed7def8011e878510c171b7db2036b6a"></a><a
        id="t.10"></a>
    <table class="c13">
        <tr class="c15">
            <td class="c14" colspan="1" rowspan="1">
                <p class="c9"><span class="c0">async</span><span class="c3 c7">&nbsp;</span><span
                        class="c0">function</span><span class="c3 c7">&nbsp;</span><span
                        class="c3 c8">printPeople</span><span class="c3 c7">(){<br> &nbsp; &nbsp;</span><span
                        class="c0">const</span><span class="c3 c7">&nbsp;peopleIterator = generatePerson[</span><span
                        class="c3 c8">Symbol</span><span class="c3 c7">.asyncIterator]();<br> &nbsp; &nbsp; <br> &nbsp;
                        &nbsp;</span><span class="c0">while</span><span class="c3 c7">(!(personData = </span><span
                        class="c0">await</span><span class="c3 c7">&nbsp;peopleIterator.next()).done){<br> &nbsp; &nbsp;
                        &nbsp; &nbsp;</span><span class="c3 c8">console</span><span
                        class="c3 c7">.log(personData.value);<br> &nbsp; &nbsp;}<br>}<br>printPeople();</span></p>
            </td>
        </tr>
    </table>
    <p class="c1 c2"><span class="c5 c3"></span></p>
    <p class="c1"><span class="c3">Aici, &icirc;ntr-o func&#539;ie asincron&#259;, &icirc;ntr-un ciclu while
            ob&#539;inem &icirc;n mod secven&#539;ial, folosind operatorul </span><span class="c3 c11">await</span><span
            class="c5 c3">, obiecte Promise de la iterator, din care extragem date, p&acirc;n&#259; c&acirc;nd ajungem
            la sf&acirc;r&#537;itul datelor iteratorului.</span></p>
    <p class="c1 c2"><span class="c5 c3"></span></p>
    <p class="c1"><span class="c3">Totu&#537;i, pentru a itera un obiect cu iterator asincron este mult mai simplu
            s&#259; folosim ciclul </span><span class="c6">for-await-of</span><span class="c5 c3">&nbsp;discutat mai
            sus:</span></p>
    <p class="c1 c2"><span class="c5 c3"></span></p><a id="t.e999c0a253e06eb25e792d115496e2527490e336"></a><a
        id="t.11"></a>
    <table class="c13">
        <tr class="c15">
            <td class="c14" colspan="1" rowspan="1">
                <p class="c9"><span class="c0">const</span><span class="c3 c7">&nbsp;generatePerson = {<br>
                        &nbsp;[</span><span class="c3 c8">Symbol</span><span class="c3 c7">.asyncIterator]() {<br>
                        &nbsp; &nbsp;</span><span class="c0">return</span><span class="c3 c7">&nbsp;{<br> &nbsp; &nbsp;
                        &nbsp;index: </span><span class="c3 c17">0</span><span class="c3 c7">,<br> &nbsp; &nbsp;
                        &nbsp;people: [</span><span class="c3 c12">&quot;Tom&quot;</span><span class="c3 c7">,
                    </span><span class="c3 c12">&quot;Sam&quot;</span><span class="c3 c7">, </span><span
                        class="c3 c12">&quot;Bob&quot;</span><span class="c3 c7">],<br> &nbsp; &nbsp; &nbsp;next() {<br>
                        &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">if</span><span
                        class="c3 c7">&nbsp;(</span><span class="c0">this</span><span class="c3 c7">.index &lt;
                    </span><span class="c0">this</span><span class="c3 c7">.people.length) {<br> &nbsp; &nbsp; &nbsp;
                        &nbsp; &nbsp;</span><span class="c0">return</span><span class="c3 c7">&nbsp;</span><span
                        class="c3 c8">Promise</span><span class="c3 c7">.resolve({ value: </span><span
                        class="c0">this</span><span class="c3 c7">.people[</span><span class="c0">this</span><span
                        class="c3 c7">.index++], done: </span><span class="c0">false</span><span
                        class="c3 c7">&nbsp;});<br> &nbsp; &nbsp; &nbsp; &nbsp;}<br> &nbsp; &nbsp; &nbsp;
                        &nbsp;</span><span class="c0">return</span><span class="c3 c7">&nbsp;</span><span
                        class="c3 c8">Promise</span><span class="c3 c7">.resolve({ done: </span><span
                        class="c0">true</span><span class="c3 c7">&nbsp;});<br> &nbsp; &nbsp; &nbsp;}<br> &nbsp;
                        &nbsp;};<br> &nbsp;}<br>};<br></span><span class="c0">async</span><span
                        class="c3 c7">&nbsp;</span><span class="c0">function</span><span
                        class="c3 c7">&nbsp;</span><span class="c3 c8">printPeople</span><span class="c3 c7">(){<br>
                        &nbsp; &nbsp;</span><span class="c0">for</span><span class="c3 c7">&nbsp;</span><span
                        class="c0">await</span><span class="c3 c7">&nbsp;(</span><span class="c0">const</span><span
                        class="c3 c7">&nbsp;person </span><span class="c0">of</span><span
                        class="c3 c7">&nbsp;generatePerson) {<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span
                        class="c3 c8">console</span><span class="c3 c7">.log(person);<br> &nbsp;
                        }<br>}<br>printPeople();</span></p>
            </td>
        </tr>
    </table>
    <p class="c1 c2"><span class="c5 c3"></span></p>
    <p class="c1"><span class="c3">Deoarece obiectul </span><span class="c6">generatePerson </span><span
            class="c3">implementeaz&#259; metoda</span><span class="c6">&nbsp;[Symbol.asyncIterator]()</span><span
            class="c3">, &icirc;l putem itera folosind ciclul </span><span class="c6">for-await-of</span><span
            class="c3">. Astfel, la fiecare accesare &icirc;n ciclu, metoda</span><span
            class="c3 c11">&nbsp;next()</span><span class="c5 c3">&nbsp;va returna un promise cu urm&#259;torul element
            din array-ul people. &#536;i, &icirc;n final, vom ob&#539;ine urm&#259;torul output &icirc;n
            consol&#259;:</span></p>
    <p class="c1 c2"><span class="c5 c3"></span></p><a id="t.a954efb5bfdd31dcd109d44118f252adb191c229"></a><a
        id="t.12"></a>
    <table class="c13">
        <tr class="c15">
            <td class="c14" colspan="1" rowspan="1">
                <p class="c9"><span class="c3 c7">Tom<br>Sam<br>Bob</span></p>
            </td>
        </tr>
    </table>
    <p class="c1 c2"><span class="c5 c3"></span></p>
    <p class="c1"><span class="c3">Trebuie s&#259; not&#259;m c&#259; NU putem folosi un ciclu</span><span
            class="c6">&nbsp;for-of</span><span class="c5 c3">&nbsp;obi&#537;nuit pentru a itera un obiect cu iterator
            asincron.</span></p>
    <p class="c1 c2"><span class="c5 c3"></span></p>
    <p class="c1"><span class="c5 c3">Un alt exemplu simplu - ob&#539;inerea numerelor:</span></p>
    <p class="c1 c2"><span class="c5 c3"></span></p><a id="t.117e9171518e6a486227676f9e9e2bb608af1a00"></a><a
        id="t.13"></a>
    <table class="c13">
        <tr class="c15">
            <td class="c14" colspan="1" rowspan="1">
                <p class="c9"><span class="c0">const</span><span class="c3 c7">&nbsp;generateNumber = {<br>
                        &nbsp;[</span><span class="c3 c8">Symbol</span><span class="c3 c7">.asyncIterator]() {<br>
                        &nbsp; &nbsp;</span><span class="c0">return</span><span class="c3 c7">&nbsp;{<br> &nbsp; &nbsp;
                        &nbsp;current: </span><span class="c3 c17">0</span><span class="c3 c7">,<br> &nbsp; &nbsp;
                        &nbsp;end: </span><span class="c3 c17">10</span><span class="c3 c7">,<br> &nbsp; &nbsp;
                        &nbsp;next() {<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">if</span><span
                        class="c3 c7">&nbsp;(</span><span class="c0">this</span><span class="c3 c7">.current &lt;=
                    </span><span class="c0">this</span><span class="c3 c7">.end) {<br> &nbsp; &nbsp; &nbsp; &nbsp;
                        &nbsp;</span><span class="c0">return</span><span class="c3 c7">&nbsp;</span><span
                        class="c3 c8">Promise</span><span class="c3 c7">.resolve({ value: </span><span
                        class="c0">this</span><span class="c3 c7">.current++, done: </span><span
                        class="c0">false</span><span class="c3 c7">&nbsp;});<br> &nbsp; &nbsp; &nbsp; &nbsp;}<br> &nbsp;
                        &nbsp; &nbsp; &nbsp;</span><span class="c0">return</span><span class="c3 c7">&nbsp;</span><span
                        class="c3 c8">Promise</span><span class="c3 c7">.resolve({ done: </span><span
                        class="c0">true</span><span class="c3 c7">&nbsp;});<br> &nbsp; &nbsp; &nbsp;}<br> &nbsp;
                        &nbsp;};<br> &nbsp;}<br>};<br></span><span class="c0">async</span><span
                        class="c3 c7">&nbsp;</span><span class="c0">function</span><span
                        class="c3 c7">&nbsp;</span><span class="c3 c8">printNumbers</span><span class="c3 c7">(){<br>
                        &nbsp; &nbsp;</span><span class="c0">for</span><span class="c3 c7">&nbsp;</span><span
                        class="c0">await</span><span class="c3 c7">&nbsp;(</span><span class="c0">const</span><span
                        class="c3 c7">&nbsp;n </span><span class="c0">of</span><span class="c3 c7">&nbsp;generateNumber)
                        {<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3 c8">console</span><span
                        class="c3 c7">.log(n);<br> &nbsp; }<br>}<br>printNumbers();</span></p>
            </td>
        </tr>
    </table>
    <p class="c1 c2"><span class="c5 c3"></span></p>
    <p class="c1"><span class="c3">Aici, iteratorul asincron al obiectului </span><span class="c3 c11">generateNumber
        </span><span class="c5 c3">returneaz&#259; numerele de la 0 la 10.</span></p>
    <p class="c1 c2"><span class="c5 c3"></span></p>
</body>

</html>