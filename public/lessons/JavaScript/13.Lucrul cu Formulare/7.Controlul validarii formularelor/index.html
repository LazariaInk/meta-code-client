<html>

<head>
    <meta content="text/html; charset=UTF-8" http-equiv="content-type">
    <link rel="stylesheet" type="text/css" href="/lessons/styles.css">
</head>

<body class="c23 doc-content">
    <h1 class="c10 c14 c21">Controlul validÄƒrii formularelor. </h1>
    <p class="c0"><span class="c13"></span></p>
    <p class="c10 c14"><span class="c12">Metode de validare.</span></p>
    <p class="c0"><span class="c13"></span></p>
    <p class="c10 c14"><span class="c15">&Icirc;n tema anterioar&#259; am v&#259;zut cum se poate ob&#539;ine starea
            folosind propriet&#259;&#539;ile </span><span class="c16">Constraint Validation API</span><span
            class="c15">. Dar, &icirc;n plus fa&#539;&#259; de propriet&#259;&#539;i,</span><span
            class="c16">&nbsp;Constraint Validation API</span><span class="c6">&nbsp;ofer&#259; o serie de metode care
            permit controlul valid&#259;rii:</span></p>
    <p class="c0"><span class="c6"></span></p>
    <ul class="c19 lst-kix_12okoc81ms8c-0 start">
        <li class="c10 c17 c14 li-bullet-0"><span class="c16">checkValidity()</span><span class="c15">: verific&#259;
                dac&#259; elementul formularului sau &icirc;ntregul formular trece validarea. Aceast&#259; metod&#259;
                poate fi apelat&#259; at&acirc;t pentru formular &icirc;n ansamblu, c&acirc;t &#537;i pentru elementele
                sale individuale. Un element al formularului este valid dac&#259; respect&#259; toate atributele de
                validare. Un formular este valid dac&#259; toate elementele sale trec validarea. Dac&#259; formularul
                sau elementele sale trec validarea, atunci se returneaz&#259; true, altfel se returneaz&#259;
            </span><span class="c9">false</span><span class="c6">.</span></li>
    </ul>
    <p class="c0 c20"><span class="c6"></span></p>
    <ul class="c19 lst-kix_12okoc81ms8c-0">
        <li class="c10 c17 c14 li-bullet-0"><span class="c16">reportValidity()</span><span class="c15">: de asemenea,
                verific&#259; dac&#259; elementul formularului sau &icirc;ntregul formular trece validarea. Cu toate
                acestea, spre deosebire de </span><span class="c9">checkValidity()</span><span class="c6">, aceast&#259;
                metod&#259; afi&#537;eaz&#259; &#537;i erorile de validare. Aceast&#259; metod&#259; poate fi, de
                asemenea, apelat&#259; at&acirc;t pentru formular &icirc;n ansamblu, c&acirc;t &#537;i pentru elementele
                sale individuale.</span></li>
    </ul>
    <p class="c0 c20"><span class="c6"></span></p>
    <ul class="c19 lst-kix_12okoc81ms8c-0">
        <li class="c10 c14 c17 li-bullet-0"><span class="c16">setCustomValidity()</span><span class="c6">: aceast&#259;
                metod&#259; permite configurarea mesajelor de validare.</span></li>
    </ul>
    <p class="c0"><span class="c6"></span></p>
    <p class="c10 c14"><span class="c15">De exemplu, verificarea validit&#259;&#539;ii formularului &#537;i a
            elementelor sale folosind</span><span class="c9">&nbsp;checkValidity()</span><span class="c6">:</span></p>
    <p class="c0"><span class="c6"></span></p><a id="t.2371c399a61a1ff52311c07b5f42c9735425f134"></a><a id="t.0"></a>
    <table class="c2">
        <tr class="c1">
            <td class="c18" colspan="1" rowspan="1">
                <p class="c10"><span class="c8">&lt;form id=</span><span class="c4">&quot;registerForm&quot;</span><span
                        class="c8">&nbsp;name=</span><span class="c4">&quot;registerForm&quot;</span><span
                        class="c8">&nbsp;method=</span><span class="c4">&quot;post&quot;</span><span
                        class="c8">&nbsp;action=</span><span class="c4">&quot;register&quot;</span><span
                        class="c8">&gt;<br>&lt;p&gt;<br> &nbsp; &nbsp;&lt;label
                        for=&quot;username&quot;&gt;Username:&lt;/label&gt;&lt;br&gt;<br> &nbsp; &nbsp;&lt;input
                        id=&quot;username&quot; name=&quot;username&quot; maxlength=&quot;20&quot;
                        minlength=&quot;3&quot; required&gt;<br>&lt;/p&gt;<br>&lt;p&gt;<br> &nbsp; &nbsp;&lt;label
                        for=&quot;age&quot;&gt;Age:&lt;/label&gt;&lt;br&gt;<br> &nbsp; &nbsp;&lt;input
                        type=&quot;number&quot; id=&quot;age&quot; name=&quot;age&quot; min=&quot;1&quot;
                        max=&quot;110&quot; required&gt;<br>&lt;/p&gt;<br>&lt;button type=&quot;submit&quot;
                        id=&quot;submit&quot;
                        name=&quot;submit&quot;&gt;Register&lt;/button&gt;<br>&lt;/form&gt;<br>&lt;script&gt;<br>const
                        registerForm = document.registerForm;<br>const submit =
                        registerForm.submit;<br>submit.addEventListener(&quot;click&quot;, validate);<br><br>function
                        validate(){<br> &nbsp; &nbsp;if(!registerForm.username.checkValidity()){<br> &nbsp; &nbsp;
                        &nbsp; &nbsp;console.log(&quot;Username is not valid&quot;);<br> &nbsp; &nbsp;}<br> &nbsp;
                        &nbsp;if(!registerForm.age.checkValidity()){<br> &nbsp; &nbsp; &nbsp;
                        &nbsp;console.log(&quot;Age is not valid&quot;);<br> &nbsp; &nbsp;}<br> &nbsp;
                        &nbsp;if(!registerForm.checkValidity()){<br> &nbsp; &nbsp; &nbsp; &nbsp;console.log(&quot;Form
                        data is not valid&quot;);<br> &nbsp; &nbsp;}<br>}<br>&lt;/script&gt;</span></p>
            </td>
        </tr>
    </table>
    <p class="c0"><span class="c6"></span></p>
    <p class="c10 c14"><span class="c15">Pentru elemente, apelarea acestei metode este analog&#259; verific&#259;rii
            validit&#259;&#539;ii folosind proprietatea </span><span class="c9">validity.valid</span><span
            class="c6">:</span></p>
    <p class="c0"><span class="c6"></span></p><a id="t.3b5d1551ed981e56f4db89716ce3e45f0f1aa596"></a><a id="t.1"></a>
    <table class="c2">
        <tr class="c1">
            <td class="c18" colspan="1" rowspan="1">
                <p class="c10"><span class="c3">function</span><span class="c8">&nbsp;</span><span
                        class="c11">validate</span><span class="c8">(){<br> &nbsp; &nbsp;</span><span
                        class="c3">if</span><span class="c8">(!registerForm.username.validity.valid){<br> &nbsp; &nbsp;
                        &nbsp; &nbsp;</span><span class="c11">console</span><span class="c8">.log(</span><span
                        class="c4">&quot;Username is not valid&quot;</span><span class="c8">);<br> &nbsp; &nbsp;}<br>
                        &nbsp; &nbsp;</span><span class="c3">if</span><span
                        class="c8">(!registerForm.age.validity.valid){<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span
                        class="c11">console</span><span class="c8">.log(</span><span class="c4">&quot;Age is not
                        valid&quot;</span><span class="c8">);<br> &nbsp; &nbsp;}<br> &nbsp; &nbsp;</span><span
                        class="c3">if</span><span class="c8">(!registerForm.checkValidity()){<br> &nbsp; &nbsp; &nbsp;
                        &nbsp;</span><span class="c11">console</span><span class="c8">.log(</span><span
                        class="c4">&quot;Form data is not valid&quot;</span><span class="c8">);<br> &nbsp;
                        &nbsp;}<br>}</span></p>
            </td>
        </tr>
    </table>
    <p class="c0"><span class="c22"></span></p>
    <p class="c10 c14"><span class="c12">Configurarea propriilor mesaje de validare.</span></p>
    <p class="c0"><span class="c13"></span></p>
    <p class="c10 c14"><span class="c15">Pentru configurarea propriilor mesaje de validare, &icirc;n metoda </span><span
            class="c16">setCustomValidity() </span><span class="c6">se transmite mesajul necesar:</span></p>
    <p class="c0"><span class="c6"></span></p><a id="t.83a8bd6a93bb0221628609b897dcf15c42061be5"></a><a id="t.2"></a>
    <table class="c2">
        <tr class="c1">
            <td class="c18" colspan="1" rowspan="1">
                <p class="c10"><span class="c8">&lt;form id=</span><span class="c4">&quot;registerForm&quot;</span><span
                        class="c8">&nbsp;name=</span><span class="c4">&quot;registerForm&quot;</span><span
                        class="c8">&gt;<br></span><span class="c7">&lt;</span><span class="c5">p</span><span
                        class="c7">&gt;</span><span class="c8"><br> &nbsp; &nbsp;</span><span
                        class="c7">&lt;</span><span class="c5">label</span><span class="c7">&nbsp;for=</span><span
                        class="c4">&quot;username&quot;</span><span class="c7">&gt;</span><span
                        class="c8">Username:</span><span class="c7">&lt;/</span><span class="c5">label</span><span
                        class="c7">&gt;&lt;</span><span class="c5">br</span><span class="c7">&gt;</span><span
                        class="c8"><br> &nbsp; &nbsp;</span><span class="c7">&lt;</span><span
                        class="c5">input</span><span class="c7">&nbsp;id=</span><span
                        class="c4">&quot;username&quot;</span><span class="c7">&nbsp;name=</span><span
                        class="c4">&quot;username&quot;</span><span class="c7">&nbsp;maxlength=</span><span
                        class="c4">&quot;20&quot;</span><span class="c7">&nbsp;minlength=</span><span
                        class="c4">&quot;3&quot;</span><span class="c7">&nbsp;required&gt;</span><span
                        class="c8"><br></span><span class="c7">&lt;/</span><span class="c5">p</span><span
                        class="c7">&gt;</span><span class="c8"><br></span><span class="c7">&lt;</span><span
                        class="c5">button</span><span class="c7">&nbsp;type=</span><span
                        class="c4">&quot;submit&quot;</span><span class="c7">&nbsp;id=</span><span
                        class="c4">&quot;submit&quot;</span><span class="c7">&nbsp;name=</span><span
                        class="c4">&quot;submit&quot;</span><span class="c7">&gt;</span><span
                        class="c8">Register</span><span class="c7">&lt;/</span><span class="c5">button</span><span
                        class="c7">&gt;</span><span class="c8"><br></span><span class="c7">&lt;/</span><span
                        class="c5">form</span><span class="c7">&gt;</span><span class="c8"><br></span><span
                        class="c7">&lt;</span><span class="c5">script</span><span class="c7">&gt;</span><span
                        class="c8"><br></span><span class="c3">const</span><span class="c8">&nbsp;registerForm =
                    </span><span class="c11">document</span><span class="c8">.registerForm;<br></span><span
                        class="c3">const</span><span class="c8">&nbsp;submit =
                        registerForm.submit;<br>submit.addEventListener(</span><span
                        class="c4">&quot;click&quot;</span><span class="c8">, validate);<br><br></span><span
                        class="c3">function</span><span class="c8">&nbsp;</span><span class="c11">validate</span><span
                        class="c8">(){<br> &nbsp; &nbsp;</span><span class="c3">if</span><span
                        class="c8">(registerForm.username.validity.valueMissing){<br> &nbsp; &nbsp; &nbsp;
                        &nbsp;registerForm.username.setCustomValidity(</span><span class="c4">&quot;Este necesar s&#259;
                        introduce&#539;i un nume de utilizator&quot;</span><span class="c8">);<br> &nbsp; &nbsp;}<br>
                        &nbsp; &nbsp;</span><span class="c3">if</span><span
                        class="c8">(registerForm.username.validity.tooLong){<br> &nbsp; &nbsp; &nbsp;
                        &nbsp;registerForm.username.setCustomValidity(</span><span class="c4">&quot;Numele de utilizator
                        nu trebuie s&#259; dep&#259;&#537;easc&#259; 20 de caractere&quot;</span><span class="c8">);<br>
                        &nbsp; &nbsp;}<br> &nbsp; &nbsp;</span><span class="c3">if</span><span
                        class="c8">(registerForm.username.validity.tooShort){<br> &nbsp; &nbsp; &nbsp;
                        &nbsp;registerForm.username.setCustomValidity(</span><span class="c4">&quot;Numele de utilizator
                        nu trebuie s&#259; fie mai scurt de 3 caractere&quot;</span><span class="c8">);<br> &nbsp;
                        &nbsp;}<br>}<br></span><span class="c7">&lt;/</span><span class="c5">script</span><span
                        class="c7">&gt;</span></p>
            </td>
        </tr>
    </table>
    <p class="c0"><span class="c6"></span></p>
    <p class="c10 c14"><span class="c6">Aici, la trimiterea formularului, verific&#259;m valoarea c&acirc;mpului
            username. &Icirc;n func&#539;ie de regula de validare nerespectat&#259;, stabilim mesajul de eroare
            corespunz&#259;tor. &#536;i browserul va folosi de asemenea aceste mesaje.</span></p>
    <p class="c0"><span class="c6"></span></p>
    <p class="c10 c14"><span
            style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 594.00px; height: 310.00px;"><img
                alt="" src="images/image2.png"
                style="width: 594.00px; height: 310.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);"
                title=""></span></p>
    <p class="c0"><span class="c6"></span></p>
    <p class="c10 c14"><span class="c12">Definirea propriilor reguli de validare.</span></p>
    <p class="c0"><span class="c13"></span></p>
    <p class="c10 c14"><span class="c15">La validare nu suntem limita&#539;i la regulile de validare &icirc;ncorporate,
            care sunt aplicate elementului formularului prin atributele</span><span class="c9">&nbsp;required,
            minlength, maxlength, min, max</span><span class="c6">&nbsp;sau &icirc;n func&#539;ie de tipul
            c&acirc;mpului de intrare. Dac&#259; este necesar, putem defini propria noastr&#259; logic&#259; de validare
            pentru scenarii personalizate. De exemplu, s&#259; lu&#259;m cel mai simplu exemplu: numele de utilizator nu
            trebuie s&#259; fie &quot;admin&quot;. Pentru asta, vom defini urm&#259;torul program:</span></p>
    <p class="c0"><span class="c6"></span></p><a id="t.8ee6c293e85afeb0b3362138102ec2eee22453a1"></a><a id="t.3"></a>
    <table class="c2">
        <tr class="c1">
            <td class="c18" colspan="1" rowspan="1">
                <p class="c10"><span class="c8">&lt;form id=</span><span class="c4">&quot;registerForm&quot;</span><span
                        class="c8">&nbsp;name=</span><span class="c4">&quot;registerForm&quot;</span><span
                        class="c8">&gt;<br></span><span class="c7">&lt;</span><span class="c5">p</span><span
                        class="c7">&gt;</span><span class="c8"><br> &nbsp; &nbsp;</span><span
                        class="c7">&lt;</span><span class="c5">label</span><span class="c7">&nbsp;for=</span><span
                        class="c4">&quot;username&quot;</span><span class="c7">&gt;</span><span
                        class="c8">Username:</span><span class="c7">&lt;/</span><span class="c5">label</span><span
                        class="c7">&gt;&lt;</span><span class="c5">br</span><span class="c7">&gt;</span><span
                        class="c8"><br> &nbsp; &nbsp;</span><span class="c7">&lt;</span><span
                        class="c5">input</span><span class="c7">&nbsp;id=</span><span
                        class="c4">&quot;username&quot;</span><span class="c7">&nbsp;name=</span><span
                        class="c4">&quot;username&quot;</span><span class="c7">&nbsp;maxlength=</span><span
                        class="c4">&quot;20&quot;</span><span class="c7">&nbsp;minlength=</span><span
                        class="c4">&quot;3&quot;</span><span class="c7">&nbsp;required&gt;</span><span
                        class="c8"><br></span><span class="c7">&lt;/</span><span class="c5">p</span><span
                        class="c7">&gt;</span><span class="c8"><br></span><span class="c7">&lt;</span><span
                        class="c5">button</span><span class="c7">&nbsp;type=</span><span
                        class="c4">&quot;submit&quot;</span><span class="c7">&nbsp;id=</span><span
                        class="c4">&quot;submit&quot;</span><span class="c7">&nbsp;name=</span><span
                        class="c4">&quot;submit&quot;</span><span class="c7">&gt;</span><span
                        class="c8">Register</span><span class="c7">&lt;/</span><span class="c5">button</span><span
                        class="c7">&gt;</span><span class="c8"><br></span><span class="c7">&lt;/</span><span
                        class="c5">form</span><span class="c7">&gt;</span><span class="c8"><br></span><span
                        class="c7">&lt;</span><span class="c5">script</span><span class="c7">&gt;</span><span
                        class="c8"><br></span><span class="c3">const</span><span class="c8">&nbsp;usernameField =
                    </span><span class="c11">document</span><span class="c8">.registerForm.username;<br></span><span
                        class="c3">const</span><span class="c8">&nbsp;submit =
                        registerForm.submit;<br>submit.addEventListener(</span><span
                        class="c4">&quot;click&quot;</span><span class="c8">, validate);<br><br></span><span
                        class="c3">function</span><span class="c8">&nbsp;</span><span class="c11">validate</span><span
                        class="c8">(){<br> &nbsp; &nbsp;</span><span class="c3">if</span><span
                        class="c8">(usernameField.value === </span><span class="c4">&quot;admin&quot;</span><span
                        class="c8">){<br> &nbsp; &nbsp; &nbsp; &nbsp;usernameField.setCustomValidity(</span><span
                        class="c4">&quot;Numele de utilizator nu este permis&quot;</span><span class="c8">);<br> &nbsp;
                        &nbsp;}<br>}<br></span><span class="c7">&lt;/</span><span class="c5">script</span><span
                        class="c7">&gt;</span></p>
            </td>
        </tr>
    </table>
    <p class="c0"><span class="c6"></span></p>
    <p class="c10 c14"><span class="c6">&Icirc;n func&#539;ia validate verific&#259;m valoarea c&acirc;mpului
            usernameField. Dac&#259; este egal&#259; cu &quot;admin&quot;, atunci set&#259;m un mesaj de eroare.</span>
    </p>
    <p class="c0"><span class="c6"></span></p>
    <p class="c10 c14"><span
            style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 480.00px; height: 329.00px;"><img
                alt="" src="images/image3.png"
                style="width: 480.00px; height: 329.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);"
                title=""></span></p>
    <p class="c0"><span class="c6"></span></p>
    <p class="c10 c14"><span class="c15">Deoarece am setat un mesaj de eroare, c&acirc;mpul username nu mai trece
            validarea, chiar dac&#259; corespunde atributelor required, maxlength &#537;i minlength. &Icirc;n
            consecin&#539;&#259;, putem ob&#539;ine acest mesaj prin proprietatea </span><span
            class="c9">validationMessage</span><span class="c6">:</span></p>
    <p class="c0"><span class="c6"></span></p><a id="t.fe3537be49a4ae7b47710e62dfd0bf21551d470a"></a><a id="t.4"></a>
    <table class="c2">
        <tr class="c1">
            <td class="c18" colspan="1" rowspan="1">
                <p class="c10"><span class="c8">&lt;!DOCTYPE html&gt;<br>&lt;html&gt;<br>&lt;head&gt;<br> &nbsp;
                        &nbsp;&lt;meta charset=&quot;utf-8&quot; /&gt;<br> &nbsp;
                        &nbsp;&lt;title&gt;FDC.COM&lt;/title&gt;<br> &nbsp; &nbsp;&lt;style&gt;<br> &nbsp; &nbsp;input
                        {width: 150px;}<br> &nbsp; &nbsp;input:invalid {border-color: red; }<br> &nbsp;
                        &nbsp;input:valid { border-color: green;}<br> &nbsp; &nbsp;#usernameErrors
                        {padding:5px;background-color: #ffcccc; color:#b33939; display:none;}<br> &nbsp;
                        &nbsp;&lt;/style&gt;<br>&lt;/head&gt;<br>&lt;body&gt;<br>&lt;form id=&quot;registerForm&quot;
                        name=&quot;registerForm&quot;&gt;<br>&lt;p&gt;<br> &nbsp; &nbsp;&lt;label
                        for=&quot;username&quot;&gt;Username:&lt;/label&gt;&lt;br&gt;<br> &nbsp; &nbsp;&lt;input
                        id=&quot;username&quot; name=&quot;username&quot; maxlength=&quot;20&quot;
                        minlength=&quot;3&quot; required&gt;<br> &nbsp; &nbsp;&lt;div
                        id=&quot;usernameErrors&quot;&gt;&lt;/div&gt;<br>&lt;/p&gt;<br>&lt;button
                        type=&quot;submit&quot; id=&quot;submit&quot;
                        name=&quot;submit&quot;&gt;Register&lt;/button&gt;<br>&lt;/form&gt;<br>&lt;script&gt;<br>const
                        usernameErrors = document.getElementById(&quot;usernameErrors&quot;);<br>const usernameField =
                        document.registerForm.username;<br>const submit =
                        registerForm.submit;<br>submit.addEventListener(&quot;click&quot;, validate);<br><br>function
                        validate(e){<br> &nbsp; &nbsp;if(usernameField.value === &quot;admin&quot;){<br> &nbsp; &nbsp;
                        &nbsp; &nbsp;usernameField.setCustomValidity(&quot;Numele de utilizator nu este
                        permis&quot;);<br> &nbsp; &nbsp;}<br> &nbsp; &nbsp;// verific&#259;m validitatea<br> &nbsp;
                        &nbsp;if(!usernameField.validity.valid){<br> &nbsp; &nbsp; &nbsp;
                        &nbsp;usernameErrors.textContent = usernameField.validationMessage;<br> &nbsp; &nbsp; &nbsp;
                        &nbsp;usernameErrors.style.display = &quot;block&quot;;<br> &nbsp; &nbsp;}<br> &nbsp;
                        &nbsp;else{<br> &nbsp; &nbsp; &nbsp; &nbsp;usernameErrors.textContent = &quot;&quot;;<br> &nbsp;
                        &nbsp; &nbsp; &nbsp;usernameErrors.style.display = &quot;none&quot;;<br> &nbsp; &nbsp; &nbsp;
                        &nbsp;e.preventDefault(); // prevenim trimiterea formularului &#537;i re&icirc;nc&#259;rcarea
                        paginii<br> &nbsp; &nbsp;}<br>}<br>&lt;/script&gt;<br>&lt;/body&gt;<br>&lt;/html&gt;</span></p>
            </td>
        </tr>
    </table>
    <p class="c0"><span class="c6"></span></p>
    <p class="c10 c14"><span
            style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 624.00px; height: 202.67px;"><img
                alt="" src="images/image1.png"
                style="width: 624.00px; height: 202.67px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);"
                title=""></span></p>
    <p class="c0"><span class="c6"></span></p>
</body>

</html>