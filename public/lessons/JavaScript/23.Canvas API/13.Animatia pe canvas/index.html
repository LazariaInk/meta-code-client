<html>

<head>
    <meta content="text/html; charset=UTF-8" http-equiv="content-type">
    <link rel="stylesheet" type="text/css" href="/lessons/styles.css">
</head>

<body class="c17 doc-content">
    <h1 class="c9 c15 c18">Anima»õia pe canvas. </h1>
    <p class="c6"><span class="c4"></span></p>
    <p class="c9 c15"><span class="c8">Combinarea desen&#259;rii diferitelor figuri pe canvas cu utilizarea
            func&#539;iei </span><span class="c13">requestAnimationFrame() </span><span class="c4">permite crearea unei
            anima&#539;ii a con&#539;inutului elementului canvas.</span></p>
    <p class="c6"><span class="c4"></span></p>
    <p class="c9 c15"><span class="c4">Anima&#539;ia presupune schimbarea secven&#539;ial&#259; a cadrelor, fiecare
            cadru al anima&#539;iei trebuind desenat manual. &Icirc;n general, pentru a crea o anima&#539;ie, ar trebui
            s&#259; urm&#259;m urm&#259;torii pa&#537;i:</span></p>
    <p class="c6"><span class="c4"></span></p>
    <p class="c9 c15"><span class="c4">- Cur&#259;&#539;area zonei de desen</span></p>
    <p class="c6"><span class="c4"></span></p>
    <p class="c9 c15"><span class="c4">- Salvarea op&#539;ional&#259; a st&#259;rii</span></p>
    <p class="c6"><span class="c4"></span></p>
    <p class="c9 c15"><span class="c4">- Desenarea unui cadru individual</span></p>
    <p class="c6"><span class="c4"></span></p>
    <p class="c9 c15"><span class="c4">- Restaurarea op&#539;ional&#259; a st&#259;rii</span></p>
    <p class="c6"><span class="c4"></span></p>
    <p class="c9 c15"><span class="c8">Ace&#537;ti pa&#537;i sunt de obicei &icirc;ncapsula&#539;i &icirc;ntr-o
            func&#539;ie, care apoi este apelat&#259; la intervale regulate de timp (pentru fiecare cadru al
            anima&#539;iei). Pentru executarea func&#539;iei se utilizeaz&#259; metoda </span><span
            class="c13">requestAnimationFrame(),</span><span class="c4">&nbsp;care este special destinat&#259; pentru
            lucrul cu anima&#539;ia pe paginile web.</span></p>
    <p class="c6"><span class="c4"></span></p>
    <p class="c9 c15"><span class="c4">De exemplu, definim urm&#259;toarea pagin&#259;:</span></p>
    <p class="c6"><span class="c4"></span></p><a id="t.e7555611f4a465e0bcf04467b57f5dd6b6b79cdd"></a><a id="t.0"></a>
    <table class="c10">
        <tr class="c16">
            <td class="c12" colspan="1" rowspan="1">
                <p class="c9"><span class="c2">&lt;!DOCTYPE html&gt;<br></span><span class="c7">&lt;</span><span
                        class="c1">html</span><span class="c7">&gt;</span><span class="c2"><br></span><span
                        class="c7">&lt;</span><span class="c1">head</span><span class="c7">&gt;</span><span
                        class="c2"><br> &nbsp; &nbsp;</span><span class="c7">&lt;</span><span
                        class="c1">meta</span><span class="c7">&nbsp;charset=</span><span
                        class="c8 c14">&quot;utf-8&quot;</span><span class="c7">&nbsp;/&gt;</span><span class="c2"><br>
                        &nbsp; &nbsp;</span><span class="c7">&lt;</span><span class="c1">title</span><span
                        class="c7">&gt;</span><span class="c2">FDC.COM</span><span class="c7">&lt;/</span><span
                        class="c1">title</span><span class="c7">&gt;</span><span class="c2"><br></span><span
                        class="c7">&lt;/</span><span class="c1">head</span><span class="c7">&gt;</span><span
                        class="c2"><br></span><span class="c7">&lt;</span><span class="c1">body</span><span
                        class="c7">&gt;</span><span class="c2"><br></span><span class="c7">&lt;</span><span
                        class="c1">canvas</span><span class="c7">&nbsp;id=</span><span
                        class="c8 c14">&quot;canvas&quot;</span><span class="c7">&nbsp;width=</span><span
                        class="c8 c14">&quot;400&quot;</span><span class="c7">&nbsp;height=</span><span
                        class="c8 c14">&quot;250&quot;</span><span class="c7">&nbsp;style=</span><span
                        class="c8 c14">&quot;background-color: #eee; border-color: #ccc;&quot;</span><span
                        class="c7">&gt;&lt;/</span><span class="c1">canvas</span><span class="c7">&gt;</span><span
                        class="c2"><br></span><span class="c7">&lt;</span><span class="c1">script</span><span
                        class="c7">&gt;</span><span class="c2"><br></span><span class="c5">const</span><span
                        class="c2">&nbsp;canvas = </span><span class="c8 c11">document</span><span
                        class="c2">.getElementById(</span><span class="c8 c14">&quot;canvas&quot;</span><span
                        class="c2">);<br></span><span class="c5">const</span><span class="c2">&nbsp;context =
                        canvas.getContext(</span><span class="c8 c14">&quot;2d&quot;</span><span
                        class="c2">);<br></span><span class="c5">let</span><span class="c2">&nbsp;x = </span><span
                        class="c3">0</span><span class="c2">;<br></span><span class="c5">let</span><span
                        class="c2">&nbsp;step = </span><span class="c3">1</span><span class="c2">;<br></span><span
                        class="c5">function</span><span class="c2">&nbsp;</span><span class="c8 c11">draw</span><span
                        class="c2">() {<br> &nbsp; &nbsp;context.clearRect(</span><span class="c3">0</span><span
                        class="c2">,</span><span class="c3">0</span><span class="c2">,</span><span
                        class="c3">400</span><span class="c2">,</span><span class="c3">250</span><span class="c2">);
                        &nbsp; </span><span class="c0">// cur&#259;&#539;&#259;m zona de desen</span><span
                        class="c2"><br> &nbsp; &nbsp;context.fillStyle = </span><span
                        class="c8 c14">&quot;red&quot;</span><span class="c2">;<br> &nbsp;
                        &nbsp;context.fillRect(x,</span><span class="c3">10</span><span class="c2">,</span><span
                        class="c3">40</span><span class="c2">,</span><span class="c3">40</span><span class="c2">);
                        &nbsp; &nbsp; &nbsp;</span><span class="c0">// desen&#259;m dreptunghiul</span><span
                        class="c2"><br> &nbsp; &nbsp;</span><span class="c5">if</span><span class="c2">(x &gt;=
                    </span><span class="c3">360</span><span class="c2">) step = </span><span class="c3">-1</span><span
                        class="c2">;<br> &nbsp; &nbsp;</span><span class="c5">if</span><span class="c2">(x &lt;=
                    </span><span class="c3">0</span><span class="c2">) step = </span><span class="c3">1</span><span
                        class="c2">;<br> &nbsp; &nbsp;x += step;<br> &nbsp; &nbsp;</span><span
                        class="c8 c11">window</span><span
                        class="c2">.requestAnimationFrame(draw);<br>}<br>draw();<br></span><span
                        class="c7">&lt;/</span><span class="c1">script</span><span class="c7">&gt;</span><span
                        class="c2"><br></span><span class="c7">&lt;/</span><span class="c1">body</span><span
                        class="c7">&gt;</span><span class="c2"><br></span><span class="c7">&lt;/</span><span
                        class="c1">html</span><span class="c7">&gt;</span></p>
            </td>
        </tr>
    </table>
    <p class="c6"><span class="c4"></span></p>
    <p class="c9 c15"><span
            style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 511.00px; height: 433.00px;"><img
                alt="" src="images/image1.png"
                style="width: 511.00px; height: 433.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);"
                title=""></span></p>
    <p class="c6"><span class="c4"></span></p>
    <p class="c9 c15"><span class="c4">Aici, func&#539;ia draw() con&#539;ine codul care deseneaz&#259; un dreptunghi.
            Primul apel al func&#539;iei declan&#537;eaz&#259; desenarea primului cadru al anima&#539;iei. La finalul
            apelului func&#539;iei, se cheam&#259; metoda requestAnimationFrame, c&#259;reia i se transmite aceea&#537;i
            func&#539;ie draw, declan&#537;&acirc;nd astfel anima&#539;ia. Astfel, func&#539;ia draw() se
            auto-apelaz&#259; continuu pentru a desena un nou cadru al anima&#539;iei. Esen&#539;a anima&#539;iei
            const&#259; &icirc;n schimbarea coordonatei x a dreptunghiului. La fiecare desenare, dreptunghiul este
            afi&#537;at &icirc;ntr-o nou&#259; pozi&#539;ie, cre&acirc;nd iluzia mi&#537;c&#259;rii sale.</span></p>
    <p class="c6"><span class="c4"></span></p>
    <p class="c9 c15"><span class="c4">&Icirc;n mod similar, se pot anima &icirc;ntregi compozi&#539;ii de
            figuri:</span></p>
    <p class="c6"><span class="c4"></span></p><a id="t.e4e21e4bdf04459a66f4008aa65f2e357fc6a186"></a><a id="t.1"></a>
    <table class="c10">
        <tr class="c16">
            <td class="c12" colspan="1" rowspan="1">
                <p class="c9"><span class="c5">const</span><span class="c2">&nbsp;canvas = </span><span
                        class="c8 c11">document</span><span class="c2">.getElementById(</span><span
                        class="c8 c14">&quot;canvas&quot;</span><span class="c2">);<br></span><span
                        class="c5">const</span><span class="c2">&nbsp;context = canvas.getContext(</span><span
                        class="c8 c14">&quot;2d&quot;</span><span class="c2">);<br></span><span
                        class="c5">function</span><span class="c2">&nbsp;</span><span class="c8 c11">draw</span><span
                        class="c2">() {<br> &nbsp; &nbsp;context.clearRect(</span><span class="c3">0</span><span
                        class="c2">,</span><span class="c3">0</span><span class="c2">,</span><span
                        class="c3">500</span><span class="c2">,</span><span class="c3">300</span><span class="c2">);
                        &nbsp; </span><span class="c0">// cur&#259;&#539;&#259;m zona de desen</span><span
                        class="c2"><br> &nbsp; &nbsp;</span><span class="c5">const</span><span class="c2">&nbsp;time =
                    </span><span class="c5">new</span><span class="c2">&nbsp;</span><span
                        class="c8 c11">Date</span><span class="c2">();<br> &nbsp; &nbsp;</span><span class="c0">//
                        unghiul pentru rota&#539;ia dreptunghiurilor</span><span class="c2"><br> &nbsp;
                        &nbsp;</span><span class="c5">const</span><span class="c2">&nbsp;angle = ((</span><span
                        class="c3">2</span><span class="c2">*</span><span class="c8 c11">Math</span><span
                        class="c2">.PI)/</span><span class="c3">6</span><span class="c2">)*time.getSeconds() +
                        ((</span><span class="c3">2</span><span class="c2">*</span><span class="c8 c11">Math</span><span
                        class="c2">.PI)/</span><span class="c3">6000</span><span
                        class="c2">)*time.getMilliseconds();<br> &nbsp; &nbsp;context.fillStyle = </span><span
                        class="c8 c14">&quot;red&quot;</span><span class="c2">;<br> &nbsp; &nbsp;context.save();<br>
                        &nbsp; &nbsp;context.translate(</span><span class="c3">150</span><span class="c2">,</span><span
                        class="c3">150</span><span class="c2">);<br> &nbsp; &nbsp;context.rotate(angle);<br> &nbsp;
                        &nbsp;context.translate(</span><span class="c3">0</span><span class="c2">,</span><span
                        class="c3">25</span><span class="c2">);<br> &nbsp; &nbsp;context.fillRect(</span><span
                        class="c3">5</span><span class="c2">,</span><span class="c3">5</span><span
                        class="c2">,</span><span class="c3">20</span><span class="c2">,</span><span
                        class="c3">20</span><span class="c2">); &nbsp; &nbsp; &nbsp;</span><span class="c0">//
                        dreptunghiul ro&#537;u</span><span class="c2"><br> &nbsp; &nbsp;context.restore();<br><br>
                        &nbsp; &nbsp;context.fillStyle = </span><span class="c8 c14">&quot;yellow&quot;</span><span
                        class="c2">;<br> &nbsp; &nbsp;context.save();<br> &nbsp; &nbsp;context.translate(</span><span
                        class="c3">150</span><span class="c2">,</span><span class="c3">150</span><span class="c2">);<br>
                        &nbsp; &nbsp;context.rotate(angle);<br> &nbsp; &nbsp;context.translate(</span><span
                        class="c3">0</span><span class="c2">,</span><span class="c3">50</span><span class="c2">);<br>
                        &nbsp; &nbsp;context.fillRect(</span><span class="c3">5</span><span class="c2">,</span><span
                        class="c3">5</span><span class="c2">,</span><span class="c3">20</span><span
                        class="c2">,</span><span class="c3">20</span><span class="c2">); &nbsp; &nbsp;
                        &nbsp;</span><span class="c0">// dreptunghiul galben</span><span class="c2"><br> &nbsp;
                        &nbsp;context.restore();<br><br> &nbsp; &nbsp;context.fillStyle = </span><span
                        class="c8 c14">&quot;green&quot;</span><span class="c2">;<br> &nbsp; &nbsp;context.save();<br>
                        &nbsp; &nbsp;context.translate(</span><span class="c3">150</span><span class="c2">,</span><span
                        class="c3">150</span><span class="c2">);<br> &nbsp; &nbsp;context.rotate(angle);<br> &nbsp;
                        &nbsp;context.translate(</span><span class="c3">0</span><span class="c2">,</span><span
                        class="c3">75</span><span class="c2">);<br> &nbsp; &nbsp;context.fillRect(</span><span
                        class="c3">5</span><span class="c2">,</span><span class="c3">5</span><span
                        class="c2">,</span><span class="c3">20</span><span class="c2">,</span><span
                        class="c3">20</span><span class="c2">); &nbsp; &nbsp; &nbsp;</span><span class="c0">//
                        dreptunghiul verde</span><span class="c2"><br> &nbsp; &nbsp;context.restore();<br> &nbsp;
                        &nbsp;</span><span class="c8 c11">window</span><span
                        class="c2">.requestAnimationFrame(draw);<br>}<br>draw();</span></p>
            </td>
        </tr>
    </table>
    <p class="c6"><span class="c4"></span></p>
    <p class="c6"><span class="c4"></span></p>
</body>

</html>