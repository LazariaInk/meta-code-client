<html>
  <head>
    <meta content="text/html; charset=UTF-8" http-equiv="content-type" />
    <link rel="stylesheet" type="text/css" href="/lessons/styles.css">
  </head>
  <body class="c17 doc-content">
    <h1 class="c8 c16">Generatoare.</h1>
    <p class="c8 c12"><span class="c2"></span></p>
    <p class="c8">
      <span class="c7">Un </span><span class="c14">generator </span
      ><span class="c2"
        >ofer&#259; o func&#539;ie care genereaz&#259; un set de valori.</span
      >
    </p>
    <p class="c8 c12"><span class="c2"></span></p>
    <p class="c8">
      <span class="c7"
        >Pentru a returna o valoare dintr-o func&#539;ie se folose&#537;te
        operatorul </span
      ><span class="c14">yield</span><span class="c7">. Spre deosebire de </span
      ><span class="c14">return</span><span class="c7">, operatorul </span
      ><span class="c14">yield </span
      ><span class="c2"
        >p&#259;streaz&#259; starea func&#539;iei, permi&#539;&acirc;ndu-i
        s&#259; continue execu&#539;ia de unde s-a oprit.</span
      >
    </p>
    <p class="c8 c12"><span class="c2"></span></p>
    <p class="c8">
      <span class="c2">Exemplu de func&#539;ie generator simpl&#259;:</span>
    </p>
    <p class="c8 c12"><span class="c2"></span></p>
    <a id="t.d34b5665b3ec657a1d94550f3ea6ce604f73999c"></a><a id="t.0"></a>
    <table class="c3">
      <tr class="c13">
        <td class="c5" colspan="1" rowspan="1">
          <p class="c0">
            <span class="c6">function</span><span class="c1">&nbsp;</span
            ><span class="c11">generator</span
            ><span class="c1"
              >() {<br />
              &nbsp; &nbsp;</span
            ><span class="c6">yield</span><span class="c1">&nbsp;</span
            ><span class="c4">21</span><span class="c1">;<br />}</span>
          </p>
        </td>
      </tr>
    </table>
    <p class="c8 c12"><span class="c2"></span></p>
    <p class="c8">
      <span class="c2"
        >Aici, func&#539;ia generator returneaz&#259; de fapt un singur
        num&#259;r, 21. Totu&#537;i, putem itera rezultatul func&#539;iei
        generator &icirc;ntr-o bucl&#259;, la fel ca un array
        obi&#537;nuit:</span
      >
    </p>
    <p class="c8 c12"><span class="c2"></span></p>
    <a id="t.a24cbbe653b9ba2924052902e6211a3d10c32e5e"></a><a id="t.1"></a>
    <table class="c3">
      <tr class="c13">
        <td class="c5" colspan="1" rowspan="1">
          <p class="c0">
            <span class="c6">foreach</span><span class="c1">(generator() </span
            ><span class="c6">as</span
            ><span class="c1"
              >&nbsp;$number) {<br />
              &nbsp; &nbsp;</span
            ><span class="c6">echo</span><span class="c1">&nbsp;$number; </span
            ><span class="c10">// 21</span><span class="c1"><br />}</span>
          </p>
        </td>
      </tr>
    </table>
    <p class="c8 c12"><span class="c2"></span></p>
    <p class="c8">
      <span class="c2"
        >&Icirc;n mod similar, generatorul poate returna mai multe valori:</span
      >
    </p>
    <p class="c8 c12"><span class="c2"></span></p>
    <a id="t.348a292d1ed2bb027c36cf62942ce6b5530f4286"></a><a id="t.2"></a>
    <table class="c3">
      <tr class="c13">
        <td class="c5" colspan="1" rowspan="1">
          <p class="c0">
            <span class="c6">function</span><span class="c1">&nbsp;</span
            ><span class="c11">generateNumbers</span
            ><span class="c1"
              >() {<br />
              &nbsp; &nbsp;</span
            ><span class="c6">for</span><span class="c1">&nbsp;($i = </span
            ><span class="c4">0</span><span class="c1">; $i &lt;= </span
            ><span class="c4">5</span
            ><span class="c1"
              >; $i++) {<br />
              &nbsp; &nbsp; &nbsp; &nbsp;</span
            ><span class="c6">yield</span
            ><span class="c1"
              >&nbsp;$i;<br />
              &nbsp; &nbsp;}<br />}<br /><br /></span
            ><span class="c6">foreach</span
            ><span class="c1">(generateNumbers() </span
            ><span class="c6">as</span
            ><span class="c1"
              >&nbsp;$number) {<br />
              &nbsp; &nbsp;</span
            ><span class="c6">echo</span><span class="c1">&nbsp;$number; </span
            ><span class="c10">// 012345</span><span class="c1"><br />}</span>
          </p>
        </td>
      </tr>
    </table>
    <p class="c8 c12"><span class="c2"></span></p>
    <p class="c8">
      <span class="c7">&Icirc;n acest caz, func&#539;ia generator</span
      ><span class="c7 c9">&nbsp;generateNumbers() </span
      ><span class="c2"
        >folose&#537;te o bucl&#259; pentru a genera valori de la 0 la 5
        inclusiv. Este echivalent cu:</span
      >
    </p>
    <p class="c8 c12"><span class="c2"></span></p>
    <a id="t.20190edf2f48cf7109fe1aea2d68632a4f646bfe"></a><a id="t.3"></a>
    <table class="c3">
      <tr class="c13">
        <td class="c5" colspan="1" rowspan="1">
          <p class="c0">
            <span class="c6">function</span><span class="c1">&nbsp;</span
            ><span class="c11">generateNumbers</span
            ><span class="c1"
              >() {<br />
              &nbsp; &nbsp;</span
            ><span class="c6">yield</span><span class="c1">&nbsp;</span
            ><span class="c4">0</span
            ><span class="c1"
              >;<br />
              &nbsp; &nbsp;</span
            ><span class="c6">yield</span><span class="c1">&nbsp;</span
            ><span class="c4">1</span
            ><span class="c1"
              >;<br />
              &nbsp; &nbsp;</span
            ><span class="c6">yield</span><span class="c1">&nbsp;</span
            ><span class="c4">2</span
            ><span class="c1"
              >;<br />
              &nbsp; &nbsp;</span
            ><span class="c6">yield</span><span class="c1">&nbsp;</span
            ><span class="c4">3</span
            ><span class="c1"
              >;<br />
              &nbsp; &nbsp;</span
            ><span class="c6">yield</span><span class="c1">&nbsp;</span
            ><span class="c4">4</span
            ><span class="c1"
              >;<br />
              &nbsp; &nbsp;</span
            ><span class="c6">yield</span><span class="c1">&nbsp;</span
            ><span class="c4">5</span><span class="c1">;<br />}</span>
          </p>
        </td>
      </tr>
    </table>
    <p class="c8 c12"><span class="c2"></span></p>
    <p class="c8">
      <span class="c2"
        >C&acirc;nd iter&#259;m &icirc;n bucl&#259;, parcurgem de fapt
        rezultatul func&#539;iei ca pe un array obi&#537;nuit, fiecare element
        av&acirc;nd un index numeric &icirc;ncep&acirc;nd de la zero:</span
      >
    </p>
    <p class="c8 c12"><span class="c2"></span></p>
    <a id="t.80ab927bf4758e7b62c5b75d20f492409a72c8b0"></a><a id="t.4"></a>
    <table class="c3">
      <tr class="c13">
        <td class="c5" colspan="1" rowspan="1">
          <p class="c0">
            <span class="c15">&lt;?php</span><span class="c1"><br /></span
            ><span class="c6">function</span><span class="c1">&nbsp;</span
            ><span class="c11">generateNumbers</span
            ><span class="c1"
              >() {<br />
              &nbsp; &nbsp;</span
            ><span class="c6">for</span><span class="c1">&nbsp;($i = </span
            ><span class="c4">10</span><span class="c1">; $i &lt;= </span
            ><span class="c4">15</span
            ><span class="c1"
              >; $i++) {<br />
              &nbsp; &nbsp; &nbsp; &nbsp;</span
            ><span class="c6">yield</span
            ><span class="c1"
              >&nbsp;$i;<br />
              &nbsp; &nbsp;}<br />}<br /><br /></span
            ><span class="c6">foreach</span
            ><span class="c1">(generateNumbers() </span
            ><span class="c6">as</span
            ><span class="c1"
              >&nbsp;$index =&gt; $number) {<br />
              &nbsp; &nbsp;</span
            ><span class="c6">echo</span><span class="c1">&nbsp;</span
            ><span class="c18">&quot;$index - $number&lt;br/&gt;&quot;</span
            ><span class="c1">;<br />}<br /></span
            ><span class="c15">?&gt;</span>
          </p>
        </td>
      </tr>
    </table>
    <p class="c8 c12"><span class="c2"></span></p>
    <p class="c8"><span class="c2">Rezultatul func&#539;iei:</span></p>
    <p class="c8 c12"><span class="c2"></span></p>
    <a id="t.ee6a9257e21722fa81970f1771282ceb373688a7"></a><a id="t.5"></a>
    <table class="c3">
      <tr class="c13">
        <td class="c5" colspan="1" rowspan="1">
          <p class="c0">
            <span class="c4">0</span><span class="c1">&nbsp;- </span
            ><span class="c4">10</span><span class="c1"><br /></span
            ><span class="c4">1</span><span class="c1">&nbsp;- </span
            ><span class="c4">11</span><span class="c1"><br /></span
            ><span class="c4">2</span><span class="c1">&nbsp;- </span
            ><span class="c4">12</span><span class="c1"><br /></span
            ><span class="c4">3</span><span class="c1">&nbsp;- </span
            ><span class="c4">13</span><span class="c1"><br /></span
            ><span class="c4">4</span><span class="c1">&nbsp;- </span
            ><span class="c4">14</span><span class="c1"><br /></span
            ><span class="c4">5</span><span class="c1">&nbsp;- </span
            ><span class="c4">15</span>
          </p>
        </td>
      </tr>
    </table>
    <p class="c8 c12"><span class="c2"></span></p>
    <p class="c8">
      <span class="c7">Cu ajutorul operatorului </span
      ><span class="c14">from</span
      ><span class="c2"
        >, putem defini un array ca surs&#259; de date pentru generator:</span
      >
    </p>
    <p class="c8 c12"><span class="c2"></span></p>
    <a id="t.a02043748bf76448006bfe9fe8f368d345c12331"></a><a id="t.6"></a>
    <table class="c3">
      <tr class="c13">
        <td class="c5" colspan="1" rowspan="1">
          <p class="c0">
            <span class="c6">function</span><span class="c1">&nbsp;</span
            ><span class="c11">generateNumbers</span
            ><span class="c1"
              >() {<br />
              &nbsp; &nbsp;</span
            ><span class="c6">yield</span><span class="c1">&nbsp;</span
            ><span class="c4">1</span
            ><span class="c1"
              >;<br />
              &nbsp; &nbsp;</span
            ><span class="c6">yield</span><span class="c1">&nbsp;from [</span
            ><span class="c4">2</span><span class="c1">, </span
            ><span class="c4">3</span><span class="c1">, </span
            ><span class="c4">4</span
            ><span class="c1"
              >];<br />
              &nbsp; &nbsp;</span
            ><span class="c6">yield</span><span class="c1">&nbsp;</span
            ><span class="c4">5</span
            ><span class="c1">;<br />}<br /><br /></span
            ><span class="c6">foreach</span
            ><span class="c1">(generateNumbers() </span
            ><span class="c6">as</span
            ><span class="c1"
              >&nbsp;$number) {<br />
              &nbsp; &nbsp;</span
            ><span class="c6">echo</span><span class="c1">&nbsp;$number; </span
            ><span class="c10">// 12345</span><span class="c1"><br />}</span>
          </p>
        </td>
      </tr>
    </table>
    <p class="c8 c12"><span class="c2"></span></p>
    <p class="c8">
      <span class="c7">&Icirc;n acest caz, func&#539;ia </span
      ><span class="c7 c9">generateNumbers()</span
      ><span class="c7"
        >&nbsp;pentru generarea unei p&#259;r&#539;i din date utilizeaz&#259;
        array-ul </span
      ><span class="c7 c9">[2, 3, 4]</span
      ><span class="c7">&nbsp;prin expresia</span
      ><span class="c7 c9">&nbsp;yield from [2, 3, 4]</span
      ><span class="c2">.</span>
    </p>
    <p class="c8 c12"><span class="c2"></span></p>
    <p class="c8">
      <span class="c2"
        >Func&#539;ia generator poate accepta parametri, permi&#539;&acirc;nd
        astfel personalizarea comportamentului generatorului:</span
      >
    </p>
    <p class="c8 c12"><span class="c2"></span></p>
    <a id="t.5984eebb1b1e2cc39ae11d38ae2254430d90ee50"></a><a id="t.7"></a>
    <table class="c3">
      <tr class="c13">
        <td class="c5" colspan="1" rowspan="1">
          <p class="c0">
            <span class="c6">function</span><span class="c1">&nbsp;</span
            ><span class="c11">generateNumbers</span
            ><span class="c1"
              >($start, $end) {<br />
              &nbsp; &nbsp;</span
            ><span class="c6">for</span
            ><span class="c1"
              >($i = $start; $i &lt; $end; $i++) {<br />
              &nbsp; &nbsp; &nbsp; &nbsp;</span
            ><span class="c6">yield</span
            ><span class="c1"
              >&nbsp;$i;<br />
              &nbsp; &nbsp;}<br />}<br /><br /></span
            ><span class="c6">foreach</span
            ><span class="c1">(generateNumbers(</span><span class="c4">4</span
            ><span class="c1">, </span><span class="c4">9</span
            ><span class="c1">) </span><span class="c6">as</span
            ><span class="c1"
              >&nbsp;$number) {<br />
              &nbsp; &nbsp;</span
            ><span class="c6">echo</span><span class="c1">&nbsp;$number; </span
            ><span class="c10">// 45678</span><span class="c1"><br />}</span>
          </p>
        </td>
      </tr>
    </table>
    <p class="c8 c12"><span class="c2"></span></p>
    <p class="c8">
      <span class="c2"
        >Poate ap&#259;rea &icirc;ntrebarea: de ce avem nevoie de generatoare?
        Nu putem s&#259; iter&#259;m pur &#537;i simplu un array obi&#537;nuit?
        De exemplu:</span
      >
    </p>
    <p class="c8 c12"><span class="c2"></span></p>
    <a id="t.7537eeca506cf1671000fcc0307b85edb8e25945"></a><a id="t.8"></a>
    <table class="c3">
      <tr class="c13">
        <td class="c5" colspan="1" rowspan="1">
          <p class="c0">
            <span class="c1">$numbers = [</span><span class="c4">1</span
            ><span class="c1">, </span><span class="c4">2</span
            ><span class="c1">, </span><span class="c4">3</span
            ><span class="c1">, </span><span class="c4">4</span
            ><span class="c1">, </span><span class="c4">5</span
            ><span class="c1">];<br /></span><span class="c6">foreach</span
            ><span class="c1">($numbers </span><span class="c6">as</span
            ><span class="c1"
              >&nbsp;$number) {<br />
              &nbsp; &nbsp;</span
            ><span class="c6">echo</span><span class="c1">&nbsp;$number; </span
            ><span class="c10">// 12345</span><span class="c1"><br />}</span>
          </p>
        </td>
      </tr>
    </table>
    <p class="c8 c12"><span class="c2"></span></p>
    <p class="c8">
      <span class="c2"
        >Problema este c&#259;, atunci c&acirc;nd lucr&#259;m cu un array,
        &icirc;ntregul array este &icirc;nc&#259;rcat &icirc;n memorie. &Icirc;n
        cazul unor volume mici de date, acest aspect poate fi ignorat.
        &Icirc;ns&#259;, pe m&#259;sur&#259; ce dimensiunea array-ului
        cre&#537;te, cresc &#537;i costurile &#537;i pierderile &icirc;n
        performan&#539;&#259;. Generatoarele sunt menite s&#259; rezolve
        aceast&#259; problem&#259;, extr&#259;g&acirc;nd doar o valoare la un
        moment dat c&acirc;nd se apeleaz&#259; func&#539;ia, economisind astfel
        resursele de calcul.</span
      >
    </p>
    <p class="c8 c12"><span class="c2"></span></p>
  </body>
</html>
