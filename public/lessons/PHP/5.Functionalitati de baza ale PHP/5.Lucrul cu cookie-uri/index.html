<html>
  <head>
    <meta content="text/html; charset=UTF-8" http-equiv="content-type" />
    <link rel="stylesheet" type="text/css" href="/lessons/styles.css">
  </head>
  <body class="c21 doc-content">
    <h1 class="c7 c20">Lucrul cu cookie-uri.</h1>
    <p class="c1"><span class="c0"></span></p>
    <p class="c7">
      <span class="c0"
        >Cookie-urile reprezint&#259; mici seturi de date (nu mai mari de 4 kB),
        prin care un site web poate salva pe computerul utilizatorului orice
        informa&#539;ie. Cu ajutorul cookie-urilor se poate urm&#259;ri
        activitatea utilizatorului pe site: dac&#259; este autentificat pe site
        sau nu, urm&#259;rirea istoricului vizitelor sale etc.</span
      >
    </p>
    <p class="c1"><span class="c0"></span></p>
    <p class="c7"><span class="c2">Salvarea cookie-urilor.</span></p>
    <p class="c1"><span class="c0"></span></p>
    <p class="c7">
      <span class="c5"
        >Pentru a seta un cookie pe computerul utilizatorului se folose&#537;te
        func&#539;ia</span
      ><span class="c14">&nbsp;setcookie()</span
      ><span class="c0"
        >. Aceasta trebuie apelat&#259; &icirc;nainte de a trimite
        r&#259;spunsul c&#259;tre utilizator. Aceast&#259; func&#539;ie are
        urm&#259;toarea defini&#539;ie:</span
      >
    </p>
    <p class="c1"><span class="c0"></span></p>
    <a id="t.67484231bc328a77bf1dc577730724c314efc051"></a><a id="t.0"></a>
    <table class="c3">
      <tr class="c11">
        <td class="c8" colspan="1" rowspan="1">
          <p class="c16">
            <span class="c6"
              >bool setcookie(string $name, string $value, int $expire, <br />
              &nbsp; &nbsp;string $path, string $domain, bool $secure, bool
              $httponly);</span
            >
          </p>
        </td>
      </tr>
    </table>
    <p class="c1"><span class="c0"></span></p>
    <p class="c7">
      <span class="c5">Func&#539;ia </span
      ><span class="c5 c10">setcookie()</span
      ><span class="c0">&nbsp;poate primi urm&#259;torii parametri:</span>
    </p>
    <p class="c1"><span class="c0"></span></p>
    <ul class="c4 lst-kix_wtaisker1n91-0 start">
      <li class="c7 c19 c12 li-bullet-0">
        <span class="c14">name</span
        ><span class="c0"
          >: numele cookie-ului, care va fi folosit pentru accesarea valorii
          sale</span
        >
      </li>
    </ul>
    <p class="c1 c12"><span class="c0"></span></p>
    <ul class="c4 lst-kix_wtaisker1n91-0">
      <li class="c7 c19 c12 li-bullet-0">
        <span class="c14">value</span
        ><span class="c0"
          >: valoarea sau con&#539;inutul cookie-ului - orice text alfanumeric
          nu mai mare de 4 kB</span
        >
      </li>
    </ul>
    <p class="c1 c12"><span class="c0"></span></p>
    <ul class="c4 lst-kix_wtaisker1n91-0">
      <li class="c7 c12 c19 li-bullet-0">
        <span class="c14">expire </span
        ><span class="c5"
          >(parametru op&#539;ional): perioada de valabilitate &icirc;n secunde,
          dup&#259; care cookie-ul este distrus. Dac&#259; acest parametru nu
          este setat sau este egal cu 0, atunci distrugerea cookie-ului are loc
          dup&#259; &icirc;nchiderea browserului. De obicei se seteaz&#259;
          relativ la timpul curent, care poate fi ob&#539;inut cu ajutorul
          func&#539;iei </span
        ><span class="c5 c10 c22">time()</span>
      </li>
    </ul>
    <p class="c1 c12"><span class="c0"></span></p>
    <ul class="c4 lst-kix_wtaisker1n91-0">
      <li class="c7 c19 c12 li-bullet-0">
        <span class="c14">path </span
        ><span class="c5"
          >(parametru op&#539;ional): calea c&#259;tre directorul de pe server
          pentru care cookie-ul va fi disponibil. Dac&#259; se seteaz&#259;
          &quot;/&quot;, cookie-ul va fi disponibil pentru &icirc;ntregul site.
          Dac&#259; se seteaz&#259;, de exemplu, &quot;</span
        ><span class="c5 c10">/mydir</span
        ><span class="c0"
          >/&quot;, cookie-ul va fi disponibil doar din directorul /mydir/
          &#537;i toate subdirectoarele sale. Implicit, valoarea este directorul
          curent &icirc;n care este setat cookie-ul.</span
        >
      </li>
    </ul>
    <p class="c1 c12"><span class="c0"></span></p>
    <ul class="c4 lst-kix_wtaisker1n91-0">
      <li class="c7 c19 c12 li-bullet-0">
        <span class="c14">domain </span
        ><span class="c0"
          >(parametru op&#539;ional): specific&#259; domeniul pentru care
          cookie-ul va fi disponibil. Dac&#259; acesta este un domeniu de
          nivelul doi, de exemplu, localhost.com, atunci cookie-ul va fi
          disponibil pentru &icirc;ntregul site localhost.com, inclusiv pentru
          subdomeniile sale de tipul blog.localhost.com. Dac&#259; este
          specificat subdomeniul blog.localhost.com, cookie-ul va fi disponibil
          doar &icirc;n interiorul acestui subdomeniu.</span
        >
      </li>
    </ul>
    <p class="c1 c12"><span class="c0"></span></p>
    <ul class="c4 lst-kix_wtaisker1n91-0">
      <li class="c7 c19 c12 li-bullet-0">
        <span class="c14">secure </span
        ><span class="c5"
          >(parametru op&#539;ional): indic&#259; faptul c&#259; valoarea
          cookie-ului trebuie transmis&#259; prin protocolul HTTPS. Dac&#259;
          este setat </span
        ><span class="c5 c10">true</span
        ><span class="c5"
          >, cookie-ul de la client va fi transmis c&#259;tre server doar
          dac&#259; este stabilit&#259; o conexiune securizat&#259;. Implicit
          este </span
        ><span class="c5 c10">false</span><span class="c0">.</span>
      </li>
    </ul>
    <p class="c1 c12"><span class="c0"></span></p>
    <ul class="c4 lst-kix_wtaisker1n91-0">
      <li class="c7 c19 c12 li-bullet-0">
        <span class="c14">httponly </span
        ><span class="c5">(parametru op&#539;ional): dac&#259; este </span
        ><span class="c5 c10">true</span
        ><span class="c5"
          >, cookie-urile vor fi disponibile doar prin protocolul HTTP.
          Adic&#259;, cookie-urile &icirc;n acest caz nu vor fi disponibile
          limbajelor de scripting, de exemplu, JavaScript. Implicit, parametrul
          este </span
        ><span class="c5 c10">false</span><span class="c0">.</span>
      </li>
    </ul>
    <p class="c1"><span class="c0"></span></p>
    <p class="c7"><span class="c0">Salv&#259;m cookie:</span></p>
    <p class="c1"><span class="c0"></span></p>
    <a id="t.33d3ccacaebd6b13f5a444aa98abc4c3ecbefa0e"></a><a id="t.1"></a>
    <table class="c3">
      <tr class="c11">
        <td class="c8" colspan="1" rowspan="1">
          <p class="c16">
            <span class="c17">&lt;?php</span
            ><span class="c6"><br />$name = </span
            ><span class="c15">&quot;Tom&quot;</span
            ><span class="c6">;<br />$age = </span><span class="c18">36</span
            ><span class="c6">;<br />setcookie(</span
            ><span class="c15">&quot;name&quot;</span
            ><span class="c6">, $name);<br />setcookie(</span
            ><span class="c15">&quot;age&quot;</span
            ><span class="c6">, $age, time() + </span
            ><span class="c18">3600</span><span class="c6">); &nbsp;</span
            ><span class="c9"
              >// perioada de valabilitate - 1 or&#259; (3600 secunde)</span
            ><span class="c6"><br /></span><span class="c13">echo</span
            ><span class="c6">&nbsp;</span
            ><span class="c15">&quot;Cookie-urile au fost setate&quot;</span
            ><span class="c6">;<br /></span><span class="c17">?&gt;</span>
          </p>
        </td>
      </tr>
    </table>
    <p class="c1"><span class="c0"></span></p>
    <p class="c7">
      <span class="c0"
        >Aici sunt setate dou&#259; cookie-uri: &quot;name&quot; &#537;i
        &quot;age&quot;. Primul cookie este distrus dup&#259; &icirc;nchiderea
        browserului, iar al doilea - dup&#259; 3600 de secunde, adic&#259;
        dup&#259; o or&#259;.</span
      >
    </p>
    <p class="c1"><span class="c0"></span></p>
    <p class="c7">
      <span class="c0"
        >Dac&#259; este necesar, putem vedea cookie-urile salvate &icirc;n
        browser cu ajutorul instrumentelor de dezvoltare. De exemplu, aspectul
        cookie-urilor &icirc;n Google Chrome:</span
      >
    </p>
    <p class="c1"><span class="c0"></span></p>
    <p class="c7">
      <span
        style="
          overflow: hidden;
          display: inline-block;
          margin: 0px 0px;
          border: 0px solid #000000;
          transform: rotate(0rad) translateZ(0px);
          -webkit-transform: rotate(0rad) translateZ(0px);
          width: 624px;
          height: 262.67px;
        "
        ><img
          alt=""
          src="images/image1.png"
          style="
            width: 624px;
            height: 262.67px;
            margin-left: 0px;
            margin-top: 0px;
            transform: rotate(0rad) translateZ(0px);
            -webkit-transform: rotate(0rad) translateZ(0px);
          "
          title=""
      /></span>
    </p>
    <p class="c1"><span class="c0"></span></p>
    <p class="c7">
      <span class="c0"
        >&Icirc;n cookie-uri se poate salva orice informa&#539;ie, dar nu este
        recomandat s&#259; se salveze date importante din punct de vedere al
        securit&#259;&#539;ii, de exemplu, parole. Iar dac&#259; se
        salveaz&#259; informa&#539;ii importante, acestea ar trebui stocate
        &icirc;ntr-un format criptat.</span
      >
    </p>
    <p class="c1"><span class="c0"></span></p>
    <p class="c7"><span class="c2">Ob&#539;inerea cookie-urilor.</span></p>
    <p class="c1"><span class="c0"></span></p>
    <p class="c7">
      <span class="c5"
        >Pentru a ob&#539;ine cookie-uri, se poate folosi array-ul asociativ
        global </span
      ><span class="c14">$_COOKIE</span><span class="c5">, de exemplu,</span
      ><span class="c5 c10">&nbsp;$_COOKIE[&quot;name&quot;]</span
      ><span class="c0"
        >. Astfel, ob&#539;inem cookie-urile salvate anterior:</span
      >
    </p>
    <p class="c1"><span class="c0"></span></p>
    <a id="t.8ac6fb95a76674fcb6de9fc68921e34c15d338eb"></a><a id="t.2"></a>
    <table class="c3">
      <tr class="c11">
        <td class="c8" colspan="1" rowspan="1">
          <p class="c16">
            <span class="c17">&lt;?php</span><span class="c6"><br /></span
            ><span class="c13">if</span><span class="c6">&nbsp;(</span
            ><span class="c13">isset</span><span class="c6">($_COOKIE[</span
            ><span class="c15">&quot;name&quot;</span
            ><span class="c6">])) </span><span class="c13">echo</span
            ><span class="c6">&nbsp;</span
            ><span class="c15">&quot;Name: &quot;</span
            ><span class="c6">&nbsp;. $_COOKIE[</span
            ><span class="c15">&quot;name&quot;</span
            ><span class="c6">] . </span
            ><span class="c15">&quot;&lt;br&gt;&quot;</span
            ><span class="c6">;<br /></span><span class="c13">if</span
            ><span class="c6">&nbsp;(</span><span class="c13">isset</span
            ><span class="c6">($_COOKIE[</span
            ><span class="c15">&quot;age&quot;</span><span class="c6">])) </span
            ><span class="c13">echo</span><span class="c6">&nbsp;</span
            ><span class="c15">&quot;Age: &quot;</span
            ><span class="c6">&nbsp;. $_COOKIE[</span
            ><span class="c15">&quot;age&quot;</span><span class="c6">] . </span
            ><span class="c15">&quot;&lt;br&gt;&quot;</span
            ><span class="c6">;<br /></span><span class="c17">?&gt;</span>
          </p>
        </td>
      </tr>
    </table>
    <p class="c1"><span class="c0"></span></p>
    <p class="c7">
      <span class="c2">Salvarea array-urilor &icirc;n cookie.</span>
    </p>
    <p class="c1"><span class="c0"></span></p>
    <p class="c7">
      <span class="c0"
        >Salvarea array-urilor &icirc;n cookie are c&acirc;teva
        particularit&#259;&#539;i. De exemplu, salv&#259;m urm&#259;torul
        array:</span
      >
    </p>
    <p class="c1"><span class="c0"></span></p>
    <a id="t.ddf9c8bb1bd386ba084d7c0dd3b930a1cc8dd6b9"></a><a id="t.3"></a>
    <table class="c3">
      <tr class="c11">
        <td class="c8" colspan="1" rowspan="1">
          <p class="c16">
            <span class="c6">setcookie(</span
            ><span class="c15">&quot;lang[1]&quot;</span
            ><span class="c6">, </span><span class="c15">&quot;PHP&quot;</span
            ><span class="c6">);<br />setcookie(</span
            ><span class="c15">&quot;lang[2]&quot;</span
            ><span class="c6">, </span><span class="c15">&quot;C#&quot;</span
            ><span class="c6">);<br />setcookie(</span
            ><span class="c15">&quot;lang[3]&quot;</span
            ><span class="c6">, </span><span class="c15">&quot;Java&quot;</span
            ><span class="c6">);</span>
          </p>
        </td>
      </tr>
    </table>
    <p class="c1"><span class="c0"></span></p>
    <p class="c7">
      <span class="c0"
        >Acum &icirc;l ob&#539;inem &#537;i &icirc;l afi&#537;&#259;m pe
        pagin&#259;:</span
      >
    </p>
    <p class="c1"><span class="c0"></span></p>
    <a id="t.15c94b7701de5f3f24eeb05a0320f6dda68221a6"></a><a id="t.4"></a>
    <table class="c3">
      <tr class="c11">
        <td class="c8" colspan="1" rowspan="1">
          <p class="c16">
            <span class="c13">if</span><span class="c6">&nbsp;(</span
            ><span class="c13">isset</span><span class="c6">($_COOKIE[</span
            ><span class="c15">&quot;lang&quot;</span
            ><span class="c6"
              >])) {<br />
              &nbsp; &nbsp;</span
            ><span class="c13">foreach</span
            ><span class="c6">&nbsp;($_COOKIE[</span
            ><span class="c15">&quot;lang&quot;</span><span class="c6">] </span
            ><span class="c13">as</span
            ><span class="c6"
              >&nbsp;$name =&gt; $value) {<br />
              &nbsp; &nbsp; &nbsp; &nbsp;$name = htmlspecialchars($name);<br />
              &nbsp; &nbsp; &nbsp; &nbsp;$value = htmlspecialchars($value);<br />
              &nbsp; &nbsp; &nbsp; &nbsp;</span
            ><span class="c13">echo</span><span class="c6">&nbsp;</span
            ><span class="c15">&quot;$name. $value &lt;br /&gt;&quot;</span
            ><span class="c6"
              >;<br />
              &nbsp; &nbsp;}<br />}</span
            >
          </p>
        </td>
      </tr>
    </table>
    <p class="c1"><span class="c0"></span></p>
    <p class="c7"><span class="c2">&#536;tergerea cookie-urilor.</span></p>
    <p class="c1"><span class="c0"></span></p>
    <p class="c7">
      <span class="c0"
        >Pentru a &#537;terge cookie-urile, este suficient s&#259; set&#259;m
        perioada de valabilitate la un timp din trecut:</span
      >
    </p>
    <p class="c1"><span class="c0"></span></p>
    <a id="t.66eb62b9e52b2d8d6def680ea2e2483338a9a7f1"></a><a id="t.5"></a>
    <table class="c3">
      <tr class="c11">
        <td class="c8" colspan="1" rowspan="1">
          <p class="c16">
            <span class="c6">setcookie(</span
            ><span class="c15">&quot;name&quot;</span><span class="c6">, </span
            ><span class="c15">&quot;&quot;</span
            ><span class="c6">, time() - </span><span class="c18">3600</span
            ><span class="c6">);</span>
          </p>
        </td>
      </tr>
    </table>
    <p class="c1"><span class="c0"></span></p>
    <p class="c1"><span class="c0"></span></p>
  </body>
</html>
