<html>
  <head>
    <meta content="text/html; charset=UTF-8" http-equiv="content-type" />
    <link rel="stylesheet" type="text/css" href="/lessons/styles.css">
  </head>
  <body class="c19 doc-content">
    <h1 class="c1 c12">Funcționalități de bază ale PHP.</h1>
    <p class="c1 c2"><span class="c5"></span></p>
    <p class="c1">
      <span class="c6">Includerea fi&#537;ierelor externe.</span>
    </p>
    <p class="c1 c2"><span class="c5"></span></p>
    <p class="c1">
      <span class="c5"
        >&Icirc;n dezvoltarea programelor PHP, este posibil s&#259; dorim
        s&#259; utiliz&#259;m anumite p&#259;r&#539;i de cod &icirc;n alte
        fi&#537;iere PHP. &Icirc;n acest caz, putem distribui codul &icirc;n
        fi&#537;iere separate. Aceasta ne permite s&#259; nu scriem acela&#537;i
        cod de mai multe ori &icirc;n sute de scripturi, fiind suficient s&#259;
        includem fi&#537;ierul cu codul PHP. &Icirc;n plus, dac&#259; este
        necesar s&#259; modific&#259;m comportamentul codului inclus, este
        suficient s&#259; modific&#259;m codul din fi&#537;ierul inclus.</span
      >
    </p>
    <p class="c1 c2"><span class="c5"></span></p>
    <p class="c1">
      <span class="c5"
        >PHP ofer&#259; mai multe modalit&#259;&#539;i pentru includerea
        fi&#537;ierelor.</span
      >
    </p>
    <p class="c1 c2"><span class="c5"></span></p>
    <p class="c1"><span class="c6">Instruc&#539;iunea include.</span></p>
    <p class="c1 c2"><span class="c5"></span></p>
    <p class="c1">
      <span class="c16">Instruc&#539;iunea </span
      ><span class="c14">include </span><span class="c16">conecteaz&#259; </span
      ><span class="c16"
        >&icirc;n program un fi&#537;ier extern cu cod PHP. De exemplu, s&#259;
        definim fi&#537;ierul </span
      ><span class="c14">welcome.php</span><span class="c5">:</span>
    </p>
    <p class="c1 c2"><span class="c5"></span></p>
    <a id="t.c8d26b3abd2449375f1c505d57efd876affd508b"></a><a id="t.0"></a>
    <table class="c4">
      <tr class="c17">
        <td class="c8" colspan="1" rowspan="1">
          <p class="c0">
            <span class="c3">&lt;?php</span><span class="c10"><br /></span
            ><span class="c13">function</span><span class="c10">&nbsp;</span
            ><span class="c15">welcome</span
            ><span class="c10"
              >($name)<br />{<br />
              &nbsp; &nbsp;</span
            ><span class="c13">echo</span><span class="c10">&nbsp;</span
            ><span class="c11">&quot;Hello, $name&quot;</span
            ><span class="c10">;<br />}<br /></span
            ><span class="c3">?&gt;</span>
          </p>
        </td>
      </tr>
    </table>
    <p class="c1 c2"><span class="c5"></span></p>
    <p class="c1 c2"><span class="c5"></span></p>
    <p class="c1">
      <span class="c16">Aici este definit&#259; func&#539;ia </span
      ><span class="c9">welcome</span
      ><span class="c5"
        >, care prime&#537;te ca parametru un nume &#537;i &icirc;l
        folose&#537;te pentru a afi&#537;a un mesaj de salut.</span
      >
    </p>
    <p class="c1 c2"><span class="c5"></span></p>
    <p class="c1">
      <span class="c5"
        >Acum s&#259; includem acest fi&#537;ier &icirc;n programul nostru, care
        este definit &icirc;ntr-un alt fi&#537;ier &icirc;n acela&#537;i
        director:</span
      >
    </p>
    <p class="c1 c2"><span class="c5"></span></p>
    <a id="t.e7a2ebaca90267a685b3e94a2d249a592375845f"></a><a id="t.1"></a>
    <table class="c4">
      <tr class="c17">
        <td class="c8" colspan="1" rowspan="1">
          <p class="c0">
            <span class="c3">&lt;?php</span><span class="c10"><br /></span
            ><span class="c13">include</span><span class="c10">&nbsp;</span
            ><span class="c11">&quot;welcome.php&quot;</span
            ><span class="c10">;<br /><br />$name = </span
            ><span class="c11">&quot;Tom&quot;</span
            ><span class="c10">;<br />welcome($name);<br /></span
            ><span class="c3">?&gt;</span>
          </p>
        </td>
      </tr>
    </table>
    <p class="c1 c2"><span class="c5"></span></p>
    <p class="c1">
      <span class="c16"
        >&Icirc;n locul unde este definit&#259; instruc&#539;iunea include, va
        fi inserat &icirc;ntregul cod din fi&#537;ierul </span
      ><span class="c14">welcome.php</span
      ><span class="c5"
        >. Inserarea fi&#537;ierului trebuie s&#259; aib&#259; loc &icirc;nainte
        de utilizarea func&#539;iei definite &icirc;n acel fi&#537;ier. &Icirc;n
        acest caz, fi&#537;ierul welcome.php &#537;i fi&#537;ierul &icirc;n care
        este inclus sunt situate &icirc;n acela&#537;i director.</span
      >
    </p>
    <p class="c1 c2"><span class="c5"></span></p>
    <p class="c1">
      <span class="c16">Instruc&#539;iunea </span
      ><span class="c9">include </span
      ><span class="c5"
        >poate folosi at&acirc;t c&#259;i relative, c&acirc;t &#537;i absolute.
        De exemplu, mai sus am folosit o cale relativ&#259;. Sau, de exemplu,
        dac&#259; avem urm&#259;toarea structur&#259;:</span
      >
    </p>
    <p class="c1 c2"><span class="c5"></span></p>
    <p class="c1">
      <span class="c16">- Fi&#537;ierul</span
      ><span class="c7">&nbsp;index.php</span>
    </p>
    <p class="c1 c2"><span class="c5"></span></p>
    <p class="c1">
      <span class="c16">- Directorul </span><span class="c7">scripts</span>
    </p>
    <p class="c1 c2"><span class="c5"></span></p>
    <p class="c1">
      <span class="c16">- Fi&#537;ierul </span
      ><span class="c7">welcome.php</span>
    </p>
    <p class="c1 c2"><span class="c5"></span></p>
    <p class="c1">
      <span class="c16">Pentru a include fi&#537;ierul </span
      ><span class="c14">welcome.php</span
      ><span class="c16"
        >&nbsp;din directorul scripts &icirc;n fi&#537;ierul </span
      ><span class="c14">index.php</span
      ><span class="c5"
        >, trebuie s&#259; folosim urm&#259;toarea cale relativ&#259;:</span
      >
    </p>
    <p class="c1 c2"><span class="c5"></span></p>
    <a id="t.d4075ba330e4e3929942f5935d5961c6fe3a64e1"></a><a id="t.2"></a>
    <table class="c4">
      <tr class="c17">
        <td class="c8" colspan="1" rowspan="1">
          <p class="c0">
            <span class="c13">include</span><span class="c10">&nbsp;</span
            ><span class="c11">&quot;scripts/welcome.php&quot;</span
            ><span class="c10">;</span>
          </p>
        </td>
      </tr>
    </table>
    <p class="c1 c2"><span class="c5"></span></p>
    <p class="c1">
      <span class="c16">Dac&#259; fi&#537;ierul</span
      ><span class="c9">&nbsp;welcome.php</span
      ><span class="c16">&nbsp;este situat la calea complet&#259; </span
      ><span class="c9">C:\localhost\scripts\welcome.php</span
      ><span class="c5">, putem folosi &#537;i o cale absolut&#259;:</span>
    </p>
    <p class="c1 c2"><span class="c5"></span></p>
    <a id="t.78a68b8ea39af29dc31d98fbe199ab106e474bda"></a><a id="t.3"></a>
    <table class="c4">
      <tr class="c17">
        <td class="c8" colspan="1" rowspan="1">
          <p class="c0">
            <span class="c13">include</span><span class="c10">&nbsp;</span
            ><span class="c11"
              >&quot;C:\localhost\scripts\welcome.php&quot;</span
            ><span class="c10">;</span>
          </p>
        </td>
      </tr>
    </table>
    <p class="c1 c2"><span class="c5"></span></p>
    <p class="c1"><span class="c6">Instruc&#539;iunea include_once.</span></p>
    <p class="c1 c2"><span class="c5"></span></p>
    <p class="c1">
      <span class="c5"
        >Utilizarea instruc&#539;iunii include are dezavantaje. De exemplu,
        putem include din gre&#537;eal&#259; acela&#537;i fi&#537;ier de mai
        multe ori &icirc;n diferite locuri din cod, ceea ce va provoca erori la
        rularea codului.</span
      >
    </p>
    <p class="c1 c2"><span class="c5"></span></p>
    <p class="c1">
      <span class="c16"
        >Pentru a evita includerea repetat&#259; a fi&#537;ierului, &icirc;n loc
        de </span
      ><span class="c9">include </span
      ><span class="c16">ar trebui s&#259; folosim instruc&#539;iunea</span
      ><span class="c14">&nbsp;include_once</span><span class="c5">:</span>
    </p>
    <p class="c1 c2"><span class="c5"></span></p>
    <a id="t.0c65f29aba436c2443af2aaf6f681be518ff7d64"></a><a id="t.4"></a>
    <table class="c4">
      <tr class="c17">
        <td class="c8" colspan="1" rowspan="1">
          <p class="c0">
            <span class="c3">&lt;?php</span><span class="c10"><br /></span
            ><span class="c13">include_once</span><span class="c10">&nbsp;</span
            ><span class="c11">&quot;welcome.php&quot;</span
            ><span class="c10">;<br /><br />$name = </span
            ><span class="c11">&quot;Sam&quot;</span
            ><span class="c10">;<br />welcome($name);<br /></span
            ><span class="c3">?&gt;</span>
          </p>
        </td>
      </tr>
    </table>
    <p class="c1 c2"><span class="c5"></span></p>
    <p class="c1">
      <span class="c16"
        >&#536;i acum, dac&#259; includem acela&#537;i fi&#537;ier cu
        ajutorul</span
      ><span class="c9">&nbsp;include_once</span
      ><span class="c5"
        >&nbsp;&icirc;nc&#259; o dat&#259; mai jos, aceast&#259; includere va fi
        ignorat&#259;, deoarece fi&#537;ierul a fost deja inclus &icirc;n
        program.</span
      >
    </p>
    <p class="c1 c2"><span class="c5"></span></p>
    <p class="c1">
      <span class="c6">Instruc&#539;iunile require &#537;i require_once.</span>
    </p>
    <p class="c1 c2"><span class="c5"></span></p>
    <p class="c1">
      <span class="c16">Instruc&#539;iunea </span
      ><span class="c14">require </span
      ><span class="c16"
        >func&#539;ioneaz&#259; similar cu include: include un fi&#537;ier
        extern, inser&acirc;nd con&#539;inutul acestuia &icirc;n program.
        Totu&#537;i, dac&#259; fi&#537;ierul nu este g&#259;sit, execu&#539;ia
        programului se va opri (instruc&#539;iunea </span
      ><span class="c9">include </span
      ><span class="c5"
        >&icirc;n acest caz arunc&#259; doar un avertisment):</span
      >
    </p>
    <p class="c1 c2"><span class="c5"></span></p>
    <a id="t.23f30b3fa5cefc46d40dc24df6ad50442847955d"></a><a id="t.5"></a>
    <table class="c4">
      <tr class="c17">
        <td class="c8" colspan="1" rowspan="1">
          <p class="c0">
            <span class="c3">&lt;?php</span><span class="c10"><br /></span
            ><span class="c13">require</span><span class="c10">&nbsp;</span
            ><span class="c11">&quot;welcome.php&quot;</span
            ><span class="c10">;<br /></span><span class="c3">?&gt;</span>
          </p>
        </td>
      </tr>
    </table>
    <p class="c1 c2"><span class="c5"></span></p>
    <p class="c1">
      <span class="c16"
        >De asemenea, dac&#259; &icirc;n cod &icirc;nt&acirc;lnim mai multe
        instruc&#539;iuni </span
      ><span class="c9">require </span
      ><span class="c16"
        >care includ acela&#537;i fi&#537;ier, interpretul va genera o eroare.
        Pentru a evita aceast&#259; situa&#539;ie, ar trebui s&#259; folosim
        instruc&#539;iunea </span
      ><span class="c14">require_once</span><span class="c5">:</span>
    </p>
    <p class="c1 c2"><span class="c5"></span></p>
    <a id="t.971fd071bb6cb2c868424482d56e63374e8c477c"></a><a id="t.6"></a>
    <table class="c4">
      <tr class="c17">
        <td class="c8" colspan="1" rowspan="1">
          <p class="c0">
            <span class="c3">&lt;?php</span><span class="c10"><br /></span
            ><span class="c13">require_once</span><span class="c10">&nbsp;</span
            ><span class="c11">&quot;welcome.php&quot;</span
            ><span class="c10">;<br /></span><span class="c3">?&gt;</span>
          </p>
        </td>
      </tr>
    </table>
    <p class="c1 c2"><span class="c5"></span></p>
    <p class="c1">
      <span class="c6">Func&#539;ia spl_autoload_register.</span>
    </p>
    <p class="c1 c2"><span class="c5"></span></p>
    <p class="c1">
      <span class="c16"
        >&Icirc;n aplica&#539;iile mari, num&#259;rul fi&#537;ierelor incluse
        poate fi destul de mare. Totu&#537;i, func&#539;ia
        &icirc;ncorporat&#259;</span
      ><span class="c14">&nbsp;spl_autoload_register()</span
      ><span class="c5"
        >&nbsp;&icirc;n anumite situa&#539;ii permite evitarea unui num&#259;r
        mare de include-uri. Aceast&#259; func&#539;ie accept&#259; ca parametru
        o func&#539;ie de autoload. Aceast&#259; func&#539;ie este apelat&#259;
        automat atunci c&acirc;nd &icirc;n program &icirc;ncepe s&#259; fie
        utilizat&#259; o clas&#259; sau un interfa&#539;&#259; necunoscut&#259;.
        Func&#539;ia de autoload &icirc;ncearc&#259; s&#259; &icirc;ncarce
        aceast&#259; clas&#259; sau interfa&#539;&#259;. Ca parametru,
        func&#539;ia de autoload prime&#537;te numele clasei sau interfe&#539;ei
        care trebuie &icirc;nc&#259;rcat&#259;.</span
      >
    </p>
    <p class="c1 c2"><span class="c5"></span></p>
    <p class="c1">
      <span class="c16"
        >De exemplu, s&#259; presupunem c&#259; avem fi&#537;ierul </span
      ><span class="c14">Person.php</span
      ><span class="c16">, care con&#539;ine clasa </span
      ><span class="c14">Person</span><span class="c5">:</span>
    </p>
    <p class="c1 c2"><span class="c5"></span></p>
    <a id="t.bedf6633ba31e3ca14702e4047472a1ea0ee761d"></a><a id="t.7"></a>
    <table class="c4">
      <tr class="c17">
        <td class="c8" colspan="1" rowspan="1">
          <p class="c0">
            <span class="c3">&lt;?php</span><span class="c10"><br /></span
            ><span class="c13">class</span><span class="c10">&nbsp;</span
            ><span class="c15">Person</span
            ><span class="c10"
              ><br />{<br />
              &nbsp; &nbsp;</span
            ><span class="c13">private</span
            ><span class="c10"
              >&nbsp;$name, $age;<br />
              &nbsp; &nbsp;</span
            ><span class="c13">function</span><span class="c10">&nbsp;</span
            ><span class="c15">__construct</span
            ><span class="c10"
              >($name, $age)<br />
              &nbsp; &nbsp;{<br />
              &nbsp; &nbsp; &nbsp; &nbsp;</span
            ><span class="c13">$this</span
            ><span class="c10"
              >-&gt;name = $name;<br />
              &nbsp; &nbsp; &nbsp; &nbsp;</span
            ><span class="c13">$this</span
            ><span class="c10"
              >-&gt;age = $age;<br />
              &nbsp; &nbsp;}<br />
              &nbsp; &nbsp;</span
            ><span class="c13">function</span><span class="c10">&nbsp;</span
            ><span class="c15">printInfo</span
            ><span class="c10"
              >()<br />
              &nbsp; &nbsp;{<br />
              &nbsp; &nbsp; &nbsp; &nbsp;</span
            ><span class="c13">echo</span><span class="c10">&nbsp;</span
            ><span class="c11"
              >&quot;Name: $this-&gt;name&lt;br&gt;Age:
              $this-&gt;age&quot;</span
            ><span class="c10"
              >;<br />
              &nbsp; &nbsp;}<br />}<br /></span
            ><span class="c3">?&gt;</span>
          </p>
        </td>
      </tr>
    </table>
    <p class="c1 c2"><span class="c5"></span></p>
    <p class="c1">
      <span class="c5"
        >Observa&#539;i c&#259; numele fi&#537;ierului corespunde numelui
        clasei.</span
      >
    </p>
    <p class="c1 c2"><span class="c5"></span></p>
    <p class="c1">
      <span class="c5"
        >Utiliz&#259;m func&#539;ia de autoload pentru a include aceast&#259;
        clas&#259;:</span
      >
    </p>
    <p class="c1 c2"><span class="c5"></span></p>
    <a id="t.70d13bce782ed2cf142351e9e5e52a06dccbeaae"></a><a id="t.8"></a>
    <table class="c4">
      <tr class="c17">
        <td class="c8" colspan="1" rowspan="1">
          <p class="c0">
            <span class="c3">&lt;?php</span><span class="c10"><br /></span
            ><span class="c13">function</span><span class="c10">&nbsp;</span
            ><span class="c15">my_autoloader</span
            ><span class="c10"
              >($class) {<br />
              &nbsp; &nbsp;</span
            ><span class="c13">echo</span><span class="c10">&nbsp;</span
            ><span class="c11"
              >&quot;Apel func&#539;ie de autoload&lt;br&gt;&quot;</span
            ><span class="c10"
              >;<br />
              &nbsp; &nbsp;</span
            ><span class="c13">include</span
            ><span class="c10">&nbsp;$class . </span
            ><span class="c11">&quot;.php&quot;</span
            ><span class="c10"
              >;<br />}<br />
              <br />spl_autoload_register(</span
            ><span class="c11">&quot;my_autoloader&quot;</span
            ><span class="c10">);<br /><br />$tom = </span
            ><span class="c13">new</span><span class="c10">&nbsp;Person(</span
            ><span class="c11">&quot;Tom&quot;</span><span class="c10">, </span
            ><span class="c18">25</span
            ><span class="c10">);<br />$tom-&gt;printInfo();<br /></span
            ><span class="c3">?&gt;</span>
          </p>
        </td>
      </tr>
    </table>
    <p class="c1 c2"><span class="c5"></span></p>
    <p class="c1">
      <span class="c16">Func&#539;ia</span
      ><span class="c9">&nbsp;spl_autoload_register() </span
      ><span class="c16"
        >accept&#259; ca parametru numele func&#539;iei de autoload - &icirc;n
        acest caz, este func&#539;ia </span
      ><span class="c9">my_autoloader()</span
      ><span class="c16"
        >. Ca parametru, aceasta prime&#537;te numele clasei. De exemplu,
        &icirc;n acest caz, este utilizat&#259; clasa Person, care nu este
        definit&#259; &icirc;n acest script. C&acirc;nd programul
        &icirc;nt&acirc;lne&#537;te utilizarea acestei clase, va apela
        func&#539;ia </span
      ><span class="c9">my_autoloader()</span
      ><span class="c16">, iar ca parametru </span
      ><span class="c9">$class </span
      ><span class="c5">&icirc;i va transmite numele clasei Person.</span>
    </p>
    <p class="c1 c2"><span class="c5"></span></p>
    <p class="c1">
      <span class="c16"
        >Toate ac&#539;iunile func&#539;iei de autoload sunt definite de noi.
        &Icirc;n acest caz, folosind </span
      ><span class="c9">echo</span
      ><span class="c5"
        >, afi&#537;&#259;m un mesaj de diagnostic &#537;i includem
        fi&#537;ierul clasei:</span
      >
    </p>
    <p class="c1 c2"><span class="c5"></span></p>
    <a id="t.49501c25cbc36da4e4804159cc40ca2186f73690"></a><a id="t.9"></a>
    <table class="c4">
      <tr class="c17">
        <td class="c8" colspan="1" rowspan="1">
          <p class="c0">
            <span class="c13">include</span
            ><span class="c10">&nbsp;$class . </span
            ><span class="c11">&quot;.php&quot;</span><span class="c10">;</span>
          </p>
        </td>
      </tr>
    </table>
    <p class="c1 c2"><span class="c5"></span></p>
    <p class="c1">
      <span class="c5"
        >&Icirc;n acest caz, nu conteaz&#259; ce clas&#259; este, principalul
        este s&#259; fie stocat&#259; &icirc;ntr-un fi&#537;ier cu acela&#537;i
        nume &#537;i extensia .php. Programul va afi&#537;a
        urm&#259;toarele:</span
      >
    </p>
    <p class="c1 c2"><span class="c5"></span></p>
    <a id="t.a3c028a1597d0e4e17b3ba2080550d498ec68830"></a><a id="t.10"></a>
    <table class="c4">
      <tr class="c17">
        <td class="c8" colspan="1" rowspan="1">
          <p class="c0">
            <span class="c10"
              >Apel func&#539;ie de autoload<br />Name: Tom<br />Age: </span
            ><span class="c18">25</span>
          </p>
        </td>
      </tr>
    </table>
    <p class="c1 c2"><span class="c5"></span></p>
    <p class="c1 c2"><span class="c5"></span></p>
  </body>
</html>
