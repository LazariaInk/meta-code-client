<html>
  <head>
    <meta content="text/html; charset=UTF-8" http-equiv="content-type" />
    <link rel="stylesheet" type="text/css" href="/lessons/styles.css">
  </head>
  <body class="c18 doc-content">
    <h1 class="c4 c14">Sesiuni.</h1>
    <p class="c4 c6"><span class="c0"></span></p>
    <p class="c4">
      <span class="c0"
        >Sesiunile reprezint&#259; un set de variabile care sunt stocate pe
        server (sau par&#539;ial pe server &#537;i par&#539;ial &icirc;n
        cookie-urile browserului) &#537;i care se refer&#259; doar la
        utilizatorul curent. &Icirc;ntr-o anumit&#259; m&#259;sur&#259;,
        sesiunile sunt o alternativ&#259; la cookie-uri &icirc;n ceea ce
        prive&#537;te stocarea datelor despre utilizator.</span
      >
    </p>
    <p class="c4 c6"><span class="c0"></span></p>
    <p class="c4">
      <span class="c12"
        >Pentru a &icirc;ncepe o sesiune, este necesar s&#259; apel&#259;m
        func&#539;ia </span
      ><span class="c17">session_start()</span
      ><span class="c0"
        >. Aceasta trebuie apelat&#259; &icirc;nainte de a trimite
        r&#259;spunsul c&#259;tre utilizator:</span
      >
    </p>
    <p class="c4 c6"><span class="c0"></span></p>
    <a id="t.c5584a37a02bb98ce6e28091ef8493c6f9a36402"></a><a id="t.0"></a>
    <table class="c10">
      <tr class="c8">
        <td class="c9" colspan="1" rowspan="1">
          <p class="c7">
            <span class="c11">&lt;?php</span
            ><span class="c2">&nbsp;session_start(); </span
            ><span class="c11">?&gt;</span>
          </p>
        </td>
      </tr>
    </table>
    <p class="c4 c6"><span class="c0"></span></p>
    <p class="c4">
      <span class="c12"
        >La ini&#539;ierea unei sesiuni cu ajutorul func&#539;iei </span
      ><span class="c3">session_start()</span
      ><span class="c0"
        >, dac&#259; utilizatorul acceseaz&#259; site-ul pentru prima dat&#259;,
        PHP &icirc;i atribuie un identificator unic de sesiune. Acest
        identificator, prin intermediul unui cookie numit implicit
        &quot;PHPSESSID&quot;, este stocat &icirc;n browserul utilizatorului. Cu
        ajutorul acestui identificator, utilizatorul este asociat cu datele
        sesiunii. Dac&#259; sesiunea este deja stabilit&#259; pentru utilizator,
        aceast&#259; func&#539;ie prelunge&#537;te sesiunea curent&#259;
        &icirc;n loc s&#259; stabileasc&#259; una nou&#259;.</span
      >
    </p>
    <p class="c4 c6"><span class="c0"></span></p>
    <p class="c4">
      <span class="c0"
        >Cu ajutorul unor func&#539;ii speciale putem ob&#539;ine
        identificatorul sesiunii:</span
      >
    </p>
    <p class="c4 c6"><span class="c0"></span></p>
    <a id="t.5ae9f65002981e545301c393419129253339a7a4"></a><a id="t.1"></a>
    <table class="c10">
      <tr class="c8">
        <td class="c9" colspan="1" rowspan="1">
          <p class="c7">
            <span class="c2">session_start();<br /></span
            ><span class="c13">echo</span
            ><span class="c2">&nbsp;session_id(); </span
            ><span class="c16">// identificatorul sesiunii</span
            ><span class="c2"><br /></span><span class="c13">echo</span
            ><span class="c2">&nbsp;session_name(); &nbsp;</span
            ><span class="c16">// numele - PHPSESSID</span>
          </p>
        </td>
      </tr>
    </table>
    <p class="c4 c6"><span class="c0"></span></p>
    <p class="c4 c6"><span class="c0"></span></p>
    <p class="c4">
      <span class="c0"
        >Aceea&#537;i valoare am putea-o ob&#539;ine acces&acirc;nd direct
        cookie-ul:</span
      >
    </p>
    <p class="c4 c6"><span class="c0"></span></p>
    <a id="t.d623a5b13567de6e39349d7b9fc87db48e93a804"></a><a id="t.2"></a>
    <table class="c10">
      <tr class="c8">
        <td class="c9" colspan="1" rowspan="1">
          <p class="c7">
            <span class="c13">echo</span><span class="c2">&nbsp;$_COOKIE[</span
            ><span class="c5">&quot;PHPSESSID&quot;</span
            ><span class="c2">];</span>
          </p>
        </td>
      </tr>
    </table>
    <p class="c4 c6"><span class="c0"></span></p>
    <p class="c4">
      <span class="c12"
        >Pentru a salva sau a ob&#539;ine date &icirc;n sesiune, trebuie s&#259;
        folosim array-ul asociativ global</span
      ><span class="c17">&nbsp;$_SESSION</span
      ><span class="c0">. Salvarea unei variabile &icirc;n sesiune:</span>
    </p>
    <p class="c4 c6"><span class="c0"></span></p>
    <a id="t.0396138a1e8770ad98ea56118a7186497f5387f2"></a><a id="t.3"></a>
    <table class="c10">
      <tr class="c8">
        <td class="c9" colspan="1" rowspan="1">
          <p class="c7">
            <span class="c2">$_SESSION[</span
            ><span class="c5">&quot;nume_variabila&quot;</span
            ><span class="c2">] = valoare;</span>
          </p>
        </td>
      </tr>
    </table>
    <p class="c4 c6"><span class="c0"></span></p>
    <p class="c4"><span class="c0">Ob&#539;inerea valorii salvate:</span></p>
    <p class="c4 c6"><span class="c0"></span></p>
    <a id="t.a02637fb246d0b426512638c2ec55191aca9e922"></a><a id="t.4"></a>
    <table class="c10">
      <tr class="c8">
        <td class="c9" colspan="1" rowspan="1">
          <p class="c7">
            <span class="c2">$variabila = $_SESSION[</span
            ><span class="c5">&quot;nume_variabila&quot;</span
            ><span class="c2">];</span>
          </p>
        </td>
      </tr>
    </table>
    <p class="c4 c6"><span class="c0"></span></p>
    <p class="c4"><span class="c1">Salvarea datelor &icirc;n sesiune.</span></p>
    <p class="c4 c6"><span class="c0"></span></p>
    <p class="c4">
      <span class="c0"
        >Ini&#539;iem sesiunea &#537;i salv&#259;m &icirc;n ea valori:</span
      >
    </p>
    <p class="c4 c6"><span class="c0"></span></p>
    <a id="t.bb5e0e72b4a0ccfb906981718a5c8723f09af89b"></a><a id="t.5"></a>
    <table class="c10">
      <tr class="c8">
        <td class="c9" colspan="1" rowspan="1">
          <p class="c7">
            <span class="c11">&lt;?php</span
            ><span class="c2"><br />session_start();<br />$_SESSION[</span
            ><span class="c5">&quot;name&quot;</span><span class="c2">] = </span
            ><span class="c5">&quot;Sam&quot;</span
            ><span class="c2">;<br />$_SESSION[</span
            ><span class="c5">&quot;age&quot;</span><span class="c2">] = </span
            ><span class="c15">41</span><span class="c2">;<br /></span
            ><span class="c13">echo</span><span class="c2">&nbsp;</span
            ><span class="c5"
              >&quot;Datele au fost salvate &icirc;n sesiune&quot;</span
            ><span class="c2">;<br /></span><span class="c11">?&gt;</span>
          </p>
        </td>
      </tr>
    </table>
    <p class="c4 c6"><span class="c0"></span></p>
    <p class="c4">
      <span class="c0"
        >Dup&#259; ini&#539;ierea sesiunii &icirc;n browser, vom putea observa
        setarea unui cookie special numit implicit &quot;PHPSESSID&quot;:</span
      >
    </p>
    <p class="c4 c6"><span class="c0"></span></p>
    <p class="c4">
      <span
        style="
          overflow: hidden;
          display: inline-block;
          margin: 0px 0px;
          border: 0px solid #000000;
          transform: rotate(0rad) translateZ(0px);
          -webkit-transform: rotate(0rad) translateZ(0px);
          width: 624px;
          height: 109.33px;
        "
        ><img
          alt=""
          src="images/image1.png"
          style="
            width: 624px;
            height: 109.33px;
            margin-left: 0px;
            margin-top: 0px;
            transform: rotate(0rad) translateZ(0px);
            -webkit-transform: rotate(0rad) translateZ(0px);
          "
          title=""
      /></span>
    </p>
    <p class="c4 c6"><span class="c0"></span></p>
    <p class="c4 c6"><span class="c1"></span></p>
    <p class="c4 c6"><span class="c1"></span></p>
    <p class="c4">
      <span class="c1">Ob&#539;inerea datelor din sesiune.</span>
    </p>
    <p class="c4 c6"><span class="c0"></span></p>
    <p class="c4">
      <span class="c0"
        >Acum ob&#539;inem aceste valori &#537;i le afi&#537;&#259;m pe
        pagin&#259;:</span
      >
    </p>
    <p class="c4 c6"><span class="c0"></span></p>
    <a id="t.5e2ed8cde1218158dcf3f244e1ba1d9339e6c695"></a><a id="t.6"></a>
    <table class="c10">
      <tr class="c8">
        <td class="c9" colspan="1" rowspan="1">
          <p class="c7">
            <span class="c2">session_start();<br /><br /></span
            ><span class="c13">if</span><span class="c2">&nbsp;(</span
            ><span class="c13">isset</span><span class="c2">($_SESSION[</span
            ><span class="c5">&quot;name&quot;</span
            ><span class="c2">]) &amp;&amp; </span><span class="c13">isset</span
            ><span class="c2">($_SESSION[</span
            ><span class="c5">&quot;age&quot;</span
            ><span class="c2"
              >])) {<br />
              &nbsp; &nbsp;$name = $_SESSION[</span
            ><span class="c5">&quot;name&quot;</span
            ><span class="c2"
              >];<br />
              &nbsp; &nbsp;$age = $_SESSION[</span
            ><span class="c5">&quot;age&quot;</span
            ><span class="c2"
              >];<br />
              &nbsp; &nbsp;</span
            ><span class="c13">echo</span><span class="c2">&nbsp;</span
            ><span class="c5">&quot;Name: $name &lt;br&gt; Age: $age&quot;</span
            ><span class="c2">;<br />}</span>
          </p>
        </td>
      </tr>
    </table>
    <p class="c4 c6"><span class="c0"></span></p>
    <p class="c4">
      <span class="c1">&#536;tergerea datelor din sesiune.</span>
    </p>
    <p class="c4 c6"><span class="c0"></span></p>
    <p class="c4">
      <span class="c0"
        >Sesiunea este distrus&#259; la &icirc;nchiderea browserului,
        &icirc;ns&#259; putem, de asemenea, s&#259; &#537;tergem programatic fie
        anumite date, fie toate datele din sesiune.</span
      >
    </p>
    <p class="c4 c6"><span class="c0"></span></p>
    <p class="c4">
      <span class="c12"
        >Pentru a &#537;terge o variabil&#259; din sesiune, se folose&#537;te
        func&#539;ia </span
      ><span class="c17">unset()</span><span class="c0">:</span>
    </p>
    <p class="c4 c6"><span class="c0"></span></p>
    <a id="t.9ed4ffb383e32d7695b655f03a76b7a38e384c80"></a><a id="t.7"></a>
    <table class="c10">
      <tr class="c8">
        <td class="c9" colspan="1" rowspan="1">
          <p class="c7">
            <span class="c2">session_start();<br /></span
            ><span class="c13">unset</span><span class="c2">($_SESSION[</span
            ><span class="c5">&quot;age&quot;</span
            ><span class="c2">]); &nbsp; &nbsp;</span
            ><span class="c16"
              >// &#537;terge variabila &quot;age&quot; din sesiune</span
            >
          </p>
        </td>
      </tr>
    </table>
    <p class="c4 c6"><span class="c0"></span></p>
    <p class="c4">
      <span class="c12"
        >&#536;tergerea tuturor datelor din sesiune se poate face cu ajutorul
        func&#539;iei </span
      ><span class="c17">session_destroy()</span><span class="c0">:</span>
    </p>
    <p class="c4 c6"><span class="c0"></span></p>
    <p class="c4 c6"><span class="c0"></span></p>
    <a id="t.310ea7243792382eae903fb2848972c6fe897681"></a><a id="t.8"></a>
    <table class="c10">
      <tr class="c8">
        <td class="c9" colspan="1" rowspan="1">
          <p class="c7">
            <span class="c2">session_start();<br />session_destroy();</span>
          </p>
        </td>
      </tr>
    </table>
    <p class="c4 c6"><span class="c0"></span></p>
    <p class="c4 c6"><span class="c0"></span></p>
  </body>
</html>
