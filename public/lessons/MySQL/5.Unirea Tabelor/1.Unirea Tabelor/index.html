<html>

<head>
    <meta content="text/html; charset=UTF-8" http-equiv="content-type">
    <link rel="stylesheet" type="text/css" href="/lessons/styles.css">
</head>

<body class="c16 doc-content">
    <h1 class="c4 c15 c12">Unirea Tabelor. </h1>
    <p class="c4 c15 c5"><span class="c12"></span></p>
    <p class="c4 c15"><span class="c13">Unirea implicit&#259; a tabelelor.</span></p>
    <p class="c4 c15 c5"><span class="c6"></span></p>
    <p class="c4 c15"><span class="c6">Adesea apare nevoia de a ob&#539;ine date &icirc;ntr-o singur&#259; interogare
            din mai multe tabele. Pentru consolidarea datelor din tabele diferite, se pot utiliza diferite metode.
            &Icirc;n acest articol, vom examina o metod&#259; nu foarte r&#259;sp&acirc;ndit&#259;, dar destul de
            simpl&#259;, care implic&#259; unirea implicit&#259; a tabelelor.</span></p>
    <p class="c4 c15 c5"><span class="c6"></span></p>
    <p class="c4 c15"><span class="c6">S&#259; presupunem c&#259; avem urm&#259;toarele tabele, care sunt legate
            &icirc;ntre ele prin rela&#539;ii:</span></p>
    <p class="c4 c5 c15"><span class="c6"></span></p><a id="t.bb693b089d8eabf2c7e0d177ffcf5ef8a8b09d38"></a><a
        id="t.0"></a>
    <table class="c19">
        <tr class="c11">
            <td class="c2" colspan="1" rowspan="1">
                <p class="c4"><span class="c1">CREATE</span><span class="c0">&nbsp;</span><span
                        class="c1">TABLE</span><span class="c0">&nbsp;Products<br>(<br> &nbsp; &nbsp;</span><span
                        class="c1">Id</span><span class="c0">&nbsp;</span><span class="c14">INT</span><span
                        class="c0">&nbsp;AUTO_INCREMENT PRIMARY </span><span class="c1">KEY</span><span class="c0">,<br>
                        &nbsp; &nbsp;ProductName </span><span class="c14">VARCHAR</span><span class="c0">(</span><span
                        class="c10">30</span><span class="c0">) </span><span class="c1">NOT</span><span
                        class="c0">&nbsp;</span><span class="c1">NULL</span><span class="c0">,<br> &nbsp;
                        &nbsp;Manufacturer </span><span class="c14">VARCHAR</span><span class="c0">(</span><span
                        class="c10">20</span><span class="c0">) </span><span class="c1">NOT</span><span
                        class="c0">&nbsp;</span><span class="c1">NULL</span><span class="c0">,<br> &nbsp;
                        &nbsp;ProductCount </span><span class="c14">INT</span><span class="c0">&nbsp;</span><span
                        class="c1">DEFAULT</span><span class="c0">&nbsp;</span><span class="c10">0</span><span
                        class="c0">,<br> &nbsp; &nbsp;Price </span><span class="c14">DECIMAL</span><span
                        class="c0">&nbsp;</span><span class="c1">NOT</span><span class="c0">&nbsp;</span><span
                        class="c1">NULL</span><span class="c0"><br>);<br></span><span class="c1">CREATE</span><span
                        class="c0">&nbsp;</span><span class="c1">TABLE</span><span class="c0">&nbsp;Customers<br>(<br>
                        &nbsp; &nbsp;</span><span class="c1">Id</span><span class="c0">&nbsp;</span><span
                        class="c14">INT</span><span class="c0">&nbsp;AUTO_INCREMENT PRIMARY </span><span
                        class="c1">KEY</span><span class="c0">,<br> &nbsp; &nbsp;FirstName </span><span
                        class="c14">VARCHAR</span><span class="c0">(</span><span class="c10">30</span><span class="c0">)
                    </span><span class="c1">NOT</span><span class="c0">&nbsp;</span><span class="c1">NULL</span><span
                        class="c0"><br>);<br></span><span class="c1">CREATE</span><span class="c0">&nbsp;</span><span
                        class="c1">TABLE</span><span class="c0">&nbsp;Orders<br>(<br> &nbsp; &nbsp;</span><span
                        class="c1">Id</span><span class="c0">&nbsp;</span><span class="c14">INT</span><span
                        class="c0">&nbsp;AUTO_INCREMENT PRIMARY </span><span class="c1">KEY</span><span class="c0">,<br>
                        &nbsp; &nbsp;ProductId </span><span class="c14">INT</span><span class="c0">&nbsp;</span><span
                        class="c1">NOT</span><span class="c0">&nbsp;</span><span class="c1">NULL</span><span
                        class="c0">,<br> &nbsp; &nbsp;CustomerId </span><span class="c14">INT</span><span
                        class="c0">&nbsp;</span><span class="c1">NOT</span><span class="c0">&nbsp;</span><span
                        class="c1">NULL</span><span class="c0">,<br> &nbsp; &nbsp;CreatedAt </span><span
                        class="c14">DATE</span><span class="c0">&nbsp;</span><span class="c1">NOT</span><span
                        class="c0">&nbsp;</span><span class="c1">NULL</span><span class="c0">,<br> &nbsp;
                        &nbsp;ProductCount </span><span class="c14">INT</span><span class="c0">&nbsp;</span><span
                        class="c1">DEFAULT</span><span class="c0">&nbsp;</span><span class="c10">1</span><span
                        class="c0">,<br> &nbsp; &nbsp;Price </span><span class="c14">DECIMAL</span><span
                        class="c0">&nbsp;</span><span class="c1">NOT</span><span class="c0">&nbsp;</span><span
                        class="c1">NULL</span><span class="c0">,<br> &nbsp; &nbsp;FOREIGN </span><span
                        class="c1">KEY</span><span class="c0">&nbsp;(ProductId) </span><span
                        class="c1">REFERENCES</span><span class="c0">&nbsp;Products(</span><span
                        class="c1">Id</span><span class="c0">) </span><span class="c1">ON</span><span
                        class="c0">&nbsp;</span><span class="c1">DELETE</span><span class="c0">&nbsp;</span><span
                        class="c1">CASCADE</span><span class="c0">,<br> &nbsp; &nbsp;FOREIGN </span><span
                        class="c1">KEY</span><span class="c0">&nbsp;(CustomerId) </span><span
                        class="c1">REFERENCES</span><span class="c0">&nbsp;Customers(</span><span
                        class="c1">Id</span><span class="c0">) </span><span class="c1">ON</span><span
                        class="c0">&nbsp;</span><span class="c1">DELETE</span><span class="c0">&nbsp;</span><span
                        class="c1">CASCADE</span><span class="c0"><br>);<br></span></p>
            </td>
        </tr>
    </table>
    <p class="c4 c5"><span class="c6"></span></p>
    <p class="c4"><span class="c6">Aici, tabelele Products &#537;i Customers sunt legate de tabela Orders printr-o
            rela&#539;ie de tipul unu-la-multe. Tabela Orders, sub form&#259; de chei str&#259;ine ProductId &#537;i
            CustomerId, con&#539;ine referin&#539;e c&#259;tre coloanele Id din tabelele Products &#537;i Customers,
            respectiv. De asemenea, aceasta stocheaz&#259; cantitatea de produs achizi&#539;ionat&#259; (ProductCount)
            &#537;i pre&#539;ul la care a fost achizi&#539;ionat (Price). &Icirc;n plus, tabela stocheaz&#259; &#537;i
            data achizi&#539;iei sub forma coloanei CreatedAt.</span></p>
    <p class="c4 c5"><span class="c6"></span></p>
    <p class="c4"><span class="c6">Hai s&#259; presupunem c&#259; aceste tabele con&#539;in urm&#259;toarele
            date:</span></p>
    <p class="c4 c5"><span class="c6"></span></p><a id="t.8cfbb5b8d266f73f617c67fc59069402b9073dc3"></a><a id="t.1"></a>
    <table class="c19">
        <tr class="c11">
            <td class="c2" colspan="1" rowspan="1">
                <p class="c4"><span class="c1">INSERT</span><span class="c0">&nbsp;</span><span
                        class="c1">INTO</span><span class="c0">&nbsp;Products (ProductName, Manufacturer, ProductCount,
                        Price)<br></span><span class="c1">VALUES</span><span class="c0">&nbsp;(</span><span
                        class="c7">&#39;iPhone X&#39;</span><span class="c0">, </span><span
                        class="c7">&#39;Apple&#39;</span><span class="c0">, </span><span class="c10">2</span><span
                        class="c0">, </span><span class="c10">76000</span><span class="c0">),<br>(</span><span
                        class="c7">&#39;iPhone 8&#39;</span><span class="c0">, </span><span
                        class="c7">&#39;Apple&#39;</span><span class="c0">, </span><span class="c10">2</span><span
                        class="c0">, </span><span class="c10">51000</span><span class="c0">),<br>(</span><span
                        class="c7">&#39;iPhone 7&#39;</span><span class="c0">, </span><span
                        class="c7">&#39;Apple&#39;</span><span class="c0">, </span><span class="c10">5</span><span
                        class="c0">, </span><span class="c10">42000</span><span class="c0">),<br>(</span><span
                        class="c7">&#39;Galaxy S9&#39;</span><span class="c0">, </span><span
                        class="c7">&#39;Samsung&#39;</span><span class="c0">, </span><span class="c10">2</span><span
                        class="c0">, </span><span class="c10">56000</span><span class="c0">),<br>(</span><span
                        class="c7">&#39;Galaxy S8&#39;</span><span class="c0">, </span><span
                        class="c7">&#39;Samsung&#39;</span><span class="c0">, </span><span class="c10">1</span><span
                        class="c0">, </span><span class="c10">46000</span><span class="c0">),<br>(</span><span
                        class="c7">&#39;Honor 10&#39;</span><span class="c0">, </span><span
                        class="c7">&#39;Huawei&#39;</span><span class="c0">, </span><span class="c10">2</span><span
                        class="c0">, </span><span class="c10">26000</span><span class="c0">),<br>(</span><span
                        class="c7">&#39;Nokia 8&#39;</span><span class="c0">, </span><span class="c7">&#39;HMD
                        Global&#39;</span><span class="c0">, </span><span class="c10">6</span><span class="c0">,
                    </span><span class="c10">38000</span><span class="c0">);<br> <br></span><span
                        class="c1">INSERT</span><span class="c0">&nbsp;</span><span class="c1">INTO</span><span
                        class="c0">&nbsp;Customers(FirstName) </span><span class="c1">VALUES</span><span
                        class="c0">&nbsp;(</span><span class="c7">&#39;Tom&#39;</span><span class="c0">), (</span><span
                        class="c7">&#39;Bob&#39;</span><span class="c0">),(</span><span
                        class="c7">&#39;Sam&#39;</span><span class="c0">);<br> <br></span><span
                        class="c1">INSERT</span><span class="c0">&nbsp;</span><span class="c1">INTO</span><span
                        class="c0">&nbsp;Orders (ProductId, CustomerId, CreatedAt, ProductCount, Price)<br></span><span
                        class="c1">VALUES</span><span class="c0"><br>( <br> &nbsp; &nbsp;(</span><span
                        class="c1">SELECT</span><span class="c0">&nbsp;</span><span class="c1">Id</span><span
                        class="c0">&nbsp;</span><span class="c1">FROM</span><span class="c0">&nbsp;Products </span><span
                        class="c1">WHERE</span><span class="c0">&nbsp;ProductName=</span><span class="c7">&#39;Galaxy
                        S8&#39;</span><span class="c0">),<br> &nbsp; &nbsp;(</span><span class="c1">SELECT</span><span
                        class="c0">&nbsp;</span><span class="c1">Id</span><span class="c0">&nbsp;</span><span
                        class="c1">FROM</span><span class="c0">&nbsp;Customers </span><span class="c1">WHERE</span><span
                        class="c0">&nbsp;FirstName=</span><span class="c7">&#39;Tom&#39;</span><span class="c0">),<br>
                        &nbsp; &nbsp;</span><span class="c7">&#39;2018-05-21&#39;</span><span class="c0">, <br> &nbsp;
                        &nbsp;</span><span class="c10">2</span><span class="c0">, <br> &nbsp; &nbsp;(</span><span
                        class="c1">SELECT</span><span class="c0">&nbsp;Price </span><span class="c1">FROM</span><span
                        class="c0">&nbsp;Products </span><span class="c1">WHERE</span><span
                        class="c0">&nbsp;ProductName=</span><span class="c7">&#39;Galaxy S8&#39;</span><span
                        class="c0">)<br>),<br>( <br> &nbsp; &nbsp;(</span><span class="c1">SELECT</span><span
                        class="c0">&nbsp;</span><span class="c1">Id</span><span class="c0">&nbsp;</span><span
                        class="c1">FROM</span><span class="c0">&nbsp;Products </span><span class="c1">WHERE</span><span
                        class="c0">&nbsp;ProductName=</span><span class="c7">&#39;iPhone X&#39;</span><span
                        class="c0">),<br> &nbsp; &nbsp;(</span><span class="c1">SELECT</span><span
                        class="c0">&nbsp;</span><span class="c1">Id</span><span class="c0">&nbsp;</span><span
                        class="c1">FROM</span><span class="c0">&nbsp;Customers </span><span class="c1">WHERE</span><span
                        class="c0">&nbsp;FirstName=</span><span class="c7">&#39;Tom&#39;</span><span class="c0">),<br>
                        &nbsp; &nbsp;</span><span class="c7">&#39;2018-05-23&#39;</span><span class="c0">, &nbsp;<br>
                        &nbsp; &nbsp;</span><span class="c10">1</span><span class="c0">, <br> &nbsp; &nbsp;(</span><span
                        class="c1">SELECT</span><span class="c0">&nbsp;Price </span><span class="c1">FROM</span><span
                        class="c0">&nbsp;Products </span><span class="c1">WHERE</span><span
                        class="c0">&nbsp;ProductName=</span><span class="c7">&#39;iPhone X&#39;</span><span
                        class="c0">)<br>),<br>( <br> &nbsp; &nbsp;(</span><span class="c1">SELECT</span><span
                        class="c0">&nbsp;</span><span class="c1">Id</span><span class="c0">&nbsp;</span><span
                        class="c1">FROM</span><span class="c0">&nbsp;Products </span><span class="c1">WHERE</span><span
                        class="c0">&nbsp;ProductName=</span><span class="c7">&#39;iPhone X&#39;</span><span
                        class="c0">),<br> &nbsp; &nbsp;(</span><span class="c1">SELECT</span><span
                        class="c0">&nbsp;</span><span class="c1">Id</span><span class="c0">&nbsp;</span><span
                        class="c1">FROM</span><span class="c0">&nbsp;Customers </span><span class="c1">WHERE</span><span
                        class="c0">&nbsp;FirstName=</span><span class="c7">&#39;Bob&#39;</span><span class="c0">),<br>
                        &nbsp; &nbsp;</span><span class="c7">&#39;2018-05-21&#39;</span><span class="c0">, &nbsp;<br>
                        &nbsp; &nbsp;</span><span class="c10">1</span><span class="c0">, <br> &nbsp; &nbsp;(</span><span
                        class="c1">SELECT</span><span class="c0">&nbsp;Price </span><span class="c1">FROM</span><span
                        class="c0">&nbsp;Products </span><span class="c1">WHERE</span><span
                        class="c0">&nbsp;ProductName=</span><span class="c7">&#39;iPhone X&#39;</span><span
                        class="c0">)<br>);<br></span></p>
            </td>
        </tr>
    </table>
    <p class="c4 c5"><span class="c6"></span></p>
    <p class="c4"><span class="c6">Acum s&#259; unim cele dou&#259; tabele Orders &#537;i Customers:</span></p>
    <p class="c4 c5"><span class="c6"></span></p><a id="t.3ff743dd5b57a4434b26396da5e6ec15677d2e0f"></a><a id="t.2"></a>
    <table class="c19">
        <tr class="c11">
            <td class="c2" colspan="1" rowspan="1">
                <p class="c4"><span class="c1">SELECT</span><span class="c0">&nbsp;* </span><span
                        class="c1">FROM</span><span class="c0">&nbsp;Orders, Customers;</span></p>
            </td>
        </tr>
    </table>
    <p class="c4 c5"><span class="c6"></span></p>
    <p class="c4"><span class="c6">&Icirc;ntr-o astfel de selec&#539;ie, fiecare r&acirc;nd din tabela Orders se va uni
            cu fiecare r&acirc;nd din tabela Customers. Cu alte cuvinte, se ob&#539;ine o uniune transversal&#259;. De
            exemplu, &icirc;n Orders sunt trei r&acirc;nduri, iar &icirc;n Customers, de asemenea, sunt trei
            r&acirc;nduri, deci vom ob&#539;ine 3 * 3 = 9 r&acirc;nduri:</span></p>
    <p class="c4 c5"><span class="c6"></span></p>
    <p class="c4"><span
            style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 624.00px; height: 352.00px;"><img
                alt="" src="images/image1.png"
                style="width: 624.00px; height: 352.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);"
                title=""></span></p>
    <p class="c4 c5"><span class="c6"></span></p>
    <p class="c4"><span class="c6">Dar este pu&#539;in probabil c&#259; acesta este rezultatul dorit. Mai ales c&#259;
            fiecare comand&#259; din Orders este legat&#259; de un client specific din Customers, nu de to&#539;i
            clien&#539;ii posibili.</span></p>
    <p class="c4 c5"><span class="c6"></span></p>
    <p class="c4"><span class="c20">Pentru a rezolva aceast&#259; problem&#259;, este necesar s&#259; utiliz&#259;m
            expresia </span><span class="c3">WHERE </span><span class="c6">&#537;i s&#259; filtr&#259;m r&acirc;ndurile
            &icirc;n condi&#539;ia &icirc;n care c&acirc;mpul CustomerId din Orders corespunde c&acirc;mpului Id din
            Customers:</span></p>
    <p class="c4 c5"><span class="c6"></span></p><a id="t.9678ab14adf373f9b0cda8ad4889e3dea77e07ec"></a><a id="t.3"></a>
    <table class="c19">
        <tr class="c11">
            <td class="c2" colspan="1" rowspan="1">
                <p class="c4"><span class="c1">SELECT</span><span class="c0">&nbsp;* </span><span
                        class="c1">FROM</span><span class="c0">&nbsp;Orders, Customers<br></span><span
                        class="c1">WHERE</span><span class="c0">&nbsp;Orders.CustomerId = Customers.Id;</span></p>
            </td>
        </tr>
    </table>
    <p class="c4"><span
            style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 624.00px; height: 282.67px;"><img
                alt="" src="images/image2.png"
                style="width: 624.00px; height: 282.67px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);"
                title=""></span></p>
    <p class="c4 c5"><span class="c6"></span></p>
    <p class="c4"><span class="c6">Acum vom uni datele din cele trei tabele Orders, Customers &#537;i Products. Cu alte
            cuvinte, vom ob&#539;ine toate comenzile &#537;i vom ad&#259;uga informa&#539;ii despre client &#537;i
            produsul asociat:</span></p>
    <p class="c4 c5"><span class="c6"></span></p><a id="t.79b50ae9678e82dc9cc317578c13a089d79f4582"></a><a id="t.4"></a>
    <table class="c19">
        <tr class="c11">
            <td class="c2" colspan="1" rowspan="1">
                <p class="c4"><span class="c1">SELECT</span><span class="c0">&nbsp;Customers.FirstName,
                        Products.ProductName, Orders.CreatedAt <br></span><span class="c1">FROM</span><span
                        class="c0">&nbsp;Orders, Customers, Products<br></span><span class="c1">WHERE</span><span
                        class="c0">&nbsp;Orders.CustomerId = Customers.Id </span><span class="c1">AND</span><span
                        class="c0">&nbsp;Orders.ProductId=Products.Id;</span></p>
            </td>
        </tr>
    </table>
    <p class="c4 c5"><span class="c6"></span></p>
    <p class="c4"><span class="c8">Deoarece aici trebuie s&#259; unim trei tabele, cel pu&#539;in dou&#259;
            condi&#539;ii sunt aplicate. Tabelul cheie r&#259;m&acirc;ne Orders, din care se extrag toate comenzile,
            &#537;i apoi sunt ata&#537;ate datele despre client &icirc;n func&#539;ie de condi&#539;ia </span><span
            class="c3 c18 c9">Orders.CustomerId = Customers.Id</span><span class="c8">&nbsp;&#537;i datele despre produs
            &icirc;n func&#539;ie de condi&#539;ia </span><span
            class="c3 c9 c18">Orders.ProductId=Products.Id</span><span class="c6 c9">:</span></p>
    <p class="c4"><span
            style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 624.00px; height: 245.33px;"><img
                alt="" src="images/image3.png"
                style="width: 624.00px; height: 245.33px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);"
                title=""></span></p>
    <p class="c4 c5"><span class="c6 c9"></span></p>
    <p class="c4 c5"><span class="c6 c9"></span></p>
    <p class="c4"><span class="c6 c9">&Icirc;n acest caz, numele tabelelor m&#259;resc considerabil codul, dar putem
            s&#259;-l reducem folosind pseudonime de tabel:</span></p>
    <p class="c4 c5"><span class="c6 c9"></span></p><a id="t.82eaa5386a40a513dd7cf813288314a1257445eb"></a><a
        id="t.5"></a>
    <table class="c19">
        <tr class="c11">
            <td class="c2" colspan="1" rowspan="1">
                <p class="c4"><span class="c1">SELECT</span><span class="c0">&nbsp;C.FirstName, P.ProductName,
                        O.CreatedAt <br></span><span class="c1">FROM</span><span class="c0">&nbsp;Orders </span><span
                        class="c1">AS</span><span class="c0">&nbsp;O, Customers </span><span class="c1">AS</span><span
                        class="c0">&nbsp;C, Products </span><span class="c1">AS</span><span
                        class="c0">&nbsp;P<br></span><span class="c1">WHERE</span><span class="c0">&nbsp;O.CustomerId =
                        C.Id </span><span class="c1">AND</span><span class="c0">&nbsp;O.ProductId=P.Id;</span></p>
            </td>
        </tr>
    </table>
    <p class="c4 c5"><span class="c6 c9"></span></p>
    <p class="c4"><span class="c8">Dac&#259; este necesar s&#259; select&#259;m toate coloanele dintr-o anumit&#259;
            tabel&#259; atunci c&acirc;nd folosim un pseudonim, putem utiliza </span><span class="c17 c3 c9">asteriscul
            (*):</span></p>
    <p class="c4 c5"><span class="c17 c3 c9"></span></p><a id="t.8931a981bbbada59a804dfc8b8bdfd1e82da6993"></a><a
        id="t.6"></a>
    <table class="c19">
        <tr class="c11">
            <td class="c2" colspan="1" rowspan="1">
                <p class="c4"><span class="c1">SELECT</span><span class="c0">&nbsp;C.FirstName, P.ProductName,
                        O.*<br></span><span class="c1">FROM</span><span class="c0">&nbsp;Orders </span><span
                        class="c1">AS</span><span class="c0">&nbsp;O, Customers </span><span class="c1">AS</span><span
                        class="c0">&nbsp;C, Products </span><span class="c1">AS</span><span
                        class="c0">&nbsp;P<br></span><span class="c1">WHERE</span><span class="c0">&nbsp;O.CustomerId =
                        C.Id </span><span class="c1">AND</span><span class="c0">&nbsp;O.ProductId=P.Id;</span></p>
            </td>
        </tr>
    </table>
    <p class="c4 c5"><span class="c3 c9 c17"></span></p>
</body>

</html>