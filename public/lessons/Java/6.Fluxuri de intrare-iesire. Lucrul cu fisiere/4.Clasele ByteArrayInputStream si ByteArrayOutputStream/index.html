<html>

<head>
    <meta content="text/html; charset=UTF-8" http-equiv="content-type">
    <link rel="stylesheet" type="text/css" href="/lessons/styles.css">
</head>

<body class="c15 doc-content">
    <h1 class="c4 c17">Clasele ByteArrayInputStream È™i ByteArrayOutputStream.</h1>
    <p class="c4 c7"><span class="c2"></span></p>
    <p class="c4"><span class="c2">Pentru lucrul cu tablouri de octe&#539;i - citirea &#537;i scrierea acestora - se
            utilizeaz&#259; clasele ByteArrayInputStream &#537;i ByteArrayOutputStream.</span></p>
    <p class="c4 c7"><span class="c2"></span></p>
    <p class="c4"><span class="c10">Citirea unui tablou de octe&#539;i &#537;i clasa ByteArrayInputStream.</span></p>
    <p class="c4 c7"><span class="c2"></span></p>
    <p class="c4"><span class="c2">Clasa ByteArrayInputStream reprezint&#259; un flux de intrare care utilizeaz&#259; un
            tablou de octe&#539;i ca surs&#259; de date. Aceasta are urm&#259;torii constructori:</span></p>
    <p class="c4 c7"><span class="c2"></span></p>
    <table class="c5">
        <tr class="c14">
            <td class="c13" colspan="1" rowspan="1">
                <p class="c11"><span class="c1">ByteArrayInputStream(</span><span class="c3">byte</span><span
                        class="c1">[] buf) &nbsp;<br>ByteArrayInputStream(</span><span class="c3">byte</span><span
                        class="c1">[] buf, </span><span class="c3">int</span><span class="c1">&nbsp;offset, </span><span
                        class="c3">int</span><span class="c1">&nbsp;length) &nbsp;</span></p>
            </td>
        </tr>
    </table>
    <p class="c4 c7"><span class="c2"></span></p>
    <p class="c4"><span class="c6">Constructorii folosesc ca parametri un tablou de octe&#539;i buf, din care se face
            citirea, un </span><span class="c0">offset </span><span class="c6">relativ la &icirc;nceputul tabloului
            &#537;i num&#259;rul de caractere citite, </span><span class="c0">length</span><span class="c2">.</span></p>
    <p class="c4 c7"><span class="c2"></span></p>
    <p class="c4"><span class="c2">S&#259; citim un tablou de octe&#539;i &#537;i s&#259;-l afi&#537;&#259;m pe
            ecran:</span></p>
    <p class="c4 c7"><span class="c2"></span></p>
    <table class="c5">
        <tr class="c14">
            <td class="c13" colspan="1" rowspan="1">
                <p class="c11"><span class="c3">import</span><span class="c1">&nbsp;java.io.*;<br><br></span><span
                        class="c3">public</span><span class="c1">&nbsp;</span><span class="c3">class</span><span
                        class="c1">&nbsp;</span><span class="c9">Program</span><span class="c1">&nbsp;{<br><br> &nbsp;
                        &nbsp;</span><span class="c3">public</span><span class="c1">&nbsp;</span><span
                        class="c3">static</span><span class="c1">&nbsp;</span><span class="c3">void</span><span
                        class="c1">&nbsp;</span><span class="c9">main</span><span class="c1">(String[] args) {<br><br>
                        &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">byte</span><span class="c1">[] array1 =
                    </span><span class="c3">new</span><span class="c1">&nbsp;</span><span class="c3">byte</span><span
                        class="c1">[]{</span><span class="c12">1</span><span class="c1">, </span><span
                        class="c12">3</span><span class="c1">, </span><span class="c12">5</span><span class="c1">,
                    </span><span class="c12">7</span><span class="c1">};<br> &nbsp; &nbsp; &nbsp;
                        &nbsp;ByteArrayInputStream byteStream1 = </span><span class="c3">new</span><span
                        class="c1">&nbsp;ByteArrayInputStream(array1);<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span
                        class="c3">int</span><span class="c1">&nbsp;b;<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span
                        class="c3">while</span><span class="c1">&nbsp;((b = byteStream1.read()) != -</span><span
                        class="c12">1</span><span class="c1">) {<br><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;
                        &nbsp;System.out.println(b);<br> &nbsp; &nbsp; &nbsp; &nbsp;}<br><br> &nbsp; &nbsp; &nbsp;
                        &nbsp;String text = </span><span class="c8">&quot;Hello world!&quot;</span><span
                        class="c1">;<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">byte</span><span
                        class="c1">[] array2 = text.getBytes();<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span
                        class="c16">// citim 5 caractere</span><span class="c1"><br> &nbsp; &nbsp; &nbsp;
                        &nbsp;ByteArrayInputStream byteStream2 = </span><span class="c3">new</span><span
                        class="c1">&nbsp;ByteArrayInputStream(array2, </span><span class="c12">0</span><span
                        class="c1">, </span><span class="c12">5</span><span class="c1">);<br> &nbsp; &nbsp; &nbsp;
                        &nbsp;</span><span class="c3">int</span><span class="c1">&nbsp;c;<br> &nbsp; &nbsp; &nbsp;
                        &nbsp;</span><span class="c3">while</span><span class="c1">&nbsp;((c = byteStream2.read()) !=
                        -</span><span class="c12">1</span><span class="c1">) {<br><br> &nbsp; &nbsp; &nbsp; &nbsp;
                        &nbsp; &nbsp;System.out.println((</span><span class="c3">char</span><span class="c1">) c);<br>
                        &nbsp; &nbsp; &nbsp; &nbsp;}<br> &nbsp; &nbsp;}<br>}</span></p>
            </td>
        </tr>
    </table>
    <p class="c4 c7"><span class="c2"></span></p>
    <p class="c4"><span class="c6">Spre deosebire de alte clase de fluxuri, nu este necesar s&#259; apel&#259;m metoda
        </span><span class="c0">close </span><span class="c6">pentru &icirc;nchiderea unui obiect </span><span
            class="c0">ByteArrayInputStream</span><span class="c2">.</span></p>
    <p class="c4 c7"><span class="c2"></span></p>
    <p class="c4"><span class="c10">Scrierea unui tablou de octe&#539;i &#537;i clasa ByteArrayOutputStream.</span></p>
    <p class="c4"><span class="c2">&nbsp;</span></p>
    <p class="c4"><span class="c2">Clasa ByteArrayOutputStream reprezint&#259; un flux de ie&#537;ire care
            utilizeaz&#259; un tablou de octe&#539;i ca loc de scriere.</span></p>
    <p class="c4 c7"><span class="c2"></span></p>
    <p class="c4"><span class="c2">Pentru a crea un obiect din aceast&#259; clas&#259;, putem folosi unul dintre
            constructorii s&#259;i:</span></p>
    <p class="c4 c7"><span class="c2"></span></p>
    <table class="c5">
        <tr class="c14">
            <td class="c13" colspan="1" rowspan="1">
                <p class="c11"><span class="c1">ByteArrayOutputStream() &nbsp;<br>ByteArrayOutputStream(</span><span
                        class="c3">int</span><span class="c1">&nbsp;size) &nbsp;</span></p>
            </td>
        </tr>
    </table>
    <p class="c4 c7"><span class="c2"></span></p>
    <p class="c4"><span class="c2">Prima versiune creeaz&#259; un tablou de octe&#539;i cu o lungime de 32 de
            octe&#539;i, iar a doua versiune creeaz&#259; un tablou cu lungimea size.</span></p>
    <p class="c4 c7"><span class="c2"></span></p>
    <p class="c4"><span class="c2">S&#259; analiz&#259;m utilizarea clasei:</span></p>
    <p class="c4 c7"><span class="c2"></span></p>
    <table class="c5">
        <tr class="c14">
            <td class="c13" colspan="1" rowspan="1">
                <p class="c11"><span class="c3">import</span><span class="c1">&nbsp;java.io.*;<br><br></span><span
                        class="c3">public</span><span class="c1">&nbsp;</span><span class="c3">class</span><span
                        class="c1">&nbsp;</span><span class="c9">Program</span><span class="c1">&nbsp;{<br><br> &nbsp;
                        &nbsp;</span><span class="c3">public</span><span class="c1">&nbsp;</span><span
                        class="c3">static</span><span class="c1">&nbsp;</span><span class="c3">void</span><span
                        class="c1">&nbsp;</span><span class="c9">main</span><span class="c1">(String[] args) {<br><br>
                        &nbsp; &nbsp; &nbsp; &nbsp;ByteArrayOutputStream baos = </span><span class="c3">new</span><span
                        class="c1">&nbsp;ByteArrayOutputStream();<br> &nbsp; &nbsp; &nbsp; &nbsp;String text =
                    </span><span class="c8">&quot;Hello Wolrd!&quot;</span><span class="c1">;<br> &nbsp; &nbsp; &nbsp;
                        &nbsp;</span><span class="c3">byte</span><span class="c1">[] buffer = text.getBytes();<br>
                        &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">try</span><span class="c1">&nbsp;{<br> &nbsp;
                        &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;baos.write(buffer);<br> &nbsp; &nbsp; &nbsp; &nbsp;}
                    </span><span class="c3">catch</span><span class="c1">&nbsp;(Exception ex) {<br><br> &nbsp; &nbsp;
                        &nbsp; &nbsp; &nbsp; &nbsp;System.out.println(ex.getMessage());<br> &nbsp; &nbsp; &nbsp;
                        &nbsp;}<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c16">// convertim tabloul de
                        octe&#539;i &icirc;ntr-un &#537;ir de caractere</span><span class="c1"><br> &nbsp; &nbsp; &nbsp;
                        &nbsp;System.out.println(baos.toString());<br><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span
                        class="c16">// ob&#539;inem tabloul de octe&#539;i &#537;i &icirc;l afi&#537;&#259;m caracter cu
                        caracter</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span
                        class="c3">byte</span><span class="c1">[] array = baos.toByteArray();<br> &nbsp; &nbsp; &nbsp;
                        &nbsp;</span><span class="c3">for</span><span class="c1">&nbsp;(</span><span
                        class="c3">byte</span><span class="c1">&nbsp;b : array) {<br><br> &nbsp; &nbsp; &nbsp; &nbsp;
                        &nbsp; &nbsp;System.out.print((</span><span class="c3">char</span><span class="c1">) b);<br>
                        &nbsp; &nbsp; &nbsp; &nbsp;}<br> &nbsp; &nbsp; &nbsp; &nbsp;System.out.println();<br> &nbsp;
                        &nbsp;}<br>}</span></p>
            </td>
        </tr>
    </table>
    <p class="c4 c7"><span class="c2"></span></p>
    <p class="c4"><span class="c6">Ca &#537;i &icirc;n alte fluxuri de ie&#537;ire, &icirc;n clasa </span><span
            class="c0">ByteArrayOutputStream </span><span class="c6">este definit&#259; metoda </span><span
            class="c0">write</span><span class="c2">, care scrie anumite date &icirc;n flux. &Icirc;n acest caz, scriem
            &icirc;n flux un tablou de octe&#539;i. Acest tablou este stocat &icirc;n c&acirc;mpul protejat buf, care
            reprezint&#259; tot un tablou de octe&#539;i (protected byte[] buf).</span></p>
    <p class="c4 c7"><span class="c2"></span></p>
    <p class="c4"><span class="c6">Deoarece metoda </span><span class="c0">write </span><span class="c2">poate genera o
            excep&#539;ie, apelul s&#259;u este plasat &icirc;ntr-un bloc try..catch.</span></p>
    <p class="c4 c7"><span class="c2"></span></p>
    <p class="c4"><span class="c6">Folosind metodele</span><span class="c0">&nbsp;toString()</span><span
            class="c6">&nbsp;&#537;i </span><span class="c0">toByteArray()</span><span class="c2">, putem ob&#539;ine
            tabloul de octe&#539;i buf fie sub form&#259; de text, fie direct sub forma unui tablou de
            octe&#539;i.</span></p>
    <p class="c4 c7"><span class="c2"></span></p>
    <p class="c4"><span class="c6">Cu ajutorul metodei </span><span class="c0">writeTo</span><span class="c6">, putem
            scrie tabloul de octe&#539;i &icirc;ntr-un alt flux. Aceast&#259; metod&#259; prime&#537;te ca parametru un
            obiect </span><span class="c0">OutputStream </span><span class="c2">&icirc;n care se face scrierea tabloului
            de octe&#539;i:</span></p>
    <p class="c4 c7"><span class="c2"></span></p>
    <table class="c5">
        <tr class="c14">
            <td class="c13" colspan="1" rowspan="1">
                <p class="c11"><span class="c1">ByteArrayOutputStream baos = </span><span class="c3">new</span><span
                        class="c1">&nbsp;ByteArrayOutputStream();<br>String text = </span><span class="c8">&quot;Hello
                        Wolrd!&quot;</span><span class="c1">;<br></span><span class="c3">byte</span><span class="c1">[]
                        buffer = text.getBytes();<br></span><span class="c3">try</span><span class="c1">&nbsp;{<br>
                        &nbsp; &nbsp;baos.write(buffer);<br>} </span><span class="c3">catch</span><span
                        class="c1">&nbsp;(Exception ex) {<br><br> &nbsp;
                        &nbsp;System.out.println(ex.getMessage());<br>}<br></span><span class="c3">try</span><span
                        class="c1">&nbsp;(FileOutputStream fos = </span><span class="c3">new</span><span
                        class="c1">&nbsp;FileOutputStream(</span><span class="c8">&quot;hello.txt&quot;</span><span
                        class="c1">)) {<br><br> &nbsp; &nbsp;baos.writeTo(fos);<br>} </span><span
                        class="c3">catch</span><span class="c1">&nbsp;(IOException e) {<br><br> &nbsp;
                        &nbsp;System.out.println(e.getMessage());<br>}</span></p>
            </td>
        </tr>
    </table>
    <p class="c4 c7"><span class="c2"></span></p>
    <p class="c4"><span class="c2">Dup&#259; rularea acestui program, &icirc;n folderul cu programul va ap&#259;rea
            fi&#537;ierul hello.txt, care va con&#539;ine &#537;irul &quot;Hello Wolrd!&quot;.</span></p>
    <p class="c4 c7"><span class="c2"></span></p>
    <p class="c4"><span class="c6">&Icirc;n concluzie, la fel ca &icirc;n cazul obiectelor ByteArrayInputStream, pentru
            ByteArrayOutputStream nu este necesar s&#259; &icirc;nchidem explicit fluxul folosind metoda </span><span
            class="c0">close</span><span class="c2">.</span></p>
    <p class="c4 c7"><span class="c2"></span></p>
</body>

</html>