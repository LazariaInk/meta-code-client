<html>

<head>
    <meta content="text/html; charset=UTF-8" http-equiv="content-type">
    <link rel="stylesheet" type="text/css" href="/lessons/styles.css">
</head>

<body class="c15 doc-content">
    <h1 class="c5 c17">Citirea și scrierea fișierelor text.</h1>
    <p class="c5 c11"><span class="c2"></span></p>
    <p class="c5"><span class="c13">De&#537;i clasele discutate anterior pot fi utilizate pentru a scrie text &icirc;n
            fi&#537;iere, acestea sunt concepute &icirc;n principal pentru lucrul cu fluxuri de date binare, iar
            func&#539;ionalitatea lor nu este suficient&#259; pentru o gestionare complet&#259; a fi&#537;ierelor text.
            &Icirc;n acest scop, exist&#259; alte clase care sunt mo&#537;tenitoare ale claselor abstracte </span><span
            class="c13 c14">Reader </span><span class="c13">&#537;i </span><span class="c13 c14">Writer</span><span
            class="c2">.</span></p>
    <p class="c5 c11"><span class="c2"></span></p>
    <p class="c5"><span class="c12">Scrierea fi&#537;ierelor. Clasa FileWriter.</span></p>
    <p class="c5"><span class="c2">&nbsp; </span></p>
    <p class="c5"><span class="c2">Clasa FileWriter este derivat&#259; din clasa Writer &#537;i este utilizat&#259;
            pentru a scrie fi&#537;iere text.</span></p>
    <p class="c5 c11"><span class="c2"></span></p>
    <p class="c5"><span class="c2">Pentru a crea un obiect FileWriter, se pot folosi urm&#259;torii constructori:</span>
    </p>
    <p class="c5 c11"><span class="c2"></span></p>
    <table class="c4">
        <tr class="c3">
            <td class="c7" colspan="1" rowspan="1">
                <p class="c6"><span class="c1">FileWriter(File file) &nbsp;<br>FileWriter(File file, </span><span
                        class="c9">boolean</span><span class="c1">&nbsp;append) &nbsp;<br>FileWriter(FileDescriptor fd)
                        &nbsp;<br>FileWriter(String fileName) &nbsp;<br>FileWriter(String fileName, </span><span
                        class="c9">boolean</span><span class="c1">&nbsp;append) &nbsp;</span></p>
            </td>
        </tr>
    </table>
    <p class="c5 c11"><span class="c2"></span></p>
    <p class="c5"><span class="c13">Constructorul prime&#537;te fie o cale c&#259;tre fi&#537;ier sub form&#259; de
            &#537;ir de caractere, fie un obiect File care se refer&#259; la un fi&#537;ier text specific. Parametrul
        </span><span class="c13 c14">append </span><span class="c2">indic&#259; dac&#259; datele trebuie ad&#259;ugate
            la sf&acirc;r&#537;itul fi&#537;ierului (dac&#259; este true), sau dac&#259; fi&#537;ierul trebuie rescris
            complet.</span></p>
    <p class="c5 c11"><span class="c2"></span></p>
    <p class="c5"><span class="c2">Exemplu de scriere &icirc;ntr-un fi&#537;ier:</span></p>
    <p class="c5 c11"><span class="c2"></span></p>
    <table class="c4">
        <tr class="c3">
            <td class="c7" colspan="1" rowspan="1">
                <p class="c6"><span class="c9">import</span><span class="c1">&nbsp;java.io.*;<br><br></span><span
                        class="c9">public</span><span class="c1">&nbsp;</span><span class="c9">class</span><span
                        class="c1">&nbsp;</span><span class="c8">Program</span><span class="c1">&nbsp;{<br><br> &nbsp;
                        &nbsp;</span><span class="c9">public</span><span class="c1">&nbsp;</span><span
                        class="c9">static</span><span class="c1">&nbsp;</span><span class="c9">void</span><span
                        class="c1">&nbsp;</span><span class="c8">main</span><span class="c1">(String[] args) {<br><br>
                        &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c9">try</span><span class="c1">&nbsp;(FileWriter
                        writer = </span><span class="c9">new</span><span class="c1">&nbsp;FileWriter(</span><span
                        class="c0">&quot;notes3.txt&quot;</span><span class="c1">, </span><span
                        class="c9">false</span><span class="c1">)) {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;
                        &nbsp;</span><span class="c16">// scrierea &icirc;ntregului &#537;ir</span><span class="c1"><br>
                        &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;String text = </span><span class="c0">&quot;Hello
                        Gold!&quot;</span><span class="c1">;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;
                        &nbsp;writer.write(text);<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span
                        class="c16">// scrierea caracterelor individuale</span><span class="c1"><br> &nbsp; &nbsp;
                        &nbsp; &nbsp; &nbsp; &nbsp;writer.append(</span><span class="c0">&#39;\n&#39;</span><span
                        class="c1">);<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;writer.append(</span><span
                        class="c0">&#39;E&#39;</span><span class="c1">);<br><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;
                        &nbsp;writer.flush();<br> &nbsp; &nbsp; &nbsp; &nbsp;} </span><span class="c9">catch</span><span
                        class="c1">&nbsp;(IOException ex) {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;
                        &nbsp;System.out.println(ex.getMessage());<br> &nbsp; &nbsp; &nbsp; &nbsp;}<br> &nbsp;
                        &nbsp;}<br>}</span></p>
            </td>
        </tr>
    </table>
    <p class="c5 c11"><span class="c2"></span></p>
    <p class="c5"><span class="c13">&Icirc;n acest caz, parametrul </span><span class="c13 c14">append </span><span
            class="c2">are valoarea false, ceea ce &icirc;nseamn&#259; c&#259; fi&#537;ierul va fi rescris. Apoi, cu
            ajutorul metodelor definite &icirc;n clasa de baz&#259; Writer, se efectueaz&#259; scrierea datelor.</span>
    </p>
    <p class="c5 c11"><span class="c2"></span></p>
    <p class="c5"><span class="c12">Citirea fi&#537;ierelor. Clasa FileReader.</span></p>
    <p class="c5"><span class="c2">&nbsp; </span></p>
    <p class="c5"><span class="c2">Clasa FileReader este mo&#537;tenit&#259; din clasa abstract&#259; Reader &#537;i
            ofer&#259; func&#539;ionalit&#259;&#539;i pentru citirea fi&#537;ierelor text.</span></p>
    <p class="c5 c11"><span class="c2"></span></p>
    <p class="c5"><span class="c2">Pentru a crea un obiect FileReader, se pot folosi urm&#259;torii constructori:</span>
    </p>
    <p class="c5 c11"><span class="c2"></span></p>
    <table class="c4">
        <tr class="c3">
            <td class="c7" colspan="1" rowspan="1">
                <p class="c6"><span class="c1">FileReader(String fileName) &nbsp;<br>FileReader(File file)
                        &nbsp;<br>FileReader(FileDescriptor fd) &nbsp;</span></p>
            </td>
        </tr>
    </table>
    <p class="c5 c11"><span class="c2"></span></p>
    <p class="c5"><span class="c2">Apoi, folosind metodele definite &icirc;n clasa de baz&#259; Reader, putem citi
            fi&#537;ierul:</span></p>
    <p class="c5 c11"><span class="c2"></span></p>
    <table class="c4">
        <tr class="c3">
            <td class="c7" colspan="1" rowspan="1">
                <p class="c6"><span class="c9">import</span><span class="c1">&nbsp;java.io.*;<br><br></span><span
                        class="c9">public</span><span class="c1">&nbsp;</span><span class="c9">class</span><span
                        class="c1">&nbsp;</span><span class="c8">Program</span><span class="c1">&nbsp;{<br><br> &nbsp;
                        &nbsp;</span><span class="c9">public</span><span class="c1">&nbsp;</span><span
                        class="c9">static</span><span class="c1">&nbsp;</span><span class="c9">void</span><span
                        class="c1">&nbsp;</span><span class="c8">main</span><span class="c1">(String[] args) {<br><br>
                        &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c9">try</span><span class="c1">&nbsp;(FileReader
                        reader = </span><span class="c9">new</span><span class="c1">&nbsp;FileReader(</span><span
                        class="c0">&quot;notes3.txt&quot;</span><span class="c1">)) {<br> &nbsp; &nbsp; &nbsp; &nbsp;
                        &nbsp; &nbsp;</span><span class="c16">// citire caracter cu caracter</span><span class="c1"><br>
                        &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c9">int</span><span
                        class="c1">&nbsp;c;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span
                        class="c9">while</span><span class="c1">&nbsp;((c = reader.read()) != -</span><span
                        class="c10">1</span><span class="c1">) {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;
                        &nbsp;System.out.print((</span><span class="c9">char</span><span class="c1">) c);<br> &nbsp;
                        &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;}<br> &nbsp; &nbsp; &nbsp; &nbsp;} </span><span
                        class="c9">catch</span><span class="c1">&nbsp;(IOException ex) {<br> &nbsp; &nbsp; &nbsp; &nbsp;
                        &nbsp; &nbsp;System.out.println(ex.getMessage());<br> &nbsp; &nbsp; &nbsp; &nbsp;}<br> &nbsp;
                        &nbsp;}<br>}</span></p>
            </td>
        </tr>
    </table>
    <p class="c5 c11"><span class="c2"></span></p>
    <p class="c5"><span class="c2">De asemenea, putem citi datele &icirc;ntr-un buffer intermediar, utiliz&acirc;nd un
            tablou de caractere:</span></p>
    <p class="c5 c11"><span class="c2"></span></p>
    <table class="c4">
        <tr class="c3">
            <td class="c7" colspan="1" rowspan="1">
                <p class="c6"><span class="c9">import</span><span class="c1">&nbsp;java.io.*;<br></span><span
                        class="c9">import</span><span class="c1">&nbsp;java.util.Arrays;<br><br></span><span
                        class="c9">public</span><span class="c1">&nbsp;</span><span class="c9">class</span><span
                        class="c1">&nbsp;</span><span class="c8">Program</span><span class="c1">&nbsp;{<br><br> &nbsp;
                        &nbsp;</span><span class="c9">public</span><span class="c1">&nbsp;</span><span
                        class="c9">static</span><span class="c1">&nbsp;</span><span class="c9">void</span><span
                        class="c1">&nbsp;</span><span class="c8">main</span><span class="c1">(String[] args) {<br><br>
                        &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c9">try</span><span class="c1">&nbsp;(FileReader
                        reader = </span><span class="c9">new</span><span class="c1">&nbsp;FileReader(</span><span
                        class="c0">&quot;notes3.txt&quot;</span><span class="c1">)) {<br> &nbsp; &nbsp; &nbsp; &nbsp;
                        &nbsp; &nbsp;</span><span class="c9">char</span><span class="c1">[] buf = </span><span
                        class="c9">new</span><span class="c1">&nbsp;</span><span class="c9">char</span><span
                        class="c1">[</span><span class="c10">256</span><span class="c1">];<br> &nbsp; &nbsp; &nbsp;
                        &nbsp; &nbsp; &nbsp;</span><span class="c9">int</span><span class="c1">&nbsp;c;<br> &nbsp;
                        &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c9">while</span><span class="c1">&nbsp;((c
                        = reader.read(buf)) &gt; </span><span class="c10">0</span><span class="c1">) {<br><br> &nbsp;
                        &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c9">if</span><span
                        class="c1">&nbsp;(c &lt; </span><span class="c10">256</span><span class="c1">) {<br> &nbsp;
                        &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;buf = Arrays.copyOf(buf, c);<br>
                        &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;}<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;
                        &nbsp; &nbsp; &nbsp;System.out.print(buf);<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;}<br>
                        &nbsp; &nbsp; &nbsp; &nbsp;} </span><span class="c9">catch</span><span
                        class="c1">&nbsp;(IOException ex) {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;
                        &nbsp;System.out.println(ex.getMessage());<br> &nbsp; &nbsp; &nbsp; &nbsp;}<br> &nbsp;
                        &nbsp;}<br>}</span></p>
            </td>
        </tr>
    </table>
    <p class="c5 c11"><span class="c2"></span></p>
    <p class="c5"><span class="c2">&Icirc;n acest caz, citim secven&#539;ial caracterele din fi&#537;ier &icirc;ntr-un
            tablou de 256 de caractere, p&acirc;n&#259; ajungem la sf&acirc;r&#537;itul fi&#537;ierului, caz &icirc;n
            care metoda read returneaz&#259; valoarea -1.</span></p>
    <p class="c5 c11"><span class="c2"></span></p>
    <p class="c5"><span class="c13">Deoarece por&#539;iunea citit&#259; din fi&#537;ier poate fi mai mic&#259;
            dec&acirc;t 256 de caractere (de exemplu, fi&#537;ierul poate con&#539;ine doar 73 de caractere), iar
            dac&#259; num&#259;rul de date citite este mai mic dec&acirc;t dimensiunea bufferului, folosim metoda
        </span><span class="c13 c14">Arrays.copyOf </span><span class="c2">pentru a t&#259;ia tabloul buf,
            p&#259;str&acirc;nd doar caracterele citite efectiv din fi&#537;ier.</span></p>
    <p class="c5 c11"><span class="c2"></span></p>
</body>

</html>