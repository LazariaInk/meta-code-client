<html>

<head>
    <meta content="text/html; charset=UTF-8" http-equiv="content-type">
    <link rel="stylesheet" type="text/css" href="/lessons/styles.css">
</head>

<body class="c13 doc-content">
    <h1 class="c3 c14">Interfețele în mecanismul de callback.</h1>
    <p class="c3 c11"><span class="c0"></span></p>
    <p class="c3"><span class="c0">Unul dintre modurile comune de utilizare a interfe&#539;elor &icirc;n Java este
            crearea unui mecanism de callback. Esen&#539;a unui callback const&#259; &icirc;n faptul c&#259; cre&#259;m
            ac&#539;iuni care sunt declan&#537;ate de alte ac&#539;iuni. Cu alte cuvinte, unele ac&#539;iuni sunt
            ini&#539;iate de altele. Un exemplu standard este ap&#259;sarea unui buton. C&acirc;nd ap&#259;s&#259;m pe
            un buton, execut&#259;m o ac&#539;iune, dar, ca r&#259;spuns la aceast&#259; ap&#259;sare, sunt
            declan&#537;ate alte ac&#539;iuni. De exemplu, ap&#259;sarea pictogramei de imprimant&#259;
            declan&#537;eaz&#259; imprimarea unui document pe imprimant&#259; &#537;i a&#537;a mai departe.</span></p>
    <p class="c3 c11"><span class="c0"></span></p>
    <p class="c3"><span class="c0">S&#259; analiz&#259;m urm&#259;torul exemplu:</span></p>
    <p class="c3 c11"><span class="c0"></span></p>
    <table class="c12">
        <tr class="c4">
            <td class="c8" colspan="1" rowspan="1">
                <p class="c9"><span class="c1">public</span><span class="c2">&nbsp;</span><span
                        class="c1">class</span><span class="c2">&nbsp;</span><span class="c7">EventsApp</span><span
                        class="c2">&nbsp;{<br> &nbsp; &nbsp;</span><span class="c1">public</span><span
                        class="c2">&nbsp;</span><span class="c1">static</span><span class="c2">&nbsp;</span><span
                        class="c1">void</span><span class="c2">&nbsp;</span><span class="c7">main</span><span
                        class="c2">(String[] args) {<br> &nbsp; &nbsp; &nbsp; &nbsp;Button button = </span><span
                        class="c1">new</span><span class="c2">&nbsp;Button(</span><span class="c1">new</span><span
                        class="c2">&nbsp;ButtonClickHandler());<br> &nbsp; &nbsp; &nbsp; &nbsp;button.click();<br>
                        &nbsp; &nbsp; &nbsp; &nbsp;button.click();<br> &nbsp; &nbsp; &nbsp; &nbsp;button.click();<br>
                        &nbsp; &nbsp;}<br>}<br><br></span><span class="c1">class</span><span
                        class="c2">&nbsp;</span><span class="c7">ButtonClickHandler</span><span
                        class="c2">&nbsp;</span><span class="c1">implements</span><span class="c2">&nbsp;</span><span
                        class="c7">EventHandler</span><span class="c2">&nbsp;{<br> &nbsp; &nbsp;</span><span
                        class="c1">public</span><span class="c2">&nbsp;</span><span class="c1">void</span><span
                        class="c2">&nbsp;</span><span class="c7">execute</span><span class="c2">() {<br> &nbsp; &nbsp;
                        &nbsp; &nbsp;System.out.println(</span><span class="c5">&quot;Butonul a fost
                        ap&#259;sat!&quot;</span><span class="c2">);<br> &nbsp; &nbsp;}<br>}<br><br></span><span
                        class="c1">interface</span><span class="c2">&nbsp;</span><span
                        class="c7">EventHandler</span><span class="c2">&nbsp;{<br> &nbsp; &nbsp;</span><span
                        class="c1">void</span><span class="c2">&nbsp;</span><span class="c7">execute</span><span
                        class="c2">();<br>}<br><br></span><span class="c1">class</span><span
                        class="c2">&nbsp;</span><span class="c7">Button</span><span class="c2">&nbsp;{<br> &nbsp;
                        &nbsp;EventHandler handler;<br> &nbsp; &nbsp;Button(EventHandler action) {<br> &nbsp; &nbsp;
                        &nbsp; &nbsp;</span><span class="c1">this</span><span class="c2">.handler = action;<br> &nbsp;
                        &nbsp;}<br> &nbsp; &nbsp;</span><span class="c1">public</span><span
                        class="c2">&nbsp;</span><span class="c1">void</span><span class="c2">&nbsp;</span><span
                        class="c7">click</span><span class="c2">() {<br> &nbsp; &nbsp; &nbsp;
                        &nbsp;handler.execute();<br> &nbsp; &nbsp;}<br>}</span></p>
            </td>
        </tr>
    </table>
    <p class="c3 c11"><span class="c0"></span></p>
    <p class="c3"><span class="c0">Aici avem definit&#259; clasa Button, care, &icirc;n constructor, prime&#537;te un
            obiect al interfe&#539;ei EventHandler &#537;i &icirc;n metoda click (simul&acirc;nd ap&#259;sarea)
            apeleaz&#259; metoda execute a acelui obiect.</span></p>
    <p class="c3 c11"><span class="c0"></span></p>
    <p class="c3"><span class="c6">Apoi se define&#537;te implementarea interfe&#539;ei EventHandler sub forma clasei
        </span><span class="c6 c10">ButtonClickHandler</span><span class="c6">. &Icirc;n programul principal, un obiect
            al acestei clase este transmis constructorului clasei Button. Astfel, prin constructor, stabilim un handler
            pentru ap&#259;sarea butonului. La fiecare apel al metodei </span><span
            class="c6 c10">button.click()</span><span class="c0">, acest handler va fi executat.</span></p>
    <p class="c3 c11"><span class="c0"></span></p>
    <p class="c3"><span class="c0">Rezultatul afi&#537;at &icirc;n consol&#259; va fi urm&#259;torul:</span></p>
    <p class="c3 c11"><span class="c0"></span></p>
    <table class="c12">
        <tr class="c4">
            <td class="c8" colspan="1" rowspan="1">
                <p class="c9"><span class="c2">Butonul a fost ap&#259;sat!<br>Butonul a fost ap&#259;sat!<br>Butonul a
                        fost ap&#259;sat!</span></p>
            </td>
        </tr>
    </table>
    <p class="c3 c11"><span class="c0"></span></p>
    <p class="c3"><span class="c0">S-ar putea s&#259; ne &icirc;ntreb&#259;m de ce mut&#259;m toate ac&#539;iunile
            &icirc;n interfa&#539;&#259; &#537;i le implement&#259;m, &icirc;n loc s&#259; scriem direct &icirc;n clasa
            Button, ca &icirc;n exemplul urm&#259;tor:</span></p>
    <p class="c3 c11"><span class="c0"></span></p>
    <table class="c12">
        <tr class="c4">
            <td class="c8" colspan="1" rowspan="1">
                <p class="c9"><span class="c1">class</span><span class="c2">&nbsp;</span><span
                        class="c7">Button</span><span class="c2">&nbsp;{<br> &nbsp; &nbsp;</span><span
                        class="c1">public</span><span class="c2">&nbsp;</span><span class="c1">void</span><span
                        class="c2">&nbsp;</span><span class="c7">click</span><span class="c2">() {<br> &nbsp; &nbsp;
                        &nbsp; &nbsp;System.out.println(</span><span class="c5">&quot;Butonul a fost
                        ap&#259;sat!&quot;</span><span class="c2">);<br> &nbsp; &nbsp;}<br>}</span></p>
            </td>
        </tr>
    </table>
    <p class="c3 c11"><span class="c0"></span></p>
    <p class="c3"><span class="c0">Motivul este c&#259;, &icirc;n momentul definirii clasei, nu &#537;tim
            &icirc;ntotdeauna exact ce ac&#539;iuni trebuie s&#259; se execute. Acest lucru este valabil mai ales
            dac&#259; clasa Button &#537;i clasa principal&#259; se afl&#259; &icirc;n pachete sau biblioteci diferite
            &#537;i sunt proiectate de dezvoltatori diferi&#539;i. De asemenea, pot exista mai multe butoane - obiecte
            ale clasei Button, &#537;i pentru fiecare obiect trebuie s&#259; definim o ac&#539;iune specific&#259;. De
            exemplu, s&#259; modific&#259;m clasa principal&#259; a programului:</span></p>
    <p class="c3 c11"><span class="c0"></span></p>
    <table class="c12">
        <tr class="c4">
            <td class="c8" colspan="1" rowspan="1">
                <p class="c9"><span class="c1">public</span><span class="c2">&nbsp;</span><span
                        class="c1">class</span><span class="c2">&nbsp;</span><span class="c7">EventsApp</span><span
                        class="c2">&nbsp;{<br> &nbsp; &nbsp;</span><span class="c1">public</span><span
                        class="c2">&nbsp;</span><span class="c1">static</span><span class="c2">&nbsp;</span><span
                        class="c1">void</span><span class="c2">&nbsp;</span><span class="c7">main</span><span
                        class="c2">(String[] args) {<br> &nbsp; &nbsp; &nbsp; &nbsp;Button tvButton = </span><span
                        class="c1">new</span><span class="c2">&nbsp;Button(</span><span class="c1">new</span><span
                        class="c2">&nbsp;EventHandler() {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span
                        class="c1">private</span><span class="c2">&nbsp;</span><span class="c1">boolean</span><span
                        class="c2">&nbsp;on = </span><span class="c1">false</span><span class="c2">;<br> &nbsp; &nbsp;
                        &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c1">public</span><span
                        class="c2">&nbsp;</span><span class="c1">void</span><span class="c2">&nbsp;</span><span
                        class="c7">execute</span><span class="c2">() {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;
                        &nbsp; &nbsp;</span><span class="c1">if</span><span class="c2">(on) {<br> &nbsp; &nbsp; &nbsp;
                        &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;System.out.println(</span><span
                        class="c5">&quot;Televizorul este oprit.&quot;</span><span class="c2">);<br> &nbsp; &nbsp;
                        &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;on = </span><span
                        class="c1">false</span><span class="c2">;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;
                        &nbsp;} </span><span class="c1">else</span><span class="c2">&nbsp;{<br> &nbsp; &nbsp; &nbsp;
                        &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;System.out.println(</span><span
                        class="c5">&quot;Televizorul este pornit!&quot;</span><span class="c2">);<br> &nbsp; &nbsp;
                        &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;on = </span><span
                        class="c1">true</span><span class="c2">;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;
                        &nbsp;}<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;}<br> &nbsp; &nbsp; &nbsp; &nbsp;});<br>
                        &nbsp; &nbsp; &nbsp; &nbsp; <br> &nbsp; &nbsp; &nbsp; &nbsp;Button printButton = </span><span
                        class="c1">new</span><span class="c2">&nbsp;Button(</span><span class="c1">new</span><span
                        class="c2">&nbsp;EventHandler() {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span
                        class="c1">public</span><span class="c2">&nbsp;</span><span class="c1">void</span><span
                        class="c2">&nbsp;</span><span class="c7">execute</span><span class="c2">() {<br> &nbsp; &nbsp;
                        &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;System.out.println(</span><span
                        class="c5">&quot;Imprimarea a &icirc;nceput...&quot;</span><span class="c2">);<br> &nbsp; &nbsp;
                        &nbsp; &nbsp; &nbsp; &nbsp;}<br> &nbsp; &nbsp; &nbsp; &nbsp;});<br> &nbsp; &nbsp; &nbsp; &nbsp;
                        <br> &nbsp; &nbsp; &nbsp; &nbsp;tvButton.click();<br> &nbsp; &nbsp; &nbsp;
                        &nbsp;printButton.click();<br> &nbsp; &nbsp; &nbsp; &nbsp;tvButton.click();<br> &nbsp;
                        &nbsp;}<br>}</span></p>
            </td>
        </tr>
    </table>
    <p class="c3 c11"><span class="c0"></span></p>
    <p class="c3"><span class="c0">Aici avem dou&#259; butoane - unul pentru pornirea/oprirerea televizorului &#537;i
            altul pentru imprimarea la imprimant&#259;. &Icirc;n loc s&#259; cre&#259;m clase separate care s&#259;
            implementeze interfa&#539;a EventHandler, handler-ele sunt definite sub form&#259; de obiecte anonime care
            implementeaz&#259; interfa&#539;a EventHandler. &Icirc;n plus, handler-ul butonului pentru televizor
            stocheaz&#259; o stare suplimentar&#259; sub forma unei variabile booleene on.</span></p>
    <p class="c3 c11"><span class="c0"></span></p>
    <p class="c3"><span class="c0">Rezultatul afi&#537;at &icirc;n consol&#259; va fi:</span></p>
    <p class="c3 c11"><span class="c0"></span></p>
    <table class="c12">
        <tr class="c4">
            <td class="c8" colspan="1" rowspan="1">
                <p class="c9"><span class="c2">Televizorul este pornit!<br>Imprimarea a &icirc;nceput...<br>Televizorul
                        este oprit.</span></p>
            </td>
        </tr>
    </table>
    <p class="c3 c11"><span class="c0"></span></p>
    <p class="c3"><span class="c0">&Icirc;n concluzie, trebuie men&#539;ionat c&#259; interfe&#539;ele sunt utilizate pe
            scar&#259; larg&#259; &icirc;n diferite API-uri grafice - AWT, Swing, JavaFX, unde gestionarea evenimentelor
            pentru elementele interfe&#539;ei grafice este deosebit de relevant&#259;.</span></p>
    <p class="c3 c11"><span class="c0"></span></p>
</body>

</html>