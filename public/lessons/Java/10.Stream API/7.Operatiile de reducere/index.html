<html>

<head>
    <meta content="text/html; charset=UTF-8" http-equiv="content-type">
    <link rel="stylesheet" type="text/css" href="/lessons/styles.css">
</head>

<body class="c17 doc-content">
    <h1 class="c11 c18">Opera»õiile de reducere.</h1>
    <p class="c0"><span class="c7"></span></p>
    <p class="c11"><span class="c7">Opera&#539;iile de reducere reprezint&#259; opera&#539;ii terminale care
            returneaz&#259; o valoare rezultat&#259; din procesarea fluxului de date. &Icirc;n Stream API exist&#259; o
            serie de opera&#539;ii de reducere.</span></p>
    <p class="c0"><span class="c7"></span></p>
    <p class="c11"><span class="c15">count &nbsp;</span></p>
    <p class="c0"><span class="c7"></span></p>
    <p class="c11"><span class="c8">Metoda </span><span class="c8 c9">count() </span><span class="c7">returneaz&#259;
            num&#259;rul de elemente din fluxul de date:</span></p>
    <p class="c0"><span class="c7"></span></p>
    <table class="c1">
        <tr class="c13">
            <td class="c16" colspan="1" rowspan="1">
                <p class="c14"><span class="c2">import</span><span
                        class="c3">&nbsp;java.util.stream.Stream;<br></span><span class="c2">import</span><span
                        class="c3">&nbsp;java.util.Optional;<br></span><span class="c2">import</span><span
                        class="c3">&nbsp;java.util.*;<br></span><span class="c2">public</span><span
                        class="c3">&nbsp;</span><span class="c2">class</span><span class="c3">&nbsp;</span><span
                        class="c10">Program</span><span class="c3">&nbsp;{<br><br> &nbsp; &nbsp;</span><span
                        class="c2">public</span><span class="c3">&nbsp;</span><span class="c2">static</span><span
                        class="c3">&nbsp;</span><span class="c2">void</span><span class="c3">&nbsp;</span><span
                        class="c10">main</span><span class="c3">(String[] args) {<br><br> &nbsp; &nbsp; &nbsp;
                        &nbsp;ArrayList&lt;String&gt; names = </span><span class="c2">new</span><span
                        class="c3">&nbsp;ArrayList&lt;String&gt;();<br> &nbsp; &nbsp; &nbsp;
                        &nbsp;names.addAll(Arrays.asList(</span><span class="c2">new</span><span
                        class="c3">&nbsp;String[]{</span><span class="c4">&quot;Tom&quot;</span><span class="c3">,
                    </span><span class="c4">&quot;Sam&quot;</span><span class="c3">, </span><span
                        class="c4">&quot;Bob&quot;</span><span class="c3">, </span><span
                        class="c4">&quot;Alice&quot;</span><span class="c3">}));<br> &nbsp; &nbsp; &nbsp;
                        &nbsp;System.out.println(names.stream().count()); &nbsp;</span><span class="c5">// 4</span><span
                        class="c3"><br><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c5">// num&#259;rul de
                        elemente cu lungime de cel mult 3 caractere</span><span class="c3"><br> &nbsp; &nbsp; &nbsp;
                        &nbsp;System.out.println(names.stream().filter(n -&gt; n.length() &lt;= </span><span
                        class="c6">3</span><span class="c3">).count()); &nbsp;</span><span class="c5">// 3</span><span
                        class="c3"><br> &nbsp; &nbsp;}<br>}</span></p>
            </td>
        </tr>
    </table>
    <p class="c0"><span class="c7"></span></p>
    <p class="c11"><span class="c15">findFirst &#537;i findAny &nbsp;</span></p>
    <p class="c11"><span class="c8">Metoda </span><span class="c12">findFirst()</span><span class="c8">&nbsp;extrage
            primul element din flux, iar</span><span class="c12">&nbsp;findAny() </span><span class="c7">extrage un
            obiect aleator din flux (adesea tot primul):</span></p>
    <p class="c0"><span class="c7"></span></p>
    <table class="c1">
        <tr class="c13">
            <td class="c16" colspan="1" rowspan="1">
                <p class="c14"><span class="c3">ArrayList&lt;String&gt; names = </span><span class="c2">new</span><span
                        class="c3">&nbsp;ArrayList&lt;String&gt;();<br>names.addAll(Arrays.asList(</span><span
                        class="c2">new</span><span class="c3">&nbsp;String[]{</span><span
                        class="c4">&quot;Tom&quot;</span><span class="c3">, </span><span
                        class="c4">&quot;Sam&quot;</span><span class="c3">, </span><span
                        class="c4">&quot;Bob&quot;</span><span class="c3">, </span><span
                        class="c4">&quot;Alice&quot;</span><span class="c3">}));<br><br>Optional&lt;String&gt; first =
                        names.stream().findFirst();<br>System.out.println(first.get()); &nbsp; &nbsp;</span><span
                        class="c5">// Tom</span><span class="c3"><br><br>Optional&lt;String&gt; any =
                        names.stream().findAny();<br>System.out.println(any.get()); &nbsp; &nbsp;</span><span
                        class="c5">// Tom</span></p>
            </td>
        </tr>
    </table>
    <p class="c0"><span class="c7"></span></p>
    <p class="c11"><span class="c15">allMatch, anyMatch, noneMatch &nbsp;</span></p>
    <p class="c0"><span class="c15"></span></p>
    <p class="c11"><span class="c7">Aceste metode returneaz&#259; o valoare boolean&#259; (true sau false) &#537;i
            verific&#259; dac&#259; toate, unele sau niciunul dintre elementele fluxului respect&#259; o anumit&#259;
            condi&#539;ie:</span></p>
    <p class="c0"><span class="c7"></span></p>
    <p class="c11"><span class="c8">-</span><span class="c8 c9">&nbsp;boolean allMatch(Predicate&lt;? super T&gt;
            predicate)</span><span class="c7">&nbsp;- returneaz&#259; true dac&#259; toate elementele fluxului
            &icirc;ndeplinesc condi&#539;ia.</span></p>
    <p class="c0"><span class="c7"></span></p>
    <p class="c11"><span class="c8">- </span><span class="c8 c9">boolean anyMatch(Predicate&lt;? super T&gt;
            predicate)</span><span class="c7">&nbsp;- returneaz&#259; true dac&#259; cel pu&#539;in un element
            &icirc;ndepline&#537;te condi&#539;ia.</span></p>
    <p class="c0"><span class="c7"></span></p>
    <p class="c11"><span class="c8">-</span><span class="c8 c9">&nbsp;boolean noneMatch(Predicate&lt;? super T&gt;
            predicate)</span><span class="c7">&nbsp;- returneaz&#259; true dac&#259; niciun element nu
            &icirc;ndepline&#537;te condi&#539;ia.</span></p>
    <p class="c0"><span class="c7"></span></p>
    <p class="c11"><span class="c7">Exemplu de utilizare:</span></p>
    <p class="c0"><span class="c7"></span></p>
    <table class="c1">
        <tr class="c13">
            <td class="c16" colspan="1" rowspan="1">
                <p class="c14"><span class="c2">import</span><span
                        class="c3">&nbsp;java.util.stream.Stream;<br></span><span class="c2">import</span><span
                        class="c3">&nbsp;java.util.Optional;<br></span><span class="c2">import</span><span
                        class="c3">&nbsp;java.util.ArrayList;<br></span><span class="c2">import</span><span
                        class="c3">&nbsp;java.util.Arrays;<br></span><span class="c2">public</span><span
                        class="c3">&nbsp;</span><span class="c2">class</span><span class="c3">&nbsp;</span><span
                        class="c10">Program</span><span class="c3">&nbsp;{<br><br> &nbsp; &nbsp;</span><span
                        class="c2">public</span><span class="c3">&nbsp;</span><span class="c2">static</span><span
                        class="c3">&nbsp;</span><span class="c2">void</span><span class="c3">&nbsp;</span><span
                        class="c10">main</span><span class="c3">(String[] args) {<br><br> &nbsp; &nbsp; &nbsp;
                        &nbsp;ArrayList&lt;String&gt; names = </span><span class="c2">new</span><span
                        class="c3">&nbsp;ArrayList&lt;String&gt;();<br> &nbsp; &nbsp; &nbsp;
                        &nbsp;names.addAll(Arrays.asList(</span><span class="c2">new</span><span
                        class="c3">&nbsp;String[]{</span><span class="c4">&quot;Tom&quot;</span><span class="c3">,
                    </span><span class="c4">&quot;Sam&quot;</span><span class="c3">, </span><span
                        class="c4">&quot;Bob&quot;</span><span class="c3">, </span><span
                        class="c4">&quot;Alice&quot;</span><span class="c3">}));<br><br> &nbsp; &nbsp; &nbsp;
                        &nbsp;</span><span class="c5">// exist&#259; un &#537;ir cu lungime mai mare de 3
                        caractere?</span><span class="c3"><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span
                        class="c2">boolean</span><span class="c3">&nbsp;any = names.stream().anyMatch(s -&gt; s.length()
                        &gt; </span><span class="c6">3</span><span class="c3">);<br> &nbsp; &nbsp; &nbsp;
                        &nbsp;System.out.println(any); &nbsp; &nbsp;</span><span class="c5">// true</span><span
                        class="c3"><br><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c5">// toate &#537;irurile au
                        lungimea de 3 caractere?</span><span class="c3"><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span
                        class="c2">boolean</span><span class="c3">&nbsp;all = names.stream().allMatch(s -&gt; s.length()
                        == </span><span class="c6">3</span><span class="c3">);<br> &nbsp; &nbsp; &nbsp;
                        &nbsp;System.out.println(all); &nbsp; &nbsp;</span><span class="c5">// false</span><span
                        class="c3"><br><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c5">// nu exist&#259;
                        &#537;irul &quot;Bill&quot; &icirc;n flux?</span><span class="c3"><br> &nbsp; &nbsp; &nbsp;
                        &nbsp;</span><span class="c2">boolean</span><span class="c3">&nbsp;none =
                        names.stream().noneMatch(s -&gt; s.equals(</span><span class="c4">&quot;Bill&quot;</span><span
                        class="c3">));<br> &nbsp; &nbsp; &nbsp; &nbsp;System.out.println(none); &nbsp; </span><span
                        class="c5">// true</span><span class="c3"><br> &nbsp; &nbsp;}<br>}</span></p>
            </td>
        </tr>
    </table>
    <p class="c0"><span class="c7"></span></p>
    <p class="c11"><span class="c15">min &#537;i max </span></p>
    <p class="c11"><span class="c7">&nbsp;</span></p>
    <p class="c11"><span class="c8">Metodele </span><span class="c12">min() </span><span class="c8">&#537;i </span><span
            class="c12">max()</span><span class="c7">&nbsp;returneaz&#259; valoarea minim&#259; sau maxim&#259; din
            flux. Deoarece datele din flux pot reprezenta diferite tipuri (inclusiv clase complexe), metodele primesc un
            obiect Comparator care define&#537;te modul de comparare a obiectelor:</span></p>
    <p class="c0"><span class="c7"></span></p>
    <table class="c1">
        <tr class="c13">
            <td class="c16" colspan="1" rowspan="1">
                <p class="c14"><span class="c3">Optional&lt;T&gt; </span><span class="c10">min</span><span
                        class="c3">(Comparator&lt;? </span><span class="c2">super</span><span class="c3">&nbsp;T&gt;
                        comparator)<br>Optional&lt;T&gt; </span><span class="c10">max</span><span
                        class="c3">(Comparator&lt;? </span><span class="c2">super</span><span class="c3">&nbsp;T&gt;
                        comparator)</span></p>
            </td>
        </tr>
    </table>
    <p class="c0"><span class="c7"></span></p>
    <p class="c11"><span class="c7">Ambele metode returneaz&#259; un element din flux, ambalat &icirc;ntr-un obiect
            Optional.</span></p>
    <p class="c0"><span class="c7"></span></p>
    <p class="c11"><span class="c7">De exemplu, s&#259; g&#259;sim num&#259;rul minim &#537;i maxim &icirc;ntr-un flux
            numeric:</span></p>
    <p class="c0"><span class="c7"></span></p>
    <table class="c1">
        <tr class="c13">
            <td class="c16" colspan="1" rowspan="1">
                <p class="c14"><span class="c2">import</span><span
                        class="c3">&nbsp;java.util.stream.Stream;<br></span><span class="c2">import</span><span
                        class="c3">&nbsp;java.util.Optional;<br></span><span class="c2">import</span><span
                        class="c3">&nbsp;java.util.ArrayList;<br></span><span class="c2">import</span><span
                        class="c3">&nbsp;java.util.Arrays;<br></span><span class="c2">public</span><span
                        class="c3">&nbsp;</span><span class="c2">class</span><span class="c3">&nbsp;</span><span
                        class="c10">Program</span><span class="c3">&nbsp;{<br><br> &nbsp; &nbsp;</span><span
                        class="c2">public</span><span class="c3">&nbsp;</span><span class="c2">static</span><span
                        class="c3">&nbsp;</span><span class="c2">void</span><span class="c3">&nbsp;</span><span
                        class="c10">main</span><span class="c3">(String[] args) {<br><br> &nbsp; &nbsp; &nbsp;
                        &nbsp;ArrayList&lt;Integer&gt; numbers = </span><span class="c2">new</span><span
                        class="c3">&nbsp;ArrayList&lt;Integer&gt;();<br> &nbsp; &nbsp; &nbsp;
                        &nbsp;numbers.addAll(Arrays.asList(</span><span class="c2">new</span><span
                        class="c3">&nbsp;Integer[]{</span><span class="c6">1</span><span class="c3">,</span><span
                        class="c6">2</span><span class="c3">,</span><span class="c6">3</span><span
                        class="c3">,</span><span class="c6">4</span><span class="c3">,</span><span
                        class="c6">5</span><span class="c3">,</span><span class="c6">6</span><span
                        class="c3">,</span><span class="c6">7</span><span class="c3">,</span><span
                        class="c6">8</span><span class="c3">,</span><span class="c6">9</span><span
                        class="c3">}));<br><br> &nbsp; &nbsp; &nbsp; &nbsp;Optional&lt;Integer&gt; min =
                        numbers.stream().min(Integer::compare);<br> &nbsp; &nbsp; &nbsp; &nbsp;Optional&lt;Integer&gt;
                        max = numbers.stream().max(Integer::compare);<br> &nbsp; &nbsp; &nbsp;
                        &nbsp;System.out.println(min.get()); &nbsp;</span><span class="c5">// 1</span><span
                        class="c3"><br> &nbsp; &nbsp; &nbsp; &nbsp;System.out.println(max.get()); &nbsp;</span><span
                        class="c5">// 9</span><span class="c3"><br> &nbsp; &nbsp;}<br>}</span></p>
            </td>
        </tr>
    </table>
    <p class="c0"><span class="c7"></span></p>
    <p class="c11"><span class="c8">Interfa&#539;a Comparator este o interfa&#539;&#259; func&#539;ional&#259; care
            define&#537;te o metod&#259; compare, ce prime&#537;te doi parametri de tipul obiectelor de comparat &#537;i
            returneaz&#259; un num&#259;r. Putem folosi expresii lambda sau metode predefinite, precum </span><span
            class="c8 c9">Integer.compare()</span><span class="c7">.</span></p>
    <p class="c0"><span class="c7"></span></p>
    <p class="c11"><span class="c8">Metodele min &#537;i max returneaz&#259; un obiect Optional, iar pentru a
            ob&#539;ine rezultatul opera&#539;iei este necesar s&#259; apel&#259;m metoda</span><span
            class="c8 c9">&nbsp;get()</span><span class="c7">.</span></p>
    <p class="c0"><span class="c7"></span></p>
    <p class="c11"><span class="c7">Un exemplu mai complex, unde compar&#259;m obiecte de tip Phone:</span></p>
    <p class="c0"><span class="c7"></span></p>
    <table class="c1">
        <tr class="c13">
            <td class="c16" colspan="1" rowspan="1">
                <p class="c14"><span class="c2">import</span><span
                        class="c3">&nbsp;java.util.stream.Stream;<br></span><span class="c2">import</span><span
                        class="c3">&nbsp;java.util.Optional;<br></span><span class="c2">import</span><span
                        class="c3">&nbsp;java.util.ArrayList;<br></span><span class="c2">import</span><span
                        class="c3">&nbsp;java.util.Arrays;<br></span><span class="c2">public</span><span
                        class="c3">&nbsp;</span><span class="c2">class</span><span class="c3">&nbsp;</span><span
                        class="c10">Program</span><span class="c3">&nbsp;{<br><br> &nbsp; &nbsp;</span><span
                        class="c2">public</span><span class="c3">&nbsp;</span><span class="c2">static</span><span
                        class="c3">&nbsp;</span><span class="c2">void</span><span class="c3">&nbsp;</span><span
                        class="c10">main</span><span class="c3">(String[] args) {<br><br> &nbsp; &nbsp; &nbsp;
                        &nbsp;ArrayList&lt;Phone&gt; phones = </span><span class="c2">new</span><span
                        class="c3">&nbsp;ArrayList&lt;Phone&gt;();<br> &nbsp; &nbsp; &nbsp;
                        &nbsp;phones.addAll(Arrays.asList(</span><span class="c2">new</span><span
                        class="c3">&nbsp;Phone[]{<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span
                        class="c2">new</span><span class="c3">&nbsp;Phone(</span><span class="c4">&quot;iPhone
                        8&quot;</span><span class="c3">, </span><span class="c6">52000</span><span class="c3">), <br>
                        &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">new</span><span
                        class="c3">&nbsp;Phone(</span><span class="c4">&quot;Nokia 9&quot;</span><span class="c3">,
                    </span><span class="c6">35000</span><span class="c3">),<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;
                        &nbsp;</span><span class="c2">new</span><span class="c3">&nbsp;Phone(</span><span
                        class="c4">&quot;Samsung Galaxy S9&quot;</span><span class="c3">, </span><span
                        class="c6">48000</span><span class="c3">),<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;
                        &nbsp;</span><span class="c2">new</span><span class="c3">&nbsp;Phone(</span><span
                        class="c4">&quot;HTC U12&quot;</span><span class="c3">, </span><span
                        class="c6">36000</span><span class="c3">)<br> &nbsp; &nbsp; &nbsp; &nbsp;}));<br><br> &nbsp;
                        &nbsp; &nbsp; &nbsp;Phone min = phones.stream().min(Phone::compare).get();<br> &nbsp; &nbsp;
                        &nbsp; &nbsp;Phone max = phones.stream().max(Phone::compare).get();<br> &nbsp; &nbsp; &nbsp;
                        &nbsp;System.out.printf(</span><span class="c4">&quot;MIN Nume: %s Pre&#539;: %d
                        \n&quot;</span><span class="c3">, min.getName(), min.getPrice());<br> &nbsp; &nbsp; &nbsp;
                        &nbsp;System.out.printf(</span><span class="c4">&quot;MAX Nume: %s Pre&#539;: %d
                        \n&quot;</span><span class="c3">, max.getName(), max.getPrice());<br> &nbsp;
                        &nbsp;}<br>}<br><br></span><span class="c2">class</span><span class="c3">&nbsp;</span><span
                        class="c10">Phone</span><span class="c3">&nbsp;{<br><br> &nbsp; &nbsp;</span><span
                        class="c2">private</span><span class="c3">&nbsp;String name;<br> &nbsp; &nbsp;</span><span
                        class="c2">private</span><span class="c3">&nbsp;</span><span class="c2">int</span><span
                        class="c3">&nbsp;price;<br><br> &nbsp; &nbsp;</span><span class="c2">public</span><span
                        class="c3">&nbsp;</span><span class="c10">Phone</span><span class="c3">(String name,
                    </span><span class="c2">int</span><span class="c3">&nbsp;price){<br> &nbsp; &nbsp; &nbsp;
                        &nbsp;</span><span class="c2">this</span><span class="c3">.name = name;<br> &nbsp; &nbsp; &nbsp;
                        &nbsp;</span><span class="c2">this</span><span class="c3">.price = price;<br> &nbsp; &nbsp;}<br>
                        &nbsp; &nbsp;</span><span class="c2">public</span><span class="c3">&nbsp;</span><span
                        class="c2">static</span><span class="c3">&nbsp;</span><span class="c2">int</span><span
                        class="c3">&nbsp;</span><span class="c10">compare</span><span class="c3">(Phone p1, Phone
                        p2){<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">return</span><span
                        class="c3">&nbsp;Integer.compare(p1.getPrice(), p2.getPrice());<br> &nbsp; &nbsp;}<br> &nbsp;
                        &nbsp;</span><span class="c2">public</span><span class="c3">&nbsp;String </span><span
                        class="c10">getName</span><span class="c3">() { </span><span class="c2">return</span><span
                        class="c3">&nbsp;name; }<br> &nbsp; &nbsp;</span><span class="c2">public</span><span
                        class="c3">&nbsp;</span><span class="c2">int</span><span class="c3">&nbsp;</span><span
                        class="c10">getPrice</span><span class="c3">() { </span><span class="c2">return</span><span
                        class="c3">&nbsp;price; }<br>}</span></p>
            </td>
        </tr>
    </table>
    <p class="c0"><span class="c7"></span></p>
    <p class="c11"><span class="c7">&Icirc;n acest caz, g&#259;sim obiectul Phone cu pre&#539;ul minim &#537;i maxim.
            Metoda de comparare este definit&#259; &icirc;n clasa Phone, iar metoda compare este utilizat&#259; &icirc;n
            min &#537;i max pentru compararea obiectelor.</span></p>
    <p class="c0"><span class="c7"></span></p>
    <p class="c11"><span class="c7">Rezultatul &icirc;n consol&#259;:</span></p>
    <p class="c0"><span class="c7"></span></p>
    <table class="c1">
        <tr class="c13">
            <td class="c16" colspan="1" rowspan="1">
                <p class="c14"><span class="c3">MIN Nume: Nokia </span><span class="c6">9</span><span
                        class="c3">&nbsp;Pre&#539;: </span><span class="c6">35000</span><span class="c3"><br>MAX Nume:
                        iPhone </span><span class="c6">8</span><span class="c3">&nbsp;Pre&#539;: </span><span
                        class="c6">52000</span></p>
            </td>
        </tr>
    </table>
    <p class="c0"><span class="c7"></span></p>
    <p class="c0"><span class="c7"></span></p>
</body>

</html>