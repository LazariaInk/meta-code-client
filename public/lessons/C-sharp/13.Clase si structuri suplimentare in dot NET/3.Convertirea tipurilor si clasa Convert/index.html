<html><head><meta content="text/html; charset=UTF-8" http-equiv="content-type"><link rel="stylesheet" type="text/css" href="/lessons/styles.css"></head><body class="c18 doc-content"><p class="c11"><span class="c19">Convertirea tipurilor &#537;i clasa Convert.</span></p><p class="c5"><span class="c4"></span></p><p class="c11"><span class="c16">Metodele Parse &#537;i TryParse.</span></p><p class="c5"><span class="c4"></span></p><p class="c11"><span class="c6">Toate tipurile primitive au dou&#259; metode care permit convertirea unei &#537;iruri &icirc;n tipul respectiv. Aceste metode sunt </span><span class="c14">Parse()</span><span class="c6">&nbsp;&#537;i </span><span class="c14">TryParse()</span><span class="c4">.</span></p><p class="c5"><span class="c4"></span></p><p class="c11"><span class="c6">Metoda </span><span class="c14">Parse()</span><span class="c4">&nbsp;accept&#259; ca parametru un &#537;ir de caractere &#537;i returneaz&#259; un obiect de tipul curent. De exemplu:</span></p><p class="c5"><span class="c4"></span></p><a id="t.b3847df50b83ea7cfb66064e21ee137af888e547"></a><a id="t.0"></a><table class="c12"><tr class="c10"><td class="c15" colspan="1" rowspan="1"><p class="c2"><span class="c0">int</span><span class="c7">&nbsp;a = </span><span class="c0">int</span><span class="c7">.Parse(</span><span class="c3">&quot;10&quot;</span><span class="c7">);<br></span><span class="c0">double</span><span class="c7">&nbsp;b = </span><span class="c0">double</span><span class="c7">.Parse(</span><span class="c3">&quot;23,56&quot;</span><span class="c7">);<br></span><span class="c0">decimal</span><span class="c7">&nbsp;c = </span><span class="c0">decimal</span><span class="c7">.Parse(</span><span class="c3">&quot;12,45&quot;</span><span class="c7">);<br></span><span class="c0">byte</span><span class="c7">&nbsp;d = </span><span class="c0">byte</span><span class="c7">.Parse(</span><span class="c3">&quot;4&quot;</span><span class="c7">);<br>Console.WriteLine(</span><span class="c3">$&quot;a={a} &nbsp;b={b} &nbsp;c={c} &nbsp;d={d}&quot;</span><span class="c7">);</span></p></td></tr></table><p class="c5"><span class="c4"></span></p><p class="c11"><span class="c4">Este de remarcat faptul c&#259; parsarea numerelor zecimale depinde de set&#259;rile culturii curente. &Icirc;n special, pentru a ob&#539;ine un num&#259;r de tip double, am transmis &#537;irul &quot;23,56&quot; cu virgul&#259; ca separator. Dac&#259; a&#537; fi transmis punct &icirc;n loc de virgul&#259;, aplica&#539;ia ar fi generat o eroare de execu&#539;ie. Pe calculatoarele cu o alt&#259; localizare, dimpotriv&#259;, utilizarea virgulei &icirc;n loc de punct ar fi generat o eroare.</span></p><p class="c5"><span class="c4"></span></p><p class="c11"><span class="c6">Pentru a nu depinde de diferen&#539;ele culturale, putem stabili un format clar folosind clasa </span><span class="c14">NumberFormatInfo </span><span class="c6">&#537;i proprietatea sa </span><span class="c14">NumberDecimalSeparator</span><span class="c4">:</span></p><p class="c5"><span class="c4"></span></p><a id="t.4558f18a5fc4b03c290605483c1fcc04dee71b93"></a><a id="t.1"></a><table class="c12"><tr class="c10"><td class="c15" colspan="1" rowspan="1"><p class="c2"><span class="c0">using</span><span class="c7">&nbsp;System.Globalization;<br><br>IFormatProvider formatter = </span><span class="c0">new</span><span class="c7">&nbsp;NumberFormatInfo { NumberDecimalSeparator = </span><span class="c3">&quot;.&quot;</span><span class="c7">&nbsp;};<br></span><span class="c0">double</span><span class="c7">&nbsp;number = </span><span class="c0">double</span><span class="c7">.Parse(</span><span class="c3">&quot;23.56&quot;</span><span class="c7">, formatter);<br>Console.WriteLine(number); &nbsp; </span><span class="c17">// 23,56</span></p></td></tr></table><p class="c5"><span class="c4"></span></p><p class="c11"><span class="c6">&Icirc;n acest caz, separatorul este stabilit ca punct. Cu toate acestea, utiliz&acirc;nd metoda Parse, putem &icirc;nt&acirc;lni poten&#539;ial o eroare, de exemplu, &icirc;n cazul transmiterii caracterelor alfabetice &icirc;n locul celor numerice. &Icirc;n acest caz, o alegere mai bun&#259; ar fi utilizarea metodei </span><span class="c14">TryParse(</span><span class="c6">). Aceasta &icirc;ncearc&#259; s&#259; converteasc&#259; &#537;irul &icirc;ntr-un tip &#537;i, dac&#259; conversia are succes, returneaz&#259; </span><span class="c14">true</span><span class="c4">. &Icirc;n caz contrar, returneaz&#259; false:</span></p><p class="c5"><span class="c4"></span></p><a id="t.ec100cc70da9283912a124d5bad7286cf6d0b187"></a><a id="t.2"></a><table class="c12"><tr class="c10"><td class="c15" colspan="1" rowspan="1"><p class="c2"><span class="c7">Console.WriteLine(</span><span class="c3">&quot;Introduce&#539;i un &#537;ir:&quot;</span><span class="c7">);<br></span><span class="c0">string</span><span class="c7">? input = Console.ReadLine();<br><br></span><span class="c0">bool</span><span class="c7">&nbsp;result = </span><span class="c0">int</span><span class="c7">.TryParse(input, </span><span class="c0">out</span><span class="c7">&nbsp;</span><span class="c0">var</span><span class="c7">&nbsp;number);<br></span><span class="c0">if</span><span class="c7">&nbsp;(result == </span><span class="c0">true</span><span class="c7">)<br> &nbsp; &nbsp;Console.WriteLine(</span><span class="c3">$&quot;Conversia a fost reu&#537;it&#259;. Num&#259;r: {number}&quot;</span><span class="c7">);<br></span><span class="c0">else</span><span class="c7"><br> &nbsp; &nbsp;Console.WriteLine(</span><span class="c3">&quot;Conversia a e&#537;uat&quot;</span><span class="c7">);</span></p></td></tr></table><p class="c5"><span class="c4"></span></p><p class="c11"><span class="c4">Dac&#259; conversia e&#537;ueaz&#259;, nu va fi aruncat&#259; nicio excep&#539;ie, pur &#537;i simplu metoda TryParse va returna false, iar variabila number va con&#539;ine valoarea implicit&#259;.</span></p><p class="c5"><span class="c4"></span></p><p class="c11"><span class="c16">Convert.</span></p><p class="c5"><span class="c4"></span></p><p class="c11"><span class="c6">Clasa </span><span class="c14">Convert </span><span class="c4">reprezint&#259; o alt&#259; modalitate de a converti valorile. Pentru aceasta, &icirc;n ea sunt definite urm&#259;toarele metode statice:</span></p><p class="c5"><span class="c4"></span></p><ul class="c8 lst-kix_ncbdqzutwzyf-0 start"><li class="c11 c13 li-bullet-0"><span class="c9">ToBoolean(value)</span></li></ul><p class="c1"><span class="c9"></span></p><ul class="c8 lst-kix_ncbdqzutwzyf-0"><li class="c11 c13 li-bullet-0"><span class="c9">ToByte(value)</span></li></ul><p class="c1"><span class="c9"></span></p><ul class="c8 lst-kix_ncbdqzutwzyf-0"><li class="c11 c13 li-bullet-0"><span class="c9">ToChar(value)</span></li></ul><p class="c1"><span class="c9"></span></p><ul class="c8 lst-kix_ncbdqzutwzyf-0"><li class="c11 c13 li-bullet-0"><span class="c9">ToDateTime(value)</span></li></ul><p class="c1"><span class="c9"></span></p><ul class="c8 lst-kix_ncbdqzutwzyf-0"><li class="c11 c13 li-bullet-0"><span class="c9">ToDecimal(value)</span></li></ul><p class="c1"><span class="c9"></span></p><ul class="c8 lst-kix_ncbdqzutwzyf-0"><li class="c11 c13 li-bullet-0"><span class="c9">ToDouble(value)</span></li></ul><p class="c1"><span class="c9"></span></p><ul class="c8 lst-kix_ncbdqzutwzyf-0"><li class="c11 c13 li-bullet-0"><span class="c9">ToInt16(value)</span></li></ul><p class="c1"><span class="c9"></span></p><ul class="c8 lst-kix_ncbdqzutwzyf-0"><li class="c11 c13 li-bullet-0"><span class="c9">ToInt32(value)</span></li></ul><p class="c1"><span class="c9"></span></p><ul class="c8 lst-kix_ncbdqzutwzyf-0"><li class="c11 c13 li-bullet-0"><span class="c9">ToInt64(value)</span></li></ul><p class="c1"><span class="c9"></span></p><ul class="c8 lst-kix_ncbdqzutwzyf-0"><li class="c11 c13 li-bullet-0"><span class="c9">ToSByte(value)</span></li></ul><p class="c1"><span class="c9"></span></p><ul class="c8 lst-kix_ncbdqzutwzyf-0"><li class="c11 c13 li-bullet-0"><span class="c9">ToSingle(value)</span></li></ul><p class="c1"><span class="c9"></span></p><ul class="c8 lst-kix_ncbdqzutwzyf-0"><li class="c11 c13 li-bullet-0"><span class="c9">ToUInt16(value)</span></li></ul><p class="c1"><span class="c9"></span></p><ul class="c8 lst-kix_ncbdqzutwzyf-0"><li class="c11 c13 li-bullet-0"><span class="c9">ToUInt32(value)</span></li></ul><p class="c1"><span class="c9"></span></p><ul class="c8 lst-kix_ncbdqzutwzyf-0"><li class="c11 c13 li-bullet-0"><span class="c9">ToUInt64(value)</span></li></ul><p class="c5"><span class="c4"></span></p><p class="c11"><span class="c4">Ca parametru, aceste metode pot accepta valori de diferite tipuri primitive, nu neap&#259;rat &#537;iruri:</span></p><p class="c5"><span class="c4"></span></p><a id="t.d4d7ba985350c0c62d1b01ef99873c0c8e14a514"></a><a id="t.3"></a><table class="c12"><tr class="c10"><td class="c15" colspan="1" rowspan="1"><p class="c2"><span class="c0">int</span><span class="c7">&nbsp;n = Convert.ToInt32(</span><span class="c3">&quot;23&quot;</span><span class="c7">);<br></span><span class="c0">bool</span><span class="c7">&nbsp;b = </span><span class="c0">true</span><span class="c7">;<br></span><span class="c0">double</span><span class="c7">&nbsp;d = Convert.ToDouble(b);<br>Console.WriteLine(</span><span class="c3">$&quot;n={n} &nbsp;d={d}&quot;</span><span class="c7">);</span></p></td></tr></table><p class="c5"><span class="c4"></span></p><p class="c11"><span class="c4">Totu&#537;i, la fel ca &icirc;n cazul metodei Parse, dac&#259; metoda nu reu&#537;e&#537;te s&#259; converteasc&#259; valoarea la tipul dorit, va arunca o excep&#539;ie FormatException.</span></p><p class="c5"><span class="c4"></span></p></body></html>