<html>

<head>
    <meta content="text/html; charset=UTF-8" http-equiv="content-type">
    <link rel="stylesheet" type="text/css" href="/lessons/styles.css">
</head>

<body class="c12 doc-content">
    <h1 class="c1 c17">Blocul catch și filtrele de excepții.</h1>
    <p class="c1 c5"><span class="c15"></span></p>
    <p class="c1"><span class="c15">Definirea blocului catch.</span></p>
    <p class="c1 c5"><span class="c6"></span></p>
    <p class="c1"><span class="c13">Tratamentul excep&#539;iilor este responsabilitatea blocului </span><span
            class="c10">catch</span><span class="c6">, care poate avea urm&#259;toarele forme:</span></p>
    <p class="c1 c5"><span class="c6"></span></p><a id="t.ca4aed0d893f7f5a8173fe6067e7d6be4dab1c3d"></a><a id="t.0"></a>
    <table class="c4">
        <tr class="c7">
            <td class="c0" colspan="1" rowspan="1">
                <p class="c9"><span class="c3">catch</span><span class="c2"><br>{<br> &nbsp; &nbsp;</span><span
                        class="c14">// instruc&#539;iuni executate</span><span class="c2"><br>}</span></p>
            </td>
        </tr>
    </table>
    <p class="c1 c5"><span class="c6"></span></p>
    <p class="c1"><span class="c6">Acest bloc trateaz&#259; orice excep&#539;ie care apare &icirc;n blocul try. Mai sus
            a fost demonstrat un exemplu al unui astfel de bloc.</span></p>
    <p class="c1 c5"><span class="c6"></span></p><a id="t.c90075e860994841fc83c2f01c750a2037621a94"></a><a id="t.1"></a>
    <table class="c4">
        <tr class="c7">
            <td class="c0" colspan="1" rowspan="1">
                <p class="c9"><span class="c3">catch</span><span class="c2">&nbsp;(tip_excep&#539;ie)<br>{<br> &nbsp;
                        &nbsp;</span><span class="c14">// instruc&#539;iuni executate</span><span
                        class="c2"><br>}</span></p>
            </td>
        </tr>
    </table>
    <p class="c1 c5"><span class="c6"></span></p>
    <p class="c1"><span class="c6">Acest bloc trateaz&#259; doar excep&#539;iile care corespund tipului specificat
            &icirc;n paranteze dup&#259; operatorul catch.</span></p>
    <p class="c1 c5"><span class="c6"></span></p>
    <p class="c1"><span class="c6">De exemplu, s&#259; trat&#259;m doar excep&#539;iile de tip
            DivideByZeroException:</span></p>
    <p class="c1 c5"><span class="c6"></span></p><a id="t.4d8a4b5b6e531c1ab237845fd91978e4d4354b76"></a><a id="t.2"></a>
    <table class="c4">
        <tr class="c7">
            <td class="c0" colspan="1" rowspan="1">
                <p class="c9"><span class="c3">try</span><span class="c2"><br>{<br> &nbsp; &nbsp;</span><span
                        class="c3">int</span><span class="c2">&nbsp;x = </span><span class="c11">5</span><span
                        class="c2">;<br> &nbsp; &nbsp;</span><span class="c3">int</span><span class="c2">&nbsp;y = x /
                    </span><span class="c11">0</span><span class="c2">;<br> &nbsp; &nbsp;Console.WriteLine(</span><span
                        class="c8">$&quot;Rezultatul: {y}&quot;</span><span class="c2">);<br>}<br></span><span
                        class="c3">catch</span><span class="c2">&nbsp;(DivideByZeroException)<br>{<br> &nbsp;
                        &nbsp;Console.WriteLine(</span><span class="c8">&quot;A ap&#259;rut o excep&#539;ie
                        DivideByZeroException&quot;</span><span class="c2">);<br>}</span></p>
            </td>
        </tr>
    </table>
    <p class="c1 c5"><span class="c6"></span></p>
    <p class="c1"><span class="c6">Cu toate acestea, dac&#259; &icirc;n blocul try apar excep&#539;ii de alte tipuri
            dec&acirc;t DivideByZeroException, acestea nu vor fi tratate.</span></p>
    <p class="c1 c5"><span class="c6"></span></p><a id="t.1db8de1138a4e132d2e594ca037fee928c725591"></a><a id="t.3"></a>
    <table class="c4">
        <tr class="c7">
            <td class="c0" colspan="1" rowspan="1">
                <p class="c9"><span class="c3">catch</span><span class="c2">&nbsp;(tip_excep&#539;ie
                        nume_variabil&#259;)<br>{<br> &nbsp; &nbsp;</span><span class="c14">// instruc&#539;iuni
                        executate</span><span class="c2"><br>}</span></p>
            </td>
        </tr>
    </table>
    <p class="c1 c5"><span class="c6"></span></p>
    <p class="c1"><span class="c6">Acest bloc trateaz&#259; doar excep&#539;iile care corespund tipului specificat
            &icirc;n paranteze dup&#259; operatorul catch, iar toat&#259; informa&#539;ia despre excep&#539;ie este
            plasat&#259; &icirc;ntr-o variabil&#259; de acest tip. De exemplu:</span></p>
    <p class="c1 c5"><span class="c6"></span></p><a id="t.ac3a4cf56585f2d236293b53f23a4a9373418370"></a><a id="t.4"></a>
    <table class="c4">
        <tr class="c7">
            <td class="c0" colspan="1" rowspan="1">
                <p class="c9"><span class="c3">try</span><span class="c2"><br>{<br> &nbsp; &nbsp;</span><span
                        class="c3">int</span><span class="c2">&nbsp;x = </span><span class="c11">5</span><span
                        class="c2">;<br> &nbsp; &nbsp;</span><span class="c3">int</span><span class="c2">&nbsp;y = x /
                    </span><span class="c11">0</span><span class="c2">;<br> &nbsp; &nbsp;Console.WriteLine(</span><span
                        class="c8">$&quot;Rezultatul: {y}&quot;</span><span class="c2">);<br>}<br></span><span
                        class="c3">catch</span><span class="c2">&nbsp;(DivideByZeroException ex)<br>{<br> &nbsp;
                        &nbsp;Console.WriteLine(</span><span class="c8">$&quot;A ap&#259;rut o excep&#539;ie:
                        {ex.Message}&quot;</span><span class="c2">);<br>}</span></p>
            </td>
        </tr>
    </table>
    <p class="c1 c5"><span class="c6"></span></p>
    <p class="c1"><span class="c13">Acest caz este similar cu cel precedent, cu excep&#539;ia faptului c&#259; aici se
            folose&#537;te o variabil&#259;. &Icirc;n acest caz, informa&#539;iile despre excep&#539;ia
            ap&#259;rut&#259; sunt plasate &icirc;n variabila ex, care reprezint&#259; tipul DivideByZeroException. Cu
            ajutorul propriet&#259;&#539;ii </span><span class="c13 c18">Message </span><span class="c6">putem
            ob&#539;ine mesajul de eroare.</span></p>
    <p class="c1 c5"><span class="c6"></span></p>
    <p class="c1"><span class="c6">Dac&#259; nu avem nevoie de informa&#539;ii despre excep&#539;ie, putem s&#259; nu
            folosim variabila, ca &icirc;n cazul precedent.</span></p>
    <p class="c1 c5"><span class="c6"></span></p>
    <p class="c1"><span class="c15">Filtrele de excep&#539;ii.</span></p>
    <p class="c1 c5"><span class="c6"></span></p>
    <p class="c1"><span class="c13">Filtrele de excep&#539;ii permit tratarea excep&#539;iilor &icirc;n func&#539;ie de
            anumite condi&#539;ii. Pentru a le aplica, dup&#259; expresia catch urmeaz&#259; expresia </span><span
            class="c10">when</span><span class="c6">, dup&#259; care &icirc;n paranteze se specific&#259;
            condi&#539;ia:</span></p>
    <p class="c1 c5"><span class="c6"></span></p><a id="t.29d2c77e66ca75ec2128295563fa109a7ae7351e"></a><a id="t.5"></a>
    <table class="c4">
        <tr class="c7">
            <td class="c0" colspan="1" rowspan="1">
                <p class="c9"><span class="c3">catch</span><span class="c2">&nbsp;</span><span
                        class="c16">when</span><span class="c2">(condi&#539;ie)<br>{<br> &nbsp; &nbsp;</span><span
                        class="c14">// instruc&#539;iuni executate</span><span class="c2"><br>}</span></p>
            </td>
        </tr>
    </table>
    <p class="c1 c5"><span class="c6"></span></p>
    <p class="c1"><span class="c6">&Icirc;n acest caz, tratarea excep&#539;iei &icirc;n blocul catch are loc doar
            dac&#259; condi&#539;ia din expresia when este adev&#259;rat&#259;. De exemplu:</span></p>
    <p class="c1 c5"><span class="c6"></span></p><a id="t.5f09e192e72e32dfbe07f4c03141cd3810eefd44"></a><a id="t.6"></a>
    <table class="c4">
        <tr class="c7">
            <td class="c0" colspan="1" rowspan="1">
                <p class="c9"><span class="c3">int</span><span class="c2">&nbsp;x = </span><span
                        class="c11">1</span><span class="c2">;<br></span><span class="c3">int</span><span
                        class="c2">&nbsp;y = </span><span class="c11">0</span><span class="c2">;<br><br></span><span
                        class="c3">try</span><span class="c2"><br>{<br> &nbsp; &nbsp;</span><span
                        class="c3">int</span><span class="c2">&nbsp;result1 = x / y;<br> &nbsp; &nbsp;</span><span
                        class="c3">int</span><span class="c2">&nbsp;result2 = y / x;<br>}<br></span><span
                        class="c3">catch</span><span class="c2">&nbsp;(DivideByZeroException) when (y == </span><span
                        class="c11">0</span><span class="c2">)<br>{<br> &nbsp; &nbsp;Console.WriteLine(</span><span
                        class="c8">&quot;y nu trebuie s&#259; fie egal cu 0&quot;</span><span
                        class="c2">);<br>}<br></span><span class="c3">catch</span><span
                        class="c2">&nbsp;(DivideByZeroException ex)<br>{<br> &nbsp;
                        &nbsp;Console.WriteLine(ex.Message);<br>}</span></p>
            </td>
        </tr>
    </table>
    <p class="c1 c5"><span class="c6"></span></p>
    <p class="c1"><span class="c13">&Icirc;n acest caz va fi aruncat&#259; o excep&#539;ie, deoarece y=0. Aici avem
            dou&#259; blocuri catch, ambele trat&acirc;nd excep&#539;ii de tip DivideByZeroException, adic&#259; toate
            excep&#539;iile generate la &icirc;mp&#259;r&#539;irea la zero. Dar, deoarece pentru primul bloc este
            specificat&#259; condi&#539;ia</span><span class="c10">&nbsp;y == 0</span><span class="c13">, acest bloc va
            trata excep&#539;ia - condi&#539;ia specificat&#259; dup&#259; operatorul </span><span class="c10">when
        </span><span class="c6">returneaz&#259; true.</span></p>
    <p class="c1 c5"><span class="c6"></span></p>
    <p class="c1"><span class="c6">Situa&#539;ia opus&#259;:</span></p>
    <p class="c1 c5"><span class="c6"></span></p><a id="t.faef8a6d0927b45b8a093681f2d2abfed284b23b"></a><a id="t.7"></a>
    <table class="c4">
        <tr class="c7">
            <td class="c0" colspan="1" rowspan="1">
                <p class="c9"><span class="c3">int</span><span class="c2">&nbsp;x = </span><span
                        class="c11">0</span><span class="c2">;<br></span><span class="c3">int</span><span
                        class="c2">&nbsp;y = </span><span class="c11">1</span><span class="c2">;<br><br></span><span
                        class="c3">try</span><span class="c2"><br>{<br> &nbsp; &nbsp;</span><span
                        class="c3">int</span><span class="c2">&nbsp;result1 = x / y;<br> &nbsp; &nbsp;</span><span
                        class="c3">int</span><span class="c2">&nbsp;result2 = y / x;<br>}<br></span><span
                        class="c3">catch</span><span class="c2">&nbsp;(DivideByZeroException) when (y == </span><span
                        class="c11">0</span><span class="c2">)<br>{<br> &nbsp; &nbsp;Console.WriteLine(</span><span
                        class="c8">&quot;y nu trebuie s&#259; fie egal cu 0&quot;</span><span
                        class="c2">);<br>}<br></span><span class="c3">catch</span><span
                        class="c2">&nbsp;(DivideByZeroException ex)<br>{<br> &nbsp;
                        &nbsp;Console.WriteLine(ex.Message);<br>}</span></p>
            </td>
        </tr>
    </table>
    <p class="c1 c5"><span class="c6"></span></p>
    <p class="c1"><span class="c13">&Icirc;n acest caz va fi aruncat&#259; o excep&#539;ie, deoarece x=0. Condi&#539;ia
            primului bloc catch - </span><span class="c10">y == 0 </span><span class="c6">- acum returneaz&#259; false.
            Prin urmare, CLR va continua s&#259; caute blocuri catch corespunz&#259;toare &#537;i va alege pentru
            tratarea excep&#539;iei al doilea bloc catch. &Icirc;n final, dac&#259; elimin&#259;m al doilea bloc catch,
            excep&#539;ia nu va fi tratat&#259; deloc.</span></p>
    <p class="c1 c5"><span class="c6"></span></p>
</body>

</html>