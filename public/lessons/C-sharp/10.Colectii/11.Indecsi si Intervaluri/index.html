<html><head><meta content="text/html; charset=UTF-8" http-equiv="content-type"><link rel="stylesheet" type="text/css" href="/lessons/styles.css"></head><body class="c15 doc-content"><p class="c5"><span class="c16">Indec&#537;i &#537;i Intervaluri.</span></p><p class="c5 c8"><span class="c0"></span></p><p class="c5"><span class="c13">&Icirc;n C# 8.0 a fost ad&#259;ugat&#259; o nou&#259; func&#539;ionalitate - indec&#537;i &#537;i intervaluri, care simplific&#259; ob&#539;inerea subarray-urilor din array-uri. Pentru aceasta, &icirc;n C# exist&#259; dou&#259; tipuri:</span><span class="c4">&nbsp;System.Range </span><span class="c13">&#537;i</span><span class="c4">&nbsp;System.Index</span><span class="c0">. Ambele tipuri sunt structuri. Tipul Range reprezint&#259; un anumit interval de valori &icirc;ntr-o secven&#539;&#259;, iar tipul Index - un index &icirc;n secven&#539;&#259;.</span></p><p class="c5 c8"><span class="c0"></span></p><p class="c5"><span class="c17">Indec&#537;i.</span></p><p class="c5 c8"><span class="c0"></span></p><p class="c5"><span class="c0">Indexul reprezint&#259; de fapt o valoare numeric&#259;, &#537;i la definirea indexului putem specifica aceast&#259; valoare:</span></p><p class="c5 c8"><span class="c0"></span></p><a id="t.33a66ea91f46b10b53a58b2f4bd20bdf1928c458"></a><a id="t.0"></a><table class="c14"><tr class="c3"><td class="c9" colspan="1" rowspan="1"><p class="c11"><span class="c2">Index myIndex = </span><span class="c6">2</span><span class="c2">;</span></p></td></tr></table><p class="c5 c8"><span class="c0"></span></p><p class="c5"><span class="c0">&Icirc;n acest caz, indexul reprezint&#259; al treilea element al secven&#539;ei (indexarea &icirc;ncepe de la 0).</span></p><p class="c5 c8"><span class="c0"></span></p><p class="c5"><span class="c13">Cu ajutorul operatorului special </span><span class="c4">^ </span><span class="c0">putem seta indexul relativ la sf&acirc;r&#537;itul secven&#539;ei.</span></p><p class="c5 c8"><span class="c0"></span></p><a id="t.357a76cd4bf2085b68d3444d0eb4f4dfb9f35b82"></a><a id="t.1"></a><table class="c14"><tr class="c3"><td class="c9" colspan="1" rowspan="1"><p class="c11"><span class="c2">Index myIndex = ^</span><span class="c6">2</span><span class="c2">;</span></p></td></tr></table><p class="c5 c8"><span class="c0"></span></p><p class="c5"><span class="c0">Acum indexul reprezint&#259; al doilea element de la sf&acirc;r&#537;itul secven&#539;ei, adic&#259; penultimul element.</span></p><p class="c5 c8"><span class="c0"></span></p><p class="c5"><span class="c0">Utiliz&#259;m indec&#537;ii pentru a ob&#539;ine elemente dintr-un array:</span></p><p class="c5 c8"><span class="c0"></span></p><a id="t.4138fff18cc13e0fdf268503db63ad94afec2605"></a><a id="t.2"></a><table class="c14"><tr class="c3"><td class="c9" colspan="1" rowspan="1"><p class="c11"><span class="c2">Index myIndex1 = </span><span class="c6">2</span><span class="c2">; &nbsp; &nbsp; </span><span class="c7">// al treilea element</span><span class="c2"><br>Index myIndex2 = ^</span><span class="c6">2</span><span class="c2">; &nbsp; &nbsp;</span><span class="c7">// penultimul element</span><span class="c2"><br><br></span><span class="c12">string</span><span class="c2">[] people = { </span><span class="c1">&quot;Tom&quot;</span><span class="c2">, </span><span class="c1">&quot;Bob&quot;</span><span class="c2">, </span><span class="c1">&quot;Sam&quot;</span><span class="c2">, </span><span class="c1">&quot;Kate&quot;</span><span class="c2">, </span><span class="c1">&quot;Alice&quot;</span><span class="c2">&nbsp;};<br></span><span class="c12">string</span><span class="c2">&nbsp;selected1 = people[myIndex1]; &nbsp; &nbsp;</span><span class="c7">// Sam</span><span class="c2"><br></span><span class="c12">string</span><span class="c2">&nbsp;selected2 = people[myIndex2]; &nbsp; &nbsp;</span><span class="c7">// Kate</span><span class="c2"><br>Console.WriteLine(selected1); &nbsp; <br>Console.WriteLine(selected2);</span></p></td></tr></table><p class="c5 c8"><span class="c0"></span></p><p class="c5"><span class="c0">De fapt, pentru aceast&#259; sarcin&#259;, indec&#537;ii nu sunt necesari &#537;i putem folosi capacit&#259;&#539;ile standard ale array-urilor:</span></p><p class="c5 c8"><span class="c0"></span></p><a id="t.4550c4829040348fad403ecd734492c96c125d38"></a><a id="t.3"></a><table class="c14"><tr class="c3"><td class="c9" colspan="1" rowspan="1"><p class="c11"><span class="c12">string</span><span class="c2">[] people = { </span><span class="c1">&quot;Tom&quot;</span><span class="c2">, </span><span class="c1">&quot;Bob&quot;</span><span class="c2">, </span><span class="c1">&quot;Sam&quot;</span><span class="c2">, </span><span class="c1">&quot;Kate&quot;</span><span class="c2">, </span><span class="c1">&quot;Alice&quot;</span><span class="c2">&nbsp;};<br></span><span class="c12">string</span><span class="c2">&nbsp;selected1 = people[</span><span class="c6">2</span><span class="c2">]; &nbsp; &nbsp;</span><span class="c7">// Sam</span><span class="c2"><br></span><span class="c12">string</span><span class="c2">&nbsp;selected2 = people[people.Length - </span><span class="c6">2</span><span class="c2">]; &nbsp; &nbsp;</span><span class="c7">// Kate</span><span class="c2"><br>Console.WriteLine(selected1); &nbsp; <br>Console.WriteLine(selected2);</span></p></td></tr></table><p class="c5 c8"><span class="c0"></span></p><p class="c5"><span class="c13">Deci, &icirc;n astfel de situa&#539;ii, avantajul indec&#537;ilor este o mai bun&#259; lizibilitate. Astfel, </span><span class="c10">people[^2]</span><span class="c13">&nbsp;este mai lizibil dec&acirc;t </span><span class="c10">people[people.Length - 2]</span><span class="c0">.</span></p><p class="c5 c8"><span class="c0"></span></p><p class="c5"><span class="c17">Intervaluri.</span></p><p class="c5 c8"><span class="c0"></span></p><p class="c5"><span class="c13">Intervalul reprezint&#259; o parte a secven&#539;ei, care este delimitat&#259; de doi indec&#537;i. Indexul de &icirc;nceput este inclus &icirc;n interval, iar indexul de sf&acirc;r&#537;it nu este inclus &icirc;n interval. Pentru a defini un interval se folose&#537;te operatorul </span><span class="c4">..</span><span class="c0">:</span></p><p class="c5 c8"><span class="c0"></span></p><a id="t.75b09bbd33437b938989a0f9ed82f5ff99ffcd30"></a><a id="t.4"></a><table class="c14"><tr class="c3"><td class="c9" colspan="1" rowspan="1"><p class="c11"><span class="c2">Range myRange1 = </span><span class="c6">1..4</span><span class="c2">; </span><span class="c7">// de la indexul 1 inclusiv p&acirc;n&#259; la indexul 4 exclusiv</span></p></td></tr></table><p class="c5 c8"><span class="c0"></span></p><p class="c5"><span class="c0">&Icirc;n acest caz, intervalul myRange1 include elementele de la indexul 1 p&acirc;n&#259; la indexul 4 (exclusiv). Indexul de sf&acirc;r&#537;it nu este inclus &icirc;n interval. Limitele intervalului sunt specificate nu doar prin numere, ci prin obiecte Index. Deci, urm&#259;toarele defini&#539;ii ale intervalurilor vor fi echivalente:</span></p><p class="c5 c8"><span class="c0"></span></p><a id="t.603a6be643166980a7d40289fe32f05a25501ac6"></a><a id="t.5"></a><table class="c14"><tr class="c3"><td class="c9" colspan="1" rowspan="1"><p class="c11"><span class="c2">Index start = </span><span class="c6">1</span><span class="c2">;<br>Index end = </span><span class="c6">4</span><span class="c2">;<br>Range myRange1 = start..end;<br><br>Range myRange2 = </span><span class="c6">1..4</span><span class="c2">;</span></p></td></tr></table><p class="c5 c8"><span class="c0"></span></p><p class="c5"><span class="c0">Utilizarea practic&#259; a intervalurilor - ob&#539;inem al doilea p&acirc;n&#259; la al patrulea element dintr-un array:</span></p><p class="c5 c8"><span class="c0"></span></p><a id="t.d49130d9159e03e697ddcb7ee5b9a89b8cb51245"></a><a id="t.6"></a><table class="c14"><tr class="c3"><td class="c9" colspan="1" rowspan="1"><p class="c11"><span class="c12">string</span><span class="c2">[] people = { </span><span class="c1">&quot;Tom&quot;</span><span class="c2">, </span><span class="c1">&quot;Bob&quot;</span><span class="c2">, </span><span class="c1">&quot;Sam&quot;</span><span class="c2">, </span><span class="c1">&quot;Kate&quot;</span><span class="c2">, </span><span class="c1">&quot;Alice&quot;</span><span class="c2">&nbsp;};<br></span><span class="c12">string</span><span class="c2">[] peopleRange = people[</span><span class="c6">1..4</span><span class="c2">]; </span><span class="c7">// ob&#539;inem elementele 2, 3 &#537;i 4 din array</span><span class="c2"><br></span><span class="c12">foreach</span><span class="c2">&nbsp;(</span><span class="c12">var</span><span class="c2">&nbsp;person </span><span class="c12">in</span><span class="c2">&nbsp;peopleRange)<br>{<br> &nbsp; &nbsp;Console.WriteLine(person);<br>}</span></p></td></tr></table><p class="c5 c8"><span class="c0"></span></p><p class="c5"><span class="c13">Rezultatul opera&#539;iei</span><span class="c10">&nbsp;people[1..4] </span><span class="c0">este un subarray de elemente de la indexul 1 la indexul 3 (inclusiv). Ie&#537;irea &icirc;n consol&#259;:</span></p><p class="c5 c8"><span class="c0"></span></p><a id="t.9c44ae664b0cd1f25d94978e0e71c30e4fc8d430"></a><a id="t.7"></a><table class="c14"><tr class="c3"><td class="c9" colspan="1" rowspan="1"><p class="c11"><span class="c2">Bob<br>Sam<br>Kate</span></p></td></tr></table><p class="c5 c8"><span class="c0"></span></p><p class="c5"><span class="c0">Putem specifica doar indexul de sf&acirc;r&#537;it pentru un interval. &Icirc;n acest caz, indexul de &icirc;nceput va fi implicit 0.</span></p><p class="c5 c8"><span class="c0"></span></p><a id="t.9d701fdd189b160c95f06526086bec4507f2cb0d"></a><a id="t.8"></a><table class="c14"><tr class="c3"><td class="c9" colspan="1" rowspan="1"><p class="c11"><span class="c12">string</span><span class="c2">[] people = { </span><span class="c1">&quot;Tom&quot;</span><span class="c2">, </span><span class="c1">&quot;Bob&quot;</span><span class="c2">, </span><span class="c1">&quot;Sam&quot;</span><span class="c2">, </span><span class="c1">&quot;Kate&quot;</span><span class="c2">, </span><span class="c1">&quot;Alice&quot;</span><span class="c2">&nbsp;};<br></span><span class="c12">string</span><span class="c2">[] peopleRange = people[.</span><span class="c6">.4</span><span class="c2">]; &nbsp; &nbsp; </span><span class="c7">// Tom, Bob, Sam, Kate</span></p></td></tr></table><p class="c5 c8"><span class="c0"></span></p><p class="c5"><span class="c0">Sau, dimpotriv&#259;, s&#259; specific&#259;m doar indexul de &icirc;nceput, atunci indexul de sf&acirc;r&#537;it va fi ultimul index din secven&#539;&#259;:</span></p><p class="c5 c8"><span class="c0"></span></p><a id="t.f55610a951828879059db3e52135435e78449994"></a><a id="t.9"></a><table class="c14"><tr class="c3"><td class="c9" colspan="1" rowspan="1"><p class="c11"><span class="c12">string</span><span class="c2">[] people = { </span><span class="c1">&quot;Tom&quot;</span><span class="c2">, </span><span class="c1">&quot;Bob&quot;</span><span class="c2">, </span><span class="c1">&quot;Sam&quot;</span><span class="c2">, </span><span class="c1">&quot;Kate&quot;</span><span class="c2">, </span><span class="c1">&quot;Alice&quot;</span><span class="c2">&nbsp;};<br></span><span class="c12">string</span><span class="c2">[] peopleRange = people[</span><span class="c6">1.</span><span class="c2">.]; &nbsp; &nbsp; </span><span class="c7">// Bob, Sam, Kate, Alice</span></p></td></tr></table><p class="c5 c8"><span class="c0"></span></p><p class="c5"><span class="c0">Folosind indec&#537;i relativi la sf&acirc;r&#537;itul secven&#539;ei, putem ob&#539;ine un interval relativ la sf&acirc;r&#537;itul secven&#539;ei:</span></p><p class="c5 c8"><span class="c0"></span></p><a id="t.c14d226ee70ab65bd219b7616c8ce6cb08e70f8d"></a><a id="t.10"></a><table class="c14"><tr class="c3"><td class="c9" colspan="1" rowspan="1"><p class="c11"><span class="c12">string</span><span class="c2">[] people = { </span><span class="c1">&quot;Tom&quot;</span><span class="c2">, </span><span class="c1">&quot;Bob&quot;</span><span class="c2">, </span><span class="c1">&quot;Sam&quot;</span><span class="c2">, </span><span class="c1">&quot;Kate&quot;</span><span class="c2">, </span><span class="c1">&quot;Alice&quot;</span><span class="c2">&nbsp;};<br></span><span class="c12">string</span><span class="c2">[] peopleRange1 = people[^</span><span class="c6">2.</span><span class="c2">.]; &nbsp; &nbsp; &nbsp; </span><span class="c7">// ultimele dou&#259; - Kate, Alice</span><span class="c2"><br></span><span class="c12">string</span><span class="c2">[] peopleRange2 = people[..^</span><span class="c6">1</span><span class="c2">]; &nbsp; &nbsp; &nbsp; </span><span class="c7">// de la &icirc;nceput p&acirc;n&#259; la penultimul - Tom, Bob, Sam, Kate</span><span class="c2"><br></span><span class="c12">string</span><span class="c2">[] peopleRange3 = people[^</span><span class="c6">3.</span><span class="c2">.^</span><span class="c6">1</span><span class="c2">]; &nbsp; &nbsp; </span><span class="c7">// dou&#259; &icirc;ncep&acirc;nd cu penultimul - Sam, Kate</span></p></td></tr></table><p class="c5 c8"><span class="c0"></span></p><p class="c5"><span class="c0">Pe l&acirc;ng&#259; array-uri, indec&#537;ii &#537;i intervalurile se aplic&#259; &#537;i obiectelor Span &#537;i ReadOnlySpan:</span></p><p class="c5 c8"><span class="c0"></span></p><a id="t.4e3aea8e1b63e41d03f2a945bd18707d47d02220"></a><a id="t.11"></a><table class="c14"><tr class="c3"><td class="c9" colspan="1" rowspan="1"><p class="c11"><span class="c12">string</span><span class="c2">[] people = { </span><span class="c1">&quot;Tom&quot;</span><span class="c2">, </span><span class="c1">&quot;Bob&quot;</span><span class="c2">, </span><span class="c1">&quot;Sam&quot;</span><span class="c2">, </span><span class="c1">&quot;Kate&quot;</span><span class="c2">, </span><span class="c1">&quot;Alice&quot;</span><span class="c2">&nbsp;};<br>Span&lt;</span><span class="c12">string</span><span class="c2">&gt; peopleSpan = people;<br>Span&lt;</span><span class="c12">string</span><span class="c2">&gt; selectedPeopleSpan = peopleSpan[</span><span class="c6">1..4</span><span class="c2">];<br></span><span class="c12">foreach</span><span class="c2">&nbsp;(</span><span class="c12">var</span><span class="c2">&nbsp;person </span><span class="c12">in</span><span class="c2">&nbsp;selectedPeopleSpan)<br>{<br> &nbsp; &nbsp;Console.WriteLine(person);<br>}</span></p></td></tr></table><p class="c5 c8"><span class="c0"></span></p><p class="c5 c8"><span class="c0"></span></p></body></html>