<html><head><meta content="text/html; charset=UTF-8" http-equiv="content-type"><style type="text/css">@import url(https://themes.googleusercontent.com/fonts/css?kit=chteh0fSOiSrmusp8u43YLibRAUGyvCIyNwOfYj8c_aH4gUIUjZTH34PuvJkbTJT);ol{margin:0;padding:0}table td,table th{padding:0}.c10{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:0pt;border-right-width:0pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:0pt;border-top-style:solid;background-color:#333333;border-left-style:solid;border-bottom-width:0pt;width:468pt;border-top-color:#000000;border-bottom-style:solid}.c1{color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:12pt;font-family:"Open Sans";font-style:normal}.c9{padding-top:0pt;padding-bottom:0pt;line-height:1.5;orphans:2;widows:2;text-align:left;height:11pt}.c19{color:#000000;font-weight:700;text-decoration:none;vertical-align:baseline;font-size:27pt;font-family:"Open Sans";font-style:normal}.c8{color:#000000;font-weight:700;text-decoration:none;vertical-align:baseline;font-size:15pt;font-family:"Open Sans";font-style:normal}.c11{padding-top:0pt;padding-bottom:0pt;line-height:1.5;orphans:2;widows:2;text-align:left}.c3{background-color:#333333;font-size:12pt;font-family:"Consolas";color:#a2fca2;font-weight:400}.c16{background-color:#333333;font-size:12pt;font-family:"Consolas";color:#888888;font-weight:400}.c7{background-color:#333333;font-size:12pt;font-family:"Consolas";color:#ffffaa;font-weight:400}.c0{background-color:#333333;font-size:12pt;font-family:"Consolas";color:#ffffff;font-weight:400}.c13{background-color:#333333;font-size:12pt;font-family:"Consolas";color:#fc9b9b;font-weight:400}.c4{background-color:#333333;font-size:12pt;font-family:"Consolas";color:#fcc28c;font-weight:400}.c5{background-color:#333333;font-size:12pt;font-family:"Consolas";color:#d36363;font-weight:400}.c17{padding-top:0pt;padding-bottom:0pt;line-height:1.15;text-align:left}.c2{border-spacing:0;border-collapse:collapse;margin-right:auto}.c12{font-size:12pt;font-family:"Open Sans";font-weight:400}.c14{background-color:#ffffff;max-width:468pt;padding:72pt 72pt 72pt 72pt}.c6{font-size:12pt;font-family:"Open Sans";font-weight:700}.c15{height:0pt}.c18{font-style:italic}.title{padding-top:0pt;color:#000000;font-size:26pt;padding-bottom:3pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}.subtitle{padding-top:0pt;color:#666666;font-size:15pt;padding-bottom:16pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}li{color:#000000;font-size:11pt;font-family:"Arial"}p{margin:0;color:#000000;font-size:11pt;font-family:"Arial"}h1{padding-top:20pt;color:#000000;font-size:20pt;padding-bottom:6pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h2{padding-top:18pt;color:#000000;font-size:16pt;padding-bottom:6pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h3{padding-top:16pt;color:#434343;font-size:14pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h4{padding-top:14pt;color:#666666;font-size:12pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h5{padding-top:12pt;color:#666666;font-size:11pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h6{padding-top:12pt;color:#666666;font-size:11pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;font-style:italic;orphans:2;widows:2;text-align:left}</style></head><body class="c14 doc-content"><p class="c11"><span class="c19">Proiec&#539;ia datelor.</span></p><p class="c9"><span class="c1"></span></p><p class="c11"><span class="c12">Proiec&#539;ia permite transformarea unui obiect de un anumit tip &icirc;ntr-un obiect de alt tip. Pentru proiec&#539;ie se folose&#537;te operatorul </span><span class="c6">select</span><span class="c1">. S&#259; presupunem c&#259; avem un set de obiecte ale urm&#259;toarei clase, care reprezint&#259; un utilizator:</span></p><p class="c9"><span class="c1"></span></p><a id="t.91597ec554d71c975d6719ada09d922090d63e4e"></a><a id="t.0"></a><table class="c2"><tr class="c15"><td class="c10" colspan="1" rowspan="1"><p class="c17"><span class="c0">record class </span><span class="c7">Person</span><span class="c0">(</span><span class="c4">string</span><span class="c0">&nbsp;Name, </span><span class="c4">int</span><span class="c0">&nbsp;Age);</span></p></td></tr></table><p class="c9"><span class="c1"></span></p><p class="c11"><span class="c1">Dar, s&#259; presupunem c&#259; avem nevoie doar de proprietatea Name a obiectului:</span></p><p class="c9"><span class="c1"></span></p><a id="t.7923f1f5477ddf3db0303a5b7c6f0fa812540be1"></a><a id="t.1"></a><table class="c2"><tr class="c15"><td class="c10" colspan="1" rowspan="1"><p class="c17"><span class="c4">var</span><span class="c0">&nbsp;people = </span><span class="c4">new</span><span class="c0">&nbsp;List&lt;Person&gt;<br>{<br> &nbsp; &nbsp;</span><span class="c4">new</span><span class="c0">&nbsp;Person (</span><span class="c3">&quot;Tom&quot;</span><span class="c0">, </span><span class="c5">23</span><span class="c0">),<br> &nbsp; &nbsp;</span><span class="c4">new</span><span class="c0">&nbsp;Person (</span><span class="c3">&quot;Bob&quot;</span><span class="c0">, </span><span class="c5">27</span><span class="c0">),<br> &nbsp; &nbsp;</span><span class="c4">new</span><span class="c0">&nbsp;Person (</span><span class="c3">&quot;Sam&quot;</span><span class="c0">, </span><span class="c5">29</span><span class="c0">),<br> &nbsp; &nbsp;</span><span class="c4">new</span><span class="c0">&nbsp;Person (</span><span class="c3">&quot;Alice&quot;</span><span class="c0">, </span><span class="c5">24</span><span class="c0">)<br>};<br><br></span><span class="c4">var</span><span class="c0">&nbsp;names = </span><span class="c4">from</span><span class="c0">&nbsp;p </span><span class="c4">in</span><span class="c0">&nbsp;people </span><span class="c4">select</span><span class="c0">&nbsp;p.Name;<br><br></span><span class="c4">foreach</span><span class="c0">&nbsp;(</span><span class="c4">string</span><span class="c0">&nbsp;n </span><span class="c4">in</span><span class="c0">&nbsp;names)<br> &nbsp; &nbsp; Console.WriteLine(n);</span></p></td></tr></table><p class="c9"><span class="c1"></span></p><p class="c11"><span class="c12">Rezultatul expresiei LINQ va reprezenta un set de &#537;iruri, deoarece expresia </span><span class="c12 c18">select p.Name</span><span class="c1">&nbsp;alege &icirc;n selec&#539;ia rezultat&#259; doar valorile propriet&#259;&#539;ii Name.</span></p><p class="c9"><span class="c1"></span></p><a id="t.3865a73fae9b0d01c0ea4ead1c0c9cb5c9e9e0e3"></a><a id="t.2"></a><table class="c2"><tr class="c15"><td class="c10" colspan="1" rowspan="1"><p class="c17"><span class="c0">Tom<br>Bob<br>Sam<br>Alice</span></p></td></tr></table><p class="c9"><span class="c1"></span></p><p class="c11"><span class="c12">Alternativ, am putea folosi metoda de extensie</span><span class="c6">&nbsp;Select()</span><span class="c1">:</span></p><p class="c9"><span class="c1"></span></p><a id="t.0b29a37566914b6ce11db81ccefa366c2ceb554e"></a><a id="t.3"></a><table class="c2"><tr class="c15"><td class="c10" colspan="1" rowspan="1"><p class="c17"><span class="c0">Select(Func&lt;TSource,TResult&gt; selector)</span></p></td></tr></table><p class="c9"><span class="c1"></span></p><p class="c11"><span class="c1">Aceast&#259; metod&#259; prime&#537;te o func&#539;ie de transformare sub forma unui delegat Func&lt;TSource,TResult&gt;. Func&#539;ia de transformare prime&#537;te fiecare obiect din selec&#539;ia de tip TSource &#537;i cu ajutorul acestuia creeaz&#259; un obiect TResult. Metoda Select returneaz&#259; o colec&#539;ie de obiecte transformate.</span></p><p class="c9"><span class="c1"></span></p><p class="c11"><span class="c1">Rescriem exemplul anterior folosind metoda Select:</span></p><p class="c9"><span class="c1"></span></p><a id="t.ed3d248f227fc337868d5e74f97528ab52df80de"></a><a id="t.4"></a><table class="c2"><tr class="c15"><td class="c10" colspan="1" rowspan="1"><p class="c17"><span class="c4">var</span><span class="c0">&nbsp;people = </span><span class="c4">new</span><span class="c0">&nbsp;List&lt;Person&gt;<br>{<br> &nbsp; &nbsp;</span><span class="c4">new</span><span class="c0">&nbsp;Person (</span><span class="c3">&quot;Tom&quot;</span><span class="c0">, </span><span class="c5">23</span><span class="c0">),<br> &nbsp; &nbsp;</span><span class="c4">new</span><span class="c0">&nbsp;Person (</span><span class="c3">&quot;Bob&quot;</span><span class="c0">, </span><span class="c5">27</span><span class="c0">),<br> &nbsp; &nbsp;</span><span class="c4">new</span><span class="c0">&nbsp;Person (</span><span class="c3">&quot;Sam&quot;</span><span class="c0">, </span><span class="c5">29</span><span class="c0">),<br> &nbsp; &nbsp;</span><span class="c4">new</span><span class="c0">&nbsp;Person (</span><span class="c3">&quot;Alice&quot;</span><span class="c0">, </span><span class="c5">24</span><span class="c0">)<br>};<br></span><span class="c4">var</span><span class="c0">&nbsp;names = people.Select(u =&gt; u.Name);<br><br></span><span class="c4">foreach</span><span class="c0">&nbsp;(</span><span class="c4">string</span><span class="c0">&nbsp;n </span><span class="c4">in</span><span class="c0">&nbsp;names)<br> &nbsp; &nbsp; Console.WriteLine(n);</span></p></td></tr></table><p class="c9"><span class="c1"></span></p><p class="c11"><span class="c1">&Icirc;n mod similar, putem crea obiecte de alt tip, inclusiv anonim:</span></p><p class="c9"><span class="c1"></span></p><a id="t.f9754c53679b43f6ca560a9a8601a8d51538668b"></a><a id="t.5"></a><table class="c2"><tr class="c15"><td class="c10" colspan="1" rowspan="1"><p class="c17"><span class="c4">var</span><span class="c0">&nbsp;people = </span><span class="c4">new</span><span class="c0">&nbsp;List&lt;Person&gt;<br>{<br> &nbsp; &nbsp;</span><span class="c4">new</span><span class="c0">&nbsp;Person (</span><span class="c3">&quot;Tom&quot;</span><span class="c0">, </span><span class="c5">23</span><span class="c0">),<br> &nbsp; &nbsp;</span><span class="c4">new</span><span class="c0">&nbsp;Person (</span><span class="c3">&quot;Bob&quot;</span><span class="c0">, </span><span class="c5">27</span><span class="c0">)<br>};<br><br></span><span class="c4">var</span><span class="c0">&nbsp;personel = </span><span class="c4">from</span><span class="c0">&nbsp;p </span><span class="c4">in</span><span class="c0">&nbsp;people<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c4">select</span><span class="c0">&nbsp;</span><span class="c4">new</span><span class="c0"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;{<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;FirstName = p.Name,<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Year = DateTime.Now.Year - p.Age<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;};<br><br></span><span class="c4">foreach</span><span class="c0">&nbsp;(</span><span class="c4">var</span><span class="c0">&nbsp;p </span><span class="c4">in</span><span class="c0">&nbsp;personel)<br> &nbsp; &nbsp;Console.WriteLine(</span><span class="c3">$&quot;{p.FirstName} - {p.Year}&quot;</span><span class="c0">);<br><br>record class </span><span class="c7">Person</span><span class="c0">(</span><span class="c4">string</span><span class="c0">&nbsp;Name, </span><span class="c4">int</span><span class="c0">&nbsp;Age);</span></p></td></tr></table><p class="c9"><span class="c1"></span></p><p class="c11"><span class="c1">Aici, operatorul select creeaz&#259; un obiect de tip anonim, folosind obiectul curent Person. &#536;i acum, rezultatul va con&#539;ine un set de obiecte de tip anonim, &icirc;n care sunt definite dou&#259; propriet&#259;&#539;i: FirstName &#537;i Year (anul na&#537;terii). Afi&#537;area pe consol&#259; a programului:</span></p><p class="c9"><span class="c1"></span></p><a id="t.c8d97879ca74a36ff633675424a8ac6be8ff550a"></a><a id="t.6"></a><table class="c2"><tr class="c15"><td class="c10" colspan="1" rowspan="1"><p class="c17"><span class="c0">Tom - </span><span class="c5">1999</span><span class="c0"><br>Bob - </span><span class="c5">1995</span></p></td></tr></table><p class="c9"><span class="c1"></span></p><p class="c11"><span class="c12">Alternativ, am putea folosi metoda de extensie </span><span class="c6">Select()</span><span class="c1">:</span></p><p class="c9"><span class="c1"></span></p><a id="t.a812f1604e24f091ff95a6a68fd2b691cee8b960"></a><a id="t.7"></a><table class="c2"><tr class="c15"><td class="c10" colspan="1" rowspan="1"><p class="c17"><span class="c16">// proiec&#539;ia pe obiecte de tip anonim</span><span class="c0"><br></span><span class="c4">var</span><span class="c0">&nbsp;personel = people.Select(p =&gt; </span><span class="c4">new</span><span class="c0"><br>{ <br> &nbsp; &nbsp;FirstName = p.Name, <br> &nbsp; &nbsp;Year = DateTime.Now.Year - p.Age <br>});</span></p></td></tr></table><p class="c9"><span class="c1"></span></p><p class="c11"><span class="c8">Variabile &icirc;n interog&#259;ri &#537;i operatorul let.</span></p><p class="c9"><span class="c1"></span></p><p class="c11"><span class="c12">Uneori apare necesitatea de a efectua calcule intermediare suplimentare &icirc;n interog&#259;rile LINQ. Pentru aceste scopuri, putem defini variabilele noastre &icirc;n interog&#259;ri folosind operatorul </span><span class="c6">let</span><span class="c1">:</span></p><p class="c9"><span class="c1"></span></p><a id="t.c80b57af590516ebc5ed2dd2a36ebb85e7858be0"></a><a id="t.8"></a><table class="c2"><tr class="c15"><td class="c10" colspan="1" rowspan="1"><p class="c17"><span class="c4">var</span><span class="c0">&nbsp;people = </span><span class="c4">new</span><span class="c0">&nbsp;List&lt;Person&gt;<br>{<br> &nbsp; &nbsp;</span><span class="c4">new</span><span class="c0">&nbsp;Person (</span><span class="c3">&quot;Tom&quot;</span><span class="c0">, </span><span class="c5">23</span><span class="c0">),<br> &nbsp; &nbsp;</span><span class="c4">new</span><span class="c0">&nbsp;Person (</span><span class="c3">&quot;Bob&quot;</span><span class="c0">, </span><span class="c5">27</span><span class="c0">)<br>};<br><br></span><span class="c4">var</span><span class="c0">&nbsp;personnel = </span><span class="c4">from</span><span class="c0">&nbsp;p </span><span class="c4">in</span><span class="c0">&nbsp;people<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c4">let</span><span class="c0">&nbsp;name = </span><span class="c3">$&quot;Mr. {p.Name}&quot;</span><span class="c0"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c4">let</span><span class="c0">&nbsp;year = DateTime.Now.Year - p.Age<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c4">select</span><span class="c0">&nbsp;</span><span class="c4">new</span><span class="c0"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;{<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Name = name,<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Year = year<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;};<br><br></span><span class="c4">foreach</span><span class="c0">&nbsp;(</span><span class="c4">var</span><span class="c0">&nbsp;p </span><span class="c4">in</span><span class="c0">&nbsp;personnel)<br> &nbsp; &nbsp;Console.WriteLine(</span><span class="c3">$&quot;{p.Name} - {p.Year}&quot;</span><span class="c0">);<br><br>record class </span><span class="c7">Person</span><span class="c0">(</span><span class="c4">string</span><span class="c0">&nbsp;Name, </span><span class="c4">int</span><span class="c0">&nbsp;Age);</span></p></td></tr></table><p class="c9"><span class="c1"></span></p><p class="c11"><span class="c12">&Icirc;n acest caz, se creeaz&#259; dou&#259; variabile. Variabila </span><span class="c12 c18">name</span><span class="c12">, a c&#259;rei valoare este</span><span class="c12 c18">&nbsp;Mr. {p.Name}</span><span class="c1">.</span></p><p class="c9"><span class="c1"></span></p><p class="c11"><span class="c1">Posibilitatea de a defini variabile este probabil unul dintre principalele avantaje ale operatorilor LINQ &icirc;n compara&#539;ie cu metodele de extensie.</span></p><p class="c9"><span class="c1"></span></p><p class="c11"><span class="c8">Selec&#539;ie din mai multe surse.</span></p><p class="c9"><span class="c1"></span></p><p class="c11"><span class="c1">&Icirc;n LINQ putem selecta obiecte nu doar dintr-o singur&#259; surs&#259;, ci &#537;i din mai multe surse. De exemplu, s&#259; lu&#259;m clasele:</span></p><p class="c9"><span class="c1"></span></p><a id="t.d7b373c2e1440b8e2ac12b4c21de40ae2c2faa4e"></a><a id="t.9"></a><table class="c2"><tr class="c15"><td class="c10" colspan="1" rowspan="1"><p class="c17"><span class="c0">record class </span><span class="c7">Course</span><span class="c0">(</span><span class="c4">string</span><span class="c0">&nbsp;Title); &nbsp;</span><span class="c16">// curs de studiu</span><span class="c0"><br>record class </span><span class="c7">Student</span><span class="c0">(</span><span class="c4">string</span><span class="c0">&nbsp;Name); &nbsp;</span><span class="c16">// student</span></p></td></tr></table><p class="c9"><span class="c1"></span></p><p class="c11"><span class="c1">Clasa Course reprezint&#259; un curs de studiu &#537;i stocheaz&#259; titlul acestuia. Clasa Student reprezint&#259; un student &#537;i stocheaz&#259; numele acestuia.</span></p><p class="c9"><span class="c1"></span></p><p class="c11"><span class="c1">S&#259; presupunem c&#259; trebuie s&#259; ob&#539;inem dintr-o list&#259; de cursuri &#537;i o list&#259; de studen&#539;i un set de perechi student-curs (s&#259; zicem entitatea care reprezint&#259; studiul studentului la cursul respectiv):</span></p><p class="c9"><span class="c1"></span></p><a id="t.fc87dc319b67b2058fb9f59c6d5fcfd32a243ec2"></a><a id="t.10"></a><table class="c2"><tr class="c15"><td class="c10" colspan="1" rowspan="1"><p class="c17"><span class="c4">var</span><span class="c0">&nbsp;courses = </span><span class="c4">new</span><span class="c0">&nbsp;List&lt;Course&gt; { </span><span class="c4">new</span><span class="c0">&nbsp;Course(</span><span class="c3">&quot;C#&quot;</span><span class="c0">), </span><span class="c4">new</span><span class="c0">&nbsp;Course(</span><span class="c3">&quot;Java&quot;</span><span class="c0">) };<br></span><span class="c4">var</span><span class="c0">&nbsp;students = </span><span class="c4">new</span><span class="c0">&nbsp;List&lt;Student&gt; { </span><span class="c4">new</span><span class="c0">&nbsp;Student(</span><span class="c3">&quot;Tom&quot;</span><span class="c0">), </span><span class="c4">new</span><span class="c0">&nbsp;Student(</span><span class="c3">&quot;Bob&quot;</span><span class="c0">) };<br><br></span><span class="c4">var</span><span class="c0">&nbsp;enrollments = </span><span class="c4">from</span><span class="c0">&nbsp;course </span><span class="c4">in</span><span class="c0">&nbsp;courses &nbsp; &nbsp;</span><span class="c16">// select&#259;m c&acirc;te un curs</span><span class="c0"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c4">from</span><span class="c0">&nbsp;student </span><span class="c4">in</span><span class="c0">&nbsp;students &nbsp; &nbsp; &nbsp; </span><span class="c16">// select&#259;m c&acirc;te un student</span><span class="c0"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c4">select</span><span class="c0">&nbsp;</span><span class="c4">new</span><span class="c0">&nbsp;{ Student = student.Name, Course = course.Title}; &nbsp; </span><span class="c16">// combin&#259;m fiecare student cu fiecare curs</span><span class="c0"><br><br></span><span class="c4">foreach</span><span class="c0">&nbsp;(</span><span class="c4">var</span><span class="c0">&nbsp;enrollment </span><span class="c4">in</span><span class="c0">&nbsp;enrollments)<br> &nbsp; &nbsp;Console.WriteLine(</span><span class="c3">$&quot;{enrollment.Student} - {enrollment.Course}&quot;</span><span class="c0">);<br><br>record class </span><span class="c7">Course</span><span class="c0">(</span><span class="c4">string</span><span class="c0">&nbsp;Title); &nbsp;</span><span class="c16">// curs de studiu</span><span class="c0"><br>record class </span><span class="c7">Student</span><span class="c0">(</span><span class="c4">string</span><span class="c0">&nbsp;Name); &nbsp;</span><span class="c16">// student</span></p></td></tr></table><p class="c9"><span class="c1"></span></p><p class="c11"><span class="c1">Afi&#537;area pe consol&#259;:</span></p><p class="c9"><span class="c1"></span></p><a id="t.58caf36f3261905c334762536ecec074db1a3fd2"></a><a id="t.11"></a><table class="c2"><tr class="c15"><td class="c10" colspan="1" rowspan="1"><p class="c17"><span class="c0">Tom - C</span><span class="c13">#</span><span class="c0"><br>Bob - C</span><span class="c13">#</span><span class="c0"><br>Tom - Java<br>Bob - Java</span></p></td></tr></table><p class="c9"><span class="c1"></span></p><p class="c11"><span class="c1">Astfel, la selec&#539;ia din dou&#259; surse, fiecare element din prima surs&#259; va fi combinat cu fiecare element din a doua surs&#259;. Adic&#259;, vom ob&#539;ine 4 perechi.</span></p><p class="c9"><span class="c1"></span></p><p class="c11"><span class="c8">SelectMany &#537;i unificarea obiectelor.</span></p><p class="c9"><span class="c1"></span></p><p class="c11"><span class="c12">Metoda </span><span class="c6">SelectMany</span><span class="c1">&nbsp;permite unificarea unui set de colec&#539;ii &icirc;ntr-o singur&#259; colec&#539;ie. Are mai multe versiuni suprascrise. S&#259; lu&#259;m una dintre ele:</span></p><p class="c9"><span class="c1"></span></p><a id="t.cc25659294471a02267077094252ed9938c877a4"></a><a id="t.12"></a><table class="c2"><tr class="c15"><td class="c10" colspan="1" rowspan="1"><p class="c17"><span class="c0">SelectMany(Func&lt;TSource, IEnumerable&lt;TResult&gt;&gt; selector);<br>SelectMany(Func&lt;TSource, IEnumerable&lt;TCollection&gt;&gt; collectionSelector, Func&lt;TSource,TCollection,TResult&gt; resultSelector);</span></p></td></tr></table><p class="c9"><span class="c1"></span></p><p class="c11"><span class="c12">Prima versiune a metodei prime&#537;te o func&#539;ie de transformare sub forma unui delegat</span><span class="c12 c18">&nbsp;Func&lt;TSource,IEnumerable&lt;TResult&gt;&gt;</span><span class="c1">. Func&#539;ia de transformare prime&#537;te fiecare obiect din selec&#539;ie de tip TSource &#537;i cu ajutorul acestuia creeaz&#259; un set de obiecte TResult. Metoda SelectMany returneaz&#259; o colec&#539;ie de obiecte transformate.</span></p><p class="c9"><span class="c1"></span></p><p class="c11"><span class="c12">A doua versiune prime&#537;te o func&#539;ie de transformare sub forma unui delegat </span><span class="c12 c18">Func&lt;TSource,IEnumerable&lt;TResult&gt;&gt;</span><span class="c12">. Func&#539;ia de transformare prime&#537;te fiecare obiect din selec&#539;ie de tip TSource &#537;i returneaz&#259; o colec&#539;ie intermediar&#259; de tip TCollection. Al doilea parametru este tot o func&#539;ie de transformare sub forma unui delegat</span><span class="c12 c18">&nbsp;Func&lt;TSource,TCollection,TResult&gt;</span><span class="c1">, care prime&#537;te doi parametri - fiecare element al selec&#539;iei curente &#537;i fiecare element al colec&#539;iei intermediare &#537;i pe baza acestora creeaz&#259; un obiect de tip TResult.</span></p><p class="c9"><span class="c1"></span></p><p class="c11"><span class="c1">S&#259; analiz&#259;m urm&#259;torul exemplu:</span></p><p class="c9"><span class="c1"></span></p><a id="t.96302f1b92e4a5a51609545e9c931c3c6d7d9fae"></a><a id="t.13"></a><table class="c2"><tr class="c15"><td class="c10" colspan="1" rowspan="1"><p class="c17"><span class="c4">var</span><span class="c0">&nbsp;companies = </span><span class="c4">new</span><span class="c0">&nbsp;List&lt;Company&gt;<br>{<br> &nbsp; &nbsp;</span><span class="c4">new</span><span class="c0">&nbsp;Company(</span><span class="c3">&quot;Microsoft&quot;</span><span class="c0">, </span><span class="c4">new</span><span class="c0">&nbsp;List&lt;Person&gt; {</span><span class="c4">new</span><span class="c0">&nbsp;Person(</span><span class="c3">&quot;Tom&quot;</span><span class="c0">), </span><span class="c4">new</span><span class="c0">&nbsp;Person(</span><span class="c3">&quot;Bob&quot;</span><span class="c0">)}),<br> &nbsp; &nbsp;</span><span class="c4">new</span><span class="c0">&nbsp;Company(</span><span class="c3">&quot;Google&quot;</span><span class="c0">, </span><span class="c4">new</span><span class="c0">&nbsp;List&lt;Person&gt; {</span><span class="c4">new</span><span class="c0">&nbsp;Person(</span><span class="c3">&quot;Sam&quot;</span><span class="c0">), </span><span class="c4">new</span><span class="c0">&nbsp;Person(</span><span class="c3">&quot;Mike&quot;</span><span class="c0">)}),<br>};<br></span><span class="c4">var</span><span class="c0">&nbsp;employees = companies.SelectMany(c =&gt; c.Staff);<br><br></span><span class="c4">foreach</span><span class="c0">&nbsp;(</span><span class="c4">var</span><span class="c0">&nbsp;emp </span><span class="c4">in</span><span class="c0">&nbsp;employees)<br> &nbsp; &nbsp;Console.WriteLine(</span><span class="c3">$&quot;{emp.Name}&quot;</span><span class="c0">);<br><br>record class </span><span class="c7">Company</span><span class="c0">(</span><span class="c4">string</span><span class="c0">&nbsp;Name, List&lt;Person&gt; Staff);<br>record class </span><span class="c7">Person</span><span class="c0">(</span><span class="c4">string</span><span class="c0">&nbsp;Name);</span></p></td></tr></table><p class="c9"><span class="c1"></span></p><p class="c11"><span class="c1">Aici avem o list&#259; de companii, fiecare companie av&acirc;nd un set de angaja&#539;i sub forma unei liste de obiecte Person. &#536;i la ie&#537;ire ob&#539;inem o list&#259; de angaja&#539;i din toate companiile, adic&#259;, de fapt, o colec&#539;ie de obiecte Person. Afi&#537;area pe consol&#259;:</span></p><p class="c9"><span class="c1"></span></p><a id="t.a994a86c6e7074da6640c6bd11cafae02e203757"></a><a id="t.14"></a><table class="c2"><tr class="c15"><td class="c10" colspan="1" rowspan="1"><p class="c17"><span class="c0">Tom<br>Bob<br>Sam<br>Mike</span></p></td></tr></table><p class="c9"><span class="c1"></span></p><p class="c11"><span class="c1">Un exemplu similar folosind operatori LINQ:</span></p><p class="c9"><span class="c1"></span></p><a id="t.c7f75810bc227f662bdb855fc17288cd2d2b2300"></a><a id="t.15"></a><table class="c2"><tr class="c15"><td class="c10" colspan="1" rowspan="1"><p class="c17"><span class="c4">var</span><span class="c0">&nbsp;companies = </span><span class="c4">new</span><span class="c0">&nbsp;List&lt;Company&gt;<br>{<br> &nbsp; &nbsp;</span><span class="c4">new</span><span class="c0">&nbsp;Company(</span><span class="c3">&quot;Microsoft&quot;</span><span class="c0">, </span><span class="c4">new</span><span class="c0">&nbsp;List&lt;Person&gt; {</span><span class="c4">new</span><span class="c0">&nbsp;Person(</span><span class="c3">&quot;Tom&quot;</span><span class="c0">), </span><span class="c4">new</span><span class="c0">&nbsp;Person(</span><span class="c3">&quot;Bob&quot;</span><span class="c0">)}),<br> &nbsp; &nbsp;</span><span class="c4">new</span><span class="c0">&nbsp;Company(</span><span class="c3">&quot;Google&quot;</span><span class="c0">, </span><span class="c4">new</span><span class="c0">&nbsp;List&lt;Person&gt; {</span><span class="c4">new</span><span class="c0">&nbsp;Person(</span><span class="c3">&quot;Sam&quot;</span><span class="c0">), </span><span class="c4">new</span><span class="c0">&nbsp;Person(</span><span class="c3">&quot;Mike&quot;</span><span class="c0">)}),<br>};<br></span><span class="c4">var</span><span class="c0">&nbsp;employees = </span><span class="c4">from</span><span class="c0">&nbsp;c </span><span class="c4">in</span><span class="c0">&nbsp;companies<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c4">from</span><span class="c0">&nbsp;emp </span><span class="c4">in</span><span class="c0">&nbsp;c.Staff<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c4">select</span><span class="c0">&nbsp;emp;<br><br></span><span class="c4">foreach</span><span class="c0">&nbsp;(</span><span class="c4">var</span><span class="c0">&nbsp;emp </span><span class="c4">in</span><span class="c0">&nbsp;employees)<br> &nbsp; &nbsp;Console.WriteLine(</span><span class="c3">$&quot;{emp.Name}&quot;</span><span class="c0">);<br><br>record class </span><span class="c7">Company</span><span class="c0">(</span><span class="c4">string</span><span class="c0">&nbsp;Name, List&lt;Person&gt; Staff);<br>record class </span><span class="c7">Person</span><span class="c0">(</span><span class="c4">string</span><span class="c0">&nbsp;Name);</span></p></td></tr></table><p class="c9"><span class="c1"></span></p><p class="c11"><span class="c1">Acum s&#259; ad&#259;ug&#259;m la angaja&#539;i &#537;i compania lor:</span></p><p class="c9"><span class="c1"></span></p><a id="t.4274419ef6904581051ee85f0bc4a567fadfa319"></a><a id="t.16"></a><table class="c2"><tr class="c15"><td class="c10" colspan="1" rowspan="1"><p class="c17"><span class="c4">var</span><span class="c0">&nbsp;companies = </span><span class="c4">new</span><span class="c0">&nbsp;List&lt;Company&gt;<br>{<br> &nbsp; &nbsp;</span><span class="c4">new</span><span class="c0">&nbsp;Company<br><br>(</span><span class="c3">&quot;Microsoft&quot;</span><span class="c0">, </span><span class="c4">new</span><span class="c0">&nbsp;List&lt;Person&gt; {</span><span class="c4">new</span><span class="c0">&nbsp;Person(</span><span class="c3">&quot;Tom&quot;</span><span class="c0">), </span><span class="c4">new</span><span class="c0">&nbsp;Person(</span><span class="c3">&quot;Bob&quot;</span><span class="c0">)}),<br> &nbsp; &nbsp;</span><span class="c4">new</span><span class="c0">&nbsp;Company(</span><span class="c3">&quot;Google&quot;</span><span class="c0">, </span><span class="c4">new</span><span class="c0">&nbsp;List&lt;Person&gt; {</span><span class="c4">new</span><span class="c0">&nbsp;Person(</span><span class="c3">&quot;Sam&quot;</span><span class="c0">), </span><span class="c4">new</span><span class="c0">&nbsp;Person(</span><span class="c3">&quot;Mike&quot;</span><span class="c0">)}),<br>};<br><br></span><span class="c4">var</span><span class="c0">&nbsp;employees = companies.SelectMany(c =&gt; c.Staff,<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;(c, emp)=&gt; </span><span class="c4">new</span><span class="c0">&nbsp;{ Name = emp.Name, Company = c.Name });<br><br></span><span class="c4">foreach</span><span class="c0">&nbsp;(</span><span class="c4">var</span><span class="c0">&nbsp;emp </span><span class="c4">in</span><span class="c0">&nbsp;employees)<br> &nbsp; &nbsp;Console.WriteLine(</span><span class="c3">$&quot;{emp.Name} - {emp.Company}&quot;</span><span class="c0">);<br><br>record class </span><span class="c7">Company</span><span class="c0">(</span><span class="c4">string</span><span class="c0">&nbsp;Name, List&lt;Person&gt; Staff);<br>record class </span><span class="c7">Person</span><span class="c0">(</span><span class="c4">string</span><span class="c0">&nbsp;Name);</span></p></td></tr></table><p class="c9"><span class="c1"></span></p><p class="c11"><span class="c12">Aici se folose&#537;te o alt&#259; versiune a metodei SelectMany. Primul delegat sub forma </span><span class="c12 c18">c =&gt; c.Staff</span><span class="c12">&nbsp;creeaz&#259; o colec&#539;ie intermediar&#259; - de fapt, doar returneaz&#259; setul de angaja&#539;i ai fiec&#259;rei companii. Al doilea delegat -</span><span class="c12 c18">&nbsp;(c, emp) =&gt; new { Name = emp.Name, Company = c.Name }</span><span class="c1">&nbsp;prime&#537;te fiecare companie &#537;i fiecare element al colec&#539;iei intermediare - obiectul Person &#537;i pe baza acestora creeaz&#259; un obiect anonim cu dou&#259; propriet&#259;&#539;i Name &#537;i Company. Afi&#537;area pe consol&#259; a programului:</span></p><p class="c9"><span class="c1"></span></p><a id="t.50ab757a7b9fda40586e5f99c1e7a859c4f125ab"></a><a id="t.17"></a><table class="c2"><tr class="c15"><td class="c10" colspan="1" rowspan="1"><p class="c17"><span class="c0">Tom - Microsoft<br>Bob - Microsoft<br>Sam - Google<br>Mike - Google</span></p></td></tr></table><p class="c9"><span class="c1"></span></p><p class="c11"><span class="c1">Un exemplu similar folosind operatori de interogare:</span></p><p class="c9"><span class="c1"></span></p><a id="t.0bfc33bfec6e9607aa15c33fad4cb16dc4d9e1f5"></a><a id="t.18"></a><table class="c2"><tr class="c15"><td class="c10" colspan="1" rowspan="1"><p class="c17"><span class="c4">var</span><span class="c0">&nbsp;companies = </span><span class="c4">new</span><span class="c0">&nbsp;List&lt;Company&gt;<br>{<br> &nbsp; &nbsp;</span><span class="c4">new</span><span class="c0">&nbsp;Company(</span><span class="c3">&quot;Microsoft&quot;</span><span class="c0">, </span><span class="c4">new</span><span class="c0">&nbsp;List&lt;Person&gt; {</span><span class="c4">new</span><span class="c0">&nbsp;Person(</span><span class="c3">&quot;Tom&quot;</span><span class="c0">), </span><span class="c4">new</span><span class="c0">&nbsp;Person(</span><span class="c3">&quot;Bob&quot;</span><span class="c0">)}),<br> &nbsp; &nbsp;</span><span class="c4">new</span><span class="c0">&nbsp;Company(</span><span class="c3">&quot;Google&quot;</span><span class="c0">, </span><span class="c4">new</span><span class="c0">&nbsp;List&lt;Person&gt; {</span><span class="c4">new</span><span class="c0">&nbsp;Person(</span><span class="c3">&quot;Sam&quot;</span><span class="c0">), </span><span class="c4">new</span><span class="c0">&nbsp;Person(</span><span class="c3">&quot;Mike&quot;</span><span class="c0">)}),<br>};<br></span><span class="c4">var</span><span class="c0">&nbsp;employees = </span><span class="c4">from</span><span class="c0">&nbsp;c </span><span class="c4">in</span><span class="c0">&nbsp;companies<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c4">from</span><span class="c0">&nbsp;emp </span><span class="c4">in</span><span class="c0">&nbsp;c.Staff<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c4">select</span><span class="c0">&nbsp;</span><span class="c4">new</span><span class="c0">&nbsp;{ Name = emp.Name, Company = c.Name };<br><br></span><span class="c4">foreach</span><span class="c0">&nbsp;(</span><span class="c4">var</span><span class="c0">&nbsp;emp </span><span class="c4">in</span><span class="c0">&nbsp;employees)<br> &nbsp; &nbsp;Console.WriteLine(</span><span class="c3">$&quot;{emp.Name} - {emp.Company}&quot;</span><span class="c0">);<br><br>record class </span><span class="c7">Company</span><span class="c0">(</span><span class="c4">string</span><span class="c0">&nbsp;Name, List&lt;Person&gt; Staff);<br>record class </span><span class="c7">Person</span><span class="c0">(</span><span class="c4">string</span><span class="c0">&nbsp;Name);</span></p></td></tr></table><p class="c9"><span class="c1"></span></p><p class="c9"><span class="c1"></span></p></body></html>