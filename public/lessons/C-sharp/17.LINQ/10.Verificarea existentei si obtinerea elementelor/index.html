<html><head><meta content="text/html; charset=UTF-8" http-equiv="content-type"><link rel="stylesheet" type="text/css" href="/lessons/styles.css"></head><body class="c11 doc-content"><p class="c10"><span class="c16">Verificarea existen&#539;ei &#537;i ob&#539;inerea elementelor.</span></p><p class="c4"><span class="c6"></span></p><p class="c10"><span class="c6">Un set de metode &icirc;n LINQ permite verificarea existen&#539;ei elementelor &icirc;ntr-o colec&#539;ie &#537;i ob&#539;inerea acestora.</span></p><p class="c4"><span class="c6"></span></p><p class="c10"><span class="c18">Metoda All.</span></p><p class="c4"><span class="c6"></span></p><p class="c10"><span class="c17">Metoda</span><span class="c12">&nbsp;All()</span><span class="c6">&nbsp;verific&#259; dac&#259; toate elementele &icirc;ndeplinesc o anumit&#259; condi&#539;ie. Dac&#259; toate elementele &icirc;ndeplinesc condi&#539;ia, se returneaz&#259; true. De exemplu:</span></p><a id="t.0539a8d78e6c3da25e277d06a9eed551b6241ac7"></a><a id="t.0"></a><table class="c3"><tr class="c9"></tr></table><p class="c7 c19"><span class="c6"></span></p><a id="t.1d87dbfbfa89de128e02be0cb64148363ad76cc5"></a><a id="t.1"></a><table class="c3"><tr class="c9"><td class="c15" colspan="1" rowspan="1"><p class="c7"><span class="c0">string</span><span class="c2">[] people = { </span><span class="c1">&quot;Tom&quot;</span><span class="c2">, </span><span class="c1">&quot;Tim&quot;</span><span class="c2">, </span><span class="c1">&quot;Bob&quot;</span><span class="c2">, </span><span class="c1">&quot;Sam&quot;</span><span class="c2">&nbsp;};<br><br></span><span class="c5">// verific&#259;m dac&#259; toate elementele au lungimea de 3 caractere</span><span class="c2"><br></span><span class="c0">bool</span><span class="c2">&nbsp;allHas3Chars = people.All(s =&gt; s.Length == </span><span class="c14">3</span><span class="c2">); </span><span class="c5">// true</span><span class="c2"><br>Console.WriteLine(allHas3Chars);<br><br></span><span class="c5">// verific&#259;m dac&#259; toate &#537;irurile &icirc;ncep cu litera T</span><span class="c2"><br></span><span class="c0">bool</span><span class="c2">&nbsp;allStartsWithT = people.All(s =&gt; s.StartsWith(</span><span class="c1">&quot;T&quot;</span><span class="c2">)); </span><span class="c5">// false</span><span class="c2"><br>Console.WriteLine(allStartsWithT);</span></p></td></tr></table><p class="c4"><span class="c6"></span></p><p class="c10"><span class="c6">&Icirc;n primul caz, verific&#259;m dac&#259; toate &#537;irurile din array-ul people au lungimea de trei caractere. Deoarece aceast&#259; condi&#539;ie este adev&#259;rat&#259;, metoda All returneaz&#259; true. &Icirc;n al doilea caz, verific&#259;m dac&#259; toate &#537;irurile &icirc;ncep cu litera &quot;T&quot;. Aceast&#259; condi&#539;ie este fals&#259;, deci metoda All returneaz&#259; false.</span></p><p class="c4"><span class="c6"></span></p><p class="c10"><span class="c18">Metoda Any.</span></p><p class="c4"><span class="c6"></span></p><p class="c10"><span class="c17">Metoda </span><span class="c12">Any()</span><span class="c6">&nbsp;ac&#539;ioneaz&#259; &icirc;ntr-un mod similar, dar returneaz&#259; true dac&#259; cel pu&#539;in un element din colec&#539;ie &icirc;ndepline&#537;te o anumit&#259; condi&#539;ie:</span></p><p class="c4"><span class="c6"></span></p><a id="t.97a05ad8a1940c1950ab796be9c9bc490c9a7752"></a><a id="t.2"></a><table class="c3"><tr class="c9"><td class="c15" colspan="1" rowspan="1"><p class="c7"><span class="c0">string</span><span class="c2">[] people = { </span><span class="c1">&quot;Tom&quot;</span><span class="c2">, </span><span class="c1">&quot;Tim&quot;</span><span class="c2">, </span><span class="c1">&quot;Bob&quot;</span><span class="c2">, </span><span class="c1">&quot;Sam&quot;</span><span class="c2">&nbsp;};<br></span><span class="c5">// verific&#259;m dac&#259; toate elementele au lungimea mai mare de 3 caractere</span><span class="c2"><br></span><span class="c0">bool</span><span class="c2">&nbsp;allHasMore3Chars = people.Any(s =&gt; s.Length &gt; </span><span class="c14">3</span><span class="c2">); </span><span class="c5">// false</span><span class="c2"><br>Console.WriteLine(allHasMore3Chars);<br><br></span><span class="c5">// verific&#259;m dac&#259; toate &#537;irurile &icirc;ncep cu litera T</span><span class="c2"><br></span><span class="c0">bool</span><span class="c2">&nbsp;allStartsWithT = people.Any(s =&gt; s.StartsWith(</span><span class="c1">&quot;T&quot;</span><span class="c2">)); </span><span class="c5">// true</span><span class="c2"><br>Console.WriteLine(allStartsWithT);</span></p></td></tr></table><p class="c4"><span class="c6"></span></p><p class="c10"><span class="c6">Prima expresie va returna false, deoarece toate &#537;irurile au lungimea de 3 caractere. A doua expresie va returna true, deoarece exist&#259; &#537;iruri &icirc;n colec&#539;ie care &icirc;ncep cu litera &quot;T&quot;.</span></p><p class="c4"><span class="c6"></span></p><p class="c10"><span class="c18">Metoda Contains.</span></p><p class="c4"><span class="c6"></span></p><p class="c10"><span class="c17">Metoda </span><span class="c12">Contains() </span><span class="c6">returneaz&#259; true dac&#259; colec&#539;ia con&#539;ine un anumit element.</span></p><p class="c4"><span class="c6"></span></p><a id="t.621cb85463c914f1020d9b056e4f8f53dee98795"></a><a id="t.3"></a><table class="c3"><tr class="c9"><td class="c15" colspan="1" rowspan="1"><p class="c7"><span class="c0">string</span><span class="c2">[] people = { </span><span class="c1">&quot;Tom&quot;</span><span class="c2">, </span><span class="c1">&quot;Tim&quot;</span><span class="c2">, </span><span class="c1">&quot;Bob&quot;</span><span class="c2">, </span><span class="c1">&quot;Sam&quot;</span><span class="c2">&nbsp;};<br><br></span><span class="c5">// verific&#259;m dac&#259; exist&#259; &#537;irul &quot;Tom&quot;</span><span class="c2"><br></span><span class="c0">bool</span><span class="c2">&nbsp;hasTom = people.Contains(</span><span class="c1">&quot;Tom&quot;</span><span class="c2">); </span><span class="c5">// true</span><span class="c2"><br>Console.WriteLine(hasTom);<br><br></span><span class="c5">// verific&#259;m dac&#259; exist&#259; &#537;irul &quot;Mike&quot;</span><span class="c2"><br></span><span class="c0">bool</span><span class="c2">&nbsp;hasMike = people.Contains(</span><span class="c1">&quot;Mike&quot;</span><span class="c2">); </span><span class="c5">// false</span><span class="c2"><br>Console.WriteLine(hasMike);</span></p></td></tr></table><p class="c4"><span class="c6"></span></p><p class="c10"><span class="c17">Este important de men&#539;ionat c&#259; pentru compararea obiectelor se folose&#537;te implementarea metodei </span><span class="c13">Equals</span><span class="c6">. Prin urmare, dac&#259; lucr&#259;m cu obiecte de tip propriu, trebuie s&#259; implement&#259;m aceast&#259; metod&#259;:</span></p><p class="c4"><span class="c6"></span></p><a id="t.84eb9555d5cc40e9df806068f6011b3073a91c3c"></a><a id="t.4"></a><table class="c3"><tr class="c9"><td class="c15" colspan="1" rowspan="1"><p class="c7"><span class="c2">Person[] people = { </span><span class="c0">new</span><span class="c2">&nbsp;Person(</span><span class="c1">&quot;Tom&quot;</span><span class="c2">), </span><span class="c0">new</span><span class="c2">&nbsp;Person(</span><span class="c1">&quot;Sam&quot;</span><span class="c2">), </span><span class="c0">new</span><span class="c2">&nbsp;Person(</span><span class="c1">&quot;Bob&quot;</span><span class="c2">)};<br><br></span><span class="c0">var</span><span class="c2">&nbsp;tom = </span><span class="c0">new</span><span class="c2">&nbsp;Person(</span><span class="c1">&quot;Tom&quot;</span><span class="c2">);<br></span><span class="c0">var</span><span class="c2">&nbsp;mike = </span><span class="c0">new</span><span class="c2">&nbsp;Person(</span><span class="c1">&quot;Mike&quot;</span><span class="c2">);<br><br></span><span class="c5">// verific&#259;m dac&#259; exist&#259; &quot;Tom&quot;</span><span class="c2"><br></span><span class="c0">bool</span><span class="c2">&nbsp;hasTom = people.Contains(tom); </span><span class="c5">// true</span><span class="c2"><br>Console.WriteLine(hasTom);<br><br></span><span class="c5">// verific&#259;m dac&#259; exist&#259; &quot;Mike&quot;</span><span class="c2"><br></span><span class="c0">bool</span><span class="c2">&nbsp;hasMike = people.Contains(mike); </span><span class="c5">// false</span><span class="c2"><br>Console.WriteLine(hasMike);<br><br></span><span class="c0">class</span><span class="c2">&nbsp;</span><span class="c8">Person</span><span class="c2"><br>{<br> &nbsp; &nbsp;</span><span class="c0">public</span><span class="c2">&nbsp;</span><span class="c0">string</span><span class="c2">&nbsp;Name { </span><span class="c0">get</span><span class="c2">; }<br> &nbsp; &nbsp;</span><span class="c0">public</span><span class="c2">&nbsp;</span><span class="c8">Person</span><span class="c2">(</span><span class="c0">string</span><span class="c2">&nbsp;name) =&gt; Name = name;<br><br> &nbsp; &nbsp;</span><span class="c0">public</span><span class="c2">&nbsp;</span><span class="c0">override</span><span class="c2">&nbsp;</span><span class="c0">bool</span><span class="c2">&nbsp;</span><span class="c8">Equals</span><span class="c2">(</span><span class="c0">object</span><span class="c2">? obj)<br> &nbsp; &nbsp;{<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">if</span><span class="c2">&nbsp;(obj </span><span class="c0">is</span><span class="c2">&nbsp;Person person) </span><span class="c0">return</span><span class="c2">&nbsp;Name == person.Name;<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">return</span><span class="c2">&nbsp;</span><span class="c0">false</span><span class="c2">;<br> &nbsp; &nbsp;}<br><br> &nbsp; &nbsp;</span><span class="c0">public</span><span class="c2">&nbsp;</span><span class="c0">override</span><span class="c2">&nbsp;</span><span class="c0">int</span><span class="c2">&nbsp;</span><span class="c8">GetHashCode</span><span class="c2">() =&gt; Name.GetHashCode();<br>}</span></p></td></tr></table><p class="c4"><span class="c6"></span></p><p class="c10"><span class="c6">Totu&#537;i, Contains nu &icirc;ntotdeauna returneaz&#259; datele a&#537;teptate. De exemplu:</span></p><p class="c4"><span class="c6"></span></p><a id="t.11d9dd950b7b972735a9c7f7a8b7fc397681d497"></a><a id="t.5"></a><table class="c3"><tr class="c9"><td class="c15" colspan="1" rowspan="1"><p class="c7"><span class="c0">string</span><span class="c2">[] people = { </span><span class="c1">&quot;tom&quot;</span><span class="c2">, </span><span class="c1">&quot;Tim&quot;</span><span class="c2">, </span><span class="c1">&quot;bOb&quot;</span><span class="c2">, </span><span class="c1">&quot;Sam&quot;</span><span class="c2">&nbsp;};<br><br></span><span class="c5">// verific&#259;m dac&#259; exist&#259; &#537;irul &quot;Tom&quot;</span><span class="c2"><br></span><span class="c0">bool</span><span class="c2">&nbsp;hasTom = people.Contains(</span><span class="c1">&quot;Tom&quot;</span><span class="c2">); </span><span class="c5">// false</span><span class="c2"><br>Console.WriteLine(hasTom);<br><br></span><span class="c5">// verific&#259;m dac&#259; exist&#259; &#537;irul &quot;Bob&quot;</span><span class="c2"><br></span><span class="c0">bool</span><span class="c2">&nbsp;hasBob = people.Contains(</span><span class="c1">&quot;Bob&quot;</span><span class="c2">); </span><span class="c5">// false</span><span class="c2"><br>Console.WriteLine(hasBob);</span></p></td></tr></table><p class="c4"><span class="c6"></span></p><p class="c10"><span class="c17">&Icirc;n acest caz, &icirc;n array nu exist&#259; &#537;irul &quot;Tom&quot;, dar exist&#259; &#537;irul &quot;tom&quot;. Prin urmare, apelul </span><span class="c13">people.Contains(&quot;Tom&quot;)</span><span class="c6">&nbsp;va returna false. Pentru a evita acest comportament nedorit, putem seta logica de comparare folosind implementarea interfe&#539;ei IComparer &#537;i apoi s&#259; o transmitem ca al doilea parametru &icirc;n metoda Contains:</span></p><p class="c4"><span class="c6"></span></p><a id="t.1f9fce11cd48efe53e12f470334b37138f9f0fa5"></a><a id="t.6"></a><table class="c3"><tr class="c9"><td class="c15" colspan="1" rowspan="1"><p class="c7"><span class="c0">using</span><span class="c2">&nbsp;System.Diagnostics.CodeAnalysis;<br><br></span><span class="c0">string</span><span class="c2">[] people = { </span><span class="c1">&quot;tom&quot;</span><span class="c2">, </span><span class="c1">&quot;Tim&quot;</span><span class="c2">, </span><span class="c1">&quot;bOb&quot;</span><span class="c2">, </span><span class="c1">&quot;Sam&quot;</span><span class="c2">&nbsp;};<br><br></span><span class="c5">// verific&#259;m dac&#259; exist&#259; &#537;irul &quot;Tom&quot;</span><span class="c2"><br></span><span class="c0">bool</span><span class="c2">&nbsp;hasTom = people.Contains(</span><span class="c1">&quot;Tom&quot;</span><span class="c2">, </span><span class="c0">new</span><span class="c2">&nbsp;CustomStringComparer()); </span><span class="c5">// true</span><span class="c2"><br>Console.WriteLine(hasTom);<br><br></span><span class="c5">// verific&#259;m dac&#259; exist&#259; &#537;irul &quot;Bob&quot;</span><span class="c2"><br></span><span class="c0">bool</span><span class="c2">&nbsp;hasBob = people.Contains(</span><span class="c1">&quot;Bob&quot;</span><span class="c2">, </span><span class="c0">new</span><span class="c2">&nbsp;CustomStringComparer()); </span><span class="c5">// true</span><span class="c2"><br>Console.WriteLine(hasBob);<br><br></span><span class="c0">class</span><span class="c2">&nbsp;</span><span class="c8">CustomStringComparer</span><span class="c2">&nbsp;: </span><span class="c8">IEqualityComparer</span><span class="c2">&lt;</span><span class="c8">string</span><span class="c2">&gt;<br>{<br> &nbsp; &nbsp;</span><span class="c0">public</span><span class="c2">&nbsp;</span><span class="c0">bool</span><span class="c2">&nbsp;</span><span class="c8">Equals</span><span class="c2">(</span><span class="c0">string</span><span class="c2">? x, </span><span class="c0">string</span><span class="c2">? y)<br> &nbsp; &nbsp;{<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">if</span><span class="c2">&nbsp;(x </span><span class="c0">is</span><span class="c2">&nbsp;</span><span class="c0">null</span><span class="c2">&nbsp;|| y </span><span class="c0">is</span><span class="c2">&nbsp;</span><span class="c0">null</span><span class="c2">) </span><span class="c0">return</span><span class="c2">&nbsp;</span><span class="c0">false</span><span class="c2">;<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">return</span><span class="c2">&nbsp;x.ToLower() == y.ToLower();<br> &nbsp; &nbsp;}<br><br> &nbsp; &nbsp;</span><span class="c0">public</span><span class="c2">&nbsp;</span><span class="c0">int</span><span class="c2">&nbsp;</span><span class="c8">GetHashCode</span><span class="c2">([DisallowNull] </span><span class="c0">string</span><span class="c2">&nbsp;obj) =&gt; obj.ToLower().GetHashCode();<br>}</span></p></td></tr></table><p class="c4"><span class="c6"></span></p><p class="c10"><span class="c6">Interfa&#539;a IEqualityComparer este tipizat&#259; cu tipul datelor comparate (&icirc;n acest caz, tipul String). Pentru implementarea acestei interfe&#539;e, trebuie s&#259; definim metodele Equals &#537;i GetHashCode. &Icirc;n metoda Equals, compar&#259;m &#537;irurile &icirc;n litere mici, iar &icirc;n metoda GetHashCode return&#259;m codul hash al &#537;irului &icirc;n litere mici.</span></p><p class="c4"><span class="c6"></span></p><p class="c10"><span class="c18">Metodele First/FirstOrDefault.</span></p><p class="c4"><span class="c6"></span></p><p class="c10"><span class="c17">Metoda </span><span class="c12">First()</span><span class="c6">&nbsp;returneaz&#259; primul element al secven&#539;ei:</span></p><p class="c4"><span class="c6"></span></p><a id="t.a8346900a884cbbfb1953e7300ea8939cdd6df7d"></a><a id="t.7"></a><table class="c3"><tr class="c9"><td class="c15" colspan="1" rowspan="1"><p class="c7"><span class="c0">string</span><span class="c2">[] people = { </span><span class="c1">&quot;Tom&quot;</span><span class="c2">, </span><span class="c1">&quot;Bob&quot;</span><span class="c2">, </span><span class="c1">&quot;Tim&quot;</span><span class="c2">, </span><span class="c1">&quot;Sam&quot;</span><span class="c2">&nbsp;};<br><br></span><span class="c5">// primul element</span><span class="c2"><br></span><span class="c0">var</span><span class="c2">&nbsp;first = people.First(); </span><span class="c5">// Tom</span><span class="c2"><br>Console.WriteLine(first);</span></p></td></tr></table><p class="c4"><span class="c6"></span></p><p class="c10"><span class="c6">De asemenea, metoda First poate accepta o metod&#259; care reprezint&#259; condi&#539;ia. &Icirc;n acest caz, metoda returneaz&#259; primul element care corespunde condi&#539;iei:</span></p><p class="c4"><span class="c6"></span></p><a id="t.2e4a25cdb12dc83d22a53a64826f537c82a7308e"></a><a id="t.8"></a><table class="c3"><tr class="c9"><td class="c15" colspan="1" rowspan="1"><p class="c7"><span class="c0">string</span><span class="c2">[] people = { </span><span class="c1">&quot;Tom&quot;</span><span class="c2">, </span><span class="c1">&quot;Bob&quot;</span><span class="c2">, </span><span class="c1">&quot;Kate&quot;</span><span class="c2">, </span><span class="c1">&quot;Tim&quot;</span><span class="c2">, </span><span class="c1">&quot;Mike&quot;</span><span class="c2">, </span><span class="c1">&quot;Sam&quot;</span><span class="c2">&nbsp;};<br><br></span><span class="c5">// primul &#537;ir, a c&#259;rui lungime este de 4 caractere</span><span class="c2"><br></span><span class="c0">var</span><span class="c2">&nbsp;firstWith4Chars = people.First(s =&gt; s.Length == </span><span class="c14">4</span><span class="c2">); </span><span class="c5">// Kate</span><span class="c2"><br>Console.WriteLine(firstWith4Chars);</span></p></td></tr></table><p class="c4"><span class="c6"></span></p><p class="c10"><span class="c6">Aici select&#259;m primul element, a c&#259;rui lungime este de 4 caractere.</span></p><p class="c4"><span class="c6"></span></p><p class="c10"><span class="c6">Trebuie s&#259; &#539;inem cont c&#259;, dac&#259; colec&#539;ia este goal&#259; sau nu exist&#259; elemente care s&#259; &icirc;ndeplineasc&#259; condi&#539;ia, se va genera o excep&#539;ie.</span></p><p class="c4"><span class="c6"></span></p><a id="t.1009dee70cbbc58ba7b6c31288fe86779a56165f"></a><a id="t.9"></a><table class="c3"><tr class="c9"><td class="c15" colspan="1" rowspan="1"><p class="c7"><span class="c0">string</span><span class="c2">[] people = { </span><span class="c1">&quot;Tom&quot;</span><span class="c2">, </span><span class="c1">&quot;Bob&quot;</span><span class="c2">, </span><span class="c1">&quot;Kate&quot;</span><span class="c2">, </span><span class="c1">&quot;Tim&quot;</span><span class="c2">, </span><span class="c1">&quot;Mike&quot;</span><span class="c2">, </span><span class="c1">&quot;Sam&quot;</span><span class="c2">&nbsp;};<br><br></span><span class="c5">// primul &#537;ir, a c&#259;rui lungime este de 5 caractere</span><span class="c2"><br></span><span class="c0">var</span><span class="c2">&nbsp;firstWith5Chars = people.First(s =&gt; s.Length == </span><span class="c14">5</span><span class="c2">); </span><span class="c5">// ! excep&#539;ie</span><span class="c2"><br>Console.WriteLine(firstWith5Chars);<br><br></span><span class="c0">var</span><span class="c2">&nbsp;first = </span><span class="c0">new</span><span class="c2">&nbsp;</span><span class="c0">string</span><span class="c2">[] {}.First(); </span><span class="c5">// ! excep&#539;ie</span><span class="c2"><br>Console.WriteLine(first);</span></p></td></tr></table><p class="c4"><span class="c6"></span></p><p class="c10"><span class="c17">Metoda</span><span class="c12">&nbsp;FirstOrDefault()</span><span class="c6">&nbsp;returneaz&#259; de asemenea primul element &#537;i poate accepta o condi&#539;ie, doar c&#259;, dac&#259; colec&#539;ia este goal&#259; sau nu exist&#259; elemente care s&#259; &icirc;ndeplineasc&#259; condi&#539;ia, metoda returneaz&#259; valoarea implicit&#259;:</span></p><p class="c4"><span class="c6"></span></p><a id="t.878b1aa04d8708a5325eb73f7d75dd8e959cdca9"></a><a id="t.10"></a><table class="c3"><tr class="c9"><td class="c15" colspan="1" rowspan="1"><p class="c7"><span class="c0">string</span><span class="c2">[] people = { </span><span class="c1">&quot;Tom&quot;</span><span class="c2">, </span><span class="c1">&quot;Bob&quot;</span><span class="c2">, </span><span class="c1">&quot;Kate&quot;</span><span class="c2">, </span><span class="c1">&quot;Tim&quot;</span><span class="c2">, </span><span class="c1">&quot;Mike&quot;</span><span class="c2">, </span><span class="c1">&quot;Sam&quot;</span><span class="c2">&nbsp;};<br><br></span><span class="c5">// primul element</span><span class="c2"><br></span><span class="c0">var</span><span class="c2">&nbsp;first = people.FirstOrDefault(); </span><span class="c5">// Tom</span><span class="c2"><br>Console.WriteLine(first);<br><br></span><span class="c5">// primul &#537;ir, a c&#259;rui lungime este de 4 caractere</span><span class="c2"><br></span><span class="c0">var</span><span class="c2">&nbsp;firstWith4Chars = people.FirstOrDefault(s =&gt; s.Length == </span><span class="c14">4</span><span class="c2">); </span><span class="c5">// Kate</span><span class="c2"><br>Console.WriteLine(firstWith4Chars);<br><br></span><span class="c5">// primul element dintr-o colec&#539;ie goal&#259;</span><span class="c2"><br></span><span class="c0">var</span><span class="c2">&nbsp;firstOrDefault = </span><span class="c0">new</span><span class="c2">&nbsp;</span><span class="c0">string</span><span class="c2">[] {}.FirstOrDefault();<br>Console.WriteLine(firstOrDefault); </span><span class="c5">// null</span></p></td></tr></table><p class="c4"><span class="c6"></span></p><p class="c10"><span class="c6">Trebuie s&#259; &#539;inem cont c&#259; pentru colec&#539;iile de tipuri de referin&#539;&#259;, FirstOrDefault returneaz&#259; o valoare de tip T? (&icirc;n exemplul de mai sus - string?), adic&#259; o valoare care poate fi null, iar valoarea implicit&#259; este null. Pentru colec&#539;iile de tipuri numerice, se returneaz&#259; direct valoarea de tip T, iar valoarea implicit&#259; este 0.</span></p><p class="c4"><span class="c6"></span></p><p class="c10"><span class="c6">Putem seta valoarea implicit&#259;, transmi&#539;&acirc;nd-o ca unul dintre argumente:</span></p><p class="c4"><span class="c6"></span></p><a id="t.d8030c64dedb0bb06287ca9e166ed4d45219c054"></a><a id="t.11"></a><table class="c3"><tr class="c9"><td class="c15" colspan="1" rowspan="1"><p class="c7"><span class="c0">string</span><span class="c2">[] people = { </span><span class="c1">&quot;Tom&quot;</span><span class="c2">, </span><span class="c1">&quot;Bob&quot;</span><span class="c2">, </span><span class="c1">&quot;Kate&quot;</span><span class="c2">, </span><span class="c1">&quot;Tim&quot;</span><span class="c2">, </span><span class="c1">&quot;Mike&quot;</span><span class="c2">, </span><span class="c1">&quot;Sam&quot;</span><span class="c2">&nbsp;};<br><br></span><span class="c0">string</span><span class="c2">? firstWith5Chars = people.FirstOrDefault(s =&gt; s.Length == </span><span class="c14">5</span><span class="c2">, </span><span class="c1">&quot;Undefined&quot;</span><span class="c2">);<br>Console.WriteLine(firstWith5Chars); </span><span class="c5">// Undefined</span><span class="c2"><br><br></span><span class="c5">// primul element dintr-o colec&#539;ie goal&#259; de &#537;iruri</span><span class="c2"><br></span><span class="c0">string</span><span class="c2">? firstOrDefault = </span><span class="c0">new</span><span class="c2">&nbsp;</span><span class="c0">string</span><span class="c2">[] {}.First<br><br></span><span class="c8">OrDefault</span><span class="c2">(</span><span class="c1">&quot;hello&quot;</span><span class="c2">); </span><span class="c5">// hello - valoare implicit&#259;</span><span class="c2"><br>Console.WriteLine(firstOrDefault); </span><span class="c5">// hello</span><span class="c2"><br><br></span><span class="c5">// primul element dintr-o colec&#539;ie goal&#259; de int</span><span class="c2"><br></span><span class="c0">int</span><span class="c2">&nbsp;firstNumber = </span><span class="c0">new</span><span class="c2">&nbsp;</span><span class="c0">int</span><span class="c2">[] {}.FirstOrDefault(</span><span class="c14">100</span><span class="c2">); </span><span class="c5">// 100 - valoare implicit&#259;</span><span class="c2"><br>Console.WriteLine(firstNumber); </span><span class="c5">// 100</span></p></td></tr></table><p class="c4"><span class="c6"></span></p><p class="c10"><span class="c18">Metodele Last &#537;i LastOrDefault.</span></p><p class="c4"><span class="c6"></span></p><p class="c10"><span class="c17">Metoda</span><span class="c12">&nbsp;Last() </span><span class="c6">este similar&#259; metodei First, doar c&#259; returneaz&#259; ultimul element. Dac&#259; colec&#539;ia nu con&#539;ine elemente care s&#259; &icirc;ndeplineasc&#259; condi&#539;ia sau este goal&#259;, metoda genereaz&#259; o excep&#539;ie.</span></p><p class="c4"><span class="c6"></span></p><a id="t.0cf73d7c541cf20ad06d148f4d5c8ff5890b6711"></a><a id="t.12"></a><table class="c3"><tr class="c9"><td class="c15" colspan="1" rowspan="1"><p class="c7"><span class="c0">string</span><span class="c2">[] people = { </span><span class="c1">&quot;Tom&quot;</span><span class="c2">, </span><span class="c1">&quot;Bob&quot;</span><span class="c2">, </span><span class="c1">&quot;Kate&quot;</span><span class="c2">, </span><span class="c1">&quot;Tim&quot;</span><span class="c2">, </span><span class="c1">&quot;Mike&quot;</span><span class="c2">, </span><span class="c1">&quot;Sam&quot;</span><span class="c2">&nbsp;};<br><br></span><span class="c0">string</span><span class="c2">&nbsp;last = people.Last();<br>Console.WriteLine(last); </span><span class="c5">// Sam</span><span class="c2"><br><br></span><span class="c0">string</span><span class="c2">&nbsp;lastWith4Chars = people.Last(s =&gt; s.Length == </span><span class="c14">4</span><span class="c2">);<br>Console.WriteLine(lastWith4Chars); </span><span class="c5">// Mike</span></p></td></tr></table><p class="c4"><span class="c6"></span></p><p class="c10"><span class="c17">Metoda </span><span class="c12">LastOrDefault()</span><span class="c6">&nbsp;returneaz&#259; ultimul element sau valoarea implicit&#259; dac&#259; colec&#539;ia nu con&#539;ine elemente care s&#259; &icirc;ndeplineasc&#259; condi&#539;ia sau este goal&#259;:</span></p><p class="c4"><span class="c6"></span></p><a id="t.87c1a6d4c5daf3cc285b931f41361c55ada98cc4"></a><a id="t.13"></a><table class="c3"><tr class="c9"><td class="c15" colspan="1" rowspan="1"><p class="c7"><span class="c0">string</span><span class="c2">[] people = { </span><span class="c1">&quot;Tom&quot;</span><span class="c2">, </span><span class="c1">&quot;Bob&quot;</span><span class="c2">, </span><span class="c1">&quot;Kate&quot;</span><span class="c2">, </span><span class="c1">&quot;Tim&quot;</span><span class="c2">, </span><span class="c1">&quot;Mike&quot;</span><span class="c2">, </span><span class="c1">&quot;Sam&quot;</span><span class="c2">&nbsp;};<br><br></span><span class="c0">string</span><span class="c2">? last = people.LastOrDefault();<br>Console.WriteLine(last); </span><span class="c5">// Sam</span><span class="c2"><br><br></span><span class="c0">string</span><span class="c2">? lastWith4Chars = people.LastOrDefault(s =&gt; s.Length == </span><span class="c14">4</span><span class="c2">);<br>Console.WriteLine(lastWith4Chars); </span><span class="c5">// Mike</span><span class="c2"><br><br></span><span class="c0">string</span><span class="c2">? lastWith5Chars = people.LastOrDefault(s =&gt; s.Length == </span><span class="c14">5</span><span class="c2">);<br>Console.WriteLine(lastWith5Chars); </span><span class="c5">// null</span><span class="c2"><br><br></span><span class="c0">string</span><span class="c2">? lastWith5CharsOrDefault = people.LastOrDefault(s =&gt; s.Length == </span><span class="c14">5</span><span class="c2">, </span><span class="c1">&quot;Undefined&quot;</span><span class="c2">);<br>Console.WriteLine(lastWith5CharsOrDefault); </span><span class="c5">// Undefined</span><span class="c2"><br><br></span><span class="c5">// primul element dintr-o colec&#539;ie goal&#259; de &#537;iruri</span><span class="c2"><br></span><span class="c0">string</span><span class="c2">? lastOrDefault = </span><span class="c0">new</span><span class="c2">&nbsp;</span><span class="c0">string</span><span class="c2">[] {}.LastOrDefault(</span><span class="c1">&quot;hello&quot;</span><span class="c2">);<br>Console.WriteLine(lastOrDefault); </span><span class="c5">// hello</span></p></td></tr></table><p class="c4"><span class="c6"></span></p><p class="c10"><span class="c6">Aceste metode ofer&#259; flexibilitatea de a verifica existen&#539;a &#537;i ob&#539;ine elementele din colec&#539;ii, fie c&#259; sunt simple sau complexe, asigur&acirc;nd astfel un control eficient asupra datelor.</span></p><p class="c4"><span class="c6"></span></p></body></html>