<html>

<head>
    <meta content="text/html; charset=UTF-8" http-equiv="content-type">
    <style type="text/css">
        @import url(https://themes.googleusercontent.com/fonts/css?kit=chteh0fSOiSrmusp8u43YLibRAUGyvCIyNwOfYj8c_aH4gUIUjZTH34PuvJkbTJT);

        ol {
            margin: 0;
            padding: 0
        }

        table td,
        table th {
            padding: 0
        }

        .c6 {
            border-right-style: solid;
            padding: 5pt 5pt 5pt 5pt;
            border-bottom-color: #000000;
            border-top-width: 0pt;
            border-right-width: 0pt;
            border-left-color: #000000;
            vertical-align: top;
            border-right-color: #000000;
            border-left-width: 0pt;
            border-top-style: solid;
            background-color: #333333;
            border-left-style: solid;
            border-bottom-width: 0pt;
            width: 468pt;
            border-top-color: #000000;
            border-bottom-style: solid
        }

        .c0 {
            padding-top: 0pt;
            padding-bottom: 0pt;
            line-height: 1.5;
            orphans: 2;
            widows: 2;
            text-align: left;
            height: 11pt
        }

        .c18 {
            color: #000000;
            font-weight: 700;
            text-decoration: none;
            vertical-align: baseline;
            font-size: 27pt;
            font-family: "Open Sans";
            font-style: normal
        }

        .c1 {
            color: #000000;
            font-weight: 400;
            text-decoration: none;
            vertical-align: baseline;
            font-size: 12pt;
            font-family: "Open Sans";
            font-style: normal
        }

        .c3 {
            color: #000000;
            font-weight: 700;
            text-decoration: none;
            vertical-align: baseline;
            font-size: 15pt;
            font-family: "Open Sans";
            font-style: normal
        }

        .c8 {
            padding-top: 0pt;
            padding-bottom: 0pt;
            line-height: 1.5;
            orphans: 2;
            widows: 2;
            text-align: left
        }

        .c2 {
            background-color: #333333;
            font-size: 12pt;
            font-family: "Consolas";
            color: #ffffff;
            font-weight: 400
        }

        .c10 {
            background-color: #333333;
            font-size: 12pt;
            font-family: "Consolas";
            color: #a2fca2;
            font-weight: 400
        }

        .c17 {
            background-color: #333333;
            font-size: 12pt;
            font-family: "Consolas";
            color: #ffffaa;
            font-weight: 400
        }

        .c7 {
            background-color: #333333;
            font-size: 12pt;
            font-family: "Consolas";
            color: #fcc28c;
            font-weight: 400
        }

        .c12 {
            background-color: #333333;
            font-size: 12pt;
            font-family: "Consolas";
            color: #888888;
            font-weight: 400
        }

        .c14 {
            background-color: #333333;
            font-size: 12pt;
            font-family: "Consolas";
            color: #d36363;
            font-weight: 400
        }

        .c9 {
            padding-top: 0pt;
            padding-bottom: 0pt;
            line-height: 1.15;
            text-align: left
        }

        .c5 {
            border-spacing: 0;
            border-collapse: collapse;
            margin-right: auto
        }

        .c19 {
            background-color: #ffffff;
            max-width: 468pt;
            padding: 72pt 72pt 72pt 72pt
        }

        .c11 {
            font-size: 12pt;
            font-family: "Open Sans";
            font-weight: 700
        }

        .c4 {
            font-size: 12pt;
            font-family: "Open Sans";
            font-weight: 400
        }

        .c16 {
            height: 11pt
        }

        .c15 {
            height: 0pt
        }

        .c13 {
            font-style: italic
        }

        .title {
            padding-top: 0pt;
            color: #000000;
            font-size: 26pt;
            padding-bottom: 3pt;
            font-family: "Arial";
            line-height: 1.15;
            page-break-after: avoid;
            orphans: 2;
            widows: 2;
            text-align: left
        }

        .subtitle {
            padding-top: 0pt;
            color: #666666;
            font-size: 15pt;
            padding-bottom: 16pt;
            font-family: "Arial";
            line-height: 1.15;
            page-break-after: avoid;
            orphans: 2;
            widows: 2;
            text-align: left
        }

        li {
            color: #000000;
            font-size: 11pt;
            font-family: "Arial"
        }

        p {
            margin: 0;
            color: #000000;
            font-size: 11pt;
            font-family: "Arial"
        }

        h1 {
            padding-top: 20pt;
            color: #000000;
            font-size: 20pt;
            padding-bottom: 6pt;
            font-family: "Arial";
            line-height: 1.15;
            page-break-after: avoid;
            orphans: 2;
            widows: 2;
            text-align: left
        }

        h2 {
            padding-top: 18pt;
            color: #000000;
            font-size: 16pt;
            padding-bottom: 6pt;
            font-family: "Arial";
            line-height: 1.15;
            page-break-after: avoid;
            orphans: 2;
            widows: 2;
            text-align: left
        }

        h3 {
            padding-top: 16pt;
            color: #434343;
            font-size: 14pt;
            padding-bottom: 4pt;
            font-family: "Arial";
            line-height: 1.15;
            page-break-after: avoid;
            orphans: 2;
            widows: 2;
            text-align: left
        }

        h4 {
            padding-top: 14pt;
            color: #666666;
            font-size: 12pt;
            padding-bottom: 4pt;
            font-family: "Arial";
            line-height: 1.15;
            page-break-after: avoid;
            orphans: 2;
            widows: 2;
            text-align: left
        }

        h5 {
            padding-top: 12pt;
            color: #666666;
            font-size: 11pt;
            padding-bottom: 4pt;
            font-family: "Arial";
            line-height: 1.15;
            page-break-after: avoid;
            orphans: 2;
            widows: 2;
            text-align: left
        }

        h6 {
            padding-top: 12pt;
            color: #666666;
            font-size: 11pt;
            padding-bottom: 4pt;
            font-family: "Arial";
            line-height: 1.15;
            page-break-after: avoid;
            font-style: italic;
            orphans: 2;
            widows: 2;
            text-align: left
        }
    </style>
</head>

<body class="c19 doc-content">
    <h1 class="c8 c18">Sarcini È™i clasa Task.</h1>
    <p class="c0"><span class="c1"></span></p>
    <p class="c8"><span class="c4">&Icirc;n era ma&#537;inilor multicore, care permit executarea simultan&#259; a mai
            multor procese, mijloacele standard de lucru cu thread-uri &icirc;n .NET au devenit insuficiente. De aceea,
            &icirc;n framework-ul .NET a fost ad&#259;ugat&#259; biblioteca de sarcini paralele </span><span
            class="c11">TPL </span><span class="c4">(Task Parallel Library), al c&#259;rei func&#539;ional principal se
            afl&#259; &icirc;n namespace-ul </span><span class="c11">System.Threading.Tasks</span><span class="c1">.
            Aceast&#259; bibliotec&#259; simplific&#259; lucrul cu sistemele multiprocesor &#537;i multicore. &Icirc;n
            plus, simplific&#259; lucrul de creare a noilor thread-uri. De aceea, se recomand&#259; de obicei utilizarea
            TPL &#537;i a claselor sale pentru crearea aplica&#539;iilor multithreading, de&#537;i mijloacele standard
            &#537;i clasa Thread sunt &icirc;nc&#259; larg utilizate.</span></p>
    <p class="c0"><span class="c1"></span></p>
    <p class="c8"><span class="c4">La baza bibliotecii TPL st&#259; conceptul de sarcini, fiecare dintre acestea
            descriind o opera&#539;ie separat&#259; &#537;i continu&#259;. &Icirc;n biblioteca de clase .NET, o
            sarcin&#259; este reprezentat&#259; de clasa </span><span class="c11">Task</span><span class="c4">, care se
            afl&#259; &icirc;n namespace-ul </span><span class="c11">System.Threading.Tasks</span><span class="c4">.
            Aceast&#259; clas&#259; descrie o sarcin&#259; separat&#259;, care se lanseaz&#259; asincron &icirc;ntr-unul
            din thread-urile din pool-ul de thread-uri. Totu&#537;i, se poate lansa &#537;i sincron &icirc;n thread-ul
            curent. &Icirc;n orice caz, trebuie men&#539;ionat c&#259;</span><span class="c11">&nbsp;o sarcin&#259; nu
            este un thread</span><span class="c1">.</span></p>
    <p class="c0"><span class="c1"></span></p>
    <p class="c8"><span class="c1">Pentru definirea &#537;i lansarea unei sarcini, exist&#259; mai multe metode.</span>
    </p>
    <p class="c0"><span class="c1"></span></p>
    <p class="c8"><span class="c1">Prima metod&#259; este crearea unui obiect Task &#537;i apelarea metodei
            Start:</span></p>
    <p class="c0"><span class="c1"></span></p><a id="t.8d1f8ce490708abe450146c5822d4378b55ce3eb"></a><a id="t.0"></a>
    <table class="c5">
        <tr class="c15">
            <td class="c6" colspan="1" rowspan="1">
                <p class="c9"><span class="c2">Task task = </span><span class="c7">new</span><span
                        class="c2">&nbsp;Task(() =&gt; Console.WriteLine(</span><span class="c10">&quot;Hello
                        Task!&quot;</span><span class="c2">));<br>task.Start();</span></p>
            </td>
        </tr>
    </table>
    <p class="c0"><span class="c1"></span></p>
    <p class="c8"><span class="c1">Ca parametru, obiectul Task prime&#537;te un delegat Action, deci putem transmite
            orice ac&#539;iune care corespunde acestui delegat, de exemplu, o expresie lambda, ca &icirc;n acest caz,
            sau o referin&#539;&#259; la o metod&#259;. &Icirc;n acest caz, la executarea sarcinii, pe consol&#259; va
            fi afi&#537;at &#537;irul &quot;Hello Task!&quot;.</span></p>
    <p class="c0"><span class="c1"></span></p><a id="t.b8df6b5ed774c5fadbefc190a47c2662b969ef6a"></a><a id="t.1"></a>
    <table class="c5">
        <tr class="c15">
            <td class="c6" colspan="1" rowspan="1">
                <p class="c9"><span class="c2">Metoda </span><span class="c17">Start</span><span class="c2">()
                        lanseaz&#259; efectiv sarcina.</span></p>
            </td>
        </tr>
    </table>
    <p class="c0"><span class="c1"></span></p>
    <p class="c8"><span class="c4">A doua metod&#259; const&#259; &icirc;n utilizarea metodei statice</span><span
            class="c11">&nbsp;Task.Factory.StartNew()</span><span class="c1">. Aceast&#259; metod&#259;, de asemenea,
            prime&#537;te ca parametru un delegat Action, care specific&#259; ac&#539;iunea ce va fi executat&#259;.
            Aceast&#259; metod&#259; lanseaz&#259; imediat sarcina:</span></p>
    <p class="c0"><span class="c1"></span></p><a id="t.51d5c8c7ebfa4e1cdb128ffc84b4c8af3720a944"></a><a id="t.2"></a>
    <table class="c5">
        <tr class="c15">
            <td class="c6" colspan="1" rowspan="1">
                <p class="c9"><span class="c2">Task task = Task.Factory.StartNew(() =&gt; Console.WriteLine(</span><span
                        class="c10">&quot;Hello Task!&quot;</span><span class="c2">));</span></p>
            </td>
        </tr>
    </table>
    <p class="c0"><span class="c1"></span></p>
    <p class="c8"><span class="c1">Ca rezultat, metoda returneaz&#259; sarcina lansat&#259;.</span></p>
    <p class="c0"><span class="c1"></span></p>
    <p class="c8"><span class="c4">A treia metod&#259; de definire &#537;i lansare a sarcinilor este utilizarea metodei
            statice </span><span class="c11">Task.Run()</span><span class="c1">:</span></p>
    <p class="c0"><span class="c1"></span></p><a id="t.dc0ce50f9a7ac83e346f79825648c0f69808024e"></a><a id="t.3"></a>
    <table class="c5">
        <tr class="c15">
            <td class="c6" colspan="1" rowspan="1">
                <p class="c9"><span class="c2">Task task = Task.Run(() =&gt; Console.WriteLine(</span><span
                        class="c10">&quot;Hello Task!&quot;</span><span class="c2">));</span></p>
            </td>
        </tr>
    </table>
    <p class="c0"><span class="c1"></span></p>
    <p class="c8"><span class="c4">Metoda </span><span class="c4 c13">Task.Run()</span><span class="c1">&nbsp;poate
            primi ca parametru un delegat Action - ac&#539;iunea de executat &#537;i returneaz&#259; un obiect
            Task.</span></p>
    <p class="c0"><span class="c1"></span></p>
    <p class="c8"><span class="c1">S&#259; definim un program mic &icirc;n care folosim toate aceste metode:</span></p>
    <p class="c0"><span class="c1"></span></p><a id="t.b242ff17a78e18f6efc851fd3dad6c6ad131079a"></a><a id="t.4"></a>
    <table class="c5">
        <tr class="c15">
            <td class="c6" colspan="1" rowspan="1">
                <p class="c9"><span class="c2">Task task1 = </span><span class="c7">new</span><span
                        class="c2">&nbsp;Task(() =&gt; Console.WriteLine(</span><span class="c10">&quot;Task1 is
                        executed&quot;</span><span class="c2">));<br>task1.Start();<br><br>Task task2 =
                        Task.Factory.StartNew(() =&gt; Console.WriteLine(</span><span class="c10">&quot;Task2 is
                        executed&quot;</span><span class="c2">));<br><br>Task task3 = Task.Run(() =&gt;
                        Console.WriteLine(</span><span class="c10">&quot;Task3 is executed&quot;</span><span
                        class="c2">));</span></p>
            </td>
        </tr>
    </table>
    <p class="c0"><span class="c1"></span></p>
    <p class="c8"><span class="c1">&Icirc;n acest cod, sarcinile sunt create &#537;i lansate, dar la rularea
            aplica&#539;iei pe consol&#259; s-ar putea s&#259; nu vedem nimic. De ce? Deoarece atunci c&acirc;nd
            thread-ul sarcinii este lansat din thread-ul principal al programului - thread-ul metodei Main,
            aplica&#539;ia poate finaliza execu&#539;ia &icirc;nainte ca toate cele trei sarcini sau m&#259;car una
            dintre ele s&#259; &icirc;nceap&#259; execu&#539;ia. Pentru a preveni acest lucru, putem a&#537;tepta
            &icirc;n mod programatic finalizarea sarcinii.</span></p>
    <p class="c0"><span class="c1"></span></p>
    <p class="c8"><span class="c3">A&#537;teptarea finaliz&#259;rii sarcinii.</span></p>
    <p class="c0"><span class="c1"></span></p>
    <p class="c8"><span class="c4">Pentru ca aplica&#539;ia s&#259; a&#537;tepte finalizarea sarcinii, putem folosi
            metoda </span><span class="c11">Wait()</span><span class="c1">&nbsp;a obiectului Task:</span></p>
    <p class="c0"><span class="c1"></span></p><a id="t.7c5c9036cd36ace0f2da2cecc6a67f250a27b21d"></a><a id="t.5"></a>
    <table class="c5">
        <tr class="c15">
            <td class="c6" colspan="1" rowspan="1">
                <p class="c9"><span class="c2">Task task1 = </span><span class="c7">new</span><span
                        class="c2">&nbsp;Task(() =&gt; Console.WriteLine(</span><span class="c10">&quot;Task1 is
                        executed&quot;</span><span class="c2">));<br>task1.Start();<br><br>Task task2 =
                        Task.Factory.StartNew(() =&gt; Console.WriteLine(</span><span class="c10">&quot;Task2 is
                        executed&quot;</span><span class="c2">));<br><br>Task task3 = Task.Run(() =&gt;
                        Console.WriteLine(</span><span class="c10">&quot;Task3 is executed&quot;</span><span
                        class="c2">));<br><br>task1.Wait(); &nbsp; </span><span class="c12">// a&#537;tept&#259;m
                        finalizarea sarcinii task1</span><span class="c2"><br>task2.Wait(); &nbsp; </span><span
                        class="c12">// a&#537;tept&#259;m finalizarea sarcinii task2</span><span
                        class="c2"><br>task3.Wait(); &nbsp; </span><span class="c12">// a&#537;tept&#259;m finalizarea
                        sarcinii task3</span></p>
            </td>
        </tr>
    </table>
    <p class="c0"><span class="c1"></span></p>
    <p class="c8"><span class="c1">Posibil&#259; ie&#537;ire pe consol&#259; a programului:</span></p>
    <p class="c0"><span class="c1"></span></p><a id="t.0539a8d78e6c3da25e277d06a9eed551b6241ac7"></a><a id="t.6"></a>
    <table class="c5">
        <tr class="c15"></tr>
    </table>
    <p class="c9 c16"><span class="c1"></span></p><a id="t.b35caf1e9f0c688bc55b33f07bce209f1c90c194"></a><a
        id="t.7"></a>
    <table class="c5">
        <tr class="c15">
            <td class="c6" colspan="1" rowspan="1">
                <p class="c9"><span class="c2">Task3 </span><span class="c7">is</span><span
                        class="c2">&nbsp;executed<br>Task2 </span><span class="c7">is</span><span
                        class="c2">&nbsp;executed<br>Task1 </span><span class="c7">is</span><span
                        class="c2">&nbsp;executed</span></p>
            </td>
        </tr>
    </table>
    <p class="c0"><span class="c1"></span></p>
    <p class="c8"><span class="c1">Ie&#537;irea pe consol&#259; nu este determinist&#259;, deoarece sarcinile nu se
            execut&#259; secven&#539;ial. Prima sarcin&#259; lansat&#259; poate finaliza execu&#539;ia dup&#259; ultima
            sarcin&#259;.</span></p>
    <p class="c0"><span class="c1"></span></p>
    <p class="c8"><span class="c4">Trebuie men&#539;ionat c&#259; metoda</span><span
            class="c11">&nbsp;Wait()</span><span class="c1">&nbsp;blocheaz&#259; thread-ul apelant, &icirc;n care
            sarcina este lansat&#259;, p&acirc;n&#259; c&acirc;nd aceast&#259; sarcin&#259; &icirc;&#537;i
            finalizeaz&#259; execu&#539;ia. De exemplu:</span></p>
    <p class="c0"><span class="c1"></span></p><a id="t.c97e466053931cdd0a267edc9a255550e6489a9b"></a><a id="t.8"></a>
    <table class="c5">
        <tr class="c15">
            <td class="c6" colspan="1" rowspan="1">
                <p class="c9"><span class="c2">Console.WriteLine(</span><span class="c10">&quot;Main
                        Starts&quot;</span><span class="c2">);<br></span><span class="c12">// cre&#259;m
                        sarcina</span><span class="c2"><br>Task task1 = </span><span class="c7">new</span><span
                        class="c2">&nbsp;Task(() =&gt;<br>{<br> &nbsp; &nbsp;Console.WriteLine(</span><span
                        class="c10">&quot;Task Starts&quot;</span><span class="c2">);<br> &nbsp;
                        &nbsp;Thread.Sleep(</span><span class="c14">1000</span><span class="c2">); &nbsp;</span><span
                        class="c12">// &icirc;nt&acirc;rziere de 1 secund&#259; - imita&#539;ie a unei lucr&#259;ri
                        &icirc;ndelungate</span><span class="c2"><br> &nbsp; &nbsp;Console.WriteLine(</span><span
                        class="c10">&quot;Task Ends&quot;</span><span class="c2">);<br>});<br>task1.Start();
                        &nbsp;</span><span class="c12">// lans&#259;m sarcina</span><span class="c2"><br>task1.Wait();
                        &nbsp; </span><span class="c12">// a&#537;tept&#259;m finalizarea sarcinii</span><span
                        class="c2"><br>Console.WriteLine(</span><span class="c10">&quot;Main Ends&quot;</span><span
                        class="c2">);</span></p>
            </td>
        </tr>
    </table>
    <p class="c0"><span class="c1"></span></p>
    <p class="c8"><span class="c1">Pentru a emula o lucrare &icirc;ndelungat&#259;, &icirc;n sarcina task1 se
            seteaz&#259; o &icirc;nt&acirc;rziere de 1 secund&#259;. &Icirc;n final, c&acirc;nd execu&#539;ia ajunge la
            apelul task1.Wait(), thread-ul principal &icirc;&#537;i va opri execu&#539;ia &#537;i va a&#537;tepta
            finalizarea sarcinii. &#536;i vom ob&#539;ine urm&#259;toarea ie&#537;ire pe consol&#259;:</span></p>
    <p class="c0"><span class="c1"></span></p><a id="t.8e0019d38428ce97ca9a92f31d73f50c227acaef"></a><a id="t.9"></a>
    <table class="c5">
        <tr class="c15">
            <td class="c6" colspan="1" rowspan="1">
                <p class="c9"><span class="c2">Main Starts<br>Task Starts<br>Task Ends<br>Main Ends</span></p>
            </td>
        </tr>
    </table>
    <p class="c0"><span class="c1"></span></p>
    <p class="c8"><span class="c1">Dac&#259; acest comportament nu este esen&#539;ial, a&#537;teptarea finaliz&#259;rii
            sarcinii poate fi plasat&#259; la sf&acirc;r&#537;itul metodei Main:</span></p>
    <p class="c0"><span class="c1"></span></p><a id="t.0b89662b4a615312b771c109d1c042742945ff69"></a><a id="t.10"></a>
    <table class="c5">
        <tr class="c15">
            <td class="c6" colspan="1" rowspan="1">
                <p class="c9"><span class="c2">Console.WriteLine(</span><span class="c10">&quot;Main
                        Starts&quot;</span><span class="c2">);<br></span><span class="c12">// cre&#259;m
                        sarcina</span><span class="c2"><br>Task task1 = </span><span class="c7">new</span><span
                        class="c2">&nbsp;Task(() =&gt;<br>{<br> &nbsp; &nbsp;Console.WriteLine(</span><span
                        class="c10">&quot;Task Starts&quot;</span><span class="c2">);<br> &nbsp;
                        &nbsp;Thread.Sleep(</span><span class="c14">1000</span><span class="c2">); &nbsp;</span><span
                        class="c12">// &icirc;nt&acirc;rziere de 1 secund&#259; - imita&#539;ie a unei lucr&#259;ri
                        &icirc;ndelungate</span><span class="c2"><br> &nbsp; &nbsp;Console.WriteLine(</span><span
                        class="c10">&quot;Task Ends&quot;</span><span class="c2">);<br>});<br>task1.Start();
                        &nbsp;</span><span class="c12">// lans&#259;m sarcina</span><span
                        class="c2"><br>Console.WriteLine(</span><span class="c10">&quot;Main Ends&quot;</span><span
                        class="c2">);<br>task1.Wait(); &nbsp; </span><span class="c12">// a&#537;tept&#259;m finalizarea
                        sarcinii</span></p>
            </td>
        </tr>
    </table>
    <p class="c0"><span class="c1"></span></p>
    <p class="c8"><span class="c1">&Icirc;n acest caz, aplica&#539;ia va a&#537;tepta totu&#537;i finalizarea sarcinii,
            dar alte ac&#539;iuni sincronizate &icirc;n thread-ul principal nu vor fi blocate &#537;i nu vor
            a&#537;tepta finalizarea sarcinii.</span></p>
    <p class="c0"><span class="c1"></span></p>
    <p class="c8"><span class="c3">Lansarea sincron&#259; a sarcinii.</span></p>
    <p class="c0"><span class="c1"></span></p>
    <p class="c8"><span class="c4">&Icirc;n mod implicit, sarcinile sunt lansate asincron. Cu toate acestea, cu ajutorul
            metodei</span><span class="c11">&nbsp;RunSynchronously()</span><span class="c1">&nbsp;putem lansa sarcinile
            sincron:</span></p>
    <p class="c0"><span class="c1"></span></p>
    <p class="c8"><span class="c1">C</span></p><a id="t.f115a7408936719e41544c558bed46ab2a5a8d31"></a><a id="t.11"></a>
    <table class="c5">
        <tr class="c15">
            <td class="c6" colspan="1" rowspan="1">
                <p class="c9"><span class="c2">onsole.WriteLine(</span><span class="c10">&quot;Main
                        Starts&quot;</span><span class="c2">);<br></span><span class="c12">// cre&#259;m
                        sarcina</span><span class="c2"><br>Task task1 = </span><span class="c7">new</span><span
                        class="c2">&nbsp;Task(() =&gt;<br>{<br> &nbsp; &nbsp;Console.WriteLine(</span><span
                        class="c10">&quot;Task Starts&quot;</span><span class="c2">);<br> &nbsp;
                        &nbsp;Thread.Sleep(</span><span class="c14">1000</span><span class="c2">); <br> &nbsp;
                        &nbsp;Console.WriteLine(</span><span class="c10">&quot;Task Ends&quot;</span><span
                        class="c2">);<br>});<br>task1.RunSynchronously(); </span><span class="c12">// lans&#259;m
                        sarcina sincron</span><span class="c2"><br>Console.WriteLine(</span><span class="c10">&quot;Main
                        Ends&quot;</span><span class="c2">); </span><span class="c12">// acest apel a&#537;teapt&#259;
                        finalizarea sarcinii task1 </span></p>
            </td>
        </tr>
    </table>
    <p class="c0"><span class="c1"></span></p>
    <p class="c8"><span class="c3">Propriet&#259;&#539;i ale clasei Task.</span></p>
    <p class="c0"><span class="c1"></span></p>
    <p class="c8"><span class="c1">Clasa Task are o serie de propriet&#259;&#539;i, prin intermediul c&#259;rora putem
            ob&#539;ine informa&#539;ii despre obiect. Unele dintre acestea sunt:</span></p>
    <p class="c0"><span class="c1"></span></p>
    <p class="c8"><span class="c4">- </span><span class="c11">AsyncState</span><span class="c1">: returneaz&#259;
            obiectul de stare al sarcinii</span></p>
    <p class="c0"><span class="c1"></span></p>
    <p class="c8"><span class="c4">- </span><span class="c11">CurrentId</span><span class="c1">: returneaz&#259;
            identificatorul sarcinii curente (proprietate static&#259;)</span></p>
    <p class="c0"><span class="c1"></span></p>
    <p class="c8"><span class="c4">- </span><span class="c11">Id</span><span class="c1">: returneaz&#259;
            identificatorul sarcinii curente</span></p>
    <p class="c0"><span class="c1"></span></p>
    <p class="c8"><span class="c4">- </span><span class="c11">Exception</span><span class="c1">: returneaz&#259;
            obiectul excep&#539;iei ap&#259;rute &icirc;n timpul execu&#539;iei sarcinii</span></p>
    <p class="c0"><span class="c1"></span></p>
    <p class="c8"><span class="c4">- </span><span class="c11">Status</span><span class="c1">: returneaz&#259; starea
            sarcinii. Reprezint&#259; enumera&#539;ia</span></p>
    <p class="c8"><span class="c4 c13">System.Threading.Tasks.TaskStatus</span><span class="c1">, care are
            urm&#259;toarele valori:</span></p>
    <p class="c0"><span class="c1"></span></p>
    <p class="c8"><span class="c4">&nbsp; - </span><span class="c4 c13">Canceled</span><span class="c1">: sarcina a fost
            anulat&#259;</span></p>
    <p class="c0"><span class="c1"></span></p>
    <p class="c8"><span class="c4">&nbsp; - </span><span class="c4 c13">Created</span><span class="c1">: sarcina a fost
            creat&#259;, dar nu a fost lansat&#259; &icirc;nc&#259;</span></p>
    <p class="c0"><span class="c1"></span></p>
    <p class="c8"><span class="c4">&nbsp; - </span><span class="c4 c13">Faulted</span><span class="c1">: &icirc;n timpul
            execu&#539;iei sarcinii a ap&#259;rut o excep&#539;ie</span></p>
    <p class="c0"><span class="c1"></span></p>
    <p class="c8"><span class="c4">&nbsp; - </span><span class="c4 c13">RanToCompletion</span><span class="c1">: sarcina
            a fost finalizat&#259; cu succes</span></p>
    <p class="c0"><span class="c1"></span></p>
    <p class="c8"><span class="c4">&nbsp; - </span><span class="c4 c13">Running</span><span class="c1">: sarcina este
            lansat&#259;, dar nu este finalizat&#259; &icirc;nc&#259;</span></p>
    <p class="c0"><span class="c1"></span></p>
    <p class="c8"><span class="c4">&nbsp; - </span><span class="c4 c13">WaitingForActivation</span><span class="c1">:
            sarcina a&#537;teapt&#259; activarea &#537;i planificarea execu&#539;iei</span></p>
    <p class="c0"><span class="c1"></span></p>
    <p class="c8"><span class="c4">&nbsp; - </span><span class="c4 c13">WaitingForChildrenToComplete</span><span
            class="c1">: sarcina a fost finalizat&#259; &#537;i a&#537;teapt&#259; finalizarea sarcinilor copil
            ata&#537;ate</span></p>
    <p class="c0"><span class="c1"></span></p>
    <p class="c8"><span class="c4">&nbsp; - </span><span class="c4 c13">WaitingToRun</span><span class="c1">: sarcina
            este planificat&#259; pentru execu&#539;ie, dar nu a &icirc;nceput &icirc;nc&#259; execu&#539;ia</span></p>
    <p class="c0"><span class="c1"></span></p>
    <p class="c8"><span class="c4">- </span><span class="c11">IsCompleted</span><span class="c1">: returneaz&#259; true
            dac&#259; sarcina este finalizat&#259;</span></p>
    <p class="c0"><span class="c1"></span></p>
    <p class="c8"><span class="c4">- </span><span class="c11">IsCanceled</span><span class="c1">: returneaz&#259; true
            dac&#259; sarcina a fost anulat&#259;</span></p>
    <p class="c0"><span class="c1"></span></p>
    <p class="c8"><span class="c4">- </span><span class="c11">IsFaulted</span><span class="c1">: returneaz&#259; true
            dac&#259; sarcina s-a &icirc;ncheiat cu apari&#539;ia unei excep&#539;ii</span></p>
    <p class="c0"><span class="c1"></span></p>
    <p class="c8"><span class="c4">- </span><span class="c11">IsCompletedSuccessfully</span><span class="c1">:
            returneaz&#259; true dac&#259; sarcina s-a &icirc;ncheiat cu succes</span></p>
    <p class="c0"><span class="c1"></span></p>
    <p class="c8"><span class="c1">Folosim unele dintre aceste propriet&#259;&#539;i:</span></p>
    <p class="c0"><span class="c1"></span></p><a id="t.ecee43d6f23a31e4e9b5b2cdb987bb5744d15e5a"></a><a id="t.12"></a>
    <table class="c5">
        <tr class="c15">
            <td class="c6" colspan="1" rowspan="1">
                <p class="c9"><span class="c2">Task task1 = </span><span class="c7">new</span><span
                        class="c2">&nbsp;Task(() =&gt;<br>{<br> &nbsp; &nbsp;Console.WriteLine(</span><span
                        class="c10">$&quot;Task{Task.CurrentId} Starts&quot;</span><span class="c2">);<br> &nbsp;
                        &nbsp;Thread.Sleep(</span><span class="c14">1000</span><span class="c2">);<br> &nbsp;
                        &nbsp;Console.WriteLine(</span><span class="c10">$&quot;Task{Task.CurrentId}
                        Ends&quot;</span><span class="c2">);<br>});<br>task1.Start(); </span><span class="c12">//
                        lans&#259;m sarcina</span><span class="c2"><br><br></span><span class="c12">// ob&#539;inem
                        informa&#539;ii despre sarcin&#259;</span><span class="c2"><br>Console.WriteLine(</span><span
                        class="c10">$&quot;task1 Id: {task1.Id}&quot;</span><span
                        class="c2">);<br>Console.WriteLine(</span><span class="c10">$&quot;task1 is Completed:
                        {task1.IsCompleted}&quot;</span><span class="c2">);<br>Console.WriteLine(</span><span
                        class="c10">$&quot;task1 Status: {task1.Status}&quot;</span><span
                        class="c2">);<br><br>task1.Wait(); </span><span class="c12">// a&#537;tept&#259;m finalizarea
                        sarcinii</span></p>
            </td>
        </tr>
    </table>
    <p class="c0"><span class="c1"></span></p>
    <p class="c8"><span class="c1">Exemplu de ie&#537;ire pe consol&#259;:</span></p>
    <p class="c0"><span class="c1"></span></p><a id="t.b5ecac61bd023bb420eb220800ac295041ef350e"></a><a id="t.13"></a>
    <table class="c5">
        <tr class="c15">
            <td class="c6" colspan="1" rowspan="1">
                <p class="c9"><span class="c2">task1 Id: </span><span class="c14">1</span><span class="c2"><br>Task1
                        Starts<br>task1 </span><span class="c7">is</span><span class="c2">&nbsp;Completed:
                        False<br>task1 Status: Running<br>Task1 Ends</span></p>
            </td>
        </tr>
    </table>
    <p class="c0"><span class="c1"></span></p>
    <p class="c0"><span class="c1"></span></p>
</body>

</html>