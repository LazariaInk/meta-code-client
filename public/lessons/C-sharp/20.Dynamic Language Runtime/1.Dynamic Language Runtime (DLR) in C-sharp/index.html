<html>

<head>
    <meta content="text/html; charset=UTF-8" http-equiv="content-type">
    <link rel="stylesheet" type="text/css" href="/lessons/styles.css">
</head>

<body class="c17 doc-content">
    <h1 class="c10 c7 c16">Dynamic Language Runtime (DLR) în C#. Cuvântul cheie dynamic.</h1>
    <p class="c2"><span class="c7 c5"></span></p>
    <p class="c10"><span class="c5">De&#537;i C# este un limbaj de programare cu tipizare static&#259;, &icirc;n
            versiunile recente ale limbajului au fost ad&#259;ugate anumite capabilit&#259;&#539;i dinamice. Astfel,
            &icirc;ncep&acirc;nd cu .NET 4.0, a fost introdus&#259; o nou&#259; func&#539;ionalitate denumit&#259;
        </span><span class="c8">DLR </span><span class="c7 c5">(Dynamic Language Runtime). DLR reprezint&#259; un mediu
            de execu&#539;ie pentru limbajele dinamice, cum ar fi IronPython &#537;i IronRuby.</span></p>
    <p class="c2"><span class="c7 c5"></span></p>
    <p class="c10"><span class="c7 c5">Pentru a &icirc;n&#539;elege importan&#539;a acestei nout&#259;&#539;i, este
            esen&#539;ial s&#259; con&#537;tientiz&#259;m diferen&#539;a dintre limbajele cu tipizare static&#259;
            &#537;i dinamic&#259;. &Icirc;n limbajele cu tipizare static&#259;, identificarea tuturor tipurilor &#537;i
            membrilor acestora &ndash; propriet&#259;&#539;i &#537;i metode &ndash; are loc &icirc;n timpul
            compil&#259;rii. &Icirc;n schimb, &icirc;n limbajele dinamice, sistemul nu &#537;tie nimic despre
            propriet&#259;&#539;ile &#537;i metodele tipurilor p&acirc;n&#259; la execu&#539;ie.</span></p>
    <p class="c2"><span class="c7 c5"></span></p>
    <p class="c10"><span class="c7 c5">Datorit&#259; mediului DLR, C# poate crea obiecte dinamice, ale c&#259;ror membri
            sunt identifica&#539;i &icirc;n timpul execu&#539;iei programului, &#537;i le poate utiliza
            &icirc;mpreun&#259; cu obiectele tradi&#539;ionale cu tipizare static&#259;.</span></p>
    <p class="c2"><span class="c7 c5"></span></p>
    <p class="c10"><span class="c5">Un aspect cheie al utiliz&#259;rii DLR &icirc;n C# este aplicarea tipurilor
        </span><span class="c8">dynamic</span><span class="c7 c5">. Acest cuv&acirc;nt cheie permite omisiunea
            verific&#259;rii tipurilor &icirc;n timpul compil&#259;rii. &Icirc;n plus, obiectele declarate ca dynamic
            pot schimba tipul lor pe parcursul execu&#539;iei programului. De exemplu:</span></p>
    <p class="c2"><span class="c7 c5"></span></p><a id="t.48fe33cdacc551387250a912d42b245d951ed50c"></a><a id="t.0"></a>
    <table class="c11">
        <tr class="c6">
            <td class="c3" colspan="1" rowspan="1">
                <p class="c13"><span class="c1">dynamic</span><span class="c0">&nbsp;obj = </span><span
                        class="c9">3</span><span class="c0">; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span
                        class="c14">// aici obj este un int</span><span class="c0"><br>Console.WriteLine(obj); &nbsp;
                        &nbsp; </span><span class="c14">// 3</span><span class="c0"><br> <br>obj = </span><span
                        class="c12">&quot;Hello world&quot;</span><span class="c0">; &nbsp; &nbsp; &nbsp;
                        &nbsp;</span><span class="c14">// obj devine un string</span><span
                        class="c0"><br>Console.WriteLine(obj); &nbsp; &nbsp; </span><span class="c14">// Hello
                        world</span><span class="c0"><br> <br>obj = </span><span class="c1">new</span><span
                        class="c0">&nbsp;Person(</span><span class="c12">&quot;Tom&quot;</span><span class="c0">,
                    </span><span class="c9">37</span><span class="c0">); </span><span class="c14">// obj devine un
                        obiect Person</span><span class="c0"><br>Console.WriteLine(obj); &nbsp; &nbsp;
                        &nbsp;</span><span class="c14">// Person { Name = Tom, Age = 37 }</span><span class="c0"><br>
                        <br>record class </span><span class="c4">Person</span><span class="c0">(</span><span
                        class="c1">string</span><span class="c0">&nbsp;Name, </span><span class="c1">int</span><span
                        class="c0">&nbsp;Age);</span></p>
            </td>
        </tr>
    </table>
    <p class="c2"><span class="c7 c5"></span></p>
    <p class="c10"><span class="c5">Chiar dac&#259; variabila obj &icirc;&#537;i schimb&#259; tipul de mai multe ori,
            acest cod va func&#539;iona corect. Utilizarea tipurilor dynamic difer&#259; de utilizarea cuv&acirc;ntului
            cheie </span><span class="c8">var</span><span class="c7 c5">. Pentru o variabil&#259; declarat&#259; cu var,
            tipul este dedus &icirc;n timpul compil&#259;rii &#537;i nu se mai schimb&#259; pe parcursul
            execu&#539;iei.</span></p>
    <p class="c2"><span class="c7 c5"></span></p>
    <p class="c10"><span class="c7 c5">Exist&#259; asem&#259;n&#259;ri &icirc;ntre utilizarea dynamic &#537;i tipul
            object. Dac&#259; &icirc;n exemplul anterior am &icirc;nlocui dynamic cu object (object obj = 3;),
            rezultatul ar fi acela&#537;i. Totu&#537;i, exist&#259; diferen&#539;e. De exemplu:</span></p>
    <p class="c2"><span class="c7 c5"></span></p><a id="t.d2c49bf5e469456e14f1e9ba7cd486fd9bf04c3c"></a><a id="t.1"></a>
    <table class="c11">
        <tr class="c6">
            <td class="c3" colspan="1" rowspan="1">
                <p class="c13"><span class="c1">object</span><span class="c0">&nbsp;obj = </span><span
                        class="c9">24</span><span class="c0">;<br></span><span class="c1">dynamic</span><span
                        class="c0">&nbsp;dyn = </span><span class="c9">24</span><span class="c0">;<br>obj +=
                    </span><span class="c9">4</span><span class="c0">; </span><span class="c14">// aceasta nu este
                        permis&#259;</span><span class="c0"><br>dyn += </span><span class="c9">4</span><span
                        class="c0">; </span><span class="c14">// aceasta este permis&#259;</span></p>
            </td>
        </tr>
    </table>
    <p class="c2"><span class="c7 c5"></span></p>
    <p class="c10"><span class="c7 c5">&Icirc;n linia obj += 4;, apare o eroare, deoarece opera&#539;ia += nu poate fi
            aplicat&#259; la tipurile object &#537;i int. Cu o variabil&#259; declarat&#259; ca dynamic, acest lucru va
            func&#539;iona, deoarece tipul s&#259;u va fi cunoscut doar &icirc;n timpul execu&#539;iei.</span></p>
    <p class="c2"><span class="c7 c5"></span></p>
    <p class="c10"><span class="c7 c5">O alt&#259; caracteristic&#259; distinctiv&#259; a utiliz&#259;rii dynamic este
            c&#259; acest cuv&acirc;nt cheie poate fi aplicat nu doar variabilelor, ci &#537;i propriet&#259;&#539;ilor
            &#537;i metodelor. De exemplu:</span></p>
    <p class="c2"><span class="c7 c5"></span></p><a id="t.4e63c0a105b6761aaa79f82756d926d6f069d9c4"></a><a id="t.2"></a>
    <table class="c11">
        <tr class="c6">
            <td class="c3" colspan="1" rowspan="1">
                <p class="c13"><span class="c1">class</span><span class="c0">&nbsp;</span><span
                        class="c4">Person</span><span class="c0"><br>{<br> &nbsp; &nbsp;</span><span
                        class="c1">public</span><span class="c0">&nbsp;</span><span class="c1">string</span><span
                        class="c0">&nbsp;Name { </span><span class="c1">get</span><span class="c0">; }<br> &nbsp;
                        &nbsp;</span><span class="c1">public</span><span class="c0">&nbsp;</span><span
                        class="c1">dynamic</span><span class="c0">&nbsp;Age { </span><span class="c1">get</span><span
                        class="c0">; </span><span class="c1">set</span><span class="c0">; }<br> &nbsp;
                        &nbsp;</span><span class="c1">public</span><span class="c0">&nbsp;</span><span
                        class="c4">Person</span><span class="c0">(</span><span class="c1">string</span><span
                        class="c0">&nbsp;name, </span><span class="c1">dynamic</span><span class="c0">&nbsp;age)<br>
                        &nbsp; &nbsp;{<br> &nbsp; &nbsp; &nbsp; &nbsp;Name = name; Age = age;<br> &nbsp; &nbsp;}<br>
                        <br> &nbsp; &nbsp;</span><span class="c14">// afi&#537;&#259;m salariul &icirc;n func&#539;ie de
                        formatul specificat</span><span class="c0"><br> &nbsp; &nbsp;</span><span
                        class="c1">public</span><span class="c0">&nbsp;</span><span class="c1">dynamic</span><span
                        class="c0">&nbsp;</span><span class="c4">GetSalary</span><span class="c0">(</span><span
                        class="c1">dynamic</span><span class="c0">&nbsp;</span><span class="c1">value</span><span
                        class="c0">, </span><span class="c1">string</span><span class="c0">&nbsp;format)<br> &nbsp;
                        &nbsp;{<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c1">if</span><span
                        class="c0">&nbsp;(format == </span><span class="c12">&quot;string&quot;</span><span class="c0">)
                    </span><span class="c1">return</span><span class="c0">&nbsp;</span><span
                        class="c12">$&quot;{</span><span class="c1">value</span><span class="c12">}
                        euro&quot;</span><span class="c0">;<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span
                        class="c1">else</span><span class="c0">&nbsp;</span><span class="c1">if</span><span
                        class="c0">&nbsp;(format == </span><span class="c12">&quot;int&quot;</span><span class="c0">)
                    </span><span class="c1">return</span><span class="c0">&nbsp;</span><span
                        class="c1">value</span><span class="c0">;<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span
                        class="c1">else</span><span class="c0">&nbsp;</span><span class="c1">return</span><span
                        class="c0">&nbsp;</span><span class="c9">0.0</span><span class="c0">;<br> &nbsp; &nbsp;}<br>
                        <br> &nbsp; &nbsp;</span><span class="c1">public</span><span class="c0">&nbsp;</span><span
                        class="c1">override</span><span class="c0">&nbsp;</span><span class="c1">string</span><span
                        class="c0">&nbsp;</span><span class="c4">ToString</span><span class="c0">() =&gt; </span><span
                        class="c12">$&quot;Name: {Name} &nbsp;Age: {Age}&quot;</span><span class="c0">;<br>}</span></p>
            </td>
        </tr>
    </table>
    <p class="c2"><span class="c7 c5"></span></p>
    <p class="c10"><span class="c5">&Icirc;n clasa Person este definit&#259; o proprietate dinamic&#259; Age, astfel
            &icirc;nc&acirc;t la atribuirea unei valori acestei propriet&#259;&#539;i putem scrie fie </span><span
            class="c5 c15">person.Age=22</span><span class="c5">, fie </span><span
            class="c5 c15">person.Age=&quot;twenty-two&quot;</span><span class="c7 c5">. Ambele variante sunt valabile.
            De asemenea, prin parametrul age din constructor, putem atribui orice valoare acestei
            propriet&#259;&#539;i.</span></p>
    <p class="c2"><span class="c7 c5"></span></p>
    <p class="c10"><span class="c5">Exist&#259;, de asemenea, o metod&#259; </span><span
            class="c5 c15">GetSalary</span><span class="c7 c5">, care returneaz&#259; o valoare dynamic. De exemplu,
            &icirc;n func&#539;ie de parametru, putem returna fie o reprezentare text a sumei veniturilor, fie o valoare
            numeric&#259;. De asemenea, metoda accept&#259; un parametru dynamic. Astfel, putem transmite ca valoare a
            venitului fie un num&#259;r &icirc;ntreg, fie unul zecimal sau chiar un &#537;ir de caractere. Iat&#259; un
            exemplu concret:</span></p>
    <p class="c2"><span class="c7 c5"></span></p><a id="t.6b174c3e6a68551c066c61e4b2ff33d74ec8c259"></a><a id="t.3"></a>
    <table class="c11">
        <tr class="c6">
            <td class="c3" colspan="1" rowspan="1">
                <p class="c13"><span class="c1">dynamic</span><span class="c0">&nbsp;tom = </span><span
                        class="c1">new</span><span class="c0">&nbsp;Person(</span><span
                        class="c12">&quot;Tom&quot;</span><span class="c0">, </span><span class="c9">22</span><span
                        class="c0">);<br>Console.WriteLine(tom);<br>Console.WriteLine(tom.GetSalary(</span><span
                        class="c9">28</span><span class="c0">, </span><span class="c12">&quot;int&quot;</span><span
                        class="c0">));<br> <br></span><span class="c1">dynamic</span><span class="c0">&nbsp;bob =
                    </span><span class="c1">new</span><span class="c0">&nbsp;Person(</span><span
                        class="c12">&quot;Bob&quot;</span><span class="c0">, </span><span
                        class="c12">&quot;twenty-two&quot;</span><span
                        class="c0">);<br>Console.WriteLine(bob);<br>Console.WriteLine(bob.GetSalary(</span><span
                        class="c12">&quot;twenty-eight&quot;</span><span class="c0">, </span><span
                        class="c12">&quot;string&quot;</span><span class="c0">));</span></p>
            </td>
        </tr>
    </table>
    <p class="c2"><span class="c7 c5"></span></p>
    <p class="c10"><span class="c7 c5">Ie&#537;irea &icirc;n consol&#259;:</span></p>
    <p class="c2"><span class="c7 c5"></span></p><a id="t.c4bdb92e6480f821990deacf46f7f84316c8d51e"></a><a id="t.4"></a>
    <table class="c11">
        <tr class="c6">
            <td class="c3" colspan="1" rowspan="1">
                <p class="c13"><span class="c0">Name: Tom &nbsp;Age: </span><span class="c9">22</span><span
                        class="c0"><br></span><span class="c9">28</span><span class="c0"><br>Name: Bob &nbsp;Age:
                        twenty-two<br>twenty-eight euro</span></p>
            </td>
        </tr>
    </table>
    <p class="c2"><span class="c7 c5"></span></p>
    <p class="c10"><span class="c5 c7">Acest exemplu arat&#259; cum tipul dynamic permite flexibilitatea tipurilor de
            date &icirc;n timpul execu&#539;iei, f&#259;c&acirc;ndu-l util &icirc;n scenarii unde tipizarea strict&#259;
            ar limita func&#539;ionalitatea.</span></p>
</body>

</html>