<html><head><meta content="text/html; charset=UTF-8" http-equiv="content-type"><style type="text/css">@import url(https://themes.googleusercontent.com/fonts/css?kit=chteh0fSOiSrmusp8u43YLibRAUGyvCIyNwOfYj8c_aH4gUIUjZTH34PuvJkbTJT);ol{margin:0;padding:0}table td,table th{padding:0}.c8{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:0pt;border-right-width:0pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:0pt;border-top-style:solid;background-color:#333333;border-left-style:solid;border-bottom-width:0pt;width:468pt;border-top-color:#000000;border-bottom-style:solid}.c6{padding-top:0pt;padding-bottom:0pt;line-height:1.5;orphans:2;widows:2;text-align:left}.c13{background-color:#333333;font-size:12pt;font-family:"Consolas";color:#d36363;font-weight:400}.c12{background-color:#333333;font-size:12pt;font-family:"Consolas";color:#888888;font-weight:400}.c10{background-color:#333333;font-size:12pt;font-family:"Consolas";color:#fcc28c;font-weight:400}.c4{background-color:#333333;font-size:12pt;font-family:"Consolas";color:#a2fca2;font-weight:400}.c16{background-color:#333333;font-size:12pt;font-family:"Consolas";color:#ffffaa;font-weight:400}.c2{background-color:#333333;font-size:12pt;font-family:"Consolas";color:#ffffff;font-weight:400}.c7{border-spacing:0;border-collapse:collapse;margin-right:auto}.c3{padding-top:0pt;padding-bottom:0pt;line-height:1.15;text-align:left}.c1{color:#000000;text-decoration:none;vertical-align:baseline;font-style:normal}.c17{font-weight:700;font-size:15pt;font-family:"Open Sans"}.c15{font-size:12pt;font-family:"Open Sans";font-weight:700}.c18{background-color:#ffffff;max-width:468pt;padding:72pt 72pt 72pt 72pt}.c0{font-size:12pt;font-family:"Open Sans";font-weight:400}.c14{font-weight:700;font-size:27pt;font-family:"Open Sans"}.c11{font-style:italic}.c5{height:0pt}.c9{height:11pt}.title{padding-top:0pt;color:#000000;font-size:26pt;padding-bottom:3pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}.subtitle{padding-top:0pt;color:#666666;font-size:15pt;padding-bottom:16pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}li{color:#000000;font-size:11pt;font-family:"Arial"}p{margin:0;color:#000000;font-size:11pt;font-family:"Arial"}h1{padding-top:20pt;color:#000000;font-size:20pt;padding-bottom:6pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h2{padding-top:18pt;color:#000000;font-size:16pt;padding-bottom:6pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h3{padding-top:16pt;color:#434343;font-size:14pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h4{padding-top:14pt;color:#666666;font-size:12pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h5{padding-top:12pt;color:#666666;font-size:11pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h6{padding-top:12pt;color:#666666;font-size:11pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;font-style:italic;orphans:2;widows:2;text-align:left}</style></head><body class="c18 doc-content"><p class="c6"><span class="c1 c14">DynamicObject &#537;i ExpandoObject.</span></p><p class="c6 c9"><span class="c1 c0"></span></p><p class="c6"><span class="c0">C# &#537;i .NET ofer&#259; interesante posibilit&#259;&#539;i de dezvoltare folosind DLR (Dynamic Language Runtime), printre care se num&#259;r&#259; &#537;i utilizarea spa&#539;iului de nume </span><span class="c15">System.Dynamic</span><span class="c0">, &icirc;n special clasa </span><span class="c15">ExpandoObject</span><span class="c1 c0">. Aceasta permite crearea de obiecte dinamice, similare celor utilizate &icirc;n JavaScript:</span></p><p class="c6 c9"><span class="c1 c0"></span></p><a id="t.d105ef13df8659343e0497d62d336278fb15cd5a"></a><a id="t.0"></a><table class="c7"><tr class="c5"><td class="c8" colspan="1" rowspan="1"><p class="c3"><span class="c12">// definim un obiect care va stoca diverse valori</span><span class="c2"><br></span><span class="c10">dynamic</span><span class="c2">&nbsp;person = </span><span class="c10">new</span><span class="c2">&nbsp;System.Dynamic.ExpandoObject();<br>person.Name = </span><span class="c4">&quot;Tom&quot;</span><span class="c2">;<br>person.Age = </span><span class="c13">46</span><span class="c2">;<br>person.Languages = </span><span class="c10">new</span><span class="c2">&nbsp;List&lt;</span><span class="c10">string</span><span class="c2">&gt; { </span><span class="c4">&quot;english&quot;</span><span class="c2">, </span><span class="c4">&quot;german&quot;</span><span class="c2">, </span><span class="c4">&quot;french&quot;</span><span class="c2">&nbsp;};<br> <br>Console.WriteLine(</span><span class="c4">$&quot;{person.Name} - {person.Age}&quot;</span><span class="c2">);<br></span><span class="c10">foreach</span><span class="c2">&nbsp;(</span><span class="c10">var</span><span class="c2">&nbsp;lang </span><span class="c10">in</span><span class="c2">&nbsp;person.Languages)<br> &nbsp; &nbsp;Console.WriteLine(lang);<br> <br></span><span class="c12">// declar&#259;m o metod&#259;</span><span class="c2"><br>person.IncrementAge = (Action&lt;</span><span class="c10">int</span><span class="c2">&gt;)(x =&gt; person.Age += x);<br>person.IncrementAge(</span><span class="c13">6</span><span class="c2">); </span><span class="c12">// cre&#537;tem v&acirc;rsta cu 6 ani</span><span class="c2"><br>Console.WriteLine(</span><span class="c4">$&quot;{person.Name} - {person.Age}&quot;</span><span class="c2">);</span></p></td></tr></table><p class="c6 c9"><span class="c1 c0"></span></p><p class="c6"><span class="c1 c0">Ie&#537;irea &icirc;n consol&#259;:</span></p><p class="c6 c9"><span class="c1 c0"></span></p><a id="t.f912015baab758148f672b1d2979aef7ee4fda69"></a><a id="t.1"></a><table class="c7"><tr class="c5"><td class="c8" colspan="1" rowspan="1"><p class="c3"><span class="c2">Tom - </span><span class="c13">46</span><span class="c2"><br>english<br>german<br>french<br>Tom - </span><span class="c13">52</span></p></td></tr></table><p class="c6 c9"><span class="c1 c0"></span></p><p class="c6"><span class="c1 c0">Cu ExpandoObject, putem declara orice propriet&#259;&#539;i, cum ar fi Name, Age, Languages, care pot reprezenta diverse tipuri de obiecte. &Icirc;n plus, putem defini metode folosind delega&#539;i. Aceste metode pot fi invocate la fel de simplu cum sunt invocate metodele definite &icirc;ntr-o clas&#259; tradi&#539;ional&#259;.</span></p><p class="c6 c9"><span class="c1 c0"></span></p><p class="c6"><span class="c1 c17">DynamicObject.</span></p><p class="c6 c9"><span class="c1 c0"></span></p><p class="c6"><span class="c0">Pe l&acirc;ng&#259; ExpandoObject, o alt&#259; clas&#259; important&#259; este </span><span class="c15">DynamicObject</span><span class="c1 c0">, care permite crearea de obiecte dinamice, dar ofer&#259; mai mult control &#537;i flexibilitate dec&acirc;t ExpandoObject, fiind potrivit pentru situa&#539;ii mai complexe.</span></p><p class="c6 c9"><span class="c1 c0"></span></p><p class="c6"><span class="c0">Pentru a folosi </span><span class="c15">DynamicObject</span><span class="c1 c0">, trebuie s&#259; cre&#259;m o clas&#259; care s&#259; mo&#537;teneasc&#259; DynamicObject &#537;i s&#259; suprascrie metodele sale, cum ar fi:</span></p><p class="c6 c9"><span class="c1 c0"></span></p><p class="c6"><span class="c0">- </span><span class="c0 c11">TryBinaryOperation()</span><span class="c1 c0">: efectueaz&#259; o opera&#539;ie binar&#259; &icirc;ntre dou&#259; obiecte.</span></p><p class="c6 c9"><span class="c1 c0"></span></p><p class="c6"><span class="c0">- </span><span class="c0 c11">TryConvert()</span><span class="c1 c0">: efectueaz&#259; o conversie la un anumit tip.</span></p><p class="c6 c9"><span class="c1 c0"></span></p><p class="c6"><span class="c0">- </span><span class="c0 c11">TryCreateInstance()</span><span class="c1 c0">: creeaz&#259; o instan&#539;&#259; a obiectului.</span></p><p class="c6 c9"><span class="c1 c0"></span></p><p class="c6"><span class="c0">- </span><span class="c0 c11">TryDeleteIndex(</span><span class="c0">):</span><span class="c1 c0">&nbsp;&#537;terge un indexator.</span></p><p class="c6 c9"><span class="c1 c0"></span></p><p class="c6"><span class="c0">- </span><span class="c0 c11">TryDeleteMember()</span><span class="c1 c0">: &#537;terge o proprietate sau metod&#259;.</span></p><p class="c6 c9"><span class="c1 c0"></span></p><p class="c6"><span class="c0">-</span><span class="c0 c11">&nbsp;TryGetIndex()</span><span class="c1 c0">: ob&#539;ine un element prin indexator.</span></p><p class="c6 c9"><span class="c1 c0"></span></p><p class="c6"><span class="c0">- </span><span class="c0 c11">TryGetMember()</span><span class="c1 c0">: ob&#539;ine valoarea unei propriet&#259;&#539;i.</span></p><p class="c6 c9"><span class="c1 c0"></span></p><p class="c6"><span class="c0">- </span><span class="c0 c11">TryInvoke()</span><span class="c1 c0">: invoc&#259; un obiect ca delegat.</span></p><p class="c6 c9"><span class="c1 c0"></span></p><p class="c6"><span class="c0">- </span><span class="c0 c11">TryInvokeMember()</span><span class="c1 c0">: invoc&#259; o metod&#259;.</span></p><p class="c6 c9"><span class="c1 c0"></span></p><p class="c6"><span class="c0">- </span><span class="c0 c11">TrySetIndex()</span><span class="c1 c0">: seteaz&#259; un element prin indexator.</span></p><p class="c6 c9"><span class="c1 c0"></span></p><p class="c6"><span class="c0">- </span><span class="c0 c11">TrySetMember()</span><span class="c1 c0">: seteaz&#259; o proprietate.</span></p><p class="c6 c9"><span class="c1 c0"></span></p><p class="c6"><span class="c0">-</span><span class="c0 c11">&nbsp;TryUnaryOperation()</span><span class="c1 c0">: efectueaz&#259; o opera&#539;ie unar&#259;.</span></p><p class="c6 c9"><span class="c1 c0"></span></p><p class="c6"><span class="c1 c0">Fiecare dintre aceste metode are acela&#537;i model de definire: toate returneaz&#259; o valoare logic&#259;, indic&acirc;nd dac&#259; opera&#539;ia a reu&#537;it. Ca prim parametru, toate accept&#259; un obiect binder. Dac&#259; metoda reprezint&#259; un apel al unui indexator sau al unei metode a unui obiect care poate primi parametri, ca al doilea parametru se folose&#537;te un array object[] &ndash; acesta stocheaz&#259; argumentele transmise metodei sau indexatorului.</span></p><p class="c6 c9"><span class="c1 c0"></span></p><p class="c6"><span class="c1 c0">Aproape toate opera&#539;iile, cu excep&#539;ia set&#259;rii &#537;i elimin&#259;rii propriet&#259;&#539;ilor &#537;i indexatorilor, returneaz&#259; o valoare specific&#259; (de exemplu, dac&#259; ob&#539;inem valoarea unei propriet&#259;&#539;i). &Icirc;n acest caz, se folose&#537;te al treilea parametru out object value, care este destinat stoc&#259;rii obiectului returnat.</span></p><p class="c6 c9"><span class="c1 c0"></span></p><p class="c6"><span class="c0">De exemplu, defini&#539;ia metodei </span><span class="c0 c11">TryInvokeMember()</span><span class="c1 c0">:</span></p><p class="c6 c9"><span class="c1 c0"></span></p><a id="t.a2e2194207781a5bb354feb04a93a3c0f697877d"></a><a id="t.2"></a><table class="c7"><tr class="c5"><td class="c8" colspan="1" rowspan="1"><p class="c3"><span class="c10">public</span><span class="c2">&nbsp;</span><span class="c10">virtual</span><span class="c2">&nbsp;</span><span class="c10">bool</span><span class="c2">&nbsp;</span><span class="c16">TryInvokeMember</span><span class="c2">&nbsp;(InvokeMemberBinder binder, </span><span class="c10">object</span><span class="c2">?[]? args, </span><span class="c10">out</span><span class="c2">&nbsp;</span><span class="c10">object</span><span class="c2">? result)</span></p></td></tr></table><p class="c6 c9"><span class="c1 c0"></span></p><p class="c6"><span class="c1 c0">Parametrul InvokeMemberBinder binder este un binder &ndash; ob&#539;ine propriet&#259;&#539;ile &#537;i metodele obiectului, object?[]? args stocheaz&#259; argumentele transmise, out object? result este destinat stoc&#259;rii rezultatului final.</span></p><p class="c6 c9"><span class="c1 c0"></span></p><p class="c6"><span class="c1 c0">S&#259; analiz&#259;m un exemplu. S&#259; cre&#259;m o clas&#259; pentru un obiect dinamic:</span></p><p class="c6 c9"><span class="c1 c0"></span></p><a id="t.74526e20ff10b5b4b94d55828815293cb0173456"></a><a id="t.3"></a><table class="c7"><tr class="c5"><td class="c8" colspan="1" rowspan="1"><p class="c3"><span class="c10">using</span><span class="c2">&nbsp;System.Dynamic;<br><br></span><span class="c10">class</span><span class="c2">&nbsp;</span><span class="c16">PersonObject</span><span class="c2">&nbsp;: </span><span class="c16">DynamicObject</span><span class="c2"><br>{<br> &nbsp; &nbsp;</span><span class="c12">// dic&#539;ionar pentru stocarea tuturor propriet&#259;&#539;ilor</span><span class="c2"><br> &nbsp; &nbsp;Dictionary&lt;</span><span class="c10">string</span><span class="c2">, </span><span class="c10">object</span><span class="c2">&gt; members = </span><span class="c10">new</span><span class="c2">&nbsp;Dictionary&lt;</span><span class="c10">string</span><span class="c2">, </span><span class="c10">object</span><span class="c2">&gt;();<br><br> &nbsp; &nbsp;</span><span class="c12">// setarea unei propriet&#259;&#539;i</span><span class="c2"><br> &nbsp; &nbsp;</span><span class="c10">public</span><span class="c2">&nbsp;</span><span class="c10">override</span><span class="c2">&nbsp;</span><span class="c10">bool</span><span class="c2">&nbsp;</span><span class="c16">TrySetMember</span><span class="c2">(SetMemberBinder binder, </span><span class="c10">object</span><span class="c2">? </span><span class="c10">value</span><span class="c2">)<br> &nbsp; &nbsp;{<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10">if</span><span class="c2">(</span><span class="c10">value</span><span class="c2">&nbsp;</span><span class="c10">is</span><span class="c2">&nbsp;not </span><span class="c10">null</span><span class="c2">)<br> &nbsp; &nbsp; &nbsp; &nbsp;{<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;members[binder.Name] = </span><span class="c10">value</span><span class="c2">;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10">return</span><span class="c2">&nbsp;</span><span class="c10">true</span><span class="c2">;<br> &nbsp; &nbsp; &nbsp; &nbsp;}<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10">return</span><span class="c2">&nbsp;</span><span class="c10">false</span><span class="c2">;<br> &nbsp; &nbsp;}<br><br> &nbsp; &nbsp;</span><span class="c12">// ob&#539;inerea unei propriet&#259;&#539;i</span><span class="c2"><br> &nbsp; &nbsp;</span><span class="c10">public</span><span class="c2">&nbsp;</span><span class="c10">override</span><span class="c2">&nbsp;</span><span class="c10">bool</span><span class="c2">&nbsp;</span><span class="c16">TryGetMember</span><span class="c2">(GetMemberBinder binder, </span><span class="c10">out</span><span class="c2">&nbsp;</span><span class="c10">object</span><span class="c2">? result)<br> &nbsp; &nbsp;{<br> &nbsp; &nbsp; &nbsp; &nbsp;result = </span><span class="c10">null</span><span class="c2">;<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10">if</span><span class="c2">&nbsp;(members.ContainsKey(binder.Name))<br> &nbsp; &nbsp; &nbsp; &nbsp;{<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;result = members[binder.Name];<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10">return</span><span class="c2">&nbsp;</span><span class="c10">true</span><span class="c2">;<br> &nbsp; &nbsp; &nbsp; &nbsp;}<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10">return</span><span class="c2">&nbsp;</span><span class="c10">false</span><span class="c2">;<br> &nbsp; &nbsp;}<br><br> &nbsp; &nbsp;</span><span class="c12">// apelarea unei metode</span><span class="c2"><br> &nbsp; &nbsp;</span><span class="c10">public</span><span class="c2">&nbsp;</span><span class="c10">override</span><span class="c2">&nbsp;</span><span class="c10">bool</span><span class="c2">&nbsp;</span><span class="c16">TryInvokeMember</span><span class="c2">(InvokeMemberBinder binder, </span><span class="c10">object</span><span class="c2">?[]? args, </span><span class="c10">out</span><span class="c2">&nbsp;</span><span class="c10">object</span><span class="c2">? result)<br> &nbsp; &nbsp;{<br> &nbsp; &nbsp; &nbsp; &nbsp;result = </span><span class="c10">null</span><span class="c2">;<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10">if</span><span class="c2">(args?[</span><span class="c13">0</span><span class="c2">] </span><span class="c10">is</span><span class="c2">&nbsp;</span><span class="c10">int</span><span class="c2">&nbsp;number)<br> &nbsp; &nbsp; &nbsp; &nbsp;{<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c12">// ob&#539;inem metoda dup&#259; nume</span><span class="c2"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10">dynamic</span><span class="c2">&nbsp;method = members[binder.Name];<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c12">// apel&#259;m metoda, transmi&#539;&acirc;ndu-i valoarea args?[0]</span><span class="c2"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;result = method(number);<br> &nbsp; &nbsp; &nbsp; &nbsp;}<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c12">// dac&#259; result nu este null, apelul metodei a fost reu&#537;it</span><span class="c2"><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10">return</span><span class="c2">&nbsp;result != </span><span class="c10">null</span><span class="c2">;<br> &nbsp; &nbsp;}<br>}</span></p></td></tr></table><p class="c6 c9"><span class="c1 c0"></span></p><p class="c6"><span class="c1 c0">Clasa mo&#537;tene&#537;te din DynamicObject, deoarece nu putem crea direct obiecte de tip DynamicObject. De asemenea, aici sunt suprascrise trei metode mo&#537;tenite.</span></p><p class="c6 c9"><span class="c0 c1"></span></p><p class="c6"><span class="c0">Pentru stocarea tuturor membrilor clasei, at&acirc;t propriet&#259;&#539;i, c&acirc;t &#537;i metode, este definit un dic&#539;ionar</span><span class="c0 c11">&nbsp;Dictionary&lt;string, object&gt; members</span><span class="c1 c0">. Cheile sunt numele propriet&#259;&#539;ilor &#537;i metodelor, iar valorile &ndash; valorile acestor propriet&#259;&#539;i.</span></p><p class="c6 c9"><span class="c1 c0"></span></p><p class="c6"><span class="c0">&Icirc;n metoda </span><span class="c0 c11">TrySetMember()</span><span class="c1 c0">&nbsp;are loc setarea unei propriet&#259;&#539;i:</span></p><p class="c6 c9"><span class="c1 c0"></span></p><a id="t.52f8839adb126eaf19bcbf6da9333ddcec0299bc"></a><a id="t.4"></a><table class="c7"><tr class="c5"><td class="c8" colspan="1" rowspan="1"><p class="c3"><span class="c10">bool</span><span class="c2">&nbsp;</span><span class="c16">TrySetMember</span><span class="c2">(SetMemberBinder binder, </span><span class="c10">object</span><span class="c2">? </span><span class="c10">value</span><span class="c2">)</span></p></td></tr></table><p class="c6 c9"><span class="c1 c0"></span></p><p class="c6"><span class="c1 c0">Parametrul binder stocheaz&#259; numele propriet&#259;&#539;ii care se seteaz&#259; (binder.Name), iar value &ndash; valoarea care trebuie setat&#259;.</span></p><p class="c6 c9"><span class="c1 c0"></span></p><p class="c6"><span class="c0">Pentru ob&#539;inerea valorii unei propriet&#259;&#539;i, este suprascris&#259; metoda </span><span class="c0 c11">TryGetMember</span><span class="c1 c0">:</span></p><p class="c6 c9"><span class="c1 c0"></span></p><a id="t.1018203bf2dbbee9e90d071c3eaa5bdf54eb2b6c"></a><a id="t.5"></a><table class="c7"><tr class="c5"><td class="c8" colspan="1" rowspan="1"><p class="c3"><span class="c10">bool</span><span class="c2">&nbsp;</span><span class="c16">TryGetMember</span><span class="c2">(GetMemberBinder binder, </span><span class="c10">out</span><span class="c2">&nbsp;</span><span class="c10">object</span><span class="c2">? result)</span></p></td></tr></table><p class="c6 c9"><span class="c1 c0"></span></p><p class="c6"><span class="c1 c0">Din nou, binder con&#539;ine numele propriet&#259;&#539;ii, iar parametrul result va con&#539;ine valoarea propriet&#259;&#539;ii ob&#539;inute.</span></p><p class="c6 c9"><span class="c1 c0"></span></p><p class="c6"><span class="c0">Pentru apelul metodelor, este definit&#259; metoda </span><span class="c0 c11">TryInvokeMember</span><span class="c1 c0">:</span></p><p class="c6 c9"><span class="c1 c0"></span></p><a id="t.bd36e577e2a6f9010947d9efa2a230c575e9488a"></a><a id="t.6"></a><table class="c7"><tr class="c5"><td class="c8" colspan="1" rowspan="1"><p class="c3"><span class="c10">public</span><span class="c2">&nbsp;</span><span class="c10">override</span><span class="c2">&nbsp;</span><span class="c10">bool</span><span class="c2">&nbsp;</span><span class="c16">TryInvokeMember</span><span class="c2">(InvokeMemberBinder binder, </span><span class="c10">object</span><span class="c2">?[]? args, </span><span class="c10">out</span><span class="c2">&nbsp;</span><span class="c10">object</span><span class="c2">? result)<br>{<br> &nbsp; &nbsp;result = </span><span class="c10">null</span><span class="c2">;<br> &nbsp; &nbsp;</span><span class="c10">if</span><span class="c2">(args?[</span><span class="c13">0</span><span class="c2">] </span><span class="c10">is</span><span class="c2">&nbsp;</span><span class="c10">int</span><span class="c2">&nbsp;number)<br> &nbsp; &nbsp;{<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c12">// ob&#539;inem metoda dup&#259; nume</span><span class="c2"><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10">dynamic</span><span class="c2">&nbsp;method = members[binder.Name];<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c12">// apel&#259;m metoda, transmi&#539;&acirc;ndu-i valoarea args?[0]</span><span class="c2"><br> &nbsp; &nbsp; &nbsp; &nbsp;result = method(number);<br> &nbsp; &nbsp;}<br> &nbsp; &nbsp;</span><span class="c12">// dac&#259; result nu este null, apelul metodei a fost reu&#537;it</span><span class="c2"><br> &nbsp; &nbsp;</span><span class="c10">return</span><span class="c2">&nbsp;result != </span><span class="c10">null</span><span class="c2">;<br>}</span></p></td></tr></table><p class="c6 c9"><span class="c1 c0"></span></p><p class="c6"><span class="c1 c0">Mai &icirc;nt&acirc;i, ob&#539;inem metoda folosind binderul, apoi &icirc;i transmitem argumentul args[0], convertindu-l anterior la tipul int, &#537;i set&#259;m rezultatul metodei &icirc;n parametrul result. A&#537;adar, &icirc;n acest caz, se presupune c&#259; metoda va primi un parametru de tip int &#537;i va returna un rezultat. Dac&#259; metoda returneaz&#259; true, consider&#259;m c&#259; apelul metodei a fost reu&#537;it.</span></p><p class="c6 c9"><span class="c1 c0"></span></p><p class="c6"><span class="c1 c0">Acum s&#259; folosim clasa &icirc;n program:</span></p><p class="c6 c9"><span class="c1 c0"></span></p><a id="t.32d1fb470dbbb47ff602dca24768b9dafc348911"></a><a id="t.7"></a><table class="c7"><tr class="c5"><td class="c8" colspan="1" rowspan="1"><p class="c3"><span class="c10">using</span><span class="c2">&nbsp;System.Dynamic;<br><br></span><span class="c12">// cre&#259;m obiectul</span><span class="c2"><br></span><span class="c10">dynamic</span><span class="c2">&nbsp;person = </span><span class="c10">new</span><span class="c2">&nbsp;PersonObject();<br></span><span class="c12">// set&#259;m o serie de propriet&#259;&#539;i</span><span class="c2"><br>person.Name = </span><span class="c4">&quot;Tom&quot;</span><span class="c2">;<br>person.Age = </span><span class="c13">23</span><span class="c2">;<br></span><span class="c12">// definim o metod&#259; pentru a modifica proprietatea Age</span><span class="c2"><br>Func&lt;</span><span class="c10">int</span><span class="c2">, </span><span class="c10">int</span><span class="c2">&gt; increment = (</span><span class="c10">int</span><span class="c2">&nbsp;n) =&gt; { person.Age += n; </span><span class="c10">return</span><span class="c2">&nbsp;person.Age; };<br>person.IncrementAge = increment;<br><br>Console.WriteLine(</span><span class="c4">$&quot;{person.Name} - {person.Age}&quot;</span><span class="c2">); </span><span class="c12">// Tom - 23</span><span class="c2"><br>person.IncrementAge(</span><span class="c13">4</span><span class="c2">); </span><span class="c12">// aplic&#259;m metoda</span><span class="c2"><br>Console.WriteLine(</span><span class="c4">$&quot;{person.Name} - {person.Age}&quot;</span><span class="c2">); </span><span class="c12">// Tom - 27</span></p></td></tr></table><p class="c6 c9"><span class="c1 c0"></span></p><p class="c6"><span class="c0">Expresia person.Name = &quot;Tom&quot; va apela metoda </span><span class="c0 c11">TrySetMember</span><span class="c1 c0">, &icirc;n care al doilea parametru va fi &#537;irul de caractere &quot;Tom&quot;.</span></p><p class="c6 c9"><span class="c1 c0"></span></p><p class="c6"><span class="c0">Expresia</span><span class="c0 c11">&nbsp;return person.Age</span><span class="c0">; va apela metoda </span><span class="c0 c11">TryGetMember</span><span class="c1 c0">.</span></p><p class="c6 c9"><span class="c1 c0"></span></p><p class="c6"><span class="c0">De asemenea, obiectul person are definit&#259; metoda </span><span class="c0 c11">IncrementAge</span><span class="c0">, care reprezint&#259; ac&#539;iunile expresiei</span><span class="c0 c11">&nbsp;lambda (int n) =&gt; { person.Age += n; return person.Age; }</span><span class="c0">;. Aceast&#259; expresie prime&#537;te un num&#259;r n, m&#259;re&#537;te cu acest num&#259;r proprietatea Age &#537;i returneaz&#259; noua valoare a lui </span><span class="c0 c11">person.Age</span><span class="c0">. &#536;i, la apelul acestei metode, se va apela metoda </span><span class="c0 c11">TryInvokeMember</span><span class="c1 c0">. Astfel, va avea loc incrementarea valorii propriet&#259;&#539;ii person.Age.</span></p><p class="c6 c9"><span class="c1 c0"></span></p></body></html>