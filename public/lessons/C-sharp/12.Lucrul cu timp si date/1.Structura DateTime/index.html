<html><head><meta content="text/html; charset=UTF-8" http-equiv="content-type"><link rel="stylesheet" type="text/css" href="/lessons/styles.css"></head><body class="c18 doc-content"><p class="c6"><span class="c19">Structura DateTime.</span></p><p class="c4"><span class="c3"></span></p><p class="c6"><span class="c7">Pentru lucrul cu date &#537;i timp &icirc;n .NET este destinat&#259; structura </span><span class="c16">DateTime</span><span class="c3">. Aceasta reprezint&#259; data &#537;i ora de la 00:00:00 1 ianuarie 0001 p&acirc;n&#259; la 23:59:59 31 decembrie 9999.</span></p><p class="c4"><span class="c3"></span></p><p class="c6"><span class="c3">Pentru crearea unui nou obiect DateTime se poate folosi &#537;i constructorul. Constructorul gol creeaz&#259; data ini&#539;ial&#259;:</span></p><p class="c4"><span class="c3"></span></p><a id="t.5408ea5fe4349c2a90b00415a4b42a3bac6b9b0c"></a><a id="t.0"></a><table class="c12"><tr class="c1"><td class="c13" colspan="1" rowspan="1"><p class="c2"><span class="c0">DateTime dateTime = </span><span class="c10">new</span><span class="c0">&nbsp;DateTime();<br>Console.WriteLine(dateTime); </span><span class="c11">// 01.01.0001 0:00:00</span></p></td></tr></table><p class="c4"><span class="c3"></span></p><p class="c6"><span class="c3">Adic&#259; vom ob&#539;ine valoarea minim&#259; posibil&#259;, care poate fi ob&#539;inut&#259; &#537;i astfel:</span></p><p class="c4"><span class="c3"></span></p><a id="t.f66422e576c99a6363c924d841af6539444cd821"></a><a id="t.1"></a><table class="c12"><tr class="c1"><td class="c13" colspan="1" rowspan="1"><p class="c2"><span class="c0">Console.WriteLine(DateTime.MinValue);</span></p></td></tr></table><p class="c4"><span class="c3"></span></p><p class="c6"><span class="c3">Pentru a seta o dat&#259; specific&#259;, trebuie folosit unul dintre constructorii care accept&#259; parametri:</span></p><p class="c4"><span class="c3"></span></p><a id="t.774e7d4761b385903028bb0984c193528cf7e258"></a><a id="t.2"></a><table class="c12"><tr class="c1"><td class="c13" colspan="1" rowspan="1"><p class="c2"><span class="c0">DateTime date1 = </span><span class="c10">new</span><span class="c0">&nbsp;DateTime(</span><span class="c8">2015</span><span class="c0">, </span><span class="c8">7</span><span class="c0">, </span><span class="c8">20</span><span class="c0">); </span><span class="c11">// an - lun&#259; - zi</span><span class="c0"><br>Console.WriteLine(date1); </span><span class="c11">// 20.07.2015 0:00:00</span></p></td></tr></table><p class="c4"><span class="c3"></span></p><p class="c6"><span class="c3">Setarea timpului:</span></p><p class="c4"><span class="c3"></span></p><a id="t.e70381abe283a7b121c293d1c10ec1a37f383827"></a><a id="t.3"></a><table class="c12"><tr class="c1"><td class="c13" colspan="1" rowspan="1"><p class="c2"><span class="c0">DateTime date1 = </span><span class="c10">new</span><span class="c0">&nbsp;DateTime(</span><span class="c8">2015</span><span class="c0">, </span><span class="c8">7</span><span class="c0">, </span><span class="c8">20</span><span class="c0">, </span><span class="c8">18</span><span class="c0">, </span><span class="c8">30</span><span class="c0">, </span><span class="c8">25</span><span class="c0">); </span><span class="c11">// an - lun&#259; - zi - or&#259; - minut - secund&#259;</span><span class="c0"><br>Console.WriteLine(date1); </span><span class="c11">// 20.07.2015 18:30:25</span></p></td></tr></table><p class="c4"><span class="c3"></span></p><p class="c6"><span class="c3">Dac&#259; este necesar s&#259; ob&#539;inem timpul &#537;i data curent&#259;, se pot folosi mai multe propriet&#259;&#539;i ale DateTime:</span></p><p class="c4"><span class="c3"></span></p><a id="t.cee294e507a0d22d7e509243fbb8e5745db55ab9"></a><a id="t.4"></a><table class="c12"><tr class="c1"><td class="c13" colspan="1" rowspan="1"><p class="c2"><span class="c0">Console.WriteLine(DateTime.Now);<br>Console.WriteLine(DateTime.UtcNow);<br>Console.WriteLine(DateTime.Today);</span></p></td></tr></table><p class="c4"><span class="c3"></span></p><p class="c6"><span class="c3">Ie&#537;ire &icirc;n consol&#259;:</span></p><p class="c4"><span class="c3"></span></p><a id="t.d3af8d788c1e6d3f4fff32e96297e43c0eb43020"></a><a id="t.5"></a><table class="c12"><tr class="c1"><td class="c13" colspan="1" rowspan="1"><p class="c2"><span class="c8">20.07.2015</span><span class="c0">&nbsp;</span><span class="c8">11</span><span class="c0">:</span><span class="c8">43</span><span class="c0">:</span><span class="c8">33</span><span class="c0"><br></span><span class="c8">20.07.2015</span><span class="c0">&nbsp;</span><span class="c8">8</span><span class="c0">:</span><span class="c8">43</span><span class="c0">:</span><span class="c8">33</span><span class="c0"><br></span><span class="c8">20.07.2015</span><span class="c0">&nbsp;</span><span class="c8">0</span><span class="c0">:</span><span class="c8">00</span><span class="c0">:</span><span class="c8">00</span></p></td></tr></table><p class="c4"><span class="c3"></span></p><p class="c6"><span class="c7">Proprietatea </span><span class="c7 c9">DateTime.Now</span><span class="c7">&nbsp;ia data &#537;i ora curent&#259; a calculatorului, </span><span class="c7 c9">DateTime.UtcNow </span><span class="c7">- data &#537;i ora relativ&#259; la timpul Greenwich (GMT) &#537;i </span><span class="c7 c9">DateTime.Today</span><span class="c3">&nbsp;- doar data curent&#259;.</span></p><p class="c4"><span class="c3"></span></p><p class="c6"><span class="c3">La lucrul cu datele trebuie s&#259; se &#539;in&#259; cont c&#259;, &icirc;n mod implicit, pentru reprezentarea datelor se folose&#537;te calendarul gregorian. Dar ce se &icirc;nt&acirc;mpl&#259; dac&#259; dorim s&#259; ob&#539;inem ziua s&#259;pt&#259;m&acirc;nii pentru 5 octombrie 1582:</span></p><p class="c4"><span class="c3"></span></p><a id="t.f896692191c5e4ff2e3a21cfaf08990ae2f9f683"></a><a id="t.6"></a><table class="c12"><tr class="c1"><td class="c13" colspan="1" rowspan="1"><p class="c2"><span class="c0">DateTime someDate = </span><span class="c10">new</span><span class="c0">&nbsp;DateTime(</span><span class="c8">1582</span><span class="c0">, </span><span class="c8">10</span><span class="c0">, </span><span class="c8">5</span><span class="c0">);<br>Console.WriteLine(someDate.DayOfWeek);</span></p></td></tr></table><p class="c4"><span class="c3"></span></p><p class="c6"><span class="c3">Consola va afi&#537;a valoarea Tuesday, adic&#259; mar&#539;i. Cu toate acestea, dup&#259; cum se &#537;tie din istorie, prima trecere de la calendarul iulian la calendarul gregorian a avut loc &icirc;n octombrie 1582. Atunci, dup&#259; data de 4 octombrie (joi) (&icirc;nc&#259; dup&#259; calendarul iulian) s-a trecut direct la 15 octombrie (vineri)(deja dup&#259; calendarul gregorian). Astfel, au fost eliminate efectiv 10 zile. Adic&#259;, dup&#259; 4 octombrie urma 15 octombrie.</span></p><p class="c4"><span class="c3"></span></p><p class="c6"><span class="c3">&Icirc;n majoritatea cazurilor acest fapt nu va afecta calculele, dar la lucrul cu date foarte vechi acest aspect trebuie avut &icirc;n vedere.</span></p><p class="c4"><span class="c3"></span></p><p class="c6"><span class="c17">Opera&#539;ii cu DateTime.</span></p><p class="c4"><span class="c3"></span></p><p class="c6"><span class="c3">Opera&#539;iile principale cu structura DateTime sunt legate de adunarea sau sc&#259;derea datelor. De exemplu, trebuie s&#259; ad&#259;ug&#259;m sau s&#259; sc&#259;dem c&acirc;teva zile de la o anumit&#259; dat&#259;.</span></p><p class="c4"><span class="c3"></span></p><p class="c6"><span class="c3">Pentru ad&#259;ugarea datelor se folosesc mai multe metode:</span></p><p class="c4"><span class="c3"></span></p><ul class="c5 lst-kix_d6e9szr3zd8a-0 start"><li class="c6 c14 li-bullet-0"><span class="c7 c9">Add(TimeSpan value)</span><span class="c3">: adaug&#259; la dat&#259; valoarea TimeSpan</span></li></ul><p class="c4 c15"><span class="c3"></span></p><ul class="c5 lst-kix_d6e9szr3zd8a-0"><li class="c6 c14 li-bullet-0"><span class="c7 c9">AddDays(double value)</span><span class="c3">: adaug&#259; c&acirc;teva zile la data curent&#259;</span></li></ul><p class="c4 c15"><span class="c3"></span></p><ul class="c5 lst-kix_d6e9szr3zd8a-0"><li class="c6 c14 li-bullet-0"><span class="c7 c9">AddHours(double value)</span><span class="c3">: adaug&#259; c&acirc;teva ore la data curent&#259;</span></li></ul><p class="c4 c15"><span class="c3"></span></p><ul class="c5 lst-kix_d6e9szr3zd8a-0"><li class="c6 c14 li-bullet-0"><span class="c7 c9">AddMinutes(double value)</span><span class="c3">: adaug&#259; c&acirc;teva minute la data curent&#259;</span></li></ul><p class="c4 c15"><span class="c3"></span></p><ul class="c5 lst-kix_d6e9szr3zd8a-0"><li class="c6 c14 li-bullet-0"><span class="c7 c9">AddMonths(int value)</span><span class="c3">: adaug&#259; c&acirc;teva luni la data curent&#259;</span></li></ul><p class="c4 c15"><span class="c3"></span></p><ul class="c5 lst-kix_d6e9szr3zd8a-0"><li class="c6 c14 li-bullet-0"><span class="c7 c9">AddYears(int value)</span><span class="c3">: adaug&#259; c&acirc;&#539;iva ani la data curent&#259;</span></li></ul><p class="c4"><span class="c3"></span></p><p class="c6"><span class="c3">De exemplu, ad&#259;ug&#259;m la o anumit&#259; dat&#259; 3 ore:</span></p><p class="c4"><span class="c3"></span></p><a id="t.919abd3a9f3fb3490b8aefa0080d18dc6fac8fd5"></a><a id="t.7"></a><table class="c12"><tr class="c1"><td class="c13" colspan="1" rowspan="1"><p class="c2"><span class="c0">DateTime date1 = </span><span class="c10">new</span><span class="c0">&nbsp;DateTime(</span><span class="c8">2015</span><span class="c0">, </span><span class="c8">7</span><span class="c0">, </span><span class="c8">20</span><span class="c0">, </span><span class="c8">18</span><span class="c0">, </span><span class="c8">30</span><span class="c0">, </span><span class="c8">25</span><span class="c0">); </span><span class="c11">// 20.07.2015 18:30:25</span><span class="c0"><br>Console.WriteLine(date1.AddHours(</span><span class="c8">3</span><span class="c0">)); </span><span class="c11">// 20.07.2015 21:30:25</span></p></td></tr></table><p class="c4"><span class="c3"></span></p><p class="c6"><span class="c7">Pentru sc&#259;derea datelor se folose&#537;te metoda </span><span class="c16">Subtract(DateTime date)</span><span class="c3">:</span></p><p class="c4"><span class="c3"></span></p><a id="t.243e2545a08dc299c789a0c9da68e70d06730cac"></a><a id="t.8"></a><table class="c12"><tr class="c1"><td class="c13" colspan="1" rowspan="1"><p class="c2"><span class="c0">DateTime date1 = </span><span class="c10">new</span><span class="c0">&nbsp;DateTime(</span><span class="c8">2015</span><span class="c0">, </span><span class="c8">7</span><span class="c0">, </span><span class="c8">20</span><span class="c0">, </span><span class="c8">18</span><span class="c0">, </span><span class="c8">30</span><span class="c0">, </span><span class="c8">25</span><span class="c0">); </span><span class="c11">// 20.07.2015 18:30:25</span><span class="c0"><br>DateTime date2 = </span><span class="c10">new</span><span class="c0">&nbsp;DateTime(</span><span class="c8">2015</span><span class="c0">, </span><span class="c8">7</span><span class="c0">, </span><span class="c8">20</span><span class="c0">, </span><span class="c8">15</span><span class="c0">, </span><span class="c8">30</span><span class="c0">, </span><span class="c8">25</span><span class="c0">); </span><span class="c11">// 20.07.2015 15:30:25</span><span class="c0"><br>Console.WriteLine(date1.Subtract(date2)); </span><span class="c11">// 03:00:00</span></p></td></tr></table><p class="c4"><span class="c3"></span></p><p class="c6"><span class="c3">Aici datele difer&#259; cu trei ore, a&#537;a c&#259; rezultatul va fi data &quot;03:00:00&quot;.</span></p><p class="c4"><span class="c3"></span></p><p class="c6"><span class="c3">Metoda Subtract nu permite sc&#259;derea separat&#259; a zilelor, orelor &#537;i a&#537;a mai departe. Dar nu este necesar, deoarece putem transmite metodei AddDays() &#537;i altor metode de ad&#259;ugare valori negative:</span></p><p class="c4"><span class="c3"></span></p><a id="t.5245410fea308ec5ac3ad65682694982e3fe8266"></a><a id="t.9"></a><table class="c12"><tr class="c1"><td class="c13" colspan="1" rowspan="1"><p class="c2"><span class="c11">// sc&#259;dem trei ore</span><span class="c0"><br>DateTime date1 = </span><span class="c10">new</span><span class="c0">&nbsp;DateTime(</span><span class="c8">2015</span><span class="c0">, </span><span class="c8">7</span><span class="c0">, </span><span class="c8">20</span><span class="c0">, </span><span class="c8">18</span><span class="c0">, </span><span class="c8">30</span><span class="c0">, </span><span class="c8">25</span><span class="c0">); &nbsp;</span><span class="c11">// 20.07.2015 18:30:25</span><span class="c0"><br>Console.WriteLine(date1.AddHours(</span><span class="c8">-3</span><span class="c0">)); </span><span class="c11">// 20.07.2015 15:30:25</span></p></td></tr></table><p class="c4"><span class="c3"></span></p><p class="c6"><span class="c3">&Icirc;n afar&#259; de opera&#539;iile de adunare &#537;i sc&#259;dere mai exist&#259; &#537;i c&acirc;teva metode de formatare a datelor:</span></p><p class="c4"><span class="c3"></span></p><a id="t.6af4eb46a7c520053defd1af09355a4d092f2ab6"></a><a id="t.10"></a><table class="c12"><tr class="c1"><td class="c13" colspan="1" rowspan="1"><p class="c2"><span class="c0">DateTime date1 = </span><span class="c10">new</span><span class="c0">&nbsp;DateTime(</span><span class="c8">2015</span><span class="c0">, </span><span class="c8">7</span><span class="c0">, </span><span class="c8">20</span><span class="c0">, </span><span class="c8">18</span><span class="c0">, </span><span class="c8">30</span><span class="c0">, </span><span class="c8">25</span><span class="c0">);<br>Console.WriteLine(date1.ToLocalTime()); </span><span class="c11">// 20.07.2015 21:30:25</span><span class="c0"><br>Console.WriteLine(date1.ToUniversalTime()); </span><span class="c11">// 20.07.2015 15:30:25</span><span class="c0"><br>Console.WriteLine(date1.ToLongDateString()); </span><span class="c11">// 20 iulie 2015</span><span class="c0"><br>Console.WriteLine(date1.ToShortDateString()); </span><span class="c11">// 20.07.2015</span><span class="c0"><br>Console.WriteLine(date1.ToLongTimeString()); </span><span class="c11">// 18:30:25</span><span class="c0"><br>Console.WriteLine(date1.ToShortTimeString()); </span><span class="c11">// 18:30</span></p></td></tr></table><p class="c4"><span class="c3"></span></p><p class="c6"><span class="c7">Metoda ToLocalTime() transform&#259; timpul UTC &icirc;n timpul local, ad&#259;ug&acirc;nd diferen&#539;a fa&#539;&#259; de timpul </span><span class="c7 c9">Greenwich. Metoda ToUniversalTime()</span><span class="c3">, dimpotriv&#259;, transform&#259; timpul local &icirc;n timpul UTC, adic&#259; scade diferen&#539;a fa&#539;&#259; de timpul Greenwich. Celelalte metode transform&#259; data &icirc;ntr-un anumit format.</span></p><p class="c4"><span class="c3"></span></p></body></html>