<html><head><meta content="text/html; charset=UTF-8" http-equiv="content-type"><link rel="stylesheet" type="text/css" href="/lessons/styles.css"></head><body class="c17 doc-content"><p class="c0"><span class="c18">Nout&#259;&#539;i &icirc;n C# 11.</span></p><p class="c0 c6"><span class="c3"></span></p><p class="c0"><span class="c14">Modele de liste.</span></p><p class="c0 c6"><span class="c3"></span></p><p class="c0"><span class="c3">Modelele de liste (list pattern) permit compararea expresiilor cu liste &#537;i array-uri. Po&#539;i compara un model de list&#259; &#537;i po&#539;i seta toate elementele unui array:</span></p><p class="c0 c6"><span class="c3"></span></p><a id="t.2cd917222069f9dd4897564bc715870808449f82"></a><a id="t.0"></a><table class="c10"><tr class="c5"><td class="c4" colspan="1" rowspan="1"><p class="c16"><span class="c9">[</span><span class="c2">2, 3, 4, 5</span><span class="c9">] </span><span class="c13">// acest model corespunde oric&#259;rui array/list&#259; care este egal(&#259;) cu [2, 3, 4, 5]</span></p></td></tr></table><p class="c0 c6"><span class="c3"></span></p><p class="c0"><span class="c3">De asemenea, cu ajutorul caracterului de subliniere _ po&#539;i seta un element arbitrar, a c&#259;rui valoare nu conteaz&#259;:</span></p><p class="c0 c6"><span class="c3"></span></p><a id="t.c02ae9956db363219e73489bdd71da9bdb877639"></a><a id="t.1"></a><table class="c10"><tr class="c5"><td class="c4" colspan="1" rowspan="1"><p class="c16"><span class="c9">[</span><span class="c2">_, 5</span><span class="c9">] </span><span class="c13">// acest model corespunde oric&#259;rui array/list&#259; din dou&#259; elemente unde al doilea element este egal cu 5 (de exemplu, [1, 5] sau [25, 5])</span></p></td></tr></table><p class="c0 c6"><span class="c3"></span></p><p class="c0"><span class="c3">&#536;i, &icirc;n plus, cu ajutorul modelului de tip slice .. po&#539;i seta un num&#259;r arbitrar de elemente:</span></p><p class="c0 c6"><span class="c3"></span></p><a id="t.cf902d2ec4bb8ac9ac6e0588f25cdb5a2c0aba8b"></a><a id="t.2"></a><table class="c10"><tr class="c5"><td class="c4" colspan="1" rowspan="1"><p class="c16"><span class="c9">[</span><span class="c2">2, .., 5</span><span class="c9">] </span><span class="c13">// acest model corespunde oric&#259;rui array/list&#259; unde primul element este egal cu 2 iar ultimul element este egal cu 5, iar &icirc;ntre 2 &#537;i 5 poate fi un num&#259;r arbitrar de elemente arbitrare (de exemplu, [2, 5] sau [2, 3, 9, 5])</span></p></td></tr></table><p class="c0 c6"><span class="c3"></span></p><p class="c0"><span class="c3">Exemplu de utilizare:</span></p><p class="c0 c6"><span class="c3"></span></p><p class="c0 c6"><span class="c3"></span></p><a id="t.180e6d601e89f8720fa04c261be6506b400411e9"></a><a id="t.3"></a><table class="c10"><tr class="c5"><td class="c4" colspan="1" rowspan="1"><p class="c16"><span class="c9">Console.WriteLine(GetNumber(</span><span class="c1">new</span><span class="c9">[] { </span><span class="c8">2</span><span class="c9">, </span><span class="c8">3</span><span class="c9">, </span><span class="c8">5</span><span class="c9">&nbsp;})); &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c13">// 1</span><span class="c9"><br>Console.WriteLine(GetNumber(</span><span class="c1">new</span><span class="c9">[] { </span><span class="c8">2</span><span class="c9">, </span><span class="c8">4</span><span class="c9">, </span><span class="c8">5</span><span class="c9">&nbsp;})); &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c13">// 2</span><span class="c9"><br>Console.WriteLine(GetNumber(</span><span class="c1">new</span><span class="c9">[] { </span><span class="c8">2</span><span class="c9">, </span><span class="c8">3</span><span class="c9">, </span><span class="c8">4</span><span class="c9">, </span><span class="c8">5</span><span class="c9">&nbsp;})); &nbsp; &nbsp; </span><span class="c13">// 3</span><span class="c9"><br>Console.WriteLine(GetNumber(</span><span class="c1">new</span><span class="c9">[] { </span><span class="c8">1</span><span class="c9">, </span><span class="c8">2</span><span class="c9">, </span><span class="c8">3</span><span class="c9">&nbsp;})); &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c13">// 4</span><span class="c9"><br>Console.WriteLine(GetNumber(</span><span class="c1">new</span><span class="c9">&nbsp;</span><span class="c1">int</span><span class="c9">[] { })); &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c13">// 4</span><span class="c9"><br><br></span><span class="c1">int</span><span class="c9">&nbsp;</span><span class="c7">GetNumber</span><span class="c9">(</span><span class="c1">int</span><span class="c9">[] values) =&gt; values </span><span class="c1">switch</span><span class="c9"><br>{<br> &nbsp; &nbsp;[</span><span class="c2">2, 3, 5</span><span class="c9">] =&gt; </span><span class="c8">1</span><span class="c9">,<br> &nbsp; &nbsp;[</span><span class="c2">2, _, 5</span><span class="c9">] =&gt; </span><span class="c8">2</span><span class="c9">,<br> &nbsp; &nbsp;[</span><span class="c2">2, .., 5</span><span class="c9">] =&gt; </span><span class="c8">3</span><span class="c9">,<br> &nbsp; &nbsp;[</span><span class="c2">..</span><span class="c9">] =&gt; </span><span class="c8">4</span><span class="c9"><br>};</span></p></td></tr></table><p class="c0 c6"><span class="c3"></span></p><p class="c0"><span class="c14">Generice &icirc;n atribute.</span></p><p class="c0 c6"><span class="c3"></span></p><p class="c0"><span class="c3">&Icirc;n C# 11, po&#539;i defini clase de atribute generice:</span></p><p class="c0 c6"><span class="c3"></span></p><a id="t.fda82c50754dca4f57efaa9d5906e811e8dc8860"></a><a id="t.4"></a><table class="c10"><tr class="c5"><td class="c4" colspan="1" rowspan="1"><p class="c16"><span class="c1">class</span><span class="c9">&nbsp;</span><span class="c7">C</span><span class="c9"><br>{<br> &nbsp; &nbsp;[</span><span class="c2">Reader&lt;int&gt;</span><span class="c9">]<br> &nbsp; &nbsp;</span><span class="c1">public</span><span class="c9">&nbsp;</span><span class="c1">void</span><span class="c9">&nbsp;</span><span class="c7">M</span><span class="c9">()<br> &nbsp; &nbsp;{<br> &nbsp; &nbsp;}<br>}<br><br></span><span class="c1">class</span><span class="c9">&nbsp;</span><span class="c7">ReaderAttribute</span><span class="c9">&lt;</span><span class="c7">T</span><span class="c9">&gt; : </span><span class="c7">Attribute</span><span class="c9"><br>{<br>}</span></p></td></tr></table><p class="c0 c6"><span class="c3"></span></p><p class="c0"><span class="c14">&#536;iruri de caractere pe mai multe linii.</span></p><p class="c0"><span class="c3">Cu ajutorul a trei perechi de ghilimele duble, po&#539;i crea un text pe mai multe linii, inclusiv folosind interpolarea:</span></p><p class="c0 c6"><span class="c3"></span></p><a id="t.b9f58a545d3a8f5f9b80f41b0a6570edac229c3e"></a><a id="t.5"></a><table class="c10"><tr class="c5"><td class="c4" colspan="1" rowspan="1"><p class="c16"><span class="c9">Print();<br>PrintValue(</span><span class="c11">&quot;hello&quot;</span><span class="c9">);<br><br></span><span class="c1">void</span><span class="c9">&nbsp;</span><span class="c7">Print</span><span class="c9">()<br>{<br> &nbsp; &nbsp;</span><span class="c1">string</span><span class="c9">&nbsp;text = </span><span class="c11">&quot;&quot;&quot;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&lt;element attr=&quot;</span><span class="c9">content</span><span class="c11">&quot;&gt;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&lt;body&gt;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&lt;/body&gt;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&lt;/element&gt;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&quot;&quot;&quot;</span><span class="c9">;<br> &nbsp; &nbsp;Console.WriteLine(text);<br>}<br><br></span><span class="c1">void</span><span class="c9">&nbsp;</span><span class="c7">PrintValue</span><span class="c9">(</span><span class="c1">string</span><span class="c9">&nbsp;val)<br>{<br> &nbsp; &nbsp;</span><span class="c1">string</span><span class="c9">&nbsp;text = </span><span class="c11">$&quot;&quot;&quot;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&lt;element attr=&quot;</span><span class="c9">content</span><span class="c11">&quot;&gt;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&lt;body&gt;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;{val}<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&lt;/body&gt;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&lt;/element&gt;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&quot;&quot;&quot;</span><span class="c9">;<br> &nbsp; &nbsp;Console.WriteLine(text);<br>}</span></p></td></tr></table><p class="c0 c6"><span class="c3"></span></p><p class="c0"><span class="c14">Literaluri de &#537;iruri UTF-8.</span></p><p class="c0"><span class="c3">&nbsp;</span></p><p class="c0"><span class="c12">C# 11 permite convertirea automat&#259; a &#537;irurilor cu caractere UTF-8 &icirc;n reprezentarea lor binar&#259; sub form&#259; de obiect </span><span class="c15">ReadOnlySpan&lt;byte&gt;</span><span class="c3">:</span></p><p class="c0 c6"><span class="c3"></span></p><a id="t.3b57f7814c17ff23c8e9b1cfcc7fb5a955980ad6"></a><a id="t.6"></a><table class="c10"><tr class="c5"><td class="c4" colspan="1" rowspan="1"><p class="c16"><span class="c9">ReadOnlySpan&lt;</span><span class="c1">byte</span><span class="c9">&gt; span2 = </span><span class="c11">&quot;hello&quot;</span><span class="c9">u8;</span></p></td></tr></table><p class="c0 c6"><span class="c3"></span></p><p class="c0"><span class="c3">Pentru a indica faptul c&#259; un &#537;ir reprezint&#259; UTF-8, se adaug&#259; sufixul u8 la &#537;ir.</span></p><p class="c0 c6"><span class="c3"></span></p><p class="c0"><span class="c14">Fi&#537;ier ca domeniu de vizibilitate.</span></p><p class="c0"><span class="c3">&nbsp; </span></p><p class="c0"><span class="c12">C# 11 a ad&#259;ugat un nou modificator de vizibilitate - </span><span class="c15">file</span><span class="c3">, care se aplic&#259; claselor, structurilor, delega&#539;ilor, enumer&#259;rilor &#537;i interfe&#539;elor. Tipurile cu acest modificator pot fi utilizate doar &icirc;n interiorul fi&#537;ierului de cod curent.</span></p><p class="c0 c6"><span class="c3"></span></p><a id="t.293adc57d170f02d2f8bfcb75d70d46555e2d6b3"></a><a id="t.7"></a><table class="c10"><tr class="c5"><td class="c4" colspan="1" rowspan="1"><p class="c16"><span class="c9">file </span><span class="c1">class</span><span class="c9">&nbsp;</span><span class="c7">Person</span><span class="c9"><br>{<br>}</span></p></td></tr></table><p class="c0 c6"><span class="c3"></span></p><p class="c0"><span class="c3">Acest modificator nu poate fi utilizat &icirc;mpreun&#259; cu alte modificatoare.</span></p><p class="c0 c6"><span class="c3"></span></p><p class="c0"><span class="c14">Modificatorul required.</span></p><p class="c0 c6"><span class="c3"></span></p><p class="c0"><span class="c12">Modificatorul </span><span class="c15">required </span><span class="c3">(ad&#259;ugat &icirc;n C# 11) indic&#259; faptul c&#259; un c&acirc;mp sau proprietate cu acest modificator trebuie neap&#259;rat s&#259; fie ini&#539;ializat(&#259;). De exemplu, &icirc;n urm&#259;torul exemplu, vom ob&#539;ine o eroare:</span></p><p class="c0 c6"><span class="c3"></span></p><a id="t.94816016ec3f3efc371abd6f342cbc29e34fdfd7"></a><a id="t.8"></a><table class="c10"><tr class="c5"><td class="c4" colspan="1" rowspan="1"><p class="c16"><span class="c9">Person tom = </span><span class="c1">new</span><span class="c9">&nbsp;Person(); &nbsp;</span><span class="c13">// eroare - propriet&#259;&#539;ile Name &#537;i Age nu sunt ini&#539;ializate</span><span class="c9"><br></span><span class="c1">public</span><span class="c9">&nbsp;</span><span class="c1">class</span><span class="c9">&nbsp;</span><span class="c7">Person</span><span class="c9"><br>{<br> &nbsp; &nbsp;</span><span class="c1">public</span><span class="c9">&nbsp;required </span><span class="c1">string</span><span class="c9">&nbsp;Name { </span><span class="c1">get</span><span class="c9">; </span><span class="c1">set</span><span class="c9">; }<br> &nbsp; &nbsp;</span><span class="c1">public</span><span class="c9">&nbsp;required </span><span class="c1">int</span><span class="c9">&nbsp;Age { </span><span class="c1">get</span><span class="c9">; </span><span class="c1">set</span><span class="c9">; }<br>}</span></p></td></tr></table><p class="c0 c6"><span class="c3"></span></p><p class="c0"><span class="c12">Aici, propriet&#259;&#539;ile Name &#537;i Age sunt marcate ca fiind obligatorii pentru ini&#539;ializare cu ajutorul modificatorului </span><span class="c15">required</span><span class="c3">, a&#537;a c&#259; trebuie s&#259; folose&#537;ti un ini&#539;ializator pentru a le ini&#539;ializa:</span></p><p class="c0 c6"><span class="c3"></span></p><a id="t.b62a85f5801852f600482d35d9eefb4f51692b3f"></a><a id="t.9"></a><table class="c10"><tr class="c5"><td class="c4" colspan="1" rowspan="1"><p class="c16"><span class="c9">Person tom = </span><span class="c1">new</span><span class="c9">&nbsp;Person { Name = </span><span class="c11">&quot;Tom&quot;</span><span class="c9">, Age = </span><span class="c8">38</span><span class="c9">&nbsp;}; </span><span class="c13">// f&#259;r&#259; eroare</span></p></td></tr></table><p class="c0 c6"><span class="c3"></span></p><p class="c0"><span class="c3">Indiferent dac&#259; setezi aceste propriet&#259;&#539;i &icirc;n constructor sau le ini&#539;ializezi la definire, tot trebuie s&#259; folose&#537;ti un ini&#539;ializator pentru a le seta valorile. De exemplu, &icirc;n urm&#259;torul exemplu, vom ob&#539;ine o eroare:</span></p><p class="c0 c6"><span class="c3"></span></p><a id="t.284dea9c68c8619d2c32035db1572e2427c42bf1"></a><a id="t.10"></a><table class="c10"><tr class="c5"><td class="c4" colspan="1" rowspan="1"><p class="c16"><span class="c9">Person bob = </span><span class="c1">new</span><span class="c9">&nbsp;Person(</span><span class="c11">&quot;Bob&quot;</span><span class="c9">); </span><span class="c13">// eroare - propriet&#259;&#539;ile Name &#537;i Age trebuie totu&#537;i setate &icirc;n ini&#539;ializator</span><span class="c9"><br><br></span><span class="c1">public</span><span class="c9">&nbsp;</span><span class="c1">class</span><span class="c9">&nbsp;</span><span class="c7">Person</span><span class="c9"><br>{<br> &nbsp; &nbsp;</span><span class="c1">public</span><span class="c9">&nbsp;</span><span class="c7">Person</span><span class="c9">(</span><span class="c1">string</span><span class="c9">&nbsp;name)<br> &nbsp; &nbsp;{<br> &nbsp; &nbsp; &nbsp; &nbsp;Name = name;<br> &nbsp; &nbsp;}<br> &nbsp; &nbsp;</span><span class="c1">public</span><span class="c9">&nbsp;required </span><span class="c1">string</span><span class="c9">&nbsp;Name { </span><span class="c1">get</span><span class="c9">; </span><span class="c1">set</span><span class="c9">; }<br> &nbsp; &nbsp;</span><span class="c1">public</span><span class="c9">&nbsp;required </span><span class="c1">int</span><span class="c9">&nbsp;Age { </span><span class="c1">get</span><span class="c9">; </span><span class="c1">set</span><span class="c9">; } = </span><span class="c8">22</span><span class="c9">;<br>}</span></p></td></tr></table><p class="c0 c6"><span class="c3"></span></p><p class="c0 c6"><span class="c3"></span></p></body></html>