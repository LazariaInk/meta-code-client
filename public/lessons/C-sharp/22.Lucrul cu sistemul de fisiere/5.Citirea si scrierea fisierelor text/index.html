<html><head><meta content="text/html; charset=UTF-8" http-equiv="content-type"><style type="text/css">@import url(https://themes.googleusercontent.com/fonts/css?kit=chteh0fSOiSrmusp8u43YLibRAUGyvCIyNwOfYj8c_aH4gUIUjZTH34PuvJkbTJT);ol{margin:0;padding:0}table td,table th{padding:0}.c13{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:0pt;border-right-width:0pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:0pt;border-top-style:solid;background-color:#333333;border-left-style:solid;border-bottom-width:0pt;width:468pt;border-top-color:#000000;border-bottom-style:solid}.c15{color:#000000;font-weight:700;text-decoration:none;vertical-align:baseline;font-size:15pt;font-family:"Open Sans";font-style:normal}.c1{color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:12pt;font-family:"Open Sans";font-style:normal}.c0{padding-top:0pt;padding-bottom:0pt;line-height:1.5;orphans:2;widows:2;text-align:left}.c10{background-color:#333333;font-size:12pt;font-family:"Consolas";color:#a2fca2;font-weight:400}.c11{background-color:#333333;font-size:12pt;font-family:"Consolas";color:#888888;font-weight:400}.c4{background-color:#333333;font-size:12pt;font-family:"Consolas";color:#ffffff;font-weight:400}.c12{background-color:#333333;font-size:12pt;font-family:"Consolas";color:#d36363;font-weight:400}.c8{background-color:#333333;font-size:12pt;font-family:"Consolas";color:#fcc28c;font-weight:400}.c18{font-weight:700;font-size:27pt;font-family:"Open Sans";font-style:normal}.c3{padding-top:0pt;padding-bottom:0pt;line-height:1.15;text-align:left}.c14{border-spacing:0;border-collapse:collapse;margin-right:auto}.c5{font-size:12pt;font-family:"Open Sans";font-weight:400}.c7{font-size:12pt;font-family:"Open Sans";font-weight:700}.c17{background-color:#ffffff;max-width:468pt;padding:72pt 72pt 72pt 72pt}.c16{color:#000000;text-decoration:none;vertical-align:baseline}.c2{height:11pt}.c6{font-style:italic}.c9{height:0pt}.title{padding-top:0pt;color:#000000;font-size:26pt;padding-bottom:3pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}.subtitle{padding-top:0pt;color:#666666;font-size:15pt;padding-bottom:16pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}li{color:#000000;font-size:11pt;font-family:"Arial"}p{margin:0;color:#000000;font-size:11pt;font-family:"Arial"}h1{padding-top:20pt;color:#000000;font-size:20pt;padding-bottom:6pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h2{padding-top:18pt;color:#000000;font-size:16pt;padding-bottom:6pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h3{padding-top:16pt;color:#434343;font-size:14pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h4{padding-top:14pt;color:#666666;font-size:12pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h5{padding-top:12pt;color:#666666;font-size:11pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h6{padding-top:12pt;color:#666666;font-size:11pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;font-style:italic;orphans:2;widows:2;text-align:left}</style></head><body class="c17 doc-content"><p class="c0"><span class="c16 c18">Citirea &#537;i scrierea fi&#537;ierelor text. StreamReader &#537;i StreamWriter.</span></p><p class="c0 c2"><span class="c1"></span></p><p class="c0"><span class="c5">Pentru lucrul direct cu fi&#537;ierele text, &icirc;n spa&#539;iul de nume System.IO sunt definite clase speciale: </span><span class="c7">StreamReader </span><span class="c5">&#537;i </span><span class="c7">StreamWriter</span><span class="c1">.</span></p><p class="c0 c2"><span class="c1"></span></p><p class="c0"><span class="c15">Scrierea &icirc;n fi&#537;ier cu StreamWriter.</span></p><p class="c0 c2"><span class="c1"></span></p><p class="c0"><span class="c5">Pentru scrierea &icirc;n fi&#537;iere text se utilizeaz&#259; clasa </span><span class="c7">StreamWriter</span><span class="c1">. C&acirc;&#539;iva dintre constructorii acestei clase, care pot fi folosi&#539;i pentru crearea unui obiect StreamWriter, sunt:</span></p><p class="c0 c2"><span class="c1"></span></p><p class="c0"><span class="c5">-</span><span class="c5 c6">&nbsp;StreamWriter(string path)</span><span class="c1">: parametrul path specific&#259; calea c&#259;tre fi&#537;ierul care va fi asociat cu fluxul.</span></p><p class="c0 c2"><span class="c1"></span></p><p class="c0"><span class="c5">- </span><span class="c5 c6">StreamWriter(string path, bool append)</span><span class="c1">: parametrul append indic&#259; dac&#259; datele trebuie ad&#259;ugate la sf&acirc;r&#537;itul fi&#537;ierului sau dac&#259; fi&#537;ierul trebuie rescris. Dac&#259; valoarea este true, noile date sunt ad&#259;ugate la sf&acirc;r&#537;itul fi&#537;ierului. Dac&#259; valoarea este false, fi&#537;ierul este rescris de la &icirc;nceput.</span></p><p class="c0 c2"><span class="c1"></span></p><p class="c0"><span class="c5">- </span><span class="c5 c6">StreamWriter(string path, bool append, System.Text.Encoding encoding)</span><span class="c1">: parametrul encoding specific&#259; codificarea care va fi utilizat&#259; la scriere.</span></p><p class="c0 c2"><span class="c1"></span></p><p class="c0"><span class="c1">Func&#539;ionalitatea clasei StreamWriter este implementat&#259; prin urm&#259;toarele metode:</span></p><p class="c0 c2"><span class="c1"></span></p><p class="c0"><span class="c5">- </span><span class="c5 c6">int Close()</span><span class="c1">: &icirc;nchide fi&#537;ierul &icirc;n care s-a scris &#537;i elibereaz&#259; toate resursele.</span></p><p class="c0 c2"><span class="c1"></span></p><p class="c0"><span class="c5">- </span><span class="c5 c6">void Flush()</span><span class="c1">: scrie &icirc;n fi&#537;ier datele r&#259;mase &icirc;n buffer &#537;i gole&#537;te bufferul.</span></p><p class="c0 c2"><span class="c1"></span></p><p class="c0"><span class="c5">- </span><span class="c5 c6">Task FlushAsync()</span><span class="c1">: versiunea asincron&#259; a metodei Flush.</span></p><p class="c0 c2"><span class="c1"></span></p><p class="c0"><span class="c5">- </span><span class="c5 c6">void Write(string value)</span><span class="c5">: scrie &icirc;n fi&#537;ier datele de tipuri simple, cum ar fi int, double, char, string etc. Are mai multe versiuni supra&icirc;nc&#259;rcate pentru scrierea datelor de tipuri elementare, de exemplu, </span><span class="c5 c6">Write(char value), Write(int value), Write(double value) </span><span class="c1">etc.</span></p><p class="c0 c2"><span class="c1"></span></p><p class="c0"><span class="c5">- </span><span class="c5 c6">Task WriteAsync(string value)</span><span class="c1">: versiunea asincron&#259; a metodei Write. Re&#539;ine&#539;i c&#259; versiunile asincrone nu sunt disponibile pentru toate supra&icirc;nc&#259;rc&#259;rile metodei Write.</span></p><p class="c0 c2"><span class="c1"></span></p><p class="c0"><span class="c5">-</span><span class="c5 c6">&nbsp;void WriteLine(string value)</span><span class="c1">: scrie, de asemenea, datele, dar adaug&#259; la finalul scrierii un simbol de terminare a liniei.</span></p><p class="c0 c2"><span class="c1"></span></p><p class="c0"><span class="c5">- </span><span class="c5 c6">Task WriteLineAsync(string value)</span><span class="c1">: versiunea asincron&#259; a metodei WriteLine.</span></p><p class="c0 c2"><span class="c1"></span></p><p class="c0"><span class="c1">S&#259; vedem un exemplu de scriere &icirc;ntr-un fi&#537;ier:</span></p><p class="c0 c2"><span class="c1"></span></p><a id="t.ee2562227ef96694d77d7be32bf318f3d3b49919"></a><a id="t.0"></a><table class="c14"><tr class="c9"><td class="c13" colspan="1" rowspan="1"><p class="c3"><span class="c8">string</span><span class="c4">&nbsp;path = </span><span class="c10">&quot;note1.txt&quot;</span><span class="c4">;<br></span><span class="c8">string</span><span class="c4">&nbsp;text = </span><span class="c10">&quot;Hello World\nHello FDC.COM&quot;</span><span class="c4">;<br> <br></span><span class="c11">// rescrierea complet&#259; a fi&#537;ierului </span><span class="c4"><br></span><span class="c8">using</span><span class="c4">&nbsp;(StreamWriter writer = </span><span class="c8">new</span><span class="c4">&nbsp;StreamWriter(path, </span><span class="c8">false</span><span class="c4">))<br>{<br> &nbsp; &nbsp;</span><span class="c8">await</span><span class="c4">&nbsp;writer.WriteLineAsync(text);<br>}<br></span><span class="c11">// ad&#259;ugarea &icirc;n fi&#537;ier</span><span class="c4"><br></span><span class="c8">using</span><span class="c4">&nbsp;(StreamWriter writer = </span><span class="c8">new</span><span class="c4">&nbsp;StreamWriter(path, </span><span class="c8">true</span><span class="c4">))<br>{<br> &nbsp; &nbsp;</span><span class="c8">await</span><span class="c4">&nbsp;writer.WriteLineAsync(</span><span class="c10">&quot;Addition&quot;</span><span class="c4">);<br> &nbsp; &nbsp;</span><span class="c8">await</span><span class="c4">&nbsp;writer.WriteAsync(</span><span class="c10">&quot;4,5&quot;</span><span class="c4">);<br>}</span></p></td></tr></table><p class="c0 c2"><span class="c1"></span></p><p class="c0"><span class="c1">&Icirc;n acest exemplu, cre&#259;m de dou&#259; ori obiectul StreamWriter. &Icirc;n primul caz, dac&#259; fi&#537;ierul exist&#259;, acesta va fi rescris. Dac&#259; nu exist&#259;, va fi creat. &#536;i &icirc;n el va fi scris textul din variabila text. &Icirc;n al doilea caz, fi&#537;ierul este deschis pentru ad&#259;ugare, iar &icirc;n el vor fi scrise date atomice - un &#537;ir de caractere &#537;i un num&#259;r.</span></p><p class="c0 c2"><span class="c1"></span></p><p class="c0"><span class="c1">Dup&#259; finalizare, &icirc;n folderul programului vom g&#259;si fi&#537;ierul note.txt, care va con&#539;ine urm&#259;toarele linii:</span></p><p class="c0 c2"><span class="c1"></span></p><a id="t.1215bc8ea267789ae1e6dae9704bae9e0de35eec"></a><a id="t.1"></a><table class="c14"><tr class="c9"><td class="c13" colspan="1" rowspan="1"><p class="c3"><span class="c4">Hello World<br>Hello FDC.COM<br>Addition<br></span><span class="c12">4</span><span class="c4">,</span><span class="c12">5</span></p></td></tr></table><p class="c0 c2"><span class="c1"></span></p><p class="c0"><span class="c1">&Icirc;n exemplul de mai sus, se va folosi codificarea implicit&#259;, dar aceasta poate fi setat&#259; explicit:</span></p><p class="c0 c2"><span class="c1"></span></p><a id="t.dc108122034a9844c912e654865583e98c343ebf"></a><a id="t.2"></a><table class="c14"><tr class="c9"><td class="c13" colspan="1" rowspan="1"><p class="c3"><span class="c8">using</span><span class="c4">&nbsp;(StreamWriter writer = </span><span class="c8">new</span><span class="c4">&nbsp;StreamWriter(path, </span><span class="c8">true</span><span class="c4">, System.Text.Encoding.Default))<br>{<br> &nbsp; &nbsp;</span><span class="c11">// opera&#539;iuni cu writer</span><span class="c4"><br>}</span></p></td></tr></table><p class="c0 c2"><span class="c1"></span></p><p class="c0"><span class="c15">Citirea din fi&#537;ier cu StreamReader.</span></p><p class="c0 c2"><span class="c1"></span></p><p class="c0"><span class="c1">Clasa StreamReader ne permite s&#259; citim cu u&#537;urin&#539;&#259; tot textul sau linii individuale dintr-un fi&#537;ier text.</span></p><p class="c0 c2"><span class="c1"></span></p><p class="c0"><span class="c1">C&acirc;teva dintre constructorii clasei StreamReader sunt:</span></p><p class="c0 c2"><span class="c1"></span></p><p class="c0"><span class="c5">- </span><span class="c5 c6">StreamReader(string path)</span><span class="c1">: parametrul path specific&#259; calea c&#259;tre fi&#537;ierul care va fi citit.</span></p><p class="c0 c2"><span class="c1"></span></p><p class="c0"><span class="c5">- </span><span class="c5 c6">StreamReader(string path, System.Text.Encoding encoding)</span><span class="c1">: parametrul encoding specific&#259; codificarea pentru citirea fi&#537;ierului.</span></p><p class="c0 c2"><span class="c1"></span></p><p class="c0"><span class="c1">Dintre metodele clasei StreamReader se remarc&#259; urm&#259;toarele:</span></p><p class="c0 c2"><span class="c1"></span></p><p class="c0"><span class="c5">- </span><span class="c5 c6">void Close()</span><span class="c1">: &icirc;nchide fi&#537;ierul citit &#537;i elibereaz&#259; toate resursele.</span></p><p class="c0 c2"><span class="c1"></span></p><p class="c0"><span class="c5">- </span><span class="c5 c6">int Peek()</span><span class="c1">: returneaz&#259; urm&#259;torul caracter disponibil; dac&#259; nu mai sunt caractere, returneaz&#259; -1.</span></p><p class="c0 c2"><span class="c5 c6 c16"></span></p><p class="c0"><span class="c5 c6">- int Read()</span><span class="c5">: cite&#537;te &#537;i returneaz&#259; urm&#259;torul caracter &icirc;n reprezentare numeric&#259;. Are o versiune supra&icirc;nc&#259;rcat&#259;: </span><span class="c5 c6">Read(char[] array, int index, int count)</span><span class="c1">, unde array este array-ul &icirc;n care sunt citite caracterele, index este indexul &icirc;n array-ul array de la care sunt plasate caracterele citite, iar count este num&#259;rul maxim de caractere citite.</span></p><p class="c0 c2"><span class="c1"></span></p><p class="c0"><span class="c5">-</span><span class="c5 c6">&nbsp;Task&lt;int&gt; ReadAsync()</span><span class="c1">: versiunea asincron&#259; a metodei Read.</span></p><p class="c0 c2"><span class="c1"></span></p><p class="c0"><span class="c5">- </span><span class="c5 c6">string ReadLine()</span><span class="c1">: cite&#537;te o linie din fi&#537;ier.</span></p><p class="c0 c2"><span class="c1"></span></p><p class="c0"><span class="c5">- </span><span class="c5 c6">string ReadLineAsync()</span><span class="c1">: versiunea asincron&#259; a metodei ReadLine.</span></p><p class="c0 c2"><span class="c1"></span></p><p class="c0"><span class="c5">-</span><span class="c5 c6">&nbsp;string ReadToEnd()</span><span class="c1">: cite&#537;te &icirc;ntregul text din fi&#537;ier.</span></p><p class="c0 c2"><span class="c1"></span></p><p class="c0"><span class="c5">- </span><span class="c5 c6">string ReadToEndAsync()</span><span class="c1">: versiunea asincron&#259; a metodei ReadToEnd.</span></p><p class="c0 c2"><span class="c1"></span></p><p class="c0"><span class="c1">Mai &icirc;nt&acirc;i, s&#259; citim complet textul din fi&#537;ierul scris anterior:</span></p><p class="c0 c2"><span class="c1"></span></p><a id="t.bc5d0bc3275d27a4444ba4a0873cc7d2c449364d"></a><a id="t.3"></a><table class="c14"><tr class="c9"><td class="c13" colspan="1" rowspan="1"><p class="c3"><span class="c8">string</span><span class="c4">&nbsp;path = </span><span class="c10">&quot;note1.txt&quot;</span><span class="c4">;<br></span><span class="c11">// citire asincron&#259;</span><span class="c4"><br></span><span class="c8">using</span><span class="c4">&nbsp;(StreamReader reader = </span><span class="c8">new</span><span class="c4">&nbsp;StreamReader(path))<br>{<br> &nbsp; &nbsp;</span><span class="c8">string</span><span class="c4">&nbsp;text = </span><span class="c8">await</span><span class="c4">&nbsp;reader.ReadToEndAsync();<br> &nbsp; &nbsp;Console.WriteLine(text);<br>}</span></p></td></tr></table><p class="c0 c2"><span class="c1"></span></p><p class="c0"><span class="c1">S&#259; citim textul din fi&#537;ier linie cu linie:</span></p><p class="c0 c2"><span class="c1"></span></p><a id="t.30a0fa6141510e8af4c696d3cc2ee84d3b1cebf6"></a><a id="t.4"></a><table class="c14"><tr class="c9"><td class="c13" colspan="1" rowspan="1"><p class="c3"><span class="c8">string</span><span class="c4">&nbsp;path = </span><span class="c10">&quot;note1.txt&quot;</span><span class="c4">;<br> <br></span><span class="c11">// citire asincron&#259;</span><span class="c4"><br></span><span class="c8">using</span><span class="c4">&nbsp;(StreamReader reader = </span><span class="c8">new</span><span class="c4">&nbsp;StreamReader(path))<br>{<br> &nbsp; &nbsp;</span><span class="c8">string</span><span class="c4">? line;<br> &nbsp; &nbsp;</span><span class="c8">while</span><span class="c4">&nbsp;((line = </span><span class="c8">await</span><span class="c4">&nbsp;reader.ReadLineAsync()) != </span><span class="c8">null</span><span class="c4">)<br> &nbsp; &nbsp;{<br> &nbsp; &nbsp; &nbsp; &nbsp;Console.WriteLine(line);<br> &nbsp; &nbsp;}<br>}</span></p></td></tr></table><p class="c0 c2"><span class="c1"></span></p><p class="c0"><span class="c5">&Icirc;n acest caz, citim linie cu linie prin intermediul unui ciclu while: </span><span class="c5 c6">while ((line = await reader.ReadLineAsync()) != null) </span><span class="c5">- mai &icirc;nt&acirc;i, atribuim variabilei line rezultatul func&#539;iei </span><span class="c5 c6">reader.ReadLineAsync()</span><span class="c5">, iar apoi verific&#259;m dac&#259; nu este null. C&acirc;nd obiectul reader ajunge la sf&acirc;r&#537;itul fi&#537;ierului &#537;i nu mai sunt linii r&#259;mase, metoda </span><span class="c5 c6">reader.ReadLineAsync()</span><span class="c1">&nbsp;va returna null.</span></p><p class="c0 c2"><span class="c1"></span></p></body></html>